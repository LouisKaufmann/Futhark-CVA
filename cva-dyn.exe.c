#ifdef __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#endif
// Headers

#define _GNU_SOURCE
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#define CL_TARGET_OPENCL_VERSION 120
#define CL_USE_DEPRECATED_OPENCL_1_2_APIS
#ifdef __APPLE__
#define CL_SILENCE_DEPRECATION
#include <OpenCL/cl.h>
#else
#include <CL/cl.h>
#endif


// Initialisation

int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);
struct futhark_context_config ;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_add_build_option(struct futhark_context_config *cfg,
                                             const char *opt);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s);
void futhark_context_config_set_platform(struct futhark_context_config *cfg,
                                         const char *s);
void
futhark_context_config_select_device_interactively(struct futhark_context_config *cfg);
void futhark_context_config_list_devices(struct futhark_context_config *cfg);
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path);
void
futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                         const char *path);
void futhark_context_config_dump_binary_to(struct futhark_context_config *cfg,
                                           const char *path);
void futhark_context_config_load_binary_from(struct futhark_context_config *cfg,
                                             const char *path);
void
futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                              int size);
void
futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                              int num);
void
futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                             int num);
void
futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                             int num);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
struct futhark_context ;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
struct futhark_context
*futhark_context_new_with_command_queue(struct futhark_context_config *cfg,
                                        cl_command_queue queue);
void futhark_context_free(struct futhark_context *ctx);
cl_command_queue futhark_context_get_command_queue(struct futhark_context *ctx);

// Arrays

struct futhark_f32_1d ;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              cl_mem data, int offset,
                                              int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
cl_mem futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                 struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr);
struct futhark_f32_2d ;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              cl_mem data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
cl_mem futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                 struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);
struct futhark_i64_1d ;
struct futhark_i64_1d *futhark_new_i64_1d(struct futhark_context *ctx, const
                                          int64_t *data, int64_t dim0);
struct futhark_i64_1d *futhark_new_raw_i64_1d(struct futhark_context *ctx, const
                                              cl_mem data, int offset,
                                              int64_t dim0);
int futhark_free_i64_1d(struct futhark_context *ctx,
                        struct futhark_i64_1d *arr);
int futhark_values_i64_1d(struct futhark_context *ctx,
                          struct futhark_i64_1d *arr, int64_t *data);
cl_mem futhark_values_raw_i64_1d(struct futhark_context *ctx,
                                 struct futhark_i64_1d *arr);
const int64_t *futhark_shape_i64_1d(struct futhark_context *ctx,
                                    struct futhark_i64_1d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_1d **out1, const int64_t in0, const
                       int64_t in1, const struct futhark_f32_1d *in2, const
                       struct futhark_i64_1d *in3, const
                       struct futhark_f32_1d *in4, const float in5, const
                       float in6, const float in7, const float in8);
int futhark_entry_test(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const int64_t in0, const
                       int64_t in1);

// Miscellaneous

int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
#define FUTHARK_BACKEND_opencl
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...)
{
  if (errval) {
    char str[256];
    char errnum[10];
    sprintf(errnum, "%d", errval);
    sprintf(str, "ERROR: %s in %s() at line %d with error code %s\n", msg, fun, line,
            sets_errno ? strerror(errno) : errnum);
    fprintf(stderr, "%s", str);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  unsigned char *s;
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f);
  fseek(f, 0, SEEK_SET);
  s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }
  fclose(f);

  if (size) {
    *size = src_size;
  }

  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}


static inline uint64_t rdtsc() {
  unsigned int hi, lo;
  __asm__ __volatile__("rdtsc" : "=a"(lo), "=d"(hi));
  return  ((uint64_t) lo) | (((uint64_t) hi) << 32);
}

static inline void rdtsc_wait(uint64_t n) {
  const uint64_t start = rdtsc();
  while (rdtsc() < (start + n)) {
    __asm__("PAUSE");
  }
}
static inline void spin_for(uint64_t nb_cycles) {
  rdtsc_wait(nb_cycles);
}


#endif

// End of timing.h.

#include <string.h>
#include <inttypes.h>
#include <errno.h>
#include <ctype.h>
#include <errno.h>
#include <getopt.h>
// Start of values.h.

//// Text I/O

typedef int (*writer)(FILE*, const void*);
typedef int (*bin_reader)(void*);
typedef int (*str_reader)(const char *, void*);

struct array_reader {
  char* elems;
  int64_t n_elems_space;
  int64_t elem_size;
  int64_t n_elems_used;
  int64_t *shape;
  str_reader elem_reader;
};

static void skipspaces() {
  int c;
  do {
    c = getchar();
  } while (isspace(c));

  if (c != EOF) {
    ungetc(c, stdin);
  }
}

static int constituent(char c) {
  return isalnum(c) || c == '.' || c == '-' || c == '+' || c == '_';
}

// Produces an empty token only on EOF.
static void next_token(char *buf, int bufsize) {
 start:
  skipspaces();

  int i = 0;
  while (i < bufsize) {
    int c = getchar();
    buf[i] = (char)c;

    if (c == EOF) {
      buf[i] = 0;
      return;
    } else if (c == '-' && i == 1 && buf[0] == '-') {
      // Line comment, so skip to end of line and start over.
      for (; c != '\n' && c != EOF; c = getchar());
      goto start;
    } else if (!constituent((char)c)) {
      if (i == 0) {
        // We permit single-character tokens that are not
        // constituents; this lets things like ']' and ',' be
        // tokens.
        buf[i+1] = 0;
        return;
      } else {
        ungetc(c, stdin);
        buf[i] = 0;
        return;
      }
    }

    i++;
  }

  buf[bufsize-1] = 0;
}

static int next_token_is(char *buf, int bufsize, const char* expected) {
  next_token(buf, bufsize);
  return strcmp(buf, expected) == 0;
}

static void remove_underscores(char *buf) {
  char *w = buf;

  for (char *r = buf; *r; r++) {
    if (*r != '_') {
      *w++ = *r;
    }
  }

  *w++ = 0;
}

static int read_str_elem(char *buf, struct array_reader *reader) {
  int ret;
  if (reader->n_elems_used == reader->n_elems_space) {
    reader->n_elems_space *= 2;
    reader->elems = (char*) realloc(reader->elems,
                                    (size_t)(reader->n_elems_space * reader->elem_size));
  }

  ret = reader->elem_reader(buf, reader->elems + reader->n_elems_used * reader->elem_size);

  if (ret == 0) {
    reader->n_elems_used++;
  }

  return ret;
}

static int read_str_array_elems(char *buf, int bufsize,
                                struct array_reader *reader, int64_t dims) {
  int ret;
  int first = 1;
  char *knows_dimsize = (char*) calloc((size_t)dims, sizeof(char));
  int cur_dim = dims-1;
  int64_t *elems_read_in_dim = (int64_t*) calloc((size_t)dims, sizeof(int64_t));

  while (1) {
    next_token(buf, bufsize);

    if (strcmp(buf, "]") == 0) {
      if (knows_dimsize[cur_dim]) {
        if (reader->shape[cur_dim] != elems_read_in_dim[cur_dim]) {
          ret = 1;
          break;
        }
      } else {
        knows_dimsize[cur_dim] = 1;
        reader->shape[cur_dim] = elems_read_in_dim[cur_dim];
      }
      if (cur_dim == 0) {
        ret = 0;
        break;
      } else {
        cur_dim--;
        elems_read_in_dim[cur_dim]++;
      }
    } else if (strcmp(buf, ",") == 0) {
      next_token(buf, bufsize);
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        first = 1;
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else if (cur_dim == dims - 1) {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
      } else {
        ret = 1;
        break;
      }
    } else if (strlen(buf) == 0) {
      // EOF
      ret = 1;
      break;
    } else if (first) {
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
        first = 0;
      }
    } else {
      ret = 1;
      break;
    }
  }

  free(knows_dimsize);
  free(elems_read_in_dim);
  return ret;
}

static int read_str_empty_array(char *buf, int bufsize,
                                const char *type_name, int64_t *shape, int64_t dims) {
  if (strlen(buf) == 0) {
    // EOF
    return 1;
  }

  if (strcmp(buf, "empty") != 0) {
    return 1;
  }

  if (!next_token_is(buf, bufsize, "(")) {
    return 1;
  }

  for (int i = 0; i < dims; i++) {
    if (!next_token_is(buf, bufsize, "[")) {
      return 1;
    }

    next_token(buf, bufsize);

    if (sscanf(buf, "%"SCNu64, (uint64_t*)&shape[i]) != 1) {
      return 1;
    }

    if (!next_token_is(buf, bufsize, "]")) {
      return 1;
    }
  }

  if (!next_token_is(buf, bufsize, type_name)) {
    return 1;
  }


  if (!next_token_is(buf, bufsize, ")")) {
    return 1;
  }

  // Check whether the array really is empty.
  for (int i = 0; i < dims; i++) {
    if (shape[i] == 0) {
      return 0;
    }
  }

  // Not an empty array!
  return 1;
}

static int read_str_array(int64_t elem_size, str_reader elem_reader,
                          const char *type_name,
                          void **data, int64_t *shape, int64_t dims) {
  int ret;
  struct array_reader reader;
  char buf[100];

  int dims_seen;
  for (dims_seen = 0; dims_seen < dims; dims_seen++) {
    if (!next_token_is(buf, sizeof(buf), "[")) {
      break;
    }
  }

  if (dims_seen == 0) {
    return read_str_empty_array(buf, sizeof(buf), type_name, shape, dims);
  }

  if (dims_seen != dims) {
    return 1;
  }

  reader.shape = shape;
  reader.n_elems_used = 0;
  reader.elem_size = elem_size;
  reader.n_elems_space = 16;
  reader.elems = (char*) realloc(*data, (size_t)(elem_size*reader.n_elems_space));
  reader.elem_reader = elem_reader;

  ret = read_str_array_elems(buf, sizeof(buf), &reader, dims);

  *data = reader.elems;

  return ret;
}

#define READ_STR(MACRO, PTR, SUFFIX)                                   \
  remove_underscores(buf);                                              \
  int j;                                                                \
  if (sscanf(buf, "%"MACRO"%n", (PTR*)dest, &j) == 1) {                 \
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, SUFFIX) == 0);     \
  } else {                                                              \
    return 1;                                                           \
  }

static int read_str_i8(char *buf, void* dest) {
  // Some platforms (WINDOWS) does not support scanf %hhd or its
  // cousin, %SCNi8.  Read into int first to avoid corrupting
  // memory.
  //
  // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(int8_t*)dest = (int8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "i8") == 0);
  } else {
    return 1;
  }
}

static int read_str_u8(char *buf, void* dest) {
  // Some platforms (WINDOWS) does not support scanf %hhd or its
  // cousin, %SCNu8.  Read into int first to avoid corrupting
  // memory.
  //
  // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(uint8_t*)dest = (uint8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "u8") == 0);
  } else {
    return 1;
  }
}

static int read_str_i16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "i16");
}

static int read_str_u16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "u16");
}

static int read_str_i32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "i32");
}

static int read_str_u32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "u32");
}

static int read_str_i64(char *buf, void* dest) {
  READ_STR(SCNi64, int64_t, "i64");
}

static int read_str_u64(char *buf, void* dest) {
  // FIXME: This is not correct, as SCNu64 only permits decimal
  // literals.  However, SCNi64 does not handle very large numbers
  // correctly (it's really for signed numbers, so that's fair).
  READ_STR(SCNu64, uint64_t, "u64");
}

static int read_str_f32(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f32.nan") == 0) {
    *(float*)dest = NAN;
    return 0;
  } else if (strcmp(buf, "f32.inf") == 0) {
    *(float*)dest = INFINITY;
    return 0;
  } else if (strcmp(buf, "-f32.inf") == 0) {
    *(float*)dest = -INFINITY;
    return 0;
  } else {
    READ_STR("f", float, "f32");
  }
}

static int read_str_f64(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f64.nan") == 0) {
    *(double*)dest = NAN;
    return 0;
  } else if (strcmp(buf, "f64.inf") == 0) {
    *(double*)dest = INFINITY;
    return 0;
  } else if (strcmp(buf, "-f64.inf") == 0) {
    *(double*)dest = -INFINITY;
    return 0;
  } else {
    READ_STR("lf", double, "f64");
  }
}

static int read_str_bool(char *buf, void* dest) {
  if (strcmp(buf, "true") == 0) {
    *(char*)dest = 1;
    return 0;
  } else if (strcmp(buf, "false") == 0) {
    *(char*)dest = 0;
    return 0;
  } else {
    return 1;
  }
}

static int write_str_i8(FILE *out, int8_t *src) {
  return fprintf(out, "%hhdi8", *src);
}

static int write_str_u8(FILE *out, uint8_t *src) {
  return fprintf(out, "%hhuu8", *src);
}

static int write_str_i16(FILE *out, int16_t *src) {
  return fprintf(out, "%hdi16", *src);
}

static int write_str_u16(FILE *out, uint16_t *src) {
  return fprintf(out, "%huu16", *src);
}

static int write_str_i32(FILE *out, int32_t *src) {
  return fprintf(out, "%di32", *src);
}

static int write_str_u32(FILE *out, uint32_t *src) {
  return fprintf(out, "%uu32", *src);
}

static int write_str_i64(FILE *out, int64_t *src) {
  return fprintf(out, "%"PRIi64"i64", *src);
}

static int write_str_u64(FILE *out, uint64_t *src) {
  return fprintf(out, "%"PRIu64"u64", *src);
}

static int write_str_f32(FILE *out, float *src) {
  float x = *src;
  if (isnan(x)) {
    return fprintf(out, "f32.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f32.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f32.inf");
  } else {
    return fprintf(out, "%.6ff32", x);
  }
}

static int write_str_f64(FILE *out, double *src) {
  double x = *src;
  if (isnan(x)) {
    return fprintf(out, "f64.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f64.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f64.inf");
  } else {
    return fprintf(out, "%.6ff64", *src);
  }
}

static int write_str_bool(FILE *out, void *src) {
  return fprintf(out, *(char*)src ? "true" : "false");
}

//// Binary I/O

#define BINARY_FORMAT_VERSION 2
#define IS_BIG_ENDIAN (!*(unsigned char *)&(uint16_t){1})

static void flip_bytes(int elem_size, unsigned char *elem) {
  for (int j=0; j<elem_size/2; j++) {
    unsigned char head = elem[j];
    int tail_index = elem_size-1-j;
    elem[j] = elem[tail_index];
    elem[tail_index] = head;
  }
}

// On Windows we need to explicitly set the file mode to not mangle
// newline characters.  On *nix there is no difference.
#ifdef _WIN32
#include <io.h>
#include <fcntl.h>
static void set_binary_mode(FILE *f) {
  setmode(fileno(f), O_BINARY);
}
#else
static void set_binary_mode(FILE *f) {
  (void)f;
}
#endif

static int read_byte(void* dest) {
  int num_elems_read = fread(dest, 1, 1, stdin);
  return num_elems_read == 1 ? 0 : 1;
}

//// Types

struct primtype_info_t {
  const char binname[4]; // Used for parsing binary data.
  const char* type_name; // Same name as in Futhark.
  const int64_t size; // in bytes
  const writer write_str; // Write in text format.
  const str_reader read_str; // Read in text format.
};

static const struct primtype_info_t i8_info =
  {.binname = "  i8", .type_name = "i8",   .size = 1,
   .write_str = (writer)write_str_i8, .read_str = (str_reader)read_str_i8};
static const struct primtype_info_t i16_info =
  {.binname = " i16", .type_name = "i16",  .size = 2,
   .write_str = (writer)write_str_i16, .read_str = (str_reader)read_str_i16};
static const struct primtype_info_t i32_info =
  {.binname = " i32", .type_name = "i32",  .size = 4,
   .write_str = (writer)write_str_i32, .read_str = (str_reader)read_str_i32};
static const struct primtype_info_t i64_info =
  {.binname = " i64", .type_name = "i64",  .size = 8,
   .write_str = (writer)write_str_i64, .read_str = (str_reader)read_str_i64};
static const struct primtype_info_t u8_info =
  {.binname = "  u8", .type_name = "u8",   .size = 1,
   .write_str = (writer)write_str_u8, .read_str = (str_reader)read_str_u8};
static const struct primtype_info_t u16_info =
  {.binname = " u16", .type_name = "u16",  .size = 2,
   .write_str = (writer)write_str_u16, .read_str = (str_reader)read_str_u16};
static const struct primtype_info_t u32_info =
  {.binname = " u32", .type_name = "u32",  .size = 4,
   .write_str = (writer)write_str_u32, .read_str = (str_reader)read_str_u32};
static const struct primtype_info_t u64_info =
  {.binname = " u64", .type_name = "u64",  .size = 8,
   .write_str = (writer)write_str_u64, .read_str = (str_reader)read_str_u64};
static const struct primtype_info_t f32_info =
  {.binname = " f32", .type_name = "f32",  .size = 4,
   .write_str = (writer)write_str_f32, .read_str = (str_reader)read_str_f32};
static const struct primtype_info_t f64_info =
  {.binname = " f64", .type_name = "f64",  .size = 8,
   .write_str = (writer)write_str_f64, .read_str = (str_reader)read_str_f64};
static const struct primtype_info_t bool_info =
  {.binname = "bool", .type_name = "bool", .size = 1,
   .write_str = (writer)write_str_bool, .read_str = (str_reader)read_str_bool};

static const struct primtype_info_t* primtypes[] = {
  &i8_info, &i16_info, &i32_info, &i64_info,
  &u8_info, &u16_info, &u32_info, &u64_info,
  &f32_info, &f64_info,
  &bool_info,
  NULL // NULL-terminated
};

// General value interface.  All endian business taken care of at
// lower layers.

static int read_is_binary() {
  skipspaces();
  int c = getchar();
  if (c == 'b') {
    int8_t bin_version;
    int ret = read_byte(&bin_version);

    if (ret != 0) { futhark_panic(1, "binary-input: could not read version.\n"); }

    if (bin_version != BINARY_FORMAT_VERSION) {
      futhark_panic(1, "binary-input: File uses version %i, but I only understand version %i.\n",
            bin_version, BINARY_FORMAT_VERSION);
    }

    return 1;
  }
  ungetc(c, stdin);
  return 0;
}

static const struct primtype_info_t* read_bin_read_type_enum() {
  char read_binname[4];

  int num_matched = scanf("%4c", read_binname);
  if (num_matched != 1) { futhark_panic(1, "binary-input: Couldn't read element type.\n"); }

  const struct primtype_info_t **type = primtypes;

  for (; *type != NULL; type++) {
    // I compare the 4 characters manually instead of using strncmp because
    // this allows any value to be used, also NULL bytes
    if (memcmp(read_binname, (*type)->binname, 4) == 0) {
      return *type;
    }
  }
  futhark_panic(1, "binary-input: Did not recognize the type '%s'.\n", read_binname);
  return NULL;
}

static void read_bin_ensure_scalar(const struct primtype_info_t *expected_type) {
  int8_t bin_dims;
  int ret = read_byte(&bin_dims);
  if (ret != 0) { futhark_panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != 0) {
    futhark_panic(1, "binary-input: Expected scalar (0 dimensions), but got array with %i dimensions.\n",
          bin_dims);
  }

  const struct primtype_info_t *bin_type = read_bin_read_type_enum();
  if (bin_type != expected_type) {
    futhark_panic(1, "binary-input: Expected scalar of type %s but got scalar of type %s.\n",
          expected_type->type_name,
          bin_type->type_name);
  }
}

//// High-level interface

static int read_bin_array(const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  int ret;

  int8_t bin_dims;
  ret = read_byte(&bin_dims);
  if (ret != 0) { futhark_panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != dims) {
    futhark_panic(1, "binary-input: Expected %i dimensions, but got array with %i dimensions.\n",
          dims, bin_dims);
  }

  const struct primtype_info_t *bin_primtype = read_bin_read_type_enum();
  if (expected_type != bin_primtype) {
    futhark_panic(1, "binary-input: Expected %iD-array with element type '%s' but got %iD-array with element type '%s'.\n",
          dims, expected_type->type_name, dims, bin_primtype->type_name);
  }

  int64_t elem_count = 1;
  for (int i=0; i<dims; i++) {
    int64_t bin_shape;
    ret = fread(&bin_shape, sizeof(bin_shape), 1, stdin);
    if (ret != 1) {
      futhark_panic(1, "binary-input: Couldn't read size for dimension %i of array.\n", i);
    }
    if (IS_BIG_ENDIAN) {
      flip_bytes(sizeof(bin_shape), (unsigned char*) &bin_shape);
    }
    elem_count *= bin_shape;
    shape[i] = bin_shape;
  }

  int64_t elem_size = expected_type->size;
  void* tmp = realloc(*data, (size_t)(elem_count * elem_size));
  if (tmp == NULL) {
    futhark_panic(1, "binary-input: Failed to allocate array of size %i.\n",
          elem_count * elem_size);
  }
  *data = tmp;

  int64_t num_elems_read = (int64_t)fread(*data, (size_t)elem_size, (size_t)elem_count, stdin);
  if (num_elems_read != elem_count) {
    futhark_panic(1, "binary-input: tried to read %i elements of an array, but only got %i elements.\n",
          elem_count, num_elems_read);
  }

  // If we're on big endian platform we must change all multibyte elements
  // from using little endian to big endian
  if (IS_BIG_ENDIAN && elem_size != 1) {
    flip_bytes(elem_size, (unsigned char*) *data);
  }

  return 0;
}

static int read_array(const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  if (!read_is_binary()) {
    return read_str_array(expected_type->size, (str_reader)expected_type->read_str, expected_type->type_name, data, shape, dims);
  } else {
    return read_bin_array(expected_type, data, shape, dims);
  }
}

static int end_of_input() {
  skipspaces();
  char token[2];
  next_token(token, sizeof(token));
  if (strcmp(token, "") == 0) {
    return 0;
  } else {
    return 1;
  }
}

static int write_str_array(FILE *out,
                           const struct primtype_info_t *elem_type,
                           const unsigned char *data,
                           const int64_t *shape,
                           int8_t rank) {
  if (rank==0) {
    elem_type->write_str(out, (void*)data);
  } else {
    int64_t len = (int64_t)shape[0];
    int64_t slice_size = 1;

    int64_t elem_size = elem_type->size;
    for (int8_t i = 1; i < rank; i++) {
      slice_size *= shape[i];
    }

    if (len*slice_size == 0) {
      printf("empty(");
      for (int64_t i = 0; i < rank; i++) {
        printf("[%"PRIi64"]", shape[i]);
      }
      printf("%s", elem_type->type_name);
      printf(")");
    } else if (rank==1) {
      putchar('[');
      for (int64_t i = 0; i < len; i++) {
        elem_type->write_str(out, (void*) (data + i * elem_size));
        if (i != len-1) {
          printf(", ");
        }
      }
      putchar(']');
    } else {
      putchar('[');
      for (int64_t i = 0; i < len; i++) {
        write_str_array(out, elem_type, data + i * slice_size * elem_size, shape+1, rank-1);
        if (i != len-1) {
          printf(", ");
        }
      }
      putchar(']');
    }
  }
  return 0;
}

static int write_bin_array(FILE *out,
                           const struct primtype_info_t *elem_type,
                           const unsigned char *data,
                           const int64_t *shape,
                           int8_t rank) {
  int64_t num_elems = 1;
  for (int64_t i = 0; i < rank; i++) {
    num_elems *= shape[i];
  }

  fputc('b', out);
  fputc((char)BINARY_FORMAT_VERSION, out);
  fwrite(&rank, sizeof(int8_t), 1, out);
  fputs(elem_type->binname, out);
  if (shape != NULL) {
    fwrite(shape, sizeof(int64_t), (size_t)rank, out);
  }

  if (IS_BIG_ENDIAN) {
    for (int64_t i = 0; i < num_elems; i++) {
      const unsigned char *elem = data+i*elem_type->size;
      for (int64_t j = 0; j < elem_type->size; j++) {
        fwrite(&elem[elem_type->size-j], 1, 1, out);
      }
    }
  } else {
    fwrite(data, (size_t)elem_type->size, (size_t)num_elems, out);
  }

  return 0;
}

static int write_array(FILE *out, int write_binary,
                       const struct primtype_info_t *elem_type,
                       const void *data,
                       const int64_t *shape,
                       const int8_t rank) {
  if (write_binary) {
    return write_bin_array(out, elem_type, data, shape, rank);
  } else {
    return write_str_array(out, elem_type, data, shape, rank);
  }
}

static int read_scalar(const struct primtype_info_t *expected_type, void *dest) {
  if (!read_is_binary()) {
    char buf[100];
    next_token(buf, sizeof(buf));
    return expected_type->read_str(buf, dest);
  } else {
    read_bin_ensure_scalar(expected_type);
    int64_t elem_size = expected_type->size;
    int num_elems_read = fread(dest, (size_t)elem_size, 1, stdin);
    if (IS_BIG_ENDIAN) {
      flip_bytes(elem_size, (unsigned char*) dest);
    }
    return num_elems_read == 1 ? 0 : 1;
  }
}

static int write_scalar(FILE *out, int write_binary, const struct primtype_info_t *type, void *src) {
  if (write_binary) {
    return write_bin_array(out, type, src, NULL, 0);
  } else {
    return type->write_str(out, src);
  }
}

// End of values.h.

#define __private
static int binary_output = 0;
static FILE *runtime_file;
static int perform_warmup = 0;
static int num_runs = 1;
static const char *entry_point = "main";
// Start of tuning.h.

static char* load_tuning_file(const char *fname,
                              void *cfg,
                              int (*set_size)(void*, const char*, size_t)) {
  const int max_line_len = 1024;
  char* line = (char*) malloc(max_line_len);

  FILE *f = fopen(fname, "r");

  if (f == NULL) {
    snprintf(line, max_line_len, "Cannot open file: %s", strerror(errno));
    return line;
  }

  int lineno = 0;
  while (fgets(line, max_line_len, f) != NULL) {
    lineno++;
    char *eql = strstr(line, "=");
    if (eql) {
      *eql = 0;
      int value = atoi(eql+1);
      if (set_size(cfg, line, value) != 0) {
        strncpy(eql+1, line, max_line_len-strlen(line)-1);
        snprintf(line, max_line_len, "Unknown name '%s' on line %d.", eql+1, lineno);
        return line;
      }
    } else {
      snprintf(line, max_line_len, "Invalid line %d (must be of form 'name=int').",
               lineno);
      return line;
    }
  }

  free(line);

  return NULL;
}

// End of tuning.h.

int parse_options(struct futhark_context_config *cfg, int argc,
                  char *const argv[])
{
    int ch;
    static struct option long_options[] = {{"write-runtime-to",
                                            required_argument, NULL, 1},
                                           {"runs", required_argument, NULL, 2},
                                           {"debugging", no_argument, NULL, 3},
                                           {"log", no_argument, NULL, 4},
                                           {"entry-point", required_argument,
                                            NULL, 5}, {"binary-output",
                                                       no_argument, NULL, 6},
                                           {"help", no_argument, NULL, 7},
                                           {"device", required_argument, NULL,
                                            8}, {"default-group-size",
                                                 required_argument, NULL, 9},
                                           {"default-num-groups",
                                            required_argument, NULL, 10},
                                           {"default-tile-size",
                                            required_argument, NULL, 11},
                                           {"default-threshold",
                                            required_argument, NULL, 12},
                                           {"print-sizes", no_argument, NULL,
                                            13}, {"size", required_argument,
                                                  NULL, 14}, {"tuning",
                                                              required_argument,
                                                              NULL, 15},
                                           {"platform", required_argument, NULL,
                                            16}, {"dump-opencl",
                                                  required_argument, NULL, 17},
                                           {"load-opencl", required_argument,
                                            NULL, 18}, {"dump-opencl-binary",
                                                        required_argument, NULL,
                                                        19},
                                           {"load-opencl-binary",
                                            required_argument, NULL, 20},
                                           {"build-option", required_argument,
                                            NULL, 21}, {"profile", no_argument,
                                                        NULL, 22},
                                           {"list-devices", no_argument, NULL,
                                            23}, {0, 0, 0, 0}};
    static char *option_descriptions =
                "  -t/--write-runtime-to FILE Print the time taken to execute the program to the indicated file, an integral number of microseconds.\n  -r/--runs INT              Perform NUM runs of the program.\n  -D/--debugging             Perform possibly expensive internal correctness checks and verbose logging.\n  -L/--log                   Print various low-overhead logging information to stderr while running.\n  -e/--entry-point NAME      The entry point to run. Defaults to main.\n  -b/--binary-output         Print the program result in the binary output format.\n  -h/--help                  Print help information and exit.\n  -d/--device NAME           Use the first OpenCL device whose name contains the given string.\n  --default-group-size INT   The default size of OpenCL workgroups that are launched.\n  --default-num-groups INT   The default number of OpenCL workgroups that are launched.\n  --default-tile-size INT    The default tile size used when performing two-dimensional tiling.\n  --default-threshold INT    The default parallelism threshold.\n  --print-sizes              Print all sizes that can be set with -size or --tuning.\n  --size ASSIGNMENT          Set a configurable run-time parameter to the given value.\n  --tuning FILE              Read size=value assignments from the given file.\n  -p/--platform NAME         Use the first OpenCL platform whose name contains the given string.\n  --dump-opencl FILE         Dump the embedded OpenCL program to the indicated file.\n  --load-opencl FILE         Instead of using the embedded OpenCL program, load it from the indicated file.\n  --dump-opencl-binary FILE  Dump the compiled version of the embedded OpenCL program to the indicated file.\n  --load-opencl-binary FILE  Load an OpenCL binary from the indicated file.\n  --build-option OPT         Add an additional build option to the string passed to clBuildProgram().\n  -P/--profile               Gather profiling data while executing and print out a summary at the end.\n  --list-devices             List all OpenCL devices and platforms available on the system.\n";
    
    while ((ch = getopt_long(argc, argv, ":t:r:DLe:bhd:p:P", long_options,
                             NULL)) != -1) {
        if (ch == 1 || ch == 't') {
            runtime_file = fopen(optarg, "w");
            if (runtime_file == NULL)
                futhark_panic(1, "Cannot open %s: %s\n", optarg,
                              strerror(errno));
        }
        if (ch == 2 || ch == 'r') {
            num_runs = atoi(optarg);
            perform_warmup = 1;
            if (num_runs <= 0)
                futhark_panic(1, "Need a positive number of runs, not %s\n",
                              optarg);
        }
        if (ch == 3 || ch == 'D')
            futhark_context_config_set_debugging(cfg, 1);
        if (ch == 4 || ch == 'L')
            futhark_context_config_set_logging(cfg, 1);
        if (ch == 5 || ch == 'e') {
            if (entry_point != NULL)
                entry_point = optarg;
        }
        if (ch == 6 || ch == 'b')
            binary_output = 1;
        if (ch == 7 || ch == 'h') {
            printf("Usage: %s [OPTION]...\nOptions:\n\n%s\nFor more information, consult the Futhark User's Guide or the man pages.\n",
                   fut_progname, option_descriptions);
            exit(0);
        }
        if (ch == 8 || ch == 'd')
            futhark_context_config_set_device(cfg, optarg);
        if (ch == 9)
            futhark_context_config_set_default_group_size(cfg, atoi(optarg));
        if (ch == 10)
            futhark_context_config_set_default_num_groups(cfg, atoi(optarg));
        if (ch == 11)
            futhark_context_config_set_default_tile_size(cfg, atoi(optarg));
        if (ch == 12)
            futhark_context_config_set_default_threshold(cfg, atoi(optarg));
        if (ch == 13) {
            int n = futhark_get_num_sizes();
            
            for (int i = 0; i < n; i++)
                printf("%s (%s)\n", futhark_get_size_name(i),
                       futhark_get_size_class(i));
            exit(0);
        }
        if (ch == 14) {
            char *name = optarg;
            char *equals = strstr(optarg, "=");
            char *value_str = equals != NULL ? equals + 1 : optarg;
            int value = atoi(value_str);
            
            if (equals != NULL) {
                *equals = 0;
                if (futhark_context_config_set_size(cfg, name, value) != 0)
                    futhark_panic(1, "Unknown size: %s\n", name);
            } else
                futhark_panic(1, "Invalid argument for size option: %s\n",
                              optarg);
        }
        if (ch == 15) {
            char *ret = load_tuning_file(optarg, cfg, (int (*)(void *, const
                                                               char *,
                                                               size_t)) futhark_context_config_set_size);
            
            if (ret != NULL)
                futhark_panic(1, "When loading tuning from '%s': %s\n", optarg,
                              ret);
        }
        if (ch == 16 || ch == 'p')
            futhark_context_config_set_platform(cfg, optarg);
        if (ch == 17) {
            futhark_context_config_dump_program_to(cfg, optarg);
            entry_point = NULL;
        }
        if (ch == 18)
            futhark_context_config_load_program_from(cfg, optarg);
        if (ch == 19) {
            futhark_context_config_dump_binary_to(cfg, optarg);
            entry_point = NULL;
        }
        if (ch == 20)
            futhark_context_config_load_binary_from(cfg, optarg);
        if (ch == 21)
            futhark_context_config_add_build_option(cfg, optarg);
        if (ch == 22 || ch == 'P')
            futhark_context_config_set_profiling(cfg, 1);
        if (ch == 23) {
            futhark_context_config_list_devices(cfg);
            entry_point = NULL;
        }
        if (ch == ':')
            futhark_panic(-1, "Missing argument for option %s\n", argv[optind -
                                                                       1]);
        if (ch == '?') {
            fprintf(stderr, "Usage: %s: %s\n", fut_progname,
                    "  -t/--write-runtime-to FILE Print the time taken to execute the program to the indicated file, an integral number of microseconds.\n  -r/--runs INT              Perform NUM runs of the program.\n  -D/--debugging             Perform possibly expensive internal correctness checks and verbose logging.\n  -L/--log                   Print various low-overhead logging information to stderr while running.\n  -e/--entry-point NAME      The entry point to run. Defaults to main.\n  -b/--binary-output         Print the program result in the binary output format.\n  -h/--help                  Print help information and exit.\n  -d/--device NAME           Use the first OpenCL device whose name contains the given string.\n  --default-group-size INT   The default size of OpenCL workgroups that are launched.\n  --default-num-groups INT   The default number of OpenCL workgroups that are launched.\n  --default-tile-size INT    The default tile size used when performing two-dimensional tiling.\n  --default-threshold INT    The default parallelism threshold.\n  --print-sizes              Print all sizes that can be set with -size or --tuning.\n  --size ASSIGNMENT          Set a configurable run-time parameter to the given value.\n  --tuning FILE              Read size=value assignments from the given file.\n  -p/--platform NAME         Use the first OpenCL platform whose name contains the given string.\n  --dump-opencl FILE         Dump the embedded OpenCL program to the indicated file.\n  --load-opencl FILE         Instead of using the embedded OpenCL program, load it from the indicated file.\n  --dump-opencl-binary FILE  Dump the compiled version of the embedded OpenCL program to the indicated file.\n  --load-opencl-binary FILE  Load an OpenCL binary from the indicated file.\n  --build-option OPT         Add an additional build option to the string passed to clBuildProgram().\n  -P/--profile               Gather profiling data while executing and print out a summary at the end.\n  --list-devices             List all OpenCL devices and platforms available on the system.\n");
            futhark_panic(1, "Unknown option: %s\n", argv[optind - 1]);
        }
    }
    return optind;
}
static void futrts_cli_entry_main(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    // Declare and read input.
    set_binary_mode(stdin);
    
    int64_t read_value_35592;
    
    if (read_scalar(&i64_info, &read_value_35592) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      0, i64_info.type_name, strerror(errno));
    
    int64_t read_value_35593;
    
    if (read_scalar(&i64_info, &read_value_35593) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      1, i64_info.type_name, strerror(errno));
    
    struct futhark_f32_1d *read_value_35594;
    int64_t read_shape_35595[1];
    float *read_arr_35596 = NULL;
    
    errno = 0;
    if (read_array(&f32_info, (void **) &read_arr_35596, read_shape_35595, 1) !=
        0)
        futhark_panic(1, "Cannot read input #%d of type %s%s (errno: %s).\n", 2,
                      "[]", f32_info.type_name, strerror(errno));
    
    struct futhark_i64_1d *read_value_35597;
    int64_t read_shape_35598[1];
    int64_t *read_arr_35599 = NULL;
    
    errno = 0;
    if (read_array(&i64_info, (void **) &read_arr_35599, read_shape_35598, 1) !=
        0)
        futhark_panic(1, "Cannot read input #%d of type %s%s (errno: %s).\n", 3,
                      "[]", i64_info.type_name, strerror(errno));
    
    struct futhark_f32_1d *read_value_35600;
    int64_t read_shape_35601[1];
    float *read_arr_35602 = NULL;
    
    errno = 0;
    if (read_array(&f32_info, (void **) &read_arr_35602, read_shape_35601, 1) !=
        0)
        futhark_panic(1, "Cannot read input #%d of type %s%s (errno: %s).\n", 4,
                      "[]", f32_info.type_name, strerror(errno));
    
    float read_value_35603;
    
    if (read_scalar(&f32_info, &read_value_35603) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      5, f32_info.type_name, strerror(errno));
    
    float read_value_35604;
    
    if (read_scalar(&f32_info, &read_value_35604) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      6, f32_info.type_name, strerror(errno));
    
    float read_value_35605;
    
    if (read_scalar(&f32_info, &read_value_35605) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      7, f32_info.type_name, strerror(errno));
    
    float read_value_35606;
    
    if (read_scalar(&f32_info, &read_value_35606) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      8, f32_info.type_name, strerror(errno));
    if (end_of_input() != 0)
        futhark_panic(1, "Expected EOF on stdin after reading input for %s.\n",
                      "\"main\"");
    
    struct futhark_f32_2d *result_35607;
    struct futhark_f32_1d *result_35608;
    
    if (perform_warmup) {
        int r;
        
        ;
        ;
        assert((read_value_35594 = futhark_new_f32_1d(ctx, read_arr_35596,
                                                      read_shape_35595[0])) !=
            0);
        assert((read_value_35597 = futhark_new_i64_1d(ctx, read_arr_35599,
                                                      read_shape_35598[0])) !=
            0);
        assert((read_value_35600 = futhark_new_f32_1d(ctx, read_arr_35602,
                                                      read_shape_35601[0])) !=
            0);
        ;
        ;
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_main(ctx, &result_35607, &result_35608,
                               read_value_35592, read_value_35593,
                               read_value_35594, read_value_35597,
                               read_value_35600, read_value_35603,
                               read_value_35604, read_value_35605,
                               read_value_35606);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        ;
        assert(futhark_free_f32_1d(ctx, read_value_35594) == 0);
        assert(futhark_free_i64_1d(ctx, read_value_35597) == 0);
        assert(futhark_free_f32_1d(ctx, read_value_35600) == 0);
        ;
        ;
        ;
        ;
        assert(futhark_free_f32_2d(ctx, result_35607) == 0);
        assert(futhark_free_f32_1d(ctx, result_35608) == 0);
    }
    time_runs = 1;
    // Proper run.
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        ;
        assert((read_value_35594 = futhark_new_f32_1d(ctx, read_arr_35596,
                                                      read_shape_35595[0])) !=
            0);
        assert((read_value_35597 = futhark_new_i64_1d(ctx, read_arr_35599,
                                                      read_shape_35598[0])) !=
            0);
        assert((read_value_35600 = futhark_new_f32_1d(ctx, read_arr_35602,
                                                      read_shape_35601[0])) !=
            0);
        ;
        ;
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_main(ctx, &result_35607, &result_35608,
                               read_value_35592, read_value_35593,
                               read_value_35594, read_value_35597,
                               read_value_35600, read_value_35603,
                               read_value_35604, read_value_35605,
                               read_value_35606);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        ;
        assert(futhark_free_f32_1d(ctx, read_value_35594) == 0);
        assert(futhark_free_i64_1d(ctx, read_value_35597) == 0);
        assert(futhark_free_f32_1d(ctx, read_value_35600) == 0);
        ;
        ;
        ;
        ;
        if (run < num_runs - 1) {
            assert(futhark_free_f32_2d(ctx, result_35607) == 0);
            assert(futhark_free_f32_1d(ctx, result_35608) == 0);
        }
    }
    ;
    ;
    free(read_arr_35596);
    free(read_arr_35599);
    free(read_arr_35602);
    ;
    ;
    ;
    ;
    if (binary_output)
        set_binary_mode(stdout);
    {
        float *arr = calloc(sizeof(float), futhark_shape_f32_2d(ctx,
                                                                result_35607)[0] *
                            futhark_shape_f32_2d(ctx, result_35607)[1]);
        
        assert(arr != NULL);
        assert(futhark_values_f32_2d(ctx, result_35607, arr) == 0);
        write_array(stdout, binary_output, &f32_info, arr,
                    futhark_shape_f32_2d(ctx, result_35607), 2);
        free(arr);
    }
    printf("\n");
    {
        float *arr = calloc(sizeof(float), futhark_shape_f32_1d(ctx,
                                                                result_35608)[0]);
        
        assert(arr != NULL);
        assert(futhark_values_f32_1d(ctx, result_35608, arr) == 0);
        write_array(stdout, binary_output, &f32_info, arr,
                    futhark_shape_f32_1d(ctx, result_35608), 1);
        free(arr);
    }
    printf("\n");
    assert(futhark_free_f32_2d(ctx, result_35607) == 0);
    assert(futhark_free_f32_1d(ctx, result_35608) == 0);
}
static void futrts_cli_entry_test(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    // Declare and read input.
    set_binary_mode(stdin);
    
    int64_t read_value_35609;
    
    if (read_scalar(&i64_info, &read_value_35609) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      0, i64_info.type_name, strerror(errno));
    
    int64_t read_value_35610;
    
    if (read_scalar(&i64_info, &read_value_35610) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      1, i64_info.type_name, strerror(errno));
    if (end_of_input() != 0)
        futhark_panic(1, "Expected EOF on stdin after reading input for %s.\n",
                      "\"test\"");
    
    struct futhark_f32_2d *result_35611;
    
    if (perform_warmup) {
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_test(ctx, &result_35611, read_value_35609,
                               read_value_35610);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        ;
        assert(futhark_free_f32_2d(ctx, result_35611) == 0);
    }
    time_runs = 1;
    // Proper run.
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_test(ctx, &result_35611, read_value_35609,
                               read_value_35610);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        ;
        if (run < num_runs - 1) {
            assert(futhark_free_f32_2d(ctx, result_35611) == 0);
        }
    }
    ;
    ;
    if (binary_output)
        set_binary_mode(stdout);
    {
        float *arr = calloc(sizeof(float), futhark_shape_f32_2d(ctx,
                                                                result_35611)[0] *
                            futhark_shape_f32_2d(ctx, result_35611)[1]);
        
        assert(arr != NULL);
        assert(futhark_values_f32_2d(ctx, result_35611, arr) == 0);
        write_array(stdout, binary_output, &f32_info, arr,
                    futhark_shape_f32_2d(ctx, result_35611), 2);
        free(arr);
    }
    printf("\n");
    assert(futhark_free_f32_2d(ctx, result_35611) == 0);
}
typedef void entry_point_fun(struct futhark_context *);
struct entry_point_entry {
    const char *name;
    entry_point_fun *fun;
} ;
int main(int argc, char **argv)
{
    fut_progname = argv[0];
    
    struct entry_point_entry entry_points[] = {{.name ="main", .fun =
                                                futrts_cli_entry_main}, {.name =
                                                                         "test",
                                                                         .fun =
                                                                         futrts_cli_entry_test}};
    struct futhark_context_config *cfg = futhark_context_config_new();
    
    assert(cfg != NULL);
    
    int parsed_options = parse_options(cfg, argc, argv);
    
    argc -= parsed_options;
    argv += parsed_options;
    if (argc != 0)
        futhark_panic(1, "Excess non-option: %s\n", argv[0]);
    
    struct futhark_context *ctx = futhark_context_new(cfg);
    
    assert(ctx != NULL);
    
    char *error = futhark_context_get_error(ctx);
    
    if (error != NULL)
        futhark_panic(1, "%s", error);
    if (entry_point != NULL) {
        int num_entry_points = sizeof(entry_points) / sizeof(entry_points[0]);
        entry_point_fun *entry_point_fun = NULL;
        
        for (int i = 0; i < num_entry_points; i++) {
            if (strcmp(entry_points[i].name, entry_point) == 0) {
                entry_point_fun = entry_points[i].fun;
                break;
            }
        }
        if (entry_point_fun == NULL) {
            fprintf(stderr,
                    "No entry point '%s'.  Select another with --entry-point.  Options are:\n",
                    entry_point);
            for (int i = 0; i < num_entry_points; i++)
                fprintf(stderr, "%s\n", entry_points[i].name);
            return 1;
        }
        entry_point_fun(ctx);
        if (runtime_file != NULL)
            fclose(runtime_file);
        
        char *report = futhark_context_report(ctx);
        
        fputs(report, stderr);
        free(report);
    }
    futhark_context_free(ctx);
    futhark_context_config_free(cfg);
    return 0;
}
#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <inttypes.h>
#include <ctype.h>
#include <errno.h>
#include <assert.h>
#define CL_TARGET_OPENCL_VERSION 120
#define CL_USE_DEPRECATED_OPENCL_1_2_APIS
#ifdef __APPLE__
#define CL_SILENCE_DEPRECATION
#include <OpenCL/cl.h>
#else
#include <CL/cl.h>
#endif

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzl(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline double fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
#ifdef __OPENCL_VERSION__
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
int init_constants(struct futhark_context *);
int free_constants(struct futhark_context *);
static int32_t mainzicounter_mem_realtype_35353[10] = {0, 0, 0, 0, 0, 0, 0, 0,
                                                       0, 0};
static int32_t mainzicounter_mem_realtype_35410[10240];
static int32_t mainzicounter_mem_realtype_35421[10] = {0, 0, 0, 0, 0, 0, 0, 0,
                                                       0, 0};
static int32_t mainzicounter_mem_realtype_35431[10] = {0, 0, 0, 0, 0, 0, 0, 0,
                                                       0, 0};
static int32_t mainzicounter_mem_realtype_35466[10240];
static int32_t mainzicounter_mem_realtype_35477[10] = {0, 0, 0, 0, 0, 0, 0, 0,
                                                       0, 0};
static int32_t mainzicounter_mem_realtype_35487[10] = {0, 0, 0, 0, 0, 0, 0, 0,
                                                       0, 0};
static int32_t mainzicounter_mem_realtype_35507[10240];
static float testzistatic_array_realtype_35521[45] = {1.0F, -0.5F, 1.0F, 1.0F,
                                                      1.0F, 1.0F, 1.0F, 1.0F,
                                                      1.0F, 1.0F, -0.5F, 1.0F,
                                                      1.0F, 1.0F, 1.0F, 1.0F,
                                                      1.0F, 1.0F, 1.0F, -0.5F,
                                                      1.0F, 1.0F, 1.0F, 1.0F,
                                                      1.0F, 1.0F, 1.0F, 1.0F,
                                                      -0.5F, 1.0F, 1.0F, 1.0F,
                                                      1.0F, 1.0F, 1.0F, 1.0F,
                                                      1.0F, -0.5F, 1.0F, 1.0F,
                                                      1.0F, 1.0F, 1.0F, 1.0F,
                                                      1.0F};
static int64_t testzistatic_array_realtype_35522[45] = {10, 20, 5, 5, 50, 20,
                                                        30, 15, 18, 10, 200, 5,
                                                        5, 50, 20, 30, 15, 18,
                                                        10, 20, 5, 5, 100, 20,
                                                        30, 15, 18, 10, 20, 5,
                                                        5, 50, 20, 30, 15, 18,
                                                        10, 20, 5, 5, 50, 20,
                                                        30, 15, 18};
static float testzistatic_array_realtype_35523[45] = {1.0F, 0.5F, 0.25F, 0.1F,
                                                      0.3F, 0.1F, 2.0F, 3.0F,
                                                      1.0F, 1.0F, 0.5F, 0.25F,
                                                      0.1F, 0.3F, 0.1F, 2.0F,
                                                      3.0F, 1.0F, 1.0F, 0.5F,
                                                      0.25F, 0.1F, 0.3F, 0.1F,
                                                      2.0F, 3.0F, 1.0F, 1.0F,
                                                      0.5F, 0.25F, 0.1F, 0.3F,
                                                      0.1F, 2.0F, 3.0F, 1.0F,
                                                      1.0F, 0.5F, 0.25F, 0.1F,
                                                      0.3F, 0.1F, 2.0F, 3.0F,
                                                      1.0F};
static int32_t testzicounter_mem_realtype_35524[10] = {0, 0, 0, 0, 0, 0, 0, 0,
                                                       0, 0};
static int32_t testzicounter_mem_realtype_35581[10240];
struct memblock_device {
    int *references;
    cl_mem mem;
    int64_t size;
    const char *desc;
} ;
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
} ;
typedef cl_mem fl_mem_t;
// Start of free_list.h.

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem_t mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries;        // Pointer to entries.
  int capacity;                           // Number of entries.
  int used;                               // Number of valid entries.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
}

static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem_t mem, const char *tag) {
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size,
                          size_t *size_out, fl_mem_t *mem_out) {
  int size_match = -1;
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid &&
        size <= l->entries[i].size &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    return 0;
  } else {
    return 1;
  }
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem_t *mem_out) {
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      return 0;
    }
  }

  return 1;
}

// End of free_list.h.

// Start of opencl.h.

#define OPENCL_SUCCEED_FATAL(e) opencl_succeed_fatal(e, #e, __FILE__, __LINE__)
#define OPENCL_SUCCEED_NONFATAL(e) opencl_succeed_nonfatal(e, #e, __FILE__, __LINE__)
// Take care not to override an existing error.
#define OPENCL_SUCCEED_OR_RETURN(e) {             \
    char *serror = OPENCL_SUCCEED_NONFATAL(e);    \
    if (serror) {                                 \
      if (!ctx->error) {                          \
        ctx->error = serror;                      \
        return bad;                               \
      } else {                                    \
        free(serror);                             \
      }                                           \
    }                                             \
  }

// OPENCL_SUCCEED_OR_RETURN returns the value of the variable 'bad' in
// scope.  By default, it will be this one.  Create a local variable
// of some other type if needed.  This is a bit of a hack, but it
// saves effort in the code generator.
static const int bad = 1;

struct opencl_config {
  int debugging;
  int profiling;
  int logging;
  int preferred_device_num;
  const char *preferred_platform;
  const char *preferred_device;
  int ignore_blacklist;

  const char* dump_program_to;
  const char* load_program_from;
  const char* dump_binary_to;
  const char* load_binary_from;

  size_t default_group_size;
  size_t default_num_groups;
  size_t default_tile_size;
  size_t default_threshold;

  int default_group_size_changed;
  int default_tile_size_changed;

  int num_sizes;
  const char **size_names;
  const char **size_vars;
  size_t *size_values;
  const char **size_classes;
};

static void opencl_config_init(struct opencl_config *cfg,
                               int num_sizes,
                               const char *size_names[],
                               const char *size_vars[],
                               size_t *size_values,
                               const char *size_classes[]) {
  cfg->debugging = 0;
  cfg->logging = 0;
  cfg->profiling = 0;
  cfg->preferred_device_num = 0;
  cfg->preferred_platform = "";
  cfg->preferred_device = "";
  cfg->ignore_blacklist = 0;
  cfg->dump_program_to = NULL;
  cfg->load_program_from = NULL;
  cfg->dump_binary_to = NULL;
  cfg->load_binary_from = NULL;

  // The following are dummy sizes that mean the concrete defaults
  // will be set during initialisation via hardware-inspection-based
  // heuristics.
  cfg->default_group_size = 0;
  cfg->default_num_groups = 0;
  cfg->default_tile_size = 0;
  cfg->default_threshold = 0;

  cfg->default_group_size_changed = 0;
  cfg->default_tile_size_changed = 0;

  cfg->num_sizes = num_sizes;
  cfg->size_names = size_names;
  cfg->size_vars = size_vars;
  cfg->size_values = size_values;
  cfg->size_classes = size_classes;
}

// A record of something that happened.
struct profiling_record {
  cl_event *event;
  int *runs;
  int64_t *runtime;
};

struct opencl_context {
  cl_device_id device;
  cl_context ctx;
  cl_command_queue queue;

  struct opencl_config cfg;

  struct free_list free_list;

  size_t max_group_size;
  size_t max_num_groups;
  size_t max_tile_size;
  size_t max_threshold;
  size_t max_local_memory;

  size_t lockstep_width;

  struct profiling_record *profiling_records;
  int profiling_records_capacity;
  int profiling_records_used;
};

struct opencl_device_option {
  cl_platform_id platform;
  cl_device_id device;
  cl_device_type device_type;
  char *platform_name;
  char *device_name;
};

// This function must be defined by the user.  It is invoked by
// setup_opencl() after the platform and device has been found, but
// before the program is loaded.  Its intended use is to tune
// constants based on the selected platform and device.
static void post_opencl_setup(struct opencl_context*, struct opencl_device_option*);

static char *strclone(const char *str) {
  size_t size = strlen(str) + 1;
  char *copy = (char*) malloc(size);
  if (copy == NULL) {
    return NULL;
  }

  memcpy(copy, str, size);
  return copy;
}

static const char* opencl_error_string(cl_int err)
{
    switch (err) {
        case CL_SUCCESS:                            return "Success!";
        case CL_DEVICE_NOT_FOUND:                   return "Device not found.";
        case CL_DEVICE_NOT_AVAILABLE:               return "Device not available";
        case CL_COMPILER_NOT_AVAILABLE:             return "Compiler not available";
        case CL_MEM_OBJECT_ALLOCATION_FAILURE:      return "Memory object allocation failure";
        case CL_OUT_OF_RESOURCES:                   return "Out of resources";
        case CL_OUT_OF_HOST_MEMORY:                 return "Out of host memory";
        case CL_PROFILING_INFO_NOT_AVAILABLE:       return "Profiling information not available";
        case CL_MEM_COPY_OVERLAP:                   return "Memory copy overlap";
        case CL_IMAGE_FORMAT_MISMATCH:              return "Image format mismatch";
        case CL_IMAGE_FORMAT_NOT_SUPPORTED:         return "Image format not supported";
        case CL_BUILD_PROGRAM_FAILURE:              return "Program build failure";
        case CL_MAP_FAILURE:                        return "Map failure";
        case CL_INVALID_VALUE:                      return "Invalid value";
        case CL_INVALID_DEVICE_TYPE:                return "Invalid device type";
        case CL_INVALID_PLATFORM:                   return "Invalid platform";
        case CL_INVALID_DEVICE:                     return "Invalid device";
        case CL_INVALID_CONTEXT:                    return "Invalid context";
        case CL_INVALID_QUEUE_PROPERTIES:           return "Invalid queue properties";
        case CL_INVALID_COMMAND_QUEUE:              return "Invalid command queue";
        case CL_INVALID_HOST_PTR:                   return "Invalid host pointer";
        case CL_INVALID_MEM_OBJECT:                 return "Invalid memory object";
        case CL_INVALID_IMAGE_FORMAT_DESCRIPTOR:    return "Invalid image format descriptor";
        case CL_INVALID_IMAGE_SIZE:                 return "Invalid image size";
        case CL_INVALID_SAMPLER:                    return "Invalid sampler";
        case CL_INVALID_BINARY:                     return "Invalid binary";
        case CL_INVALID_BUILD_OPTIONS:              return "Invalid build options";
        case CL_INVALID_PROGRAM:                    return "Invalid program";
        case CL_INVALID_PROGRAM_EXECUTABLE:         return "Invalid program executable";
        case CL_INVALID_KERNEL_NAME:                return "Invalid kernel name";
        case CL_INVALID_KERNEL_DEFINITION:          return "Invalid kernel definition";
        case CL_INVALID_KERNEL:                     return "Invalid kernel";
        case CL_INVALID_ARG_INDEX:                  return "Invalid argument index";
        case CL_INVALID_ARG_VALUE:                  return "Invalid argument value";
        case CL_INVALID_ARG_SIZE:                   return "Invalid argument size";
        case CL_INVALID_KERNEL_ARGS:                return "Invalid kernel arguments";
        case CL_INVALID_WORK_DIMENSION:             return "Invalid work dimension";
        case CL_INVALID_WORK_GROUP_SIZE:            return "Invalid work group size";
        case CL_INVALID_WORK_ITEM_SIZE:             return "Invalid work item size";
        case CL_INVALID_GLOBAL_OFFSET:              return "Invalid global offset";
        case CL_INVALID_EVENT_WAIT_LIST:            return "Invalid event wait list";
        case CL_INVALID_EVENT:                      return "Invalid event";
        case CL_INVALID_OPERATION:                  return "Invalid operation";
        case CL_INVALID_GL_OBJECT:                  return "Invalid OpenGL object";
        case CL_INVALID_BUFFER_SIZE:                return "Invalid buffer size";
        case CL_INVALID_MIP_LEVEL:                  return "Invalid mip-map level";
        default:                                    return "Unknown";
    }
}

static void opencl_succeed_fatal(unsigned int ret,
                                 const char *call,
                                 const char *file,
                                 int line) {
  if (ret != CL_SUCCESS) {
    futhark_panic(-1, "%s:%d: OpenCL call\n  %s\nfailed with error code %d (%s)\n",
          file, line, call, ret, opencl_error_string(ret));
  }
}

static char* opencl_succeed_nonfatal(unsigned int ret,
                                     const char *call,
                                     const char *file,
                                     int line) {
  if (ret != CL_SUCCESS) {
    return msgprintf("%s:%d: OpenCL call\n  %s\nfailed with error code %d (%s)\n",
                     file, line, call, ret, opencl_error_string(ret));
  } else {
    return NULL;
  }
}

static void set_preferred_platform(struct opencl_config *cfg, const char *s) {
  cfg->preferred_platform = s;
  cfg->ignore_blacklist = 1;
}

static void set_preferred_device(struct opencl_config *cfg, const char *s) {
  int x = 0;
  if (*s == '#') {
    s++;
    while (isdigit(*s)) {
      x = x * 10 + (*s++)-'0';
    }
    // Skip trailing spaces.
    while (isspace(*s)) {
      s++;
    }
  }
  cfg->preferred_device = s;
  cfg->preferred_device_num = x;
  cfg->ignore_blacklist = 1;
}

static char* opencl_platform_info(cl_platform_id platform,
                                  cl_platform_info param) {
  size_t req_bytes;
  char *info;

  OPENCL_SUCCEED_FATAL(clGetPlatformInfo(platform, param, 0, NULL, &req_bytes));

  info = (char*) malloc(req_bytes);

  OPENCL_SUCCEED_FATAL(clGetPlatformInfo(platform, param, req_bytes, info, NULL));

  return info;
}

static char* opencl_device_info(cl_device_id device,
                                cl_device_info param) {
  size_t req_bytes;
  char *info;

  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device, param, 0, NULL, &req_bytes));

  info = (char*) malloc(req_bytes);

  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device, param, req_bytes, info, NULL));

  return info;
}

static void opencl_all_device_options(struct opencl_device_option **devices_out,
                                      size_t *num_devices_out) {
  size_t num_devices = 0, num_devices_added = 0;

  cl_platform_id *all_platforms;
  cl_uint *platform_num_devices;

  cl_uint num_platforms;

  // Find the number of platforms.
  OPENCL_SUCCEED_FATAL(clGetPlatformIDs(0, NULL, &num_platforms));

  // Make room for them.
  all_platforms = calloc(num_platforms, sizeof(cl_platform_id));
  platform_num_devices = calloc(num_platforms, sizeof(cl_uint));

  // Fetch all the platforms.
  OPENCL_SUCCEED_FATAL(clGetPlatformIDs(num_platforms, all_platforms, NULL));

  // Count the number of devices for each platform, as well as the
  // total number of devices.
  for (cl_uint i = 0; i < num_platforms; i++) {
    if (clGetDeviceIDs(all_platforms[i], CL_DEVICE_TYPE_ALL,
                       0, NULL, &platform_num_devices[i]) == CL_SUCCESS) {
      num_devices += platform_num_devices[i];
    } else {
      platform_num_devices[i] = 0;
    }
  }

  // Make room for all the device options.
  struct opencl_device_option *devices =
    calloc(num_devices, sizeof(struct opencl_device_option));

  // Loop through the platforms, getting information about their devices.
  for (cl_uint i = 0; i < num_platforms; i++) {
    cl_platform_id platform = all_platforms[i];
    cl_uint num_platform_devices = platform_num_devices[i];

    if (num_platform_devices == 0) {
      continue;
    }

    char *platform_name = opencl_platform_info(platform, CL_PLATFORM_NAME);
    cl_device_id *platform_devices =
      calloc(num_platform_devices, sizeof(cl_device_id));

    // Fetch all the devices.
    OPENCL_SUCCEED_FATAL(clGetDeviceIDs(platform, CL_DEVICE_TYPE_ALL,
                                  num_platform_devices, platform_devices, NULL));

    // Loop through the devices, adding them to the devices array.
    for (cl_uint i = 0; i < num_platform_devices; i++) {
      char *device_name = opencl_device_info(platform_devices[i], CL_DEVICE_NAME);
      devices[num_devices_added].platform = platform;
      devices[num_devices_added].device = platform_devices[i];
      OPENCL_SUCCEED_FATAL(clGetDeviceInfo(platform_devices[i], CL_DEVICE_TYPE,
                                     sizeof(cl_device_type),
                                     &devices[num_devices_added].device_type,
                                     NULL));
      // We don't want the structs to share memory, so copy the platform name.
      // Each device name is already unique.
      devices[num_devices_added].platform_name = strclone(platform_name);
      devices[num_devices_added].device_name = device_name;
      num_devices_added++;
    }
    free(platform_devices);
    free(platform_name);
  }
  free(all_platforms);
  free(platform_num_devices);

  *devices_out = devices;
  *num_devices_out = num_devices;
}

// Returns 0 on success.
static int list_devices(struct opencl_config *cfg) {
  struct opencl_device_option *devices;
  size_t num_devices;

  opencl_all_device_options(&devices, &num_devices);

  const char *cur_platform = "";
  for (size_t i = 0; i < num_devices; i++) {
    struct opencl_device_option device = devices[i];
    if (strcmp(cur_platform, device.platform_name) != 0) {
      printf("Platform: %s\n", device.platform_name);
      cur_platform = device.platform_name;
    }
    printf("[%d]: %s\n", (int)i, device.device_name);
  }

  // Free all the platform and device names.
  for (size_t j = 0; j < num_devices; j++) {
    free(devices[j].platform_name);
    free(devices[j].device_name);
  }
  free(devices);

  return 0;
}

// Returns 0 on success.
static int select_device_interactively(struct opencl_config *cfg) {
  struct opencl_device_option *devices;
  size_t num_devices;
  int ret = 1;

  opencl_all_device_options(&devices, &num_devices);

  printf("Choose OpenCL device:\n");
  const char *cur_platform = "";
  for (size_t i = 0; i < num_devices; i++) {
    struct opencl_device_option device = devices[i];
    if (strcmp(cur_platform, device.platform_name) != 0) {
      printf("Platform: %s\n", device.platform_name);
      cur_platform = device.platform_name;
    }
    printf("[%d] %s\n", (int)i, device.device_name);
  }

  int selection;
  printf("Choice: ");
  if (scanf("%d", &selection) == 1) {
    ret = 0;
    cfg->preferred_platform = "";
    cfg->preferred_device = "";
    cfg->preferred_device_num = selection;
    cfg->ignore_blacklist = 1;
  }

  // Free all the platform and device names.
  for (size_t j = 0; j < num_devices; j++) {
    free(devices[j].platform_name);
    free(devices[j].device_name);
  }
  free(devices);

  return ret;
}

static int is_blacklisted(const char *platform_name, const char *device_name,
                          const struct opencl_config *cfg) {
  if (strcmp(cfg->preferred_platform, "") != 0 ||
      strcmp(cfg->preferred_device, "") != 0) {
    return 0;
  } else if (strstr(platform_name, "Apple") != NULL &&
             strstr(device_name, "Intel(R) Core(TM)") != NULL) {
    return 1;
  } else {
    return 0;
  }
}

static struct opencl_device_option get_preferred_device(const struct opencl_config *cfg) {
  struct opencl_device_option *devices;
  size_t num_devices;

  opencl_all_device_options(&devices, &num_devices);

  int num_device_matches = 0;

  for (size_t i = 0; i < num_devices; i++) {
    struct opencl_device_option device = devices[i];
    if (strstr(device.platform_name, cfg->preferred_platform) != NULL &&
        strstr(device.device_name, cfg->preferred_device) != NULL &&
        (cfg->ignore_blacklist ||
         !is_blacklisted(device.platform_name, device.device_name, cfg)) &&
        num_device_matches++ == cfg->preferred_device_num) {
      // Free all the platform and device names, except the ones we have chosen.
      for (size_t j = 0; j < num_devices; j++) {
        if (j != i) {
          free(devices[j].platform_name);
          free(devices[j].device_name);
        }
      }
      free(devices);
      return device;
    }
  }

  futhark_panic(1, "Could not find acceptable OpenCL device.\n");
  exit(1); // Never reached
}

static void describe_device_option(struct opencl_device_option device) {
  fprintf(stderr, "Using platform: %s\n", device.platform_name);
  fprintf(stderr, "Using device: %s\n", device.device_name);
}

static cl_build_status build_opencl_program(cl_program program, cl_device_id device, const char* options) {
  cl_int clBuildProgram_error = clBuildProgram(program, 1, &device, options, NULL, NULL);

  // Avoid termination due to CL_BUILD_PROGRAM_FAILURE
  if (clBuildProgram_error != CL_SUCCESS &&
      clBuildProgram_error != CL_BUILD_PROGRAM_FAILURE) {
    OPENCL_SUCCEED_FATAL(clBuildProgram_error);
  }

  cl_build_status build_status;
  OPENCL_SUCCEED_FATAL(clGetProgramBuildInfo(program,
                                             device,
                                             CL_PROGRAM_BUILD_STATUS,
                                             sizeof(cl_build_status),
                                             &build_status,
                                             NULL));

  if (build_status != CL_SUCCESS) {
    char *build_log;
    size_t ret_val_size;
    OPENCL_SUCCEED_FATAL(clGetProgramBuildInfo(program, device, CL_PROGRAM_BUILD_LOG, 0, NULL, &ret_val_size));

    build_log = (char*) malloc(ret_val_size+1);
    OPENCL_SUCCEED_FATAL(clGetProgramBuildInfo(program, device, CL_PROGRAM_BUILD_LOG, ret_val_size, build_log, NULL));

    // The spec technically does not say whether the build log is zero-terminated, so let's be careful.
    build_log[ret_val_size] = '\0';

    fprintf(stderr, "Build log:\n%s\n", build_log);

    free(build_log);
  }

  return build_status;
}

// Fields in a bitmask indicating which types we must be sure are
// available.
enum opencl_required_type { OPENCL_F64 = 1 };

// We take as input several strings representing the program, because
// C does not guarantee that the compiler supports particularly large
// literals.  Notably, Visual C has a limit of 2048 characters.  The
// array must be NULL-terminated.
static cl_program setup_opencl_with_command_queue(struct opencl_context *ctx,
                                                  cl_command_queue queue,
                                                  const char *srcs[],
                                                  int required_types,
                                                  const char *extra_build_opts[]) {
  int error;

  free_list_init(&ctx->free_list);
  ctx->queue = queue;

  OPENCL_SUCCEED_FATAL(clGetCommandQueueInfo(ctx->queue, CL_QUEUE_CONTEXT, sizeof(cl_context), &ctx->ctx, NULL));

  // Fill out the device info.  This is redundant work if we are
  // called from setup_opencl() (which is the common case), but I
  // doubt it matters much.
  struct opencl_device_option device_option;
  OPENCL_SUCCEED_FATAL(clGetCommandQueueInfo(ctx->queue, CL_QUEUE_DEVICE,
                                       sizeof(cl_device_id),
                                       &device_option.device,
                                       NULL));
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_PLATFORM,
                                 sizeof(cl_platform_id),
                                 &device_option.platform,
                                 NULL));
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_TYPE,
                                 sizeof(cl_device_type),
                                 &device_option.device_type,
                                 NULL));
  device_option.platform_name = opencl_platform_info(device_option.platform, CL_PLATFORM_NAME);
  device_option.device_name = opencl_device_info(device_option.device, CL_DEVICE_NAME);

  ctx->device = device_option.device;

  if (required_types & OPENCL_F64) {
    cl_uint supported;
    OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_PREFERRED_VECTOR_WIDTH_DOUBLE,
                                   sizeof(cl_uint), &supported, NULL));
    if (!supported) {
      futhark_panic(1, "Program uses double-precision floats, but this is not supported on the chosen device: %s\n",
            device_option.device_name);
    }
  }

  size_t max_group_size;
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_MAX_WORK_GROUP_SIZE,
                                 sizeof(size_t), &max_group_size, NULL));

  size_t max_tile_size = sqrt(max_group_size);

  cl_ulong max_local_memory;
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_LOCAL_MEM_SIZE,
                                       sizeof(size_t), &max_local_memory, NULL));

  // Futhark reserves 4 bytes for bookkeeping information.
  max_local_memory -= 4;

  // The OpenCL implementation may reserve some local memory bytes for
  // various purposes.  In principle, we should use
  // clGetKernelWorkGroupInfo() to figure out for each kernel how much
  // is actually available, but our current code generator design
  // makes this infeasible.  Instead, we have this nasty hack where we
  // arbitrarily subtract some bytes, based on empirical measurements
  // (but which might be arbitrarily wrong).  Fortunately, we rarely
  // try to really push the local memory usage.
  if (strstr(device_option.platform_name, "NVIDIA CUDA") != NULL) {
    max_local_memory -= 12;
  } else if (strstr(device_option.platform_name, "AMD") != NULL) {
    max_local_memory -= 16;
  }

  // Make sure this function is defined.
  post_opencl_setup(ctx, &device_option);

  if (max_group_size < ctx->cfg.default_group_size) {
    if (ctx->cfg.default_group_size_changed) {
      fprintf(stderr, "Note: Device limits default group size to %zu (down from %zu).\n",
              max_group_size, ctx->cfg.default_group_size);
    }
    ctx->cfg.default_group_size = max_group_size;
  }

  if (max_tile_size < ctx->cfg.default_tile_size) {
    if (ctx->cfg.default_tile_size_changed) {
      fprintf(stderr, "Note: Device limits default tile size to %zu (down from %zu).\n",
              max_tile_size, ctx->cfg.default_tile_size);
    }
    ctx->cfg.default_tile_size = max_tile_size;
  }

  ctx->max_group_size = max_group_size;
  ctx->max_tile_size = max_tile_size; // No limit.
  ctx->max_threshold = ctx->max_num_groups = 0; // No limit.
  ctx->max_local_memory = max_local_memory;

  // Now we go through all the sizes, clamp them to the valid range,
  // or set them to the default.
  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    const char *size_class = ctx->cfg.size_classes[i];
    size_t *size_value = &ctx->cfg.size_values[i];
    const char* size_name = ctx->cfg.size_names[i];
    size_t max_value = 0, default_value = 0;
    if (strstr(size_class, "group_size") == size_class) {
      max_value = max_group_size;
      default_value = ctx->cfg.default_group_size;
    } else if (strstr(size_class, "num_groups") == size_class) {
      max_value = max_group_size; // Futhark assumes this constraint.
      default_value = ctx->cfg.default_num_groups;
      // XXX: as a quick and dirty hack, use twice as many threads for
      // histograms by default.  We really should just be smarter
      // about sizes somehow.
      if (strstr(size_name, ".seghist_") != NULL) {
        default_value *= 2;
      }
    } else if (strstr(size_class, "tile_size") == size_class) {
      max_value = sqrt(max_group_size);
      default_value = ctx->cfg.default_tile_size;
    } else if (strstr(size_class, "threshold") == size_class) {
      // Threshold can be as large as it takes.
      default_value = ctx->cfg.default_threshold;
    } else {
      // Bespoke sizes have no limit or default.
    }
    if (*size_value == 0) {
      *size_value = default_value;
    } else if (max_value > 0 && *size_value > max_value) {
      fprintf(stderr, "Note: Device limits %s to %d (down from %d)\n",
              size_name, (int)max_value, (int)*size_value);
      *size_value = max_value;
    }
  }

  if (ctx->lockstep_width == 0) {
    ctx->lockstep_width = 1;
  }

  if (ctx->cfg.logging) {
    fprintf(stderr, "Lockstep width: %d\n", (int)ctx->lockstep_width);
    fprintf(stderr, "Default group size: %d\n", (int)ctx->cfg.default_group_size);
    fprintf(stderr, "Default number of groups: %d\n", (int)ctx->cfg.default_num_groups);
  }

  char *fut_opencl_src = NULL;
  cl_program prog;
  error = CL_SUCCESS;

  if (ctx->cfg.load_binary_from == NULL) {
    size_t src_size = 0;

    // Maybe we have to read OpenCL source from somewhere else (used for debugging).
    if (ctx->cfg.load_program_from != NULL) {
      fut_opencl_src = slurp_file(ctx->cfg.load_program_from, NULL);
      assert(fut_opencl_src != NULL);
    } else {
      // Construct the OpenCL source concatenating all the fragments.
      for (const char **src = srcs; src && *src; src++) {
        src_size += strlen(*src);
      }

      fut_opencl_src = (char*) malloc(src_size + 1);

      size_t n, i;
      for (i = 0, n = 0; srcs && srcs[i]; i++) {
        strncpy(fut_opencl_src+n, srcs[i], src_size-n);
        n += strlen(srcs[i]);
      }
      fut_opencl_src[src_size] = 0;
    }

    if (ctx->cfg.dump_program_to != NULL) {
      if (ctx->cfg.debugging) {
        fprintf(stderr, "Dumping OpenCL source to %s...\n", ctx->cfg.dump_program_to);
      }

      dump_file(ctx->cfg.dump_program_to, fut_opencl_src, strlen(fut_opencl_src));
    }

    if (ctx->cfg.debugging) {
      fprintf(stderr, "Creating OpenCL program...\n");
    }

    const char* src_ptr[] = {fut_opencl_src};
    prog = clCreateProgramWithSource(ctx->ctx, 1, src_ptr, &src_size, &error);
    OPENCL_SUCCEED_FATAL(error);
  } else {
    if (ctx->cfg.debugging) {
      fprintf(stderr, "Loading OpenCL binary from %s...\n", ctx->cfg.load_binary_from);
    }
    size_t binary_size;
    unsigned char *fut_opencl_bin =
      (unsigned char*) slurp_file(ctx->cfg.load_binary_from, &binary_size);
    assert(fut_opencl_bin != NULL);
    const unsigned char *binaries[1] = { fut_opencl_bin };
    cl_int status = 0;

    prog = clCreateProgramWithBinary(ctx->ctx, 1, &device_option.device,
                                     &binary_size, binaries,
                                     &status, &error);

    OPENCL_SUCCEED_FATAL(status);
    OPENCL_SUCCEED_FATAL(error);
  }

  int compile_opts_size = 1024;

  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    compile_opts_size += strlen(ctx->cfg.size_names[i]) + 20;
  }

  for (int i = 0; extra_build_opts[i] != NULL; i++) {
    compile_opts_size += strlen(extra_build_opts[i] + 1);
  }

  char *compile_opts = (char*) malloc(compile_opts_size);

  int w = snprintf(compile_opts, compile_opts_size,
                   "-DLOCKSTEP_WIDTH=%d ",
                   (int)ctx->lockstep_width);

  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    w += snprintf(compile_opts+w, compile_opts_size-w,
                  "-D%s=%d ",
                  ctx->cfg.size_vars[i],
                  (int)ctx->cfg.size_values[i]);
  }

  for (int i = 0; extra_build_opts[i] != NULL; i++) {
    w += snprintf(compile_opts+w, compile_opts_size-w,
                  "%s ", extra_build_opts[i]);
  }

  if (ctx->cfg.debugging) {
    fprintf(stderr, "OpenCL compiler options: %s\n", compile_opts);
    fprintf(stderr, "Building OpenCL program...\n");
  }
  OPENCL_SUCCEED_FATAL(build_opencl_program(prog, device_option.device, compile_opts));

  free(compile_opts);
  free(fut_opencl_src);

  if (ctx->cfg.dump_binary_to != NULL) {
    if (ctx->cfg.debugging) {
      fprintf(stderr, "Dumping OpenCL binary to %s...\n", ctx->cfg.dump_binary_to);
    }

    size_t binary_size;
    OPENCL_SUCCEED_FATAL(clGetProgramInfo(prog, CL_PROGRAM_BINARY_SIZES,
                                          sizeof(size_t), &binary_size, NULL));
    unsigned char *binary = (unsigned char*) malloc(binary_size);
    unsigned char *binaries[1] = { binary };
    OPENCL_SUCCEED_FATAL(clGetProgramInfo(prog, CL_PROGRAM_BINARIES,
                                          sizeof(unsigned char*), binaries, NULL));

    dump_file(ctx->cfg.dump_binary_to, binary, binary_size);
  }

  return prog;
}

static cl_program setup_opencl(struct opencl_context *ctx,
                               const char *srcs[],
                               int required_types,
                               const char *extra_build_opts[]) {

  ctx->lockstep_width = 0; // Real value set later.

  struct opencl_device_option device_option = get_preferred_device(&ctx->cfg);

  if (ctx->cfg.logging) {
    describe_device_option(device_option);
  }

  // Note that NVIDIA's OpenCL requires the platform property
  cl_context_properties properties[] = {
    CL_CONTEXT_PLATFORM,
    (cl_context_properties)device_option.platform,
    0
  };

  cl_int clCreateContext_error;
  ctx->ctx = clCreateContext(properties, 1, &device_option.device, NULL, NULL, &clCreateContext_error);
  OPENCL_SUCCEED_FATAL(clCreateContext_error);

  cl_int clCreateCommandQueue_error;
  cl_command_queue queue =
    clCreateCommandQueue(ctx->ctx,
                         device_option.device,
                         ctx->cfg.profiling ? CL_QUEUE_PROFILING_ENABLE : 0,
                         &clCreateCommandQueue_error);
  OPENCL_SUCCEED_FATAL(clCreateCommandQueue_error);

  return setup_opencl_with_command_queue(ctx, queue, srcs, required_types, extra_build_opts);
}

// Count up the runtime all the profiling_records that occured during execution.
// Also clears the buffer of profiling_records.
static cl_int opencl_tally_profiling_records(struct opencl_context *ctx) {
  cl_int err;
  for (int i = 0; i < ctx->profiling_records_used; i++) {
    struct profiling_record record = ctx->profiling_records[i];

    cl_ulong start_t, end_t;

    if ((err = clGetEventProfilingInfo(*record.event,
                                       CL_PROFILING_COMMAND_START,
                                       sizeof(start_t),
                                       &start_t,
                                       NULL)) != CL_SUCCESS) {
      return err;
    }

    if ((err = clGetEventProfilingInfo(*record.event,
                                       CL_PROFILING_COMMAND_END,
                                       sizeof(end_t),
                                       &end_t,
                                       NULL)) != CL_SUCCESS) {
      return err;
    }

    // OpenCL provides nanosecond resolution, but we want
    // microseconds.
    *record.runs += 1;
    *record.runtime += (end_t - start_t)/1000;

    if ((err = clReleaseEvent(*record.event)) != CL_SUCCESS) {
      return err;
    }
    free(record.event);
  }

  ctx->profiling_records_used = 0;

  return CL_SUCCESS;
}

// If profiling, produce an event associated with a profiling record.
static cl_event* opencl_get_event(struct opencl_context *ctx, int *runs, int64_t *runtime) {
    if (ctx->profiling_records_used == ctx->profiling_records_capacity) {
      ctx->profiling_records_capacity *= 2;
      ctx->profiling_records =
        realloc(ctx->profiling_records,
                ctx->profiling_records_capacity *
                sizeof(struct profiling_record));
    }
    cl_event *event = malloc(sizeof(cl_event));
    ctx->profiling_records[ctx->profiling_records_used].event = event;
    ctx->profiling_records[ctx->profiling_records_used].runs = runs;
    ctx->profiling_records[ctx->profiling_records_used].runtime = runtime;
    ctx->profiling_records_used++;
    return event;
}

// Allocate memory from driver. The problem is that OpenCL may perform
// lazy allocation, so we cannot know whether an allocation succeeded
// until the first time we try to use it.  Hence we immediately
// perform a write to see if the allocation succeeded.  This is slow,
// but the assumption is that this operation will be rare (most things
// will go through the free list).
static int opencl_alloc_actual(struct opencl_context *ctx, size_t size, cl_mem *mem_out) {
  int error;
  *mem_out = clCreateBuffer(ctx->ctx, CL_MEM_READ_WRITE, size, NULL, &error);

  if (error != CL_SUCCESS) {
    return error;
  }

  int x = 2;
  error = clEnqueueWriteBuffer(ctx->queue, *mem_out, 1, 0, sizeof(x), &x, 0, NULL, NULL);

  // No need to wait for completion here. clWaitForEvents() cannot
  // return mem object allocation failures. This implies that the
  // buffer is faulted onto the device on enqueue. (Observation by
  // Andreas Kloeckner.)

  return error;
}

static int opencl_alloc(struct opencl_context *ctx, size_t min_size, const char *tag, cl_mem *mem_out) {
  (void)tag;
  if (min_size < sizeof(int)) {
    min_size = sizeof(int);
  }

  size_t size;

  if (free_list_find(&ctx->free_list, min_size, &size, mem_out) == 0) {
    // Successfully found a free block.  Is it big enough?
    //
    // FIXME: we might also want to check whether the block is *too
    // big*, to avoid internal fragmentation.  However, this can
    // sharply impact performance on programs where arrays change size
    // frequently.  Fortunately, such allocations are usually fairly
    // short-lived, as they are necessarily within a loop, so the risk
    // of internal fragmentation resulting in an OOM situation is
    // limited.  However, it would be preferable if we could go back
    // and *shrink* oversize allocations when we encounter an OOM
    // condition.  That is technically feasible, since we do not
    // expose OpenCL pointer values directly to the application, but
    // instead rely on a level of indirection.
    if (size >= min_size) {
      if (ctx->cfg.debugging) {
        fprintf(stderr, "No need to allocate: Found a block in the free list.\n");
      }

      return CL_SUCCESS;
    } else {
      if (ctx->cfg.debugging) {
        fprintf(stderr, "Found a free block, but it was too small.\n");
      }

      // Not just right - free it.
      int error = clReleaseMemObject(*mem_out);
      if (error != CL_SUCCESS) {
        return error;
      }
    }
  }

  // We have to allocate a new block from the driver.  If the
  // allocation does not succeed, then we might be in an out-of-memory
  // situation.  We now start freeing things from the free list until
  // we think we have freed enough that the allocation will succeed.
  // Since we don't know how far the allocation is from fitting, we
  // have to check after every deallocation.  This might be pretty
  // expensive.  Let's hope that this case is hit rarely.

  if (ctx->cfg.debugging) {
    fprintf(stderr, "Actually allocating the desired block.\n");
  }

  int error = opencl_alloc_actual(ctx, min_size, mem_out);

  while (error == CL_MEM_OBJECT_ALLOCATION_FAILURE) {
    if (ctx->cfg.debugging) {
      fprintf(stderr, "Out of OpenCL memory: releasing entry from the free list...\n");
    }
    cl_mem mem;
    if (free_list_first(&ctx->free_list, &mem) == 0) {
      error = clReleaseMemObject(mem);
      if (error != CL_SUCCESS) {
        return error;
      }
    } else {
      break;
    }
    error = opencl_alloc_actual(ctx, min_size, mem_out);
  }

  return error;
}

static int opencl_free(struct opencl_context *ctx, cl_mem mem, const char *tag) {
  size_t size;
  cl_mem existing_mem;

  // If there is already a block with this tag, then remove it.
  if (free_list_find(&ctx->free_list, -1, &size, &existing_mem) == 0) {
    int error = clReleaseMemObject(existing_mem);
    if (error != CL_SUCCESS) {
      return error;
    }
  }

  int error = clGetMemObjectInfo(mem, CL_MEM_SIZE, sizeof(size_t), &size, NULL);

  if (error == CL_SUCCESS) {
    free_list_insert(&ctx->free_list, size, mem, tag);
  }

  return error;
}

static int opencl_free_all(struct opencl_context *ctx) {
  cl_mem mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, &mem) == 0) {
    int error = clReleaseMemObject(mem);
    if (error != CL_SUCCESS) {
      return error;
    }
  }

  return CL_SUCCESS;
}

// Free everything that belongs to 'ctx', but do not free 'ctx'
// itself.
static void teardown_opencl(struct opencl_context *ctx) {
  (void)opencl_tally_profiling_records(ctx);
  free(ctx->profiling_records);
  (void)opencl_free_all(ctx);
  (void)clReleaseCommandQueue(ctx->queue);
  (void)clReleaseContext(ctx->ctx);
}

// End of opencl.h.

static const char *opencl_program[] =
                  {"#ifdef cl_clang_storage_class_specifiers\n#pragma OPENCL EXTENSION cl_clang_storage_class_specifiers : enable\n#endif\n#pragma OPENCL EXTENSION cl_khr_byte_addressable_store : enable\n__kernel void dummy_kernel(__global unsigned char *dummy, int n)\n{\n    const int thread_gid = get_global_id(0);\n    \n    if (thread_gid >= n)\n        return;\n}\ntypedef char int8_t;\ntypedef short int16_t;\ntypedef int int32_t;\ntypedef long int64_t;\ntypedef uchar uint8_t;\ntypedef ushort uint16_t;\ntypedef uint uint32_t;\ntypedef ulong uint64_t;\n#ifdef cl_nv_pragma_unroll\nstatic inline void mem_fence_global()\n{\n    asm(\"membar.gl;\");\n}\n#else\nstatic inline void mem_fence_global()\n{\n    mem_fence(CLK_LOCAL_MEM_FENCE | CLK_GLOBAL_MEM_FENCE);\n}\n#endif\nstatic inline void mem_fence_local()\n{\n    mem_fence(CLK_LOCAL_MEM_FENCE);\n}\nstatic inline uint8_t add8(uint8_t x, uint8_t y)\n{\n    return x + y;\n}\nstatic inline uint16_t add16(uint16_t x, uint16_t y)\n{\n    return x + y;\n}\nstatic inline uint32_t add32(uint32_t x, uint32_t y)\n{\n    return x + y;\n}\nstatic inline uint64_t add64(uint64_t x, uint64_t y)\n{\n    return x + y;\n}\nstatic inline uint8_t sub8(uint8_t x, uint8_t y)\n{\n    return x - y;\n}\nstatic inline uint16_t sub16(uint16_t x, uint16_t y)\n{\n    return x - y;\n}\nstatic inline uint32_t sub32(uint32_t x, uint32_t y)\n{\n    return x - y;\n}\nstatic inline uint64_t sub64(uint64_t x, uint64_t y)\n{\n    return x - y;\n}\nstatic inline uint8_t mul8(uint8_t x, uint8_t y)\n{\n    return x * y;\n}\nstatic inline uint16_t mul16(uint16_t x, uint16_t y)\n{\n    return x * y;\n}\nstatic inline uint32_t mul32(uint32_t x, uint32_t y)\n{\n    return x * y;\n}\nstatic inline uint64_t mul64(uint64_t x, uint64_t y)\n{\n    return x * y;\n}\nstatic inline uint8_t udiv8(uint8_t x, uint8_t y)\n{\n    return x / y;\n}\nstatic inline uint16_t udiv16(uint16_t x, uint16_t y)\n{\n    return x / y;\n}\nstatic inline uint32_t udiv32(uint32_t x, uint32_t y)\n{\n    return x / y;\n}\nstatic inline uint64_t udiv64(uint64_t x, uint64_t y)\n{\n    return x / y;\n}\nstatic ",
                   "inline uint8_t udiv_up8(uint8_t x, uint8_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint16_t udiv_up16(uint16_t x, uint16_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint32_t udiv_up32(uint32_t x, uint32_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint64_t udiv_up64(uint64_t x, uint64_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint8_t umod8(uint8_t x, uint8_t y)\n{\n    return x % y;\n}\nstatic inline uint16_t umod16(uint16_t x, uint16_t y)\n{\n    return x % y;\n}\nstatic inline uint32_t umod32(uint32_t x, uint32_t y)\n{\n    return x % y;\n}\nstatic inline uint64_t umod64(uint64_t x, uint64_t y)\n{\n    return x % y;\n}\nstatic inline uint8_t udiv_safe8(uint8_t x, uint8_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint16_t udiv_safe16(uint16_t x, uint16_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint32_t udiv_safe32(uint32_t x, uint32_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint64_t udiv_safe64(uint64_t x, uint64_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint8_t umod_safe8(uint8_t x, uint8_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline uint16_t umod_safe16(uint16_t x, uint16_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline uint32_t umod_safe32(uint32_t x, uint32_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline uint64_t umod_safe64(uint64_t x, uint64_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int8_t sdiv8(int8_t x, int8_t y)\n{\n    int8_t q = x / y;\n    int8_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int16_t sdiv16(int16",
                   "_t x, int16_t y)\n{\n    int16_t q = x / y;\n    int16_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int32_t sdiv32(int32_t x, int32_t y)\n{\n    int32_t q = x / y;\n    int32_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int64_t sdiv64(int64_t x, int64_t y)\n{\n    int64_t q = x / y;\n    int64_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int8_t sdiv_up8(int8_t x, int8_t y)\n{\n    return sdiv8(x + y - 1, y);\n}\nstatic inline int16_t sdiv_up16(int16_t x, int16_t y)\n{\n    return sdiv16(x + y - 1, y);\n}\nstatic inline int32_t sdiv_up32(int32_t x, int32_t y)\n{\n    return sdiv32(x + y - 1, y);\n}\nstatic inline int64_t sdiv_up64(int64_t x, int64_t y)\n{\n    return sdiv64(x + y - 1, y);\n}\nstatic inline int8_t smod8(int8_t x, int8_t y)\n{\n    int8_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int16_t smod16(int16_t x, int16_t y)\n{\n    int16_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int32_t smod32(int32_t x, int32_t y)\n{\n    int32_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int64_t smod64(int64_t x, int64_t y)\n{\n    int64_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int8_t sdiv_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : sdiv8(x, y);\n}\nstatic inline int16_t sdiv_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : sdiv16(x, y);\n}\nstatic inline int32_t sdiv_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : sdiv32(x, y);\n}\nstatic inline int64_t sdiv_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : sdiv64(x, y);\n}\nstatic inline int8_t sdiv_up_safe8(int8_t x, int8_t y)\n{\n    return sdiv_safe8(x + y - 1, y);\n}\nstatic inline int16_t sdiv_up_safe16(int16_t x, int16_t y)\n{\n    return sdiv_safe16(x + y - 1, y",
                   ");\n}\nstatic inline int32_t sdiv_up_safe32(int32_t x, int32_t y)\n{\n    return sdiv_safe32(x + y - 1, y);\n}\nstatic inline int64_t sdiv_up_safe64(int64_t x, int64_t y)\n{\n    return sdiv_safe64(x + y - 1, y);\n}\nstatic inline int8_t smod_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : smod8(x, y);\n}\nstatic inline int16_t smod_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : smod16(x, y);\n}\nstatic inline int32_t smod_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : smod32(x, y);\n}\nstatic inline int64_t smod_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : smod64(x, y);\n}\nstatic inline int8_t squot8(int8_t x, int8_t y)\n{\n    return x / y;\n}\nstatic inline int16_t squot16(int16_t x, int16_t y)\n{\n    return x / y;\n}\nstatic inline int32_t squot32(int32_t x, int32_t y)\n{\n    return x / y;\n}\nstatic inline int64_t squot64(int64_t x, int64_t y)\n{\n    return x / y;\n}\nstatic inline int8_t srem8(int8_t x, int8_t y)\n{\n    return x % y;\n}\nstatic inline int16_t srem16(int16_t x, int16_t y)\n{\n    return x % y;\n}\nstatic inline int32_t srem32(int32_t x, int32_t y)\n{\n    return x % y;\n}\nstatic inline int64_t srem64(int64_t x, int64_t y)\n{\n    return x % y;\n}\nstatic inline int8_t squot_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int16_t squot_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int32_t squot_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int64_t squot_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int8_t srem_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int16_t srem_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int32_t srem_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int64_t srem_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int8_t smin8(int8_t x, int8_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int16_t smi",
                   "n16(int16_t x, int16_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int32_t smin32(int32_t x, int32_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int64_t smin64(int64_t x, int64_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint8_t umin8(uint8_t x, uint8_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint16_t umin16(uint16_t x, uint16_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint32_t umin32(uint32_t x, uint32_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint64_t umin64(uint64_t x, uint64_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int8_t smax8(int8_t x, int8_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int16_t smax16(int16_t x, int16_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int32_t smax32(int32_t x, int32_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int64_t smax64(int64_t x, int64_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint8_t umax8(uint8_t x, uint8_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint16_t umax16(uint16_t x, uint16_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint32_t umax32(uint32_t x, uint32_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint64_t umax64(uint64_t x, uint64_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint8_t shl8(uint8_t x, uint8_t y)\n{\n    return x << y;\n}\nstatic inline uint16_t shl16(uint16_t x, uint16_t y)\n{\n    return x << y;\n}\nstatic inline uint32_t shl32(uint32_t x, uint32_t y)\n{\n    return x << y;\n}\nstatic inline uint64_t shl64(uint64_t x, uint64_t y)\n{\n    return x << y;\n}\nstatic inline uint8_t lshr8(uint8_t x, uint8_t y)\n{\n    return x >> y;\n}\nstatic inline uint16_t lshr16(uint16_t x, uint16_t y)\n{\n    return x >> y;\n}\nstatic inline uint32_t lshr32(uint32_t x, uint32_t y)\n{\n    return x >> y;\n}\nstatic inline uint64_t lshr64(uint64_t x, uint64_t y)\n{\n    return x >> y;\n}\nstatic inline int8_t ashr8(int8_t x, int8_t y)\n{\n    return x >> y;\n}\nstatic inline int16_t ashr16(int16_t x, int16_t y)\n{\n    return x >> y;\n}\nstatic inline int32_t ashr32(int32_t x, int32_t y)",
                   "\n{\n    return x >> y;\n}\nstatic inline int64_t ashr64(int64_t x, int64_t y)\n{\n    return x >> y;\n}\nstatic inline uint8_t and8(uint8_t x, uint8_t y)\n{\n    return x & y;\n}\nstatic inline uint16_t and16(uint16_t x, uint16_t y)\n{\n    return x & y;\n}\nstatic inline uint32_t and32(uint32_t x, uint32_t y)\n{\n    return x & y;\n}\nstatic inline uint64_t and64(uint64_t x, uint64_t y)\n{\n    return x & y;\n}\nstatic inline uint8_t or8(uint8_t x, uint8_t y)\n{\n    return x | y;\n}\nstatic inline uint16_t or16(uint16_t x, uint16_t y)\n{\n    return x | y;\n}\nstatic inline uint32_t or32(uint32_t x, uint32_t y)\n{\n    return x | y;\n}\nstatic inline uint64_t or64(uint64_t x, uint64_t y)\n{\n    return x | y;\n}\nstatic inline uint8_t xor8(uint8_t x, uint8_t y)\n{\n    return x ^ y;\n}\nstatic inline uint16_t xor16(uint16_t x, uint16_t y)\n{\n    return x ^ y;\n}\nstatic inline uint32_t xor32(uint32_t x, uint32_t y)\n{\n    return x ^ y;\n}\nstatic inline uint64_t xor64(uint64_t x, uint64_t y)\n{\n    return x ^ y;\n}\nstatic inline bool ult8(uint8_t x, uint8_t y)\n{\n    return x < y;\n}\nstatic inline bool ult16(uint16_t x, uint16_t y)\n{\n    return x < y;\n}\nstatic inline bool ult32(uint32_t x, uint32_t y)\n{\n    return x < y;\n}\nstatic inline bool ult64(uint64_t x, uint64_t y)\n{\n    return x < y;\n}\nstatic inline bool ule8(uint8_t x, uint8_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule16(uint16_t x, uint16_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule32(uint32_t x, uint32_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule64(uint64_t x, uint64_t y)\n{\n    return x <= y;\n}\nstatic inline bool slt8(int8_t x, int8_t y)\n{\n    return x < y;\n}\nstatic inline bool slt16(int16_t x, int16_t y)\n{\n    return x < y;\n}\nstatic inline bool slt32(int32_t x, int32_t y)\n{\n    return x < y;\n}\nstatic inline bool slt64(int64_t x, int64_t y)\n{\n    return x < y;\n}\nstatic inline bool sle8(int8_t x, int8_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle16(int16_t x, int16_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle32(int32_t x, int32_",
                   "t y)\n{\n    return x <= y;\n}\nstatic inline bool sle64(int64_t x, int64_t y)\n{\n    return x <= y;\n}\nstatic inline int8_t pow8(int8_t x, int8_t y)\n{\n    int8_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int16_t pow16(int16_t x, int16_t y)\n{\n    int16_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int32_t pow32(int32_t x, int32_t y)\n{\n    int32_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int64_t pow64(int64_t x, int64_t y)\n{\n    int64_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline bool itob_i8_bool(int8_t x)\n{\n    return x;\n}\nstatic inline bool itob_i16_bool(int16_t x)\n{\n    return x;\n}\nstatic inline bool itob_i32_bool(int32_t x)\n{\n    return x;\n}\nstatic inline bool itob_i64_bool(int64_t x)\n{\n    return x;\n}\nstatic inline int8_t btoi_bool_i8(bool x)\n{\n    return x;\n}\nstatic inline int16_t btoi_bool_i16(bool x)\n{\n    return x;\n}\nstatic inline int32_t btoi_bool_i32(bool x)\n{\n    return x;\n}\nstatic inline int64_t btoi_bool_i64(bool x)\n{\n    return x;\n}\n#define sext_i8_i8(x) ((int8_t) (int8_t) x)\n#define sext_i8_i16(x) ((int16_t) (int8_t) x)\n#define sext_i8_i32(x) ((int32_t) (int8_t) x)\n#define sext_i8_i64(x) ((int64_t) (int8_t) x)\n#define sext_i16_i8(x) ((int8_t) (int16_t) x)\n#define sext_i16_i16(x) ((int16_t) (int16_t) x)\n#define sext_i16_i32(x) ((int32_t) (int16_t) x)\n#define sext_i16_i64(x) ((int64_t) (int16_t) x)\n#define sext_i32_i8(x) ((int8_t) (int32_t) x)\n#define sext_i32_i16(x) ((int16_t) (int32_t) x)\n#define sext_i32_i32(x) ((int32_t) (int32_t) x)\n#define sext_i32_i64(x) ((int64_t) (int32_t) x)\n#defi",
                   "ne sext_i64_i8(x) ((int8_t) (int64_t) x)\n#define sext_i64_i16(x) ((int16_t) (int64_t) x)\n#define sext_i64_i32(x) ((int32_t) (int64_t) x)\n#define sext_i64_i64(x) ((int64_t) (int64_t) x)\n#define zext_i8_i8(x) ((int8_t) (uint8_t) x)\n#define zext_i8_i16(x) ((int16_t) (uint8_t) x)\n#define zext_i8_i32(x) ((int32_t) (uint8_t) x)\n#define zext_i8_i64(x) ((int64_t) (uint8_t) x)\n#define zext_i16_i8(x) ((int8_t) (uint16_t) x)\n#define zext_i16_i16(x) ((int16_t) (uint16_t) x)\n#define zext_i16_i32(x) ((int32_t) (uint16_t) x)\n#define zext_i16_i64(x) ((int64_t) (uint16_t) x)\n#define zext_i32_i8(x) ((int8_t) (uint32_t) x)\n#define zext_i32_i16(x) ((int16_t) (uint32_t) x)\n#define zext_i32_i32(x) ((int32_t) (uint32_t) x)\n#define zext_i32_i64(x) ((int64_t) (uint32_t) x)\n#define zext_i64_i8(x) ((int8_t) (uint64_t) x)\n#define zext_i64_i16(x) ((int16_t) (uint64_t) x)\n#define zext_i64_i32(x) ((int32_t) (uint64_t) x)\n#define zext_i64_i64(x) ((int64_t) (uint64_t) x)\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_popc8(int8_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    return popcount(x);\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_popc8(int8_t x)\n{\n    return __popc(zext_i8_i32(x));\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    return __popc(zext_i16_i32(x));\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    return __popc(x);\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    return __popcll(x);\n}\n#else\nstatic int32_t futrts_popc8(int8_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    int c = 0;\n    \n    for ",
                   "(; x; ++c)\n        x &= x - 1;\n    return c;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)\n{\n    return mul_hi(a, b);\n}\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)\n{\n    return mul_hi(a, b);\n}\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)\n{\n    return mul_hi(a, b);\n}\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)\n{\n    return mul_hi(a, b);\n}\n#elif defined(__CUDA_ARCH__)\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)\n{\n    uint16_t aa = a;\n    uint16_t bb = b;\n    \n    return aa * bb >> 8;\n}\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)\n{\n    uint32_t aa = a;\n    uint32_t bb = b;\n    \n    return aa * bb >> 16;\n}\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)\n{\n    return mulhi(a, b);\n}\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)\n{\n    return mul64hi(a, b);\n}\n#else\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)\n{\n    uint16_t aa = a;\n    uint16_t bb = b;\n    \n    return aa * bb >> 8;\n}\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)\n{\n    uint32_t aa = a;\n    uint32_t bb = b;\n    \n    return aa * bb >> 16;\n}\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)\n{\n    uint64_t aa = a;\n    uint64_t bb = b;\n    \n    return aa * bb >> 32;\n}\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)\n{\n    __uint128_t aa = a;\n    __uint128_t bb = b;\n    \n    return aa * bb >> 64;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)\n{\n    return mad_hi(a, b, c);\n}\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)\n{\n    return mad_hi(a, b, c);\n}\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)\n{\n    return mad_hi(a, b, c);\n}\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)\n{\n    return mad_hi(a, b, c);\n}\n#else\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)\n{\n    return futrts_mul_hi8(a, b) + c;\n}\nstatic uint16_t futrts_mad_hi16(uin",
                   "t16_t a, uint16_t b, uint16_t c)\n{\n    return futrts_mul_hi16(a, b) + c;\n}\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)\n{\n    return futrts_mul_hi32(a, b) + c;\n}\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)\n{\n    return futrts_mul_hi64(a, b) + c;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    return clz(x);\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    return __clz(zext_i8_i32(x)) - 24;\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    return __clz(zext_i16_i32(x)) - 16;\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    return __clz(x);\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    return __clzll(x);\n}\n#else\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_ctzz8(int8_t x)\n{\n    int i = 0;\n    \n    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\nstatic int32_t futrts_ctzz16(int16_t ",
                   "x)\n{\n    int i = 0;\n    \n    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\nstatic int32_t futrts_ctzz32(int32_t x)\n{\n    int i = 0;\n    \n    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\nstatic int32_t futrts_ctzz64(int64_t x)\n{\n    int i = 0;\n    \n    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_ctzz8(int8_t x)\n{\n    int y = __ffs(x);\n    \n    return y == 0 ? 8 : y - 1;\n}\nstatic int32_t futrts_ctzz16(int16_t x)\n{\n    int y = __ffs(x);\n    \n    return y == 0 ? 16 : y - 1;\n}\nstatic int32_t futrts_ctzz32(int32_t x)\n{\n    int y = __ffs(x);\n    \n    return y == 0 ? 32 : y - 1;\n}\nstatic int32_t futrts_ctzz64(int64_t x)\n{\n    int y = __ffsll(x);\n    \n    return y == 0 ? 64 : y - 1;\n}\n#else\nstatic int32_t futrts_ctzz8(int8_t x)\n{\n    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);\n}\nstatic int32_t futrts_ctzz16(int16_t x)\n{\n    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);\n}\nstatic int32_t futrts_ctzz32(int32_t x)\n{\n    return x == 0 ? 32 : __builtin_ctz(x);\n}\nstatic int32_t futrts_ctzz64(int64_t x)\n{\n    return x == 0 ? 64 : __builtin_ctzl(x);\n}\n#endif\nstatic inline float fdiv32(float x, float y)\n{\n    return x / y;\n}\nstatic inline float fadd32(float x, float y)\n{\n    return x + y;\n}\nstatic inline float fsub32(float x, float y)\n{\n    return x - y;\n}\nstatic inline float fmul32(float x, float y)\n{\n    return x * y;\n}\nstatic inline float fmin32(float x, float y)\n{\n    return fmin(x, y);\n}\nstatic inline float fmax32(float x, float y)\n{\n    return fmax(x, y);\n}\nstatic inline float fpow32(float x, float y)\n{\n    return pow(x, y);\n}\nstatic inline bool cmplt32(float x, float y)\n{\n    return x < y;\n}\nstatic inline bool cmple32(float x, float y)\n{\n    return x <= y;\n}\nstatic inline float sitofp_i8_f32(int8_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i16_f32(int16_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i32_f32(int32_t x)",
                   "\n{\n    return (float) x;\n}\nstatic inline float sitofp_i64_f32(int64_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i8_f32(uint8_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i16_f32(uint16_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i32_f32(uint32_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i64_f32(uint64_t x)\n{\n    return (float) x;\n}\nstatic inline int8_t fptosi_f32_i8(float x)\n{\n    return (int8_t) x;\n}\nstatic inline int16_t fptosi_f32_i16(float x)\n{\n    return (int16_t) x;\n}\nstatic inline int32_t fptosi_f32_i32(float x)\n{\n    return (int32_t) x;\n}\nstatic inline int64_t fptosi_f32_i64(float x)\n{\n    return (int64_t) x;\n}\nstatic inline uint8_t fptoui_f32_i8(float x)\n{\n    return (uint8_t) x;\n}\nstatic inline uint16_t fptoui_f32_i16(float x)\n{\n    return (uint16_t) x;\n}\nstatic inline uint32_t fptoui_f32_i32(float x)\n{\n    return (uint32_t) x;\n}\nstatic inline uint64_t fptoui_f32_i64(float x)\n{\n    return (uint64_t) x;\n}\nstatic inline float futrts_log32(float x)\n{\n    return log(x);\n}\nstatic inline float futrts_log2_32(float x)\n{\n    return log2(x);\n}\nstatic inline float futrts_log10_32(float x)\n{\n    return log10(x);\n}\nstatic inline float futrts_sqrt32(float x)\n{\n    return sqrt(x);\n}\nstatic inline float futrts_exp32(float x)\n{\n    return exp(x);\n}\nstatic inline float futrts_cos32(float x)\n{\n    return cos(x);\n}\nstatic inline float futrts_sin32(float x)\n{\n    return sin(x);\n}\nstatic inline float futrts_tan32(float x)\n{\n    return tan(x);\n}\nstatic inline float futrts_acos32(float x)\n{\n    return acos(x);\n}\nstatic inline float futrts_asin32(float x)\n{\n    return asin(x);\n}\nstatic inline float futrts_atan32(float x)\n{\n    return atan(x);\n}\nstatic inline float futrts_cosh32(float x)\n{\n    return cosh(x);\n}\nstatic inline float futrts_sinh32(float x)\n{\n    return sinh(x);\n}\nstatic inline float futrts_tanh32(float x)\n{\n    return tanh(x);\n}\nstatic inline float futrts_acosh32(float x)\n{\n    return acosh(x);\n}\nstatic inline fl",
                   "oat futrts_asinh32(float x)\n{\n    return asinh(x);\n}\nstatic inline float futrts_atanh32(float x)\n{\n    return atanh(x);\n}\nstatic inline float futrts_atan2_32(float x, float y)\n{\n    return atan2(x, y);\n}\nstatic inline float futrts_gamma32(float x)\n{\n    return tgamma(x);\n}\nstatic inline float futrts_lgamma32(float x)\n{\n    return lgamma(x);\n}\nstatic inline bool futrts_isnan32(float x)\n{\n    return isnan(x);\n}\nstatic inline bool futrts_isinf32(float x)\n{\n    return isinf(x);\n}\nstatic inline int32_t futrts_to_bits32(float x)\n{\n    union {\n        float f;\n        int32_t t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\nstatic inline float futrts_from_bits32(int32_t x)\n{\n    union {\n        int32_t f;\n        float t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\n#ifdef __OPENCL_VERSION__\nstatic inline float fmod32(float x, float y)\n{\n    return fmod(x, y);\n}\nstatic inline float futrts_round32(float x)\n{\n    return rint(x);\n}\nstatic inline float futrts_floor32(float x)\n{\n    return floor(x);\n}\nstatic inline float futrts_ceil32(float x)\n{\n    return ceil(x);\n}\nstatic inline float futrts_lerp32(float v0, float v1, float t)\n{\n    return mix(v0, v1, t);\n}\nstatic inline float futrts_mad32(float a, float b, float c)\n{\n    return mad(a, b, c);\n}\nstatic inline float futrts_fma32(float a, float b, float c)\n{\n    return fma(a, b, c);\n}\n#else\nstatic inline float fmod32(float x, float y)\n{\n    return fmodf(x, y);\n}\nstatic inline float futrts_round32(float x)\n{\n    return rintf(x);\n}\nstatic inline float futrts_floor32(float x)\n{\n    return floorf(x);\n}\nstatic inline float futrts_ceil32(float x)\n{\n    return ceilf(x);\n}\nstatic inline float futrts_lerp32(float v0, float v1, float t)\n{\n    return v0 + (v1 - v0) * t;\n}\nstatic inline float futrts_mad32(float a, float b, float c)\n{\n    return a * b + c;\n}\nstatic inline float futrts_fma32(float a, float b, float c)\n{\n    return fmaf(a, b, c);\n}\n#endif\n// Start of atomics.h\n\ninline int32_t atomic_add_i32_global(volatile __global int32_t *p, ",
                   "int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline int32_t atomic_add_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline float atomic_fadd_f32_global(volatile __global float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg((volatile __global int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline float atomic_fadd_f32_local(volatile __local float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg((volatile __local int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline int32_t atomic_smax_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smax_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p",
                   ", x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xchg_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xchg_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t",
                   " atomic_cmpxchg_i32_global(volatile __global int32_t *p,\n                                         int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_local(volatile __local int32_t *p,\n                                         int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\n// End of atomics.h\n\n\n\n\n__kernel void gpu_map_transpose_f32(__local volatile\n                                    int64_t *block_9_backing_aligned_0,\n                                    int32_t destoffset_1, int32_t srcoffset_3,\n                                    int32_t num_arrays_4, int32_t x_elems_5,\n                                    int32_t y_elems_6, int32_t mulx_7,\n                                    int32_t muly_8, __global\n                                    unsigned char *destmem_0, __global\n                                    unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict block_9_backing_0 = (__local volatile\n                                                         char *) block_9_backing_aligned_0;\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odat",
                   "a_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_global_id_0_37;\n    int32_t y_index_32 = get_group_id_1_41 * 32 + get_local_id_1_39;\n    \n    if (slt32(x_index_31, x_elems_5)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_in_35 = (y_index_32 + j_43 * 8) * x_elems_5 +\n                    x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, y_elems_6)) {\n                ((__local float *) block_9)[sext_i32_i64((get_local_id_1_39 +\n                                                          j_43 * 8) * 33 +\n                                            get_local_id_0_38)] = ((__global\n                                                                    float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                                       index_in_35)];\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 32 + get_local_id_0_38;\n    y_index_32 = get_group_id_0_40 * 32 + get_local_id_1_39;\n    if (slt32(x_index_31, y_elems_6)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_out_36 = (y_index_32 + j_43 * 8) * y_elems_6 +\n                    x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, x_elems_5)) {\n                ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                               index_out_36)] = ((__local\n                                                                  float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                                                                    33 +\n                                                                                    get_local_id_1_39 +\n                                                                                    j_43 *\n                  ",
                   "                                                                  8)];\n            }\n        }\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_low_height(__local volatile\n                                               int64_t *block_9_backing_aligned_0,\n                                               int32_t destoffset_1,\n                                               int32_t srcoffset_3,\n                                               int32_t num_arrays_4,\n                                               int32_t x_elems_5,\n                                               int32_t y_elems_6,\n                                               int32_t mulx_7, int32_t muly_8,\n                                               __global\n                                               unsigned char *destmem_0,\n                                               __global unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict block_9_backing_0 = (__local volatile\n                                                         char *) block_9_backing_aligned_0;\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 ",
                   "= get_group_id_0_40 * 16 * mulx_7 + get_local_id_0_38 +\n            srem32(get_local_id_1_39, mulx_7) * 16;\n    int32_t y_index_32 = get_group_id_1_41 * 16 + squot32(get_local_id_1_39,\n                                                          mulx_7);\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_31, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        ((__local float *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                    get_local_id_0_38)] = ((__global\n                                                            float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                               index_in_35)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 + squot32(get_local_id_0_38, mulx_7);\n    y_index_32 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_1_39 +\n        srem32(get_local_id_0_38, mulx_7) * 16;\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = ((__local\n                                                          float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                                                            17 +\n                                                                            get_local_id_1_39)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_low_width(__local volatile\n                                              int64_t *block_9_backing_aligned_0,\n                                              int32_t destoffset_1,\n                                              int32_t srcoffset_3,\n                                              int32_t num_arrays_4,\n                                              int32_t x_elems_5,\n      ",
                   "                                        int32_t y_elems_6, int32_t mulx_7,\n                                              int32_t muly_8, __global\n                                              unsigned char *destmem_0, __global\n                                              unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict block_9_backing_0 = (__local volatile\n                                                         char *) block_9_backing_aligned_0;\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 + squot32(get_local_id_0_38,\n                                                          muly_8);\n    int32_t y_index_32 = get_group_id_1_41 * 16 * muly_8 + get_local_id_1_39 +\n            srem32(get_local_id_0_38, muly_8) * 16;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_31, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        ((__local float *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                    get_local_id_0_38)] = ((__global\n                                                            float *) src",
                   "mem_2)[sext_i32_i64(idata_offset_34 +\n                                                                               index_in_35)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 * muly_8 + get_local_id_0_38 +\n        srem32(get_local_id_1_39, muly_8) * 16;\n    y_index_32 = get_group_id_0_40 * 16 + squot32(get_local_id_1_39, muly_8);\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = ((__local\n                                                          float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                                                            17 +\n                                                                            get_local_id_1_39)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_small(__local volatile\n                                          int64_t *block_9_backing_aligned_0,\n                                          int32_t destoffset_1,\n                                          int32_t srcoffset_3,\n                                          int32_t num_arrays_4,\n                                          int32_t x_elems_5, int32_t y_elems_6,\n                                          int32_t mulx_7, int32_t muly_8,\n                                          __global unsigned char *destmem_0,\n                                          __global unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict block_9_backing_0 = (__local volatile\n                                                         char *) block_9_backing_aligned_0;\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_g",
                   "lobal_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = squot32(get_global_id_0_37, y_elems_6 *\n                                          x_elems_5) * (y_elems_6 * x_elems_5);\n    int32_t x_index_31 = squot32(srem32(get_global_id_0_37, y_elems_6 *\n                                        x_elems_5), y_elems_6);\n    int32_t y_index_32 = srem32(get_global_id_0_37, y_elems_6);\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    int32_t index_out_36 = x_index_31 * y_elems_6 + y_index_32;\n    \n    if (slt32(get_global_id_0_37, x_elems_5 * y_elems_6 * num_arrays_4)) {\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = ((__global\n                                                          float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                             index_in_35)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void mainzicopy_35116(int64_t steps_26355, int64_t flat_dim_26636,\n                               __global unsigned char *mem_33827, __global\n                               unsigned char *mem_33836)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t copy_gtid_35116;\n    int32_t copy_ltid_35117;\n    int32_t copy_gid_35118;\n    \n    copy_gtid_35116 = get_global_id(0);\n    copy_ltid_35117 = get_local",
                   "_id(0);\n    copy_gid_35118 = get_group_id(0);\n    if (slt64(sext_i32_i64(copy_gtid_35116), steps_26355 * flat_dim_26636)) {\n        ((__global int64_t *) mem_33836)[(sext_i32_i64(copy_gtid_35116) -\n                                          squot64(sext_i32_i64(copy_gtid_35116),\n                                                  flat_dim_26636) *\n                                          flat_dim_26636) * steps_26355 +\n                                         squot64(sext_i32_i64(copy_gtid_35116),\n                                                 flat_dim_26636)] = ((__global\n                                                                      int64_t *) mem_33827)[squot64(sext_i32_i64(copy_gtid_35116),\n                                                                                                    flat_dim_26636) *\n                                                                                            flat_dim_26636 +\n                                                                                            smod64(sext_i32_i64(copy_gtid_35116) -\n                                                                                                   squot64(sext_i32_i64(copy_gtid_35116),\n                                                                                                           flat_dim_26636) *\n                                                                                                   flat_dim_26636 +\n                                                                                                   -1,\n                                                                                                   flat_dim_26636)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void mainziscan_stage1_30128(__global int *global_failure,\n                                      __local volatile\n                                      int64_t *scan_arr_mem_35008_backing_aligned_0,\n                                      int64_t n_26351, int64_t steps_26355,\n            ",
                   "                          float sims_per_year_26449,\n                                      int64_t flat_dim_26636, __global\n                                      unsigned char *res_mem_33488, __global\n                                      unsigned char *res_mem_33489, __global\n                                      unsigned char *mem_33827, __global\n                                      unsigned char *mem_33830,\n                                      int32_t num_threads_35002)\n{\n    #define segscan_group_sizze_30244 (mainzisegscan_group_sizze_30122)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_35008_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_35008_backing_aligned_0;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35003;\n    int32_t local_tid_35004;\n    int64_t group_sizze_35007;\n    int32_t wave_sizze_35006;\n    int32_t group_tid_35005;\n    \n    global_tid_35003 = get_global_id(0);\n    local_tid_35004 = get_local_id(0);\n    group_sizze_35007 = get_local_size(0);\n    wave_sizze_35006 = LOCKSTEP_WIDTH;\n    group_tid_35005 = get_group_id(0);\n    \n    int32_t phys_tid_30128;\n    \n    phys_tid_30128 = global_tid_35003;\n    \n    __local char *scan_arr_mem_35008;\n    \n    scan_arr_mem_35008 = (__local char *) scan_arr_mem_35008_backing_0;\n    \n    int64_t x_30249;\n    int64_t x_30250;\n    \n    x_30249 = 0;\n    for (int64_t j_35010 = 0; j_35010 < sdiv_up64(steps_26355 * flat_dim_26636,\n                                                  sext_i32_i64(num_threads_35002));\n         j_35010++) {\n        int64_t chunk_offset_35011 = segscan_group_sizze_30244 * j_35010 +\n                sext_i32_i64(group_tid_35005) * (segscan_group_sizze_30244 *\n                                                 sdiv_up64(steps_26355 *\n                                                           flat_dim_26636,\n    ",
                   "                                                       sext_i32_i64(num_threads_35002)));\n        int64_t flat_idx_35012 = chunk_offset_35011 +\n                sext_i32_i64(local_tid_35004);\n        int64_t gtid_30119 = squot64(flat_idx_35012, flat_dim_26636);\n        int64_t gtid_30127 = flat_idx_35012 - squot64(flat_idx_35012,\n                                                      flat_dim_26636) *\n                flat_dim_26636;\n        \n        // threads in bounds read input\n        {\n            if (slt64(gtid_30119, steps_26355) && slt64(gtid_30127,\n                                                        flat_dim_26636)) {\n                int64_t convop_x_32618 = add64(1, gtid_30119);\n                float binop_x_32619 = sitofp_i64_f32(convop_x_32618);\n                float index_primexp_32620 = binop_x_32619 / sims_per_year_26449;\n                int64_t binop_x_32610 = squot64(gtid_30127, n_26351);\n                int64_t binop_y_32611 = n_26351 * binop_x_32610;\n                int64_t new_index_32612 = gtid_30127 - binop_y_32611;\n                int64_t x_30253 = ((__global\n                                    int64_t *) res_mem_33488)[new_index_32612];\n                float x_30254 = ((__global\n                                  float *) res_mem_33489)[new_index_32612];\n                float x_30255 = index_primexp_32620 / x_30254;\n                float ceil_arg_30256 = x_30255 - 1.0F;\n                float res_30257;\n                \n                res_30257 = futrts_ceil32(ceil_arg_30256);\n                \n                int64_t res_30258 = fptosi_f32_i64(res_30257);\n                int64_t max_arg_30259 = sub64(x_30253, res_30258);\n                int64_t res_30260 = smax64(0, max_arg_30259);\n                bool cond_30261 = res_30260 == 0;\n                int64_t res_30262;\n                \n                if (cond_30261) {\n                    res_30262 = 1;\n                } else {\n                    res_30262 = res_30260;\n                }\n       ",
                   "         // write to-scan values to parameters\n                {\n                    x_30250 = res_30262;\n                }\n                // write mapped values results to global memory\n                {\n                    ((__global int64_t *) mem_33830)[gtid_30119 *\n                                                     flat_dim_26636 +\n                                                     gtid_30127] = res_30262;\n                }\n            }\n        }\n        // do one intra-group scan operation\n        {\n            // maybe restore some to-scan values to parameters, or read neutral\n            {\n                if (!(slt64(gtid_30119, steps_26355) && slt64(gtid_30127,\n                                                              flat_dim_26636))) {\n                    x_30250 = 0;\n                }\n            }\n            // combine with carry and write to local memory\n            {\n                int64_t res_30251 = add64(x_30249, x_30250);\n                \n                ((__local\n                  int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)] =\n                    res_30251;\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            \n            int64_t x_35013;\n            int64_t x_35014;\n            int64_t x_35016;\n            int64_t x_35017;\n            bool ltid_in_bounds_35019;\n            \n            ltid_in_bounds_35019 = slt64(sext_i32_i64(local_tid_35004),\n                                         segscan_group_sizze_30244);\n            \n            int32_t skip_threads_35020;\n            \n            // read input for in-block scan\n            {\n                if (ltid_in_bounds_35019) {\n                    x_35014 = ((volatile __local\n                                int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)];\n                    if ((local_tid_35004 - squot32(local_tid_35004, 32) * 32) ==\n                        0) {\n                        x_35013 = x_35014;\n                    }\n            ",
                   "    }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35020 = 1;\n                while (slt32(skip_threads_35020, 32)) {\n                    if (sle32(skip_threads_35020, local_tid_35004 -\n                              squot32(local_tid_35004, 32) * 32) &&\n                        ltid_in_bounds_35019) {\n                        // read operands\n                        {\n                            x_35013 = ((volatile __local\n                                        int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004) -\n                                                                       sext_i32_i64(skip_threads_35020)];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_35021 =\n                                 slt64(srem64(sext_i32_i64(local_tid_35004) +\n                                              chunk_offset_35011,\n                                              flat_dim_26636),\n                                       sext_i32_i64(local_tid_35004) +\n                                       chunk_offset_35011 -\n                                       (sext_i32_i64(local_tid_35004 -\n                                        skip_threads_35020) +\n                                        chunk_offset_35011));\n                            \n                            if (inactive_35021) {\n                                x_35013 = x_35014;\n                            }\n                            if (!inactive_35021) {\n                                int64_t res_35015 = add64(x_35013, x_35014);\n                                \n                                x_35013 = res_35015;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_35006, skip_threads_35020)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n              ",
                   "      if (sle32(skip_threads_35020, local_tid_35004 -\n                              squot32(local_tid_35004, 32) * 32) &&\n                        ltid_in_bounds_35019) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)] =\n                                x_35013;\n                            x_35014 = x_35013;\n                        }\n                    }\n                    if (sle32(wave_sizze_35006, skip_threads_35020)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35020 *= 2;\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            // last thread of block 'i' writes its result to offset 'i'\n            {\n                if ((local_tid_35004 - squot32(local_tid_35004, 32) * 32) ==\n                    31 && ltid_in_bounds_35019) {\n                    ((volatile __local\n                      int64_t *) scan_arr_mem_35008)[sext_i32_i64(squot32(local_tid_35004,\n                                                                          32))] =\n                        x_35013;\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n            {\n                int32_t skip_threads_35022;\n                \n                // read input for in-block scan\n                {\n                    if (squot32(local_tid_35004, 32) == 0 &&\n                        ltid_in_bounds_35019) {\n                        x_35017 = ((volatile __local\n                                    int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)];\n                        if ((local_tid_35004 - squot32(local_tid_35004, 32) *\n                             32) == 0) {\n                            x_35016 = x_35017;\n                        }\n ",
                   "                   }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_35022 = 1;\n                    while (slt32(skip_threads_35022, 32)) {\n                        if (sle32(skip_threads_35022, local_tid_35004 -\n                                  squot32(local_tid_35004, 32) * 32) &&\n                            (squot32(local_tid_35004, 32) == 0 &&\n                             ltid_in_bounds_35019)) {\n                            // read operands\n                            {\n                                x_35016 = ((volatile __local\n                                            int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004) -\n                                                                           sext_i32_i64(skip_threads_35022)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_35023 =\n                                     slt64(srem64(sext_i32_i64(local_tid_35004 *\n                                                  32 + 32 - 1) +\n                                                  chunk_offset_35011,\n                                                  flat_dim_26636),\n                                           sext_i32_i64(local_tid_35004 * 32 +\n                                           32 - 1) + chunk_offset_35011 -\n                                           (sext_i32_i64((local_tid_35004 -\n                                                          skip_threads_35022) *\n                                            32 + 32 - 1) + chunk_offset_35011));\n                                \n                                if (inactive_35023) {\n                                    x_35016 = x_35017;\n                                }\n                                if (!inactive_35023) {\n                                    int64_t res_35018 = add64(x_35016, x_35017);\n          ",
                   "                          \n                                    x_35016 = res_35018;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_35006, skip_threads_35022)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_35022, local_tid_35004 -\n                                  squot32(local_tid_35004, 32) * 32) &&\n                            (squot32(local_tid_35004, 32) == 0 &&\n                             ltid_in_bounds_35019)) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)] =\n                                    x_35016;\n                                x_35017 = x_35016;\n                            }\n                        }\n                        if (sle32(wave_sizze_35006, skip_threads_35022)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_35022 *= 2;\n                    }\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            // carry-in for every block except the first\n            {\n                if (!(squot32(local_tid_35004, 32) == 0 ||\n                      !ltid_in_bounds_35019)) {\n                    // read operands\n                    {\n                        x_35014 = x_35013;\n                        x_35013 = ((__local\n                                    int64_t *) scan_arr_mem_35008)[sext_i32_i64(squot32(local_tid_35004,\n                                                                                        32)) -\n                                                                   1];\n                    }\n                    // perform operation\n                    {\n                        bool inactive_35024 ",
                   "=\n                             slt64(srem64(sext_i32_i64(local_tid_35004) +\n                                          chunk_offset_35011, flat_dim_26636),\n                                   sext_i32_i64(local_tid_35004) +\n                                   chunk_offset_35011 -\n                                   (sext_i32_i64(squot32(local_tid_35004, 32) *\n                                    32 - 1) + chunk_offset_35011));\n                        \n                        if (inactive_35024) {\n                            x_35013 = x_35014;\n                        }\n                        if (!inactive_35024) {\n                            int64_t res_35015 = add64(x_35013, x_35014);\n                            \n                            x_35013 = res_35015;\n                        }\n                    }\n                    // write final result\n                    {\n                        ((__local\n                          int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)] =\n                            x_35013;\n                    }\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            // restore correct values for first block\n            {\n                if (squot32(local_tid_35004, 32) == 0) {\n                    ((__local\n                      int64_t *) scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)] =\n                        x_35014;\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            // threads in bounds write partial scan result\n            {\n                if (slt64(gtid_30119, steps_26355) && slt64(gtid_30127,\n                                                            flat_dim_26636)) {\n                    ((__global int64_t *) mem_33827)[gtid_30119 *\n                                                     flat_dim_26636 +\n                                                     gtid_30127] = ((__local\n                                                                     int64_t *",
                   ") scan_arr_mem_35008)[sext_i32_i64(local_tid_35004)];\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n            // first thread reads last element as carry-in for next iteration\n            {\n                bool crosses_segment_35025 = slt64(srem64(chunk_offset_35011 +\n                                                          segscan_group_sizze_30244,\n                                                          flat_dim_26636),\n                                                   chunk_offset_35011 +\n                                                   segscan_group_sizze_30244 -\n                                                   (chunk_offset_35011 +\n                                                    segscan_group_sizze_30244 -\n                                                    1));\n                bool should_load_carry_35026 = local_tid_35004 == 0 &&\n                     !crosses_segment_35025;\n                \n                if (should_load_carry_35026) {\n                    x_30249 = ((__local\n                                int64_t *) scan_arr_mem_35008)[segscan_group_sizze_30244 -\n                                                               1];\n                }\n                if (!should_load_carry_35026) {\n                    x_30249 = 0;\n                }\n            }\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segscan_group_sizze_30244\n}\n__kernel void mainziscan_stage2_30128(__global int *global_failure,\n                                      __local volatile\n                                      int64_t *scan_arr_mem_35032_backing_aligned_0,\n                                      int64_t steps_26355,\n                                      int64_t flat_dim_26636, __global\n                                      unsigned char *mem_33827,\n                                      int64_t stage1_num_groups_35001,\n                                      int32_t num_threads_35002)\n{\n    #d",
                   "efine segscan_group_sizze_30244 (mainzisegscan_group_sizze_30122)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_35032_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_35032_backing_aligned_0;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35027;\n    int32_t local_tid_35028;\n    int64_t group_sizze_35031;\n    int32_t wave_sizze_35030;\n    int32_t group_tid_35029;\n    \n    global_tid_35027 = get_global_id(0);\n    local_tid_35028 = get_local_id(0);\n    group_sizze_35031 = get_local_size(0);\n    wave_sizze_35030 = LOCKSTEP_WIDTH;\n    group_tid_35029 = get_group_id(0);\n    \n    int32_t phys_tid_30128;\n    \n    phys_tid_30128 = global_tid_35027;\n    \n    __local char *scan_arr_mem_35032;\n    \n    scan_arr_mem_35032 = (__local char *) scan_arr_mem_35032_backing_0;\n    \n    int64_t flat_idx_35034;\n    \n    flat_idx_35034 = (sext_i32_i64(local_tid_35028) + 1) *\n        (segscan_group_sizze_30244 * sdiv_up64(steps_26355 * flat_dim_26636,\n                                               sext_i32_i64(num_threads_35002))) -\n        1;\n    \n    int64_t gtid_30119;\n    \n    gtid_30119 = squot64(flat_idx_35034, flat_dim_26636);\n    \n    int64_t gtid_30127;\n    \n    gtid_30127 = flat_idx_35034 - squot64(flat_idx_35034, flat_dim_26636) *\n        flat_dim_26636;\n    // threads in bound read carries; others get neutral element\n    {\n        if (slt64(gtid_30119, steps_26355) && slt64(gtid_30127,\n                                                    flat_dim_26636)) {\n            ((__local\n              int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)] =\n                ((__global int64_t *) mem_33827)[gtid_30119 * flat_dim_26636 +\n                                                 gtid_30127];\n        } else {\n            ((__local\n              int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid",
                   "_35028)] = 0;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t x_30249;\n    int64_t x_30250;\n    int64_t x_35035;\n    int64_t x_35036;\n    bool ltid_in_bounds_35038;\n    \n    ltid_in_bounds_35038 = slt64(sext_i32_i64(local_tid_35028),\n                                 stage1_num_groups_35001);\n    \n    int32_t skip_threads_35039;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_35038) {\n            x_30250 = ((volatile __local\n                        int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)];\n            if ((local_tid_35028 - squot32(local_tid_35028, 32) * 32) == 0) {\n                x_30249 = x_30250;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_35039 = 1;\n        while (slt32(skip_threads_35039, 32)) {\n            if (sle32(skip_threads_35039, local_tid_35028 -\n                      squot32(local_tid_35028, 32) * 32) &&\n                ltid_in_bounds_35038) {\n                // read operands\n                {\n                    x_30249 = ((volatile __local\n                                int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028) -\n                                                               sext_i32_i64(skip_threads_35039)];\n                }\n                // perform operation\n                {\n                    bool inactive_35040 =\n                         slt64(srem64((sext_i32_i64(local_tid_35028) + 1) *\n                                      (segscan_group_sizze_30244 *\n                                       sdiv_up64(steps_26355 * flat_dim_26636,\n                                                 sext_i32_i64(num_threads_35002))) -\n                                      1, flat_dim_26636),\n                               (sext_i32_i64(local_tid_35028) + 1) *\n                               (segscan_group_sizze_30244 *\n                                sdiv_up64(steps_26355 * flat_dim_26636,\n                         ",
                   "                 sext_i32_i64(num_threads_35002))) -\n                               1 - ((sext_i32_i64(local_tid_35028 -\n                                     skip_threads_35039) + 1) *\n                                    (segscan_group_sizze_30244 *\n                                     sdiv_up64(steps_26355 * flat_dim_26636,\n                                               sext_i32_i64(num_threads_35002))) -\n                                    1));\n                    \n                    if (inactive_35040) {\n                        x_30249 = x_30250;\n                    }\n                    if (!inactive_35040) {\n                        int64_t res_30251 = add64(x_30249, x_30250);\n                        \n                        x_30249 = res_30251;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_35030, skip_threads_35039)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_35039, local_tid_35028 -\n                      squot32(local_tid_35028, 32) * 32) &&\n                ltid_in_bounds_35038) {\n                // write result\n                {\n                    ((volatile __local\n                      int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)] =\n                        x_30249;\n                    x_30250 = x_30249;\n                }\n            }\n            if (sle32(wave_sizze_35030, skip_threads_35039)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_35039 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_35028 - squot32(local_tid_35028, 32) * 32) == 31 &&\n            ltid_in_bounds_35038) {\n            ((volatile __local\n              int64_t *) scan_arr_mem_35032)[sext_i32_i64(squot32(local_tid_35028,\n                                                                  32))] =\n                x_30249;\n        }\n    }\n   ",
                   " barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_35041;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_35028, 32) == 0 && ltid_in_bounds_35038) {\n                x_35036 = ((volatile __local\n                            int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)];\n                if ((local_tid_35028 - squot32(local_tid_35028, 32) * 32) ==\n                    0) {\n                    x_35035 = x_35036;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35041 = 1;\n            while (slt32(skip_threads_35041, 32)) {\n                if (sle32(skip_threads_35041, local_tid_35028 -\n                          squot32(local_tid_35028, 32) * 32) &&\n                    (squot32(local_tid_35028, 32) == 0 &&\n                     ltid_in_bounds_35038)) {\n                    // read operands\n                    {\n                        x_35035 = ((volatile __local\n                                    int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028) -\n                                                                   sext_i32_i64(skip_threads_35041)];\n                    }\n                    // perform operation\n                    {\n                        bool inactive_35042 =\n                             slt64(srem64((sext_i32_i64(local_tid_35028 * 32 +\n                                           32 - 1) + 1) *\n                                          (segscan_group_sizze_30244 *\n                                           sdiv_up64(steps_26355 *\n                                                     flat_dim_26636,\n                                                     sext_i32_i64(num_threads_35002))) -\n                                          1, flat_dim_26636),\n                                   (sext_i32_i64(local_tid_35",
                   "028 * 32 + 32 -\n                                    1) + 1) * (segscan_group_sizze_30244 *\n                                               sdiv_up64(steps_26355 *\n                                                         flat_dim_26636,\n                                                         sext_i32_i64(num_threads_35002))) -\n                                   1 - ((sext_i32_i64((local_tid_35028 -\n                                                       skip_threads_35041) *\n                                         32 + 32 - 1) + 1) *\n                                        (segscan_group_sizze_30244 *\n                                         sdiv_up64(steps_26355 * flat_dim_26636,\n                                                   sext_i32_i64(num_threads_35002))) -\n                                        1));\n                        \n                        if (inactive_35042) {\n                            x_35035 = x_35036;\n                        }\n                        if (!inactive_35042) {\n                            int64_t res_35037 = add64(x_35035, x_35036);\n                            \n                            x_35035 = res_35037;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_35030, skip_threads_35041)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35041, local_tid_35028 -\n                          squot32(local_tid_35028, 32) * 32) &&\n                    (squot32(local_tid_35028, 32) == 0 &&\n                     ltid_in_bounds_35038)) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)] =\n                            x_35035;\n                        x_35036 = x_35035;\n                    }\n                }\n                if (sle32(wave_sizze_35030, skip_threads_35041)) {\n                    barrie",
                   "r(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35041 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_35028, 32) == 0 || !ltid_in_bounds_35038)) {\n            // read operands\n            {\n                x_30250 = x_30249;\n                x_30249 = ((__local\n                            int64_t *) scan_arr_mem_35032)[sext_i32_i64(squot32(local_tid_35028,\n                                                                                32)) -\n                                                           1];\n            }\n            // perform operation\n            {\n                bool inactive_35043 =\n                     slt64(srem64((sext_i32_i64(local_tid_35028) + 1) *\n                                  (segscan_group_sizze_30244 *\n                                   sdiv_up64(steps_26355 * flat_dim_26636,\n                                             sext_i32_i64(num_threads_35002))) -\n                                  1, flat_dim_26636),\n                           (sext_i32_i64(local_tid_35028) + 1) *\n                           (segscan_group_sizze_30244 * sdiv_up64(steps_26355 *\n                                                                  flat_dim_26636,\n                                                                  sext_i32_i64(num_threads_35002))) -\n                           1 - ((sext_i32_i64(squot32(local_tid_35028, 32) *\n                                 32 - 1) + 1) * (segscan_group_sizze_30244 *\n                                                 sdiv_up64(steps_26355 *\n                                                           flat_dim_26636,\n                                                           sext_i32_i64(num_threads_35002))) -\n                                1));\n                \n                if (inactive_35043) {\n                    x_30249 = x_30250;\n                }\n                if (!inactive_35043) {\n  ",
                   "                  int64_t res_30251 = add64(x_30249, x_30250);\n                    \n                    x_30249 = res_30251;\n                }\n            }\n            // write final result\n            {\n                ((__local\n                  int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)] =\n                    x_30249;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_35028, 32) == 0) {\n            ((__local\n              int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)] =\n                x_30250;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // threads in bounds write scanned carries\n    {\n        if (slt64(gtid_30119, steps_26355) && slt64(gtid_30127,\n                                                    flat_dim_26636)) {\n            ((__global int64_t *) mem_33827)[gtid_30119 * flat_dim_26636 +\n                                             gtid_30127] = ((__local\n                                                             int64_t *) scan_arr_mem_35032)[sext_i32_i64(local_tid_35028)];\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30244\n}\n__kernel void mainziscan_stage3_30128(__global int *global_failure,\n                                      int64_t steps_26355,\n                                      int64_t flat_dim_26636,\n                                      int64_t num_groups_30245, __global\n                                      unsigned char *mem_33827,\n                                      int32_t num_threads_35002,\n                                      int32_t required_groups_35044)\n{\n    #define segscan_group_sizze_30244 (mainzisegscan_group_sizze_30122)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35045;\n    int32_t local_tid_35046;\n    int64_t group_sizze_35049;\n    ",
                   "int32_t wave_sizze_35048;\n    int32_t group_tid_35047;\n    \n    global_tid_35045 = get_global_id(0);\n    local_tid_35046 = get_local_id(0);\n    group_sizze_35049 = get_local_size(0);\n    wave_sizze_35048 = LOCKSTEP_WIDTH;\n    group_tid_35047 = get_group_id(0);\n    \n    int32_t phys_tid_30128;\n    \n    phys_tid_30128 = global_tid_35045;\n    \n    int32_t phys_group_id_35050;\n    \n    phys_group_id_35050 = get_group_id(0);\n    for (int32_t i_35051 = 0; i_35051 < sdiv_up32(required_groups_35044 -\n                                                  phys_group_id_35050,\n                                                  sext_i64_i32(num_groups_30245));\n         i_35051++) {\n        int32_t virt_group_id_35052 = phys_group_id_35050 + i_35051 *\n                sext_i64_i32(num_groups_30245);\n        int64_t flat_idx_35053 = sext_i32_i64(virt_group_id_35052) *\n                segscan_group_sizze_30244 + sext_i32_i64(local_tid_35046);\n        int64_t gtid_30119 = squot64(flat_idx_35053, flat_dim_26636);\n        int64_t gtid_30127 = flat_idx_35053 - squot64(flat_idx_35053,\n                                                      flat_dim_26636) *\n                flat_dim_26636;\n        int64_t orig_group_35054 = squot64(flat_idx_35053,\n                                           segscan_group_sizze_30244 *\n                                           sdiv_up64(steps_26355 *\n                                                     flat_dim_26636,\n                                                     sext_i32_i64(num_threads_35002)));\n        int64_t carry_in_flat_idx_35055 = orig_group_35054 *\n                (segscan_group_sizze_30244 * sdiv_up64(steps_26355 *\n                                                       flat_dim_26636,\n                                                       sext_i32_i64(num_threads_35002))) -\n                1;\n        \n        if (slt64(gtid_30119, steps_26355) && slt64(gtid_30127,\n                                                    flat_dim_26636)) {\n           ",
                   " if (!(orig_group_35054 == 0 || (flat_idx_35053 ==\n                                            (orig_group_35054 + 1) *\n                                            (segscan_group_sizze_30244 *\n                                             sdiv_up64(steps_26355 *\n                                                       flat_dim_26636,\n                                                       sext_i32_i64(num_threads_35002))) -\n                                            1 || slt64(srem64(flat_idx_35053,\n                                                              flat_dim_26636),\n                                                       flat_idx_35053 -\n                                                       carry_in_flat_idx_35055)))) {\n                int64_t x_30249;\n                int64_t x_30250;\n                \n                x_30249 = ((__global\n                            int64_t *) mem_33827)[squot64(carry_in_flat_idx_35055,\n                                                          flat_dim_26636) *\n                                                  flat_dim_26636 +\n                                                  (carry_in_flat_idx_35055 -\n                                                   squot64(carry_in_flat_idx_35055,\n                                                           flat_dim_26636) *\n                                                   flat_dim_26636)];\n                x_30250 = ((__global int64_t *) mem_33827)[gtid_30119 *\n                                                           flat_dim_26636 +\n                                                           gtid_30127];\n                \n                int64_t res_30251;\n                \n                res_30251 = add64(x_30249, x_30250);\n                x_30249 = res_30251;\n                ((__global int64_t *) mem_33827)[gtid_30119 * flat_dim_26636 +\n                                                 gtid_30127] = x_30249;\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FE",
                   "NCE);\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30244\n}\n__kernel void mainzisegmap_27163(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args, int64_t n_26351,\n                                 float a_26359, float r0_26362, float x_26379,\n                                 float x_26381, float y_26383, float y_26384,\n                                 __global unsigned char *swap_term_mem_33462,\n                                 __global unsigned char *payments_mem_33463,\n                                 __global unsigned char *mem_33476)\n{\n    #define segmap_group_sizze_27229 (mainzisegmap_group_sizze_27165)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34672;\n    int32_t local_tid_34673;\n    int64_t group_sizze_34676;\n    int32_t wave_sizze_34675;\n    int32_t group_tid_34674;\n    \n    global_tid_34672 = get_global_id(0);\n    local_tid_34673 = get_local_id(0);\n    group_sizze_34676 = get_local_size(0);\n    wave_sizze_34675 = LOCKSTEP_WIDTH;\n    group_tid_34674 = get_group_id(0);\n    \n    int32_t phys_tid_27163;\n    \n    phys_tid_27163 = global_tid_34672;\n    \n    int64_t gtid_27162;\n    \n    gtid_27162 = sext_i32_i64(group_tid_34674) * segmap_group_sizze_27229 +\n        sext_i32_i64(local_tid_34673);\n    if (slt64(gtid_27162, n_26351)) {\n        float res_27240 = ((__global float *) swap_term_mem_33462)[gtid_27162];\n        int64_t res_27241 = ((__global\n                              int64_t *) payments_mem_33463)[gtid_27162];\n        bool bounds_invalid_upwards_27243 = slt64(res_27241, 1);\n        bool valid_27244 = !bounds_invalid_upwards_27243;\n        bool range_valid_c_27245;\n        \n        if (!valid_27244) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 0) == -1) {\n         ",
                   "           global_failure_args[0] = 1;\n                    global_failure_args[1] = 2;\n                    global_failure_args[2] = res_27241;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        bool y_27247 = slt64(0, res_27241);\n        bool index_certs_27248;\n        \n        if (!y_27247) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 1) == -1) {\n                    global_failure_args[0] = 0;\n                    global_failure_args[1] = res_27241;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float binop_y_27249 = sitofp_i64_f32(res_27241);\n        float index_primexp_27250 = res_27240 * binop_y_27249;\n        float negate_arg_27251 = a_26359 * index_primexp_27250;\n        float exp_arg_27252 = 0.0F - negate_arg_27251;\n        float res_27253 = fpow32(2.7182817F, exp_arg_27252);\n        float x_27254 = 1.0F - res_27253;\n        float B_27255 = x_27254 / a_26359;\n        float x_27256 = B_27255 - index_primexp_27250;\n        float x_27257 = y_26383 * x_27256;\n        float A1_27258 = x_27257 / x_26379;\n        float y_27259 = fpow32(B_27255, 2.0F);\n        float x_27260 = x_26381 * y_27259;\n        float A2_27261 = x_27260 / y_26384;\n        float exp_arg_27262 = A1_27258 - A2_27261;\n        float res_27263 = fpow32(2.7182817F, exp_arg_27262);\n        float negate_arg_27264 = r0_26362 * B_27255;\n        float exp_arg_27265 = 0.0F - negate_arg_27264;\n        float res_27266 = fpow32(2.7182817F, exp_arg_27265);\n        float res_27267 = res_27263 * res_27266;\n        float res_27268;\n        float redout_32558 = 0.0F;\n        \n        for (int64_t i_32559 = 0; i_32559 < res_27241; i_32559++) {\n            int64_t index_primexp_32626 = add64(1, i_32559);\n            float res_27273 = sitofp_i64_f32(index_primexp_32626);\n            float res_27274 = res_27240 * res_27273;\n            float negate_arg_27275 = a_26359 * re",
                   "s_27274;\n            float exp_arg_27276 = 0.0F - negate_arg_27275;\n            float res_27277 = fpow32(2.7182817F, exp_arg_27276);\n            float x_27278 = 1.0F - res_27277;\n            float B_27279 = x_27278 / a_26359;\n            float x_27280 = B_27279 - res_27274;\n            float x_27281 = y_26383 * x_27280;\n            float A1_27282 = x_27281 / x_26379;\n            float y_27283 = fpow32(B_27279, 2.0F);\n            float x_27284 = x_26381 * y_27283;\n            float A2_27285 = x_27284 / y_26384;\n            float exp_arg_27286 = A1_27282 - A2_27285;\n            float res_27287 = fpow32(2.7182817F, exp_arg_27286);\n            float negate_arg_27288 = r0_26362 * B_27279;\n            float exp_arg_27289 = 0.0F - negate_arg_27288;\n            float res_27290 = fpow32(2.7182817F, exp_arg_27289);\n            float res_27291 = res_27287 * res_27290;\n            float res_27271 = res_27291 + redout_32558;\n            float redout_tmp_34677 = res_27271;\n            \n            redout_32558 = redout_tmp_34677;\n        }\n        res_27268 = redout_32558;\n        \n        float x_27292 = 1.0F - res_27267;\n        float y_27293 = res_27240 * res_27268;\n        float res_27294 = x_27292 / y_27293;\n        \n        ((__global float *) mem_33476)[gtid_27162] = res_27294;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_27229\n}\n__kernel void mainzisegmap_27312(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args, int64_t n_26351,\n                                 float a_26359, float r0_26362, float x_26379,\n                                 float x_26381, float y_26383, float y_26384,\n                                 __global unsigned char *swap_term_mem_33462,\n                                 __global unsigned char *payments_mem_33463,\n                                 __global unsigned char *mem_33485)\n{\n    #define segmap_group_sizze_27378 (mainz",
                   "isegmap_group_sizze_27314)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34678;\n    int32_t local_tid_34679;\n    int64_t group_sizze_34682;\n    int32_t wave_sizze_34681;\n    int32_t group_tid_34680;\n    \n    global_tid_34678 = get_global_id(0);\n    local_tid_34679 = get_local_id(0);\n    group_sizze_34682 = get_local_size(0);\n    wave_sizze_34681 = LOCKSTEP_WIDTH;\n    group_tid_34680 = get_group_id(0);\n    \n    int32_t phys_tid_27312;\n    \n    phys_tid_27312 = global_tid_34678;\n    \n    int64_t gtid_27311;\n    \n    gtid_27311 = sext_i32_i64(group_tid_34680) * segmap_group_sizze_27378 +\n        sext_i32_i64(local_tid_34679);\n    if (slt64(gtid_27311, n_26351)) {\n        float res_27389 = ((__global float *) swap_term_mem_33462)[gtid_27311];\n        int64_t res_27390 = ((__global\n                              int64_t *) payments_mem_33463)[gtid_27311];\n        bool bounds_invalid_upwards_27392 = slt64(res_27390, 1);\n        bool valid_27393 = !bounds_invalid_upwards_27392;\n        bool range_valid_c_27394;\n        \n        if (!valid_27393) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 2) == -1) {\n                    global_failure_args[0] = 1;\n                    global_failure_args[1] = 2;\n                    global_failure_args[2] = res_27390;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        bool y_27396 = slt64(0, res_27390);\n        bool index_certs_27397;\n        \n        if (!y_27396) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 3) == -1) {\n                    global_failure_args[0] = 0;\n                    global_failure_args[1] = res_27390;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float binop_y_27398 = sitofp_i64_f32(res_27390);\n        float in",
                   "dex_primexp_27399 = res_27389 * binop_y_27398;\n        float negate_arg_27400 = a_26359 * index_primexp_27399;\n        float exp_arg_27401 = 0.0F - negate_arg_27400;\n        float res_27402 = fpow32(2.7182817F, exp_arg_27401);\n        float x_27403 = 1.0F - res_27402;\n        float B_27404 = x_27403 / a_26359;\n        float x_27405 = B_27404 - index_primexp_27399;\n        float x_27406 = y_26383 * x_27405;\n        float A1_27407 = x_27406 / x_26379;\n        float y_27408 = fpow32(B_27404, 2.0F);\n        float x_27409 = x_26381 * y_27408;\n        float A2_27410 = x_27409 / y_26384;\n        float exp_arg_27411 = A1_27407 - A2_27410;\n        float res_27412 = fpow32(2.7182817F, exp_arg_27411);\n        float negate_arg_27413 = r0_26362 * B_27404;\n        float exp_arg_27414 = 0.0F - negate_arg_27413;\n        float res_27415 = fpow32(2.7182817F, exp_arg_27414);\n        float res_27416 = res_27412 * res_27415;\n        float res_27417;\n        float redout_32562 = 0.0F;\n        \n        for (int64_t i_32563 = 0; i_32563 < res_27390; i_32563++) {\n            int64_t index_primexp_32628 = add64(1, i_32563);\n            float res_27422 = sitofp_i64_f32(index_primexp_32628);\n            float res_27423 = res_27389 * res_27422;\n            float negate_arg_27424 = a_26359 * res_27423;\n            float exp_arg_27425 = 0.0F - negate_arg_27424;\n            float res_27426 = fpow32(2.7182817F, exp_arg_27425);\n            float x_27427 = 1.0F - res_27426;\n            float B_27428 = x_27427 / a_26359;\n            float x_27429 = B_27428 - res_27423;\n            float x_27430 = y_26383 * x_27429;\n            float A1_27431 = x_27430 / x_26379;\n            float y_27432 = fpow32(B_27428, 2.0F);\n            float x_27433 = x_26381 * y_27432;\n            float A2_27434 = x_27433 / y_26384;\n            float exp_arg_27435 = A1_27431 - A2_27434;\n            float res_27436 = fpow32(2.7182817F, exp_arg_27435);\n            float negate_arg_27437 = r0_26362 * B_27428;\n            float exp_",
                   "arg_27438 = 0.0F - negate_arg_27437;\n            float res_27439 = fpow32(2.7182817F, exp_arg_27438);\n            float res_27440 = res_27436 * res_27439;\n            float res_27420 = res_27440 + redout_32562;\n            float redout_tmp_34683 = res_27420;\n            \n            redout_32562 = redout_tmp_34683;\n        }\n        res_27417 = redout_32562;\n        \n        float x_27441 = 1.0F - res_27416;\n        float y_27442 = res_27389 * res_27417;\n        float res_27443 = x_27441 / y_27442;\n        \n        ((__global float *) mem_33485)[gtid_27311] = res_27443;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_27378\n}\n__kernel void mainzisegmap_27631(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args, int64_t n_26351,\n                                 int64_t paths_26354, int64_t steps_26355,\n                                 float a_26359, float b_26360,\n                                 float sigma_26361, float r0_26362,\n                                 float dt_26377, float sims_per_year_26449,\n                                 int64_t upper_bound_26463, float res_26464,\n                                 int64_t num_groups_27807, __global\n                                 unsigned char *res_mem_33486, __global\n                                 unsigned char *res_mem_33487, __global\n                                 unsigned char *res_mem_33488, __global\n                                 unsigned char *res_mem_33489, __global\n                                 unsigned char *mem_33492, __global\n                                 unsigned char *mem_33506, __global\n                                 unsigned char *mem_33520, __global\n                                 unsigned char *mem_33535, __global\n                                 unsigned char *mem_33538)\n{\n    #define segmap_group_sizze_27806 (mainzisegmap_group_sizze_27633)\n    \n    const int blo",
                   "ck_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34688;\n    int32_t local_tid_34689;\n    int64_t group_sizze_34692;\n    int32_t wave_sizze_34691;\n    int32_t group_tid_34690;\n    \n    global_tid_34688 = get_global_id(0);\n    local_tid_34689 = get_local_id(0);\n    group_sizze_34692 = get_local_size(0);\n    wave_sizze_34691 = LOCKSTEP_WIDTH;\n    group_tid_34690 = get_group_id(0);\n    \n    int32_t phys_tid_27631;\n    \n    phys_tid_27631 = global_tid_34688;\n    \n    int32_t phys_group_id_34693;\n    \n    phys_group_id_34693 = get_group_id(0);\n    for (int32_t i_34694 = 0; i_34694 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(paths_26354,\n                                          segmap_group_sizze_27806)) -\n                   phys_group_id_34693, sext_i64_i32(num_groups_27807));\n         i_34694++) {\n        int32_t virt_group_id_34695 = phys_group_id_34693 + i_34694 *\n                sext_i64_i32(num_groups_27807);\n        int64_t gtid_27630 = sext_i32_i64(virt_group_id_34695) *\n                segmap_group_sizze_27806 + sext_i32_i64(local_tid_34689);\n        \n        if (slt64(gtid_27630, paths_26354)) {\n            int32_t res_27812 = sext_i64_i32(gtid_27630);\n            int32_t x_27813 = lshr32(res_27812, 16);\n            int32_t x_27814 = res_27812 ^ x_27813;\n            int32_t x_27815 = mul32(73244475, x_27814);\n            int32_t x_27816 = lshr32(x_27815, 16);\n            int32_t x_27817 = x_27815 ^ x_27816;\n            int32_t x_27818 = mul32(73244475, x_27817);\n            int32_t x_27819 = lshr32(x_27818, 16);\n            int32_t x_27820 = x_27818 ^ x_27819;\n            int32_t unsign_arg_27821 = 777822902 ^ x_27820;\n            int32_t unsign_arg_27822 = mul32(48271, unsign_a",
                   "rg_27821);\n            int32_t unsign_arg_27823 = umod32(unsign_arg_27822, 2147483647);\n            \n            for (int64_t i_33292 = 0; i_33292 < steps_26355; i_33292++) {\n                int32_t res_27826 = sext_i64_i32(i_33292);\n                int32_t x_27827 = lshr32(res_27826, 16);\n                int32_t x_27828 = res_27826 ^ x_27827;\n                int32_t x_27829 = mul32(73244475, x_27828);\n                int32_t x_27830 = lshr32(x_27829, 16);\n                int32_t x_27831 = x_27829 ^ x_27830;\n                int32_t x_27832 = mul32(73244475, x_27831);\n                int32_t x_27833 = lshr32(x_27832, 16);\n                int32_t x_27834 = x_27832 ^ x_27833;\n                int32_t unsign_arg_27835 = unsign_arg_27823 ^ x_27834;\n                int32_t unsign_arg_27836 = mul32(48271, unsign_arg_27835);\n                int32_t unsign_arg_27837 = umod32(unsign_arg_27836, 2147483647);\n                int32_t unsign_arg_27838 = mul32(48271, unsign_arg_27837);\n                int32_t unsign_arg_27839 = umod32(unsign_arg_27838, 2147483647);\n                float res_27840 = uitofp_i32_f32(unsign_arg_27837);\n                float res_27841 = res_27840 / 2.1474836e9F;\n                float res_27842 = uitofp_i32_f32(unsign_arg_27839);\n                float res_27843 = res_27842 / 2.1474836e9F;\n                float res_27844;\n                \n                res_27844 = futrts_log32(res_27841);\n                \n                float res_27845 = -2.0F * res_27844;\n                float res_27846;\n                \n                res_27846 = futrts_sqrt32(res_27845);\n                \n                float res_27847 = 6.2831855F * res_27843;\n                float res_27848;\n                \n                res_27848 = futrts_cos32(res_27847);\n                \n                float res_27849 = res_27846 * res_27848;\n                \n                ((__global float *) mem_33492)[phys_tid_27631 + i_33292 *\n                                               (num_groups_",
                   "27807 *\n                                                segmap_group_sizze_27806)] =\n                    res_27849;\n            }\n            for (int64_t i_34697 = 0; i_34697 < steps_26355; i_34697++) {\n                ((__global float *) mem_33506)[phys_tid_27631 + i_34697 *\n                                               (num_groups_27807 *\n                                                segmap_group_sizze_27806)] =\n                    r0_26362;\n            }\n            for (int64_t i_27852 = 0; i_27852 < upper_bound_26463; i_27852++) {\n                bool y_27854 = slt64(i_27852, steps_26355);\n                bool index_certs_27855;\n                \n                if (!y_27854) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 4) ==\n                            -1) {\n                            global_failure_args[0] = i_27852;\n                            global_failure_args[1] = steps_26355;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float shortstep_arg_27856 = ((__global\n                                              float *) mem_33492)[phys_tid_27631 +\n                                                                  i_27852 *\n                                                                  (num_groups_27807 *\n                                                                   segmap_group_sizze_27806)];\n                float shortstep_arg_27857 = ((__global\n                                              float *) mem_33506)[phys_tid_27631 +\n                                                                  i_27852 *\n                                                                  (num_groups_27807 *\n                                                                   segmap_group_sizze_27806)];\n                float y_27858 = b_26360 - shortstep_ar",
                   "g_27857;\n                float x_27859 = a_26359 * y_27858;\n                float x_27860 = dt_26377 * x_27859;\n                float x_27861 = res_26464 * shortstep_arg_27856;\n                float y_27862 = sigma_26361 * x_27861;\n                float delta_r_27863 = x_27860 + y_27862;\n                float res_27864 = shortstep_arg_27857 + delta_r_27863;\n                int64_t i_27865 = add64(1, i_27852);\n                bool x_27866 = sle64(0, i_27865);\n                bool y_27867 = slt64(i_27865, steps_26355);\n                bool bounds_check_27868 = x_27866 && y_27867;\n                bool index_certs_27869;\n                \n                if (!bounds_check_27868) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 5) ==\n                            -1) {\n                            global_failure_args[0] = i_27865;\n                            global_failure_args[1] = steps_26355;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                ((__global float *) mem_33506)[phys_tid_27631 + i_27865 *\n                                               (num_groups_27807 *\n                                                segmap_group_sizze_27806)] =\n                    res_27864;\n            }\n            for (int64_t i_33296 = 0; i_33296 < steps_26355; i_33296++) {\n                float x_27872 = ((__global float *) mem_33506)[phys_tid_27631 +\n                                                               i_33296 *\n                                                               (num_groups_27807 *\n                                                                segmap_group_sizze_27806)];\n                int64_t convop_x_33430 = add64(1, i_33296);\n                float binop_x_33431 = sitofp_i64_f32(convop_x_33430);\n                float index_primexp_33432 = binop_x_33431 / sims_per_year_26",
                   "449;\n                float res_27874;\n                float redout_33298 = 0.0F;\n                \n                for (int64_t i_33299 = 0; i_33299 < n_26351; i_33299++) {\n                    int64_t x_27880 = ((__global\n                                        int64_t *) res_mem_33488)[i_33299];\n                    float x_27881 = ((__global float *) res_mem_33489)[i_33299];\n                    int64_t i64_arg_27882 = sub64(x_27880, 1);\n                    float res_27883 = sitofp_i64_f32(i64_arg_27882);\n                    float y_27884 = x_27881 * res_27883;\n                    bool cond_27885 = y_27884 < index_primexp_33432;\n                    float ceil_arg_27886 = index_primexp_33432 / x_27881;\n                    float res_27887;\n                    \n                    res_27887 = futrts_ceil32(ceil_arg_27886);\n                    \n                    int64_t res_27888 = fptosi_f32_i64(res_27887);\n                    int64_t remaining_27889 = sub64(x_27880, res_27888);\n                    float res_27890;\n                    \n                    if (cond_27885) {\n                        res_27890 = 0.0F;\n                    } else {\n                        float x_27878 = ((__global\n                                          float *) res_mem_33486)[i_33299];\n                        float x_27879 = ((__global\n                                          float *) res_mem_33487)[i_33299];\n                        float nextpayment_27891 = x_27881 * res_27887;\n                        bool bounds_invalid_upwards_27892 =\n                             slt64(remaining_27889, 1);\n                        bool valid_27893 = !bounds_invalid_upwards_27892;\n                        bool range_valid_c_27894;\n                        \n                        if (!valid_27893) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 6) == -1) {\n                     ",
                   "               global_failure_args[0] = 1;\n                                    global_failure_args[1] = 2;\n                                    global_failure_args[2] = remaining_27889;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_0;\n                            }\n                        }\n                        \n                        float y_27896 = nextpayment_27891 - index_primexp_33432;\n                        float negate_arg_27897 = a_26359 * y_27896;\n                        float exp_arg_27898 = 0.0F - negate_arg_27897;\n                        float res_27899 = fpow32(2.7182817F, exp_arg_27898);\n                        float x_27900 = 1.0F - res_27899;\n                        float B_27901 = x_27900 / a_26359;\n                        float x_27902 = B_27901 - nextpayment_27891;\n                        float x_27903 = x_27902 + index_primexp_33432;\n                        float x_27904 = fpow32(a_26359, 2.0F);\n                        float x_27905 = b_26360 * x_27904;\n                        float x_27906 = fpow32(sigma_26361, 2.0F);\n                        float y_27907 = x_27906 / 2.0F;\n                        float y_27908 = x_27905 - y_27907;\n                        float x_27909 = x_27903 * y_27908;\n                        float A1_27910 = x_27909 / x_27904;\n                        float y_27911 = fpow32(B_27901, 2.0F);\n                        float x_27912 = x_27906 * y_27911;\n                        float y_27913 = 4.0F * a_26359;\n                        float A2_27914 = x_27912 / y_27913;\n                        float exp_arg_27915 = A1_27910 - A2_27914;\n                        float res_27916 = fpow32(2.7182817F, exp_arg_27915);\n                        float negate_arg_27917 = x_27872 * B_27901;\n                        float exp_arg_27918 = 0.0F - negate_arg_27917;\n                        float res_27919 = fpow32(2.7182817F, exp",
                   "_arg_27918);\n                        float res_27920 = res_27916 * res_27919;\n                        bool y_27921 = slt64(0, remaining_27889);\n                        bool index_certs_27922;\n                        \n                        if (!y_27921) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 7) == -1) {\n                                    global_failure_args[0] = 0;\n                                    global_failure_args[1] = remaining_27889;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_0;\n                            }\n                        }\n                        \n                        float binop_y_27923 = sitofp_i64_f32(remaining_27889);\n                        float binop_y_27924 = x_27881 * binop_y_27923;\n                        float index_primexp_27925 = nextpayment_27891 +\n                              binop_y_27924;\n                        float y_27926 = index_primexp_27925 -\n                              index_primexp_33432;\n                        float negate_arg_27927 = a_26359 * y_27926;\n                        float exp_arg_27928 = 0.0F - negate_arg_27927;\n                        float res_27929 = fpow32(2.7182817F, exp_arg_27928);\n                        float x_27930 = 1.0F - res_27929;\n                        float B_27931 = x_27930 / a_26359;\n                        float x_27932 = B_27931 - index_primexp_27925;\n                        float x_27933 = x_27932 + index_primexp_33432;\n                        float x_27934 = y_27908 * x_27933;\n                        float A1_27935 = x_27934 / x_27904;\n                        float y_27936 = fpow32(B_27931, 2.0F);\n                        float x_27937 = x_27906 * y_27936;\n                        float A2_27938 = x_27937 / y_27913;\n      ",
                   "                  float exp_arg_27939 = A1_27935 - A2_27938;\n                        float res_27940 = fpow32(2.7182817F, exp_arg_27939);\n                        float negate_arg_27941 = x_27872 * B_27931;\n                        float exp_arg_27942 = 0.0F - negate_arg_27941;\n                        float res_27943 = fpow32(2.7182817F, exp_arg_27942);\n                        float res_27944 = res_27940 * res_27943;\n                        float res_27945;\n                        float redout_32568 = 0.0F;\n                        \n                        for (int64_t i_32569 = 0; i_32569 < remaining_27889;\n                             i_32569++) {\n                            int64_t index_primexp_32636 = add64(1, i_32569);\n                            float res_27950 =\n                                  sitofp_i64_f32(index_primexp_32636);\n                            float res_27951 = x_27881 * res_27950;\n                            float res_27952 = nextpayment_27891 + res_27951;\n                            float y_27953 = res_27952 - index_primexp_33432;\n                            float negate_arg_27954 = a_26359 * y_27953;\n                            float exp_arg_27955 = 0.0F - negate_arg_27954;\n                            float res_27956 = fpow32(2.7182817F, exp_arg_27955);\n                            float x_27957 = 1.0F - res_27956;\n                            float B_27958 = x_27957 / a_26359;\n                            float x_27959 = B_27958 - res_27952;\n                            float x_27960 = x_27959 + index_primexp_33432;\n                            float x_27961 = y_27908 * x_27960;\n                            float A1_27962 = x_27961 / x_27904;\n                            float y_27963 = fpow32(B_27958, 2.0F);\n                            float x_27964 = x_27906 * y_27963;\n                            float A2_27965 = x_27964 / y_27913;\n                            float exp_arg_27966 = A1_27962 - A2_27965;\n                            float res_27967 =",
                   " fpow32(2.7182817F, exp_arg_27966);\n                            float negate_arg_27968 = x_27872 * B_27958;\n                            float exp_arg_27969 = 0.0F - negate_arg_27968;\n                            float res_27970 = fpow32(2.7182817F, exp_arg_27969);\n                            float res_27971 = res_27967 * res_27970;\n                            float res_27948 = res_27971 + redout_32568;\n                            float redout_tmp_34701 = res_27948;\n                            \n                            redout_32568 = redout_tmp_34701;\n                        }\n                        res_27945 = redout_32568;\n                        \n                        float x_27972 = res_27920 - res_27944;\n                        float x_27973 = x_27878 * x_27881;\n                        float y_27974 = res_27945 * x_27973;\n                        float y_27975 = x_27972 - y_27974;\n                        float res_27976 = x_27879 * y_27975;\n                        \n                        res_27890 = res_27976;\n                    }\n                    \n                    float res_27877 = res_27890 + redout_33298;\n                    float redout_tmp_34700 = res_27877;\n                    \n                    redout_33298 = redout_tmp_34700;\n                }\n                res_27874 = redout_33298;\n                \n                float res_27977 = fmax32(0.0F, res_27874);\n                \n                ((__global float *) mem_33520)[phys_tid_27631 + i_33296 *\n                                               (num_groups_27807 *\n                                                segmap_group_sizze_27806)] =\n                    res_27977;\n            }\n            for (int64_t i_34702 = 0; i_34702 < steps_26355; i_34702++) {\n                ((__global float *) mem_33535)[i_34702 * paths_26354 +\n                                               gtid_27630] = ((__global\n                                                               float *) mem_33520)[phys_tid_276",
                   "31 +\n                                                                                   i_34702 *\n                                                                                   (num_groups_27807 *\n                                                                                    segmap_group_sizze_27806)];\n            }\n            for (int64_t i_34703 = 0; i_34703 < steps_26355; i_34703++) {\n                ((__global float *) mem_33538)[i_34703 * paths_26354 +\n                                               gtid_27630] = ((__global\n                                                               float *) mem_33506)[phys_tid_27631 +\n                                                                                   i_34703 *\n                                                                                   (num_groups_27807 *\n                                                                                    segmap_group_sizze_27806)];\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_27806\n}\n__kernel void mainzisegmap_28395(__global int *global_failure,\n                                 int64_t paths_26354, int64_t steps_26355,\n                                 __global unsigned char *mem_33663, __global\n                                 unsigned char *mem_33667)\n{\n    #define segmap_group_sizze_29267 (mainzisegmap_group_sizze_28398)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34839;\n    int32_t local_tid_34840;\n    int64_t group_sizze_34843;\n    int32_t wave_sizze_34842;\n    int32_t group_tid_34841;\n    \n    global_tid_34839 = get_global_id(0);\n    local_tid_34840 = get_local_id(0);\n    group_sizze_34843 = get_local_size(0);\n    wave_sizze_34842 = LOCKSTEP_WIDTH;\n    group_tid_34841 = get_group_id(0);\n    \n    int32_t phys_tid_28395;\n    \n ",
                   "   phys_tid_28395 = global_tid_34839;\n    \n    int64_t gtid_28393;\n    \n    gtid_28393 = squot64(sext_i32_i64(group_tid_34841) *\n                         segmap_group_sizze_29267 +\n                         sext_i32_i64(local_tid_34840), steps_26355);\n    \n    int64_t gtid_28394;\n    \n    gtid_28394 = sext_i32_i64(group_tid_34841) * segmap_group_sizze_29267 +\n        sext_i32_i64(local_tid_34840) - squot64(sext_i32_i64(group_tid_34841) *\n                                                segmap_group_sizze_29267 +\n                                                sext_i32_i64(local_tid_34840),\n                                                steps_26355) * steps_26355;\n    if (slt64(gtid_28393, paths_26354) && slt64(gtid_28394, steps_26355)) {\n        float res_29270 = ((__global float *) mem_33663)[gtid_28393 *\n                                                         steps_26355 +\n                                                         gtid_28394];\n        float res_29271 = fmax32(0.0F, res_29270);\n        \n        ((__global float *) mem_33667)[gtid_28393 * steps_26355 + gtid_28394] =\n            res_29271;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_29267\n}\n__kernel void mainzisegmap_28645(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args,\n                                 int64_t paths_26354, int64_t steps_26355,\n                                 float a_26359, float b_26360,\n                                 float sigma_26361, float r0_26362,\n                                 float dt_26377, int64_t upper_bound_26463,\n                                 float res_26464, int64_t num_groups_28897,\n                                 __global unsigned char *mem_33578, __global\n                                 unsigned char *mem_33581, __global\n                                 unsigned char *mem_33596)\n{\n    #define segmap_group_sizze_28896 (mainzisegma",
                   "p_group_sizze_28647)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34741;\n    int32_t local_tid_34742;\n    int64_t group_sizze_34745;\n    int32_t wave_sizze_34744;\n    int32_t group_tid_34743;\n    \n    global_tid_34741 = get_global_id(0);\n    local_tid_34742 = get_local_id(0);\n    group_sizze_34745 = get_local_size(0);\n    wave_sizze_34744 = LOCKSTEP_WIDTH;\n    group_tid_34743 = get_group_id(0);\n    \n    int32_t phys_tid_28645;\n    \n    phys_tid_28645 = global_tid_34741;\n    \n    int32_t phys_group_id_34746;\n    \n    phys_group_id_34746 = get_group_id(0);\n    for (int32_t i_34747 = 0; i_34747 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(paths_26354,\n                                          segmap_group_sizze_28896)) -\n                   phys_group_id_34746, sext_i64_i32(num_groups_28897));\n         i_34747++) {\n        int32_t virt_group_id_34748 = phys_group_id_34746 + i_34747 *\n                sext_i64_i32(num_groups_28897);\n        int64_t gtid_28644 = sext_i32_i64(virt_group_id_34748) *\n                segmap_group_sizze_28896 + sext_i32_i64(local_tid_34742);\n        \n        if (slt64(gtid_28644, paths_26354)) {\n            for (int64_t i_34749 = 0; i_34749 < steps_26355; i_34749++) {\n                ((__global float *) mem_33581)[phys_tid_28645 + i_34749 *\n                                               (num_groups_28897 *\n                                                segmap_group_sizze_28896)] =\n                    r0_26362;\n            }\n            for (int64_t i_28903 = 0; i_28903 < upper_bound_26463; i_28903++) {\n                bool y_28905 = slt64(i_28903, steps_26355);\n                bool index_certs_28906;\n                \n                if",
                   " (!y_28905) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 12) ==\n                            -1) {\n                            global_failure_args[0] = i_28903;\n                            global_failure_args[1] = steps_26355;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float shortstep_arg_28907 = ((__global\n                                              float *) mem_33578)[i_28903 *\n                                                                  paths_26354 +\n                                                                  gtid_28644];\n                float shortstep_arg_28908 = ((__global\n                                              float *) mem_33581)[phys_tid_28645 +\n                                                                  i_28903 *\n                                                                  (num_groups_28897 *\n                                                                   segmap_group_sizze_28896)];\n                float y_28909 = b_26360 - shortstep_arg_28908;\n                float x_28910 = a_26359 * y_28909;\n                float x_28911 = dt_26377 * x_28910;\n                float x_28912 = res_26464 * shortstep_arg_28907;\n                float y_28913 = sigma_26361 * x_28912;\n                float delta_r_28914 = x_28911 + y_28913;\n                float res_28915 = shortstep_arg_28908 + delta_r_28914;\n                int64_t i_28916 = add64(1, i_28903);\n                bool x_28917 = sle64(0, i_28916);\n                bool y_28918 = slt64(i_28916, steps_26355);\n                bool bounds_check_28919 = x_28917 && y_28918;\n                bool index_certs_28920;\n                \n                if (!bounds_check_28919) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 13) ",
                   "==\n                            -1) {\n                            global_failure_args[0] = i_28916;\n                            global_failure_args[1] = steps_26355;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                ((__global float *) mem_33581)[phys_tid_28645 + i_28916 *\n                                               (num_groups_28897 *\n                                                segmap_group_sizze_28896)] =\n                    res_28915;\n            }\n            for (int64_t i_34751 = 0; i_34751 < steps_26355; i_34751++) {\n                ((__global float *) mem_33596)[i_34751 * paths_26354 +\n                                               gtid_28644] = ((__global\n                                                               float *) mem_33581)[phys_tid_28645 +\n                                                                                   i_34751 *\n                                                                                   (num_groups_28897 *\n                                                                                    segmap_group_sizze_28896)];\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_28896\n}\n__kernel void mainzisegmap_28743(__global int *global_failure,\n                                 int64_t paths_26354, int64_t steps_26355,\n                                 __global unsigned char *mem_33571, __global\n                                 unsigned char *mem_33575)\n{\n    #define segmap_group_sizze_28851 (mainzisegmap_group_sizze_28746)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34736;\n    int32_t local_tid_34737;\n    int64_t group_sizze_34740;\n    int32_t wave_sizze_",
                   "34739;\n    int32_t group_tid_34738;\n    \n    global_tid_34736 = get_global_id(0);\n    local_tid_34737 = get_local_id(0);\n    group_sizze_34740 = get_local_size(0);\n    wave_sizze_34739 = LOCKSTEP_WIDTH;\n    group_tid_34738 = get_group_id(0);\n    \n    int32_t phys_tid_28743;\n    \n    phys_tid_28743 = global_tid_34736;\n    \n    int64_t gtid_28741;\n    \n    gtid_28741 = squot64(sext_i32_i64(group_tid_34738) *\n                         segmap_group_sizze_28851 +\n                         sext_i32_i64(local_tid_34737), steps_26355);\n    \n    int64_t gtid_28742;\n    \n    gtid_28742 = sext_i32_i64(group_tid_34738) * segmap_group_sizze_28851 +\n        sext_i32_i64(local_tid_34737) - squot64(sext_i32_i64(group_tid_34738) *\n                                                segmap_group_sizze_28851 +\n                                                sext_i32_i64(local_tid_34737),\n                                                steps_26355) * steps_26355;\n    if (slt64(gtid_28741, paths_26354) && slt64(gtid_28742, steps_26355)) {\n        int32_t unsign_arg_28854 = ((__global int32_t *) mem_33571)[gtid_28741];\n        int32_t res_28856 = sext_i64_i32(gtid_28742);\n        int32_t x_28857 = lshr32(res_28856, 16);\n        int32_t x_28858 = res_28856 ^ x_28857;\n        int32_t x_28859 = mul32(73244475, x_28858);\n        int32_t x_28860 = lshr32(x_28859, 16);\n        int32_t x_28861 = x_28859 ^ x_28860;\n        int32_t x_28862 = mul32(73244475, x_28861);\n        int32_t x_28863 = lshr32(x_28862, 16);\n        int32_t x_28864 = x_28862 ^ x_28863;\n        int32_t unsign_arg_28865 = unsign_arg_28854 ^ x_28864;\n        int32_t unsign_arg_28866 = mul32(48271, unsign_arg_28865);\n        int32_t unsign_arg_28867 = umod32(unsign_arg_28866, 2147483647);\n        int32_t unsign_arg_28868 = mul32(48271, unsign_arg_28867);\n        int32_t unsign_arg_28869 = umod32(unsign_arg_28868, 2147483647);\n        float res_28870 = uitofp_i32_f32(unsign_arg_28867);\n        float res_28871 = res_28870 / 2.1474836e9F",
                   ";\n        float res_28872 = uitofp_i32_f32(unsign_arg_28869);\n        float res_28873 = res_28872 / 2.1474836e9F;\n        float res_28874;\n        \n        res_28874 = futrts_log32(res_28871);\n        \n        float res_28875 = -2.0F * res_28874;\n        float res_28876;\n        \n        res_28876 = futrts_sqrt32(res_28875);\n        \n        float res_28877 = 6.2831855F * res_28873;\n        float res_28878;\n        \n        res_28878 = futrts_cos32(res_28877);\n        \n        float res_28879 = res_28876 * res_28878;\n        \n        ((__global float *) mem_33575)[gtid_28741 * steps_26355 + gtid_28742] =\n            res_28879;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_28851\n}\n__kernel void mainzisegmap_28807(__global int *global_failure,\n                                 int64_t paths_26354, __global\n                                 unsigned char *mem_33571)\n{\n    #define segmap_group_sizze_28826 (mainzisegmap_group_sizze_28809)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34731;\n    int32_t local_tid_34732;\n    int64_t group_sizze_34735;\n    int32_t wave_sizze_34734;\n    int32_t group_tid_34733;\n    \n    global_tid_34731 = get_global_id(0);\n    local_tid_34732 = get_local_id(0);\n    group_sizze_34735 = get_local_size(0);\n    wave_sizze_34734 = LOCKSTEP_WIDTH;\n    group_tid_34733 = get_group_id(0);\n    \n    int32_t phys_tid_28807;\n    \n    phys_tid_28807 = global_tid_34731;\n    \n    int64_t gtid_28806;\n    \n    gtid_28806 = sext_i32_i64(group_tid_34733) * segmap_group_sizze_28826 +\n        sext_i32_i64(local_tid_34732);\n    if (slt64(gtid_28806, paths_26354)) {\n        int32_t res_28830 = sext_i64_i32(gtid_28806);\n        int32_t x_28831 = lshr32(res_28830, 16);\n        int32_t x_28832 = res_28830 ^ x_28831;\n        int32_t x_28833 = mul32(73244475, x_28832);\n        int32_t x_28834 = lshr32(x_28833, 16);\n        int32",
                   "_t x_28835 = x_28833 ^ x_28834;\n        int32_t x_28836 = mul32(73244475, x_28835);\n        int32_t x_28837 = lshr32(x_28836, 16);\n        int32_t x_28838 = x_28836 ^ x_28837;\n        int32_t unsign_arg_28839 = 777822902 ^ x_28838;\n        int32_t unsign_arg_28840 = mul32(48271, unsign_arg_28839);\n        int32_t unsign_arg_28841 = umod32(unsign_arg_28840, 2147483647);\n        \n        ((__global int32_t *) mem_33571)[gtid_28806] = unsign_arg_28841;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_28826\n}\n__kernel void mainzisegmap_29314(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args, int64_t n_26351,\n                                 int64_t paths_26354, int64_t steps_26355,\n                                 float a_26359, float b_26360,\n                                 float sigma_26361, float sims_per_year_26449,\n                                 int64_t flat_dim_26636, float res_26640,\n                                 int64_t segmap_usable_groups_29548, __global\n                                 unsigned char *res_mem_33486, __global\n                                 unsigned char *res_mem_33487, __global\n                                 unsigned char *res_mem_33488, __global\n                                 unsigned char *res_mem_33489, __global\n                                 unsigned char *res_mem_33685, __global\n                                 unsigned char *mem_33689, __global\n                                 unsigned char *mem_33701, __global\n                                 unsigned char *mem_33711, __global\n                                 unsigned char *mem_33713, __global\n                                 unsigned char *mem_33739, __global\n                                 unsigned char *mem_33753, __global\n                                 unsigned char *mem_33767, __global\n                                 unsigned char *mem_33769,",
                   " __global\n                                 unsigned char *mem_33795, __global\n                                 unsigned char *mem_33809, __global\n                                 unsigned char *mem_33823,\n                                 int64_t num_threads_33988)\n{\n    #define segmap_group_sizze_29547 (mainzisegmap_group_sizze_29316)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34973;\n    int32_t local_tid_34974;\n    int64_t group_sizze_34977;\n    int32_t wave_sizze_34976;\n    int32_t group_tid_34975;\n    \n    global_tid_34973 = get_global_id(0);\n    local_tid_34974 = get_local_id(0);\n    group_sizze_34977 = get_local_size(0);\n    wave_sizze_34976 = LOCKSTEP_WIDTH;\n    group_tid_34975 = get_group_id(0);\n    \n    int32_t phys_tid_29314;\n    \n    phys_tid_29314 = global_tid_34973;\n    \n    int64_t gtid_29313;\n    \n    gtid_29313 = sext_i32_i64(group_tid_34975) * segmap_group_sizze_29547 +\n        sext_i32_i64(local_tid_34974);\n    if (slt64(gtid_29313, steps_26355)) {\n        int64_t convop_x_32606 = add64(1, gtid_29313);\n        float binop_x_32607 = sitofp_i64_f32(convop_x_32606);\n        float index_primexp_32608 = binop_x_32607 / sims_per_year_26449;\n        \n        for (int64_t i_33306 = 0; i_33306 < paths_26354; i_33306++) {\n            float x_29553 = ((__global float *) res_mem_33685)[i_33306 *\n                                                               steps_26355 +\n                                                               gtid_29313];\n            \n            for (int64_t i_34979 = 0; i_34979 < n_26351; i_34979++) {\n                ((__global float *) mem_33701)[phys_tid_29314 + i_34979 *\n                                               (segmap_usable_groups_29548 *\n                                                segmap_group_sizze_29547)] =\n                    x_29553;\n            }\n            for (int64_t i_34980 = 0; i_",
                   "34980 < n_26351; i_34980++) {\n                ((__global float *) mem_33689)[phys_tid_29314 + (i_33306 *\n                                                                 (segmap_usable_groups_29548 *\n                                                                  segmap_group_sizze_29547 *\n                                                                  n_26351) +\n                                                                 i_34980 *\n                                                                 (segmap_usable_groups_29548 *\n                                                                  segmap_group_sizze_29547))] =\n                    ((__global float *) mem_33701)[phys_tid_29314 + i_34980 *\n                                                   (segmap_usable_groups_29548 *\n                                                    segmap_group_sizze_29547)];\n            }\n        }\n        \n        int64_t discard_33316;\n        int64_t scanacc_33310 = 0;\n        \n        for (int64_t i_33313 = 0; i_33313 < flat_dim_26636; i_33313++) {\n            int64_t binop_x_33434 = squot64(i_33313, n_26351);\n            int64_t binop_y_33435 = n_26351 * binop_x_33434;\n            int64_t new_index_33436 = i_33313 - binop_y_33435;\n            int64_t x_29560 = ((__global\n                                int64_t *) res_mem_33488)[new_index_33436];\n            float x_29561 = ((__global float *) res_mem_33489)[new_index_33436];\n            float x_29562 = index_primexp_32608 / x_29561;\n            float ceil_arg_29563 = x_29562 - 1.0F;\n            float res_29564;\n            \n            res_29564 = futrts_ceil32(ceil_arg_29563);\n            \n            int64_t res_29565 = fptosi_f32_i64(res_29564);\n            int64_t max_arg_29566 = sub64(x_29560, res_29565);\n            int64_t res_29567 = smax64(0, max_arg_29566);\n            bool cond_29568 = res_29567 == 0;\n            int64_t res_29569;\n            \n            if (cond_29568) {\n                res_29569 = 1;\n        ",
                   "    } else {\n                res_29569 = res_29567;\n            }\n            \n            int64_t res_29559 = add64(res_29569, scanacc_33310);\n            \n            ((__global int64_t *) mem_33711)[phys_tid_29314 + i_33313 *\n                                             (segmap_usable_groups_29548 *\n                                              segmap_group_sizze_29547)] =\n                res_29559;\n            ((__global int64_t *) mem_33713)[phys_tid_29314 + i_33313 *\n                                             (segmap_usable_groups_29548 *\n                                              segmap_group_sizze_29547)] =\n                res_29569;\n            \n            int64_t scanacc_tmp_34981 = res_29559;\n            \n            scanacc_33310 = scanacc_tmp_34981;\n        }\n        discard_33316 = scanacc_33310;\n        \n        int64_t res_29571;\n        int64_t redout_33317 = 0;\n        \n        for (int64_t i_33318 = 0; i_33318 < flat_dim_26636; i_33318++) {\n            int64_t x_29575 = ((__global int64_t *) mem_33713)[phys_tid_29314 +\n                                                               i_33318 *\n                                                               (segmap_usable_groups_29548 *\n                                                                segmap_group_sizze_29547)];\n            int64_t res_29574 = add64(x_29575, redout_33317);\n            int64_t redout_tmp_34984 = res_29574;\n            \n            redout_33317 = redout_tmp_34984;\n        }\n        res_29571 = redout_33317;\n        \n        bool bounds_invalid_upwards_29576 = slt64(res_29571, 0);\n        bool valid_29577 = !bounds_invalid_upwards_29576;\n        bool range_valid_c_29578;\n        \n        if (!valid_29577) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 26) == -1) {\n                    global_failure_args[0] = 0;\n                    global_failure_args[1] = 1;\n                    global_failure_args[2] = res_29571;\n                    ",
                   ";\n                }\n                return;\n            }\n        }\n        for (int64_t i_34985 = 0; i_34985 < res_29571; i_34985++) {\n            ((__global int64_t *) mem_33739)[phys_tid_29314 + i_34985 *\n                                             num_threads_33988] = 0;\n        }\n        for (int64_t iter_33319 = 0; iter_33319 < flat_dim_26636;\n             iter_33319++) {\n            int64_t i_p_o_33441 = add64(-1, iter_33319);\n            int64_t rot_i_33442 = smod64(i_p_o_33441, flat_dim_26636);\n            bool cond_29586 = iter_33319 == 0;\n            int64_t res_29587;\n            \n            if (cond_29586) {\n                res_29587 = 0;\n            } else {\n                int64_t pixel_33322 = ((__global\n                                        int64_t *) mem_33711)[phys_tid_29314 +\n                                                              rot_i_33442 *\n                                                              (segmap_usable_groups_29548 *\n                                                               segmap_group_sizze_29547)];\n                \n                res_29587 = pixel_33322;\n            }\n            \n            bool less_than_zzero_33323 = slt64(res_29587, 0);\n            bool greater_than_sizze_33324 = sle64(res_29571, res_29587);\n            bool outside_bounds_dim_33325 = less_than_zzero_33323 ||\n                 greater_than_sizze_33324;\n            \n            if (!outside_bounds_dim_33325) {\n                int64_t read_hist_33327 = ((__global\n                                            int64_t *) mem_33739)[phys_tid_29314 +\n                                                                  res_29587 *\n                                                                  num_threads_33988];\n                int64_t res_29583 = smax64(iter_33319, read_hist_33327);\n                \n                ((__global int64_t *) mem_33739)[phys_tid_29314 + res_29587 *\n                                                 num_threads_33988] = re",
                   "s_29583;\n            }\n        }\n        \n        int64_t discard_33340;\n        int64_t scanacc_33333 = 0;\n        \n        for (int64_t i_33336 = 0; i_33336 < res_29571; i_33336++) {\n            int64_t x_29597 = ((__global int64_t *) mem_33739)[phys_tid_29314 +\n                                                               i_33336 *\n                                                               num_threads_33988];\n            bool res_29598 = slt64(0, x_29597);\n            int64_t res_29595;\n            \n            if (res_29598) {\n                res_29595 = x_29597;\n            } else {\n                int64_t res_29596 = add64(x_29597, scanacc_33333);\n                \n                res_29595 = res_29596;\n            }\n            ((__global int64_t *) mem_33753)[phys_tid_29314 + i_33336 *\n                                             num_threads_33988] = res_29595;\n            \n            int64_t scanacc_tmp_34987 = res_29595;\n            \n            scanacc_33333 = scanacc_tmp_34987;\n        }\n        discard_33340 = scanacc_33333;\n        \n        int64_t inpacc_29602;\n        float inpacc_29604;\n        int64_t inpacc_29610;\n        float inpacc_29612;\n        \n        inpacc_29610 = 0;\n        inpacc_29612 = 0.0F;\n        for (int64_t i_33284 = 0; i_33284 < res_29571; i_33284++) {\n            int64_t x_29626 = ((__global int64_t *) mem_33753)[phys_tid_29314 +\n                                                               i_33284 *\n                                                               num_threads_33988];\n            int64_t i_p_o_33288 = add64(-1, i_33284);\n            int64_t rot_i_33289 = smod64(i_p_o_33288, res_29571);\n            int64_t x_29627 = ((__global int64_t *) mem_33753)[phys_tid_29314 +\n                                                               rot_i_33289 *\n                                                               num_threads_33988];\n            bool res_29629 = x_29626 == x_29627;\n            bool res_29630 = !res_29629",
                   ";\n            int64_t res_29638;\n            \n            if (res_29630) {\n                res_29638 = 1;\n            } else {\n                int64_t res_29639 = add64(1, inpacc_29610);\n                \n                res_29638 = res_29639;\n            }\n            \n            int64_t res_29653;\n            \n            if (res_29630) {\n                res_29653 = 1;\n            } else {\n                int64_t res_29654 = add64(1, inpacc_29610);\n                \n                res_29653 = res_29654;\n            }\n            \n            int64_t res_29655 = sub64(res_29653, 1);\n            bool x_29656 = sle64(0, x_29626);\n            bool y_29657 = slt64(x_29626, flat_dim_26636);\n            bool bounds_check_29658 = x_29656 && y_29657;\n            bool index_certs_29659;\n            \n            if (!bounds_check_29658) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 27) ==\n                        -1) {\n                        global_failure_args[0] = x_29626;\n                        global_failure_args[1] = flat_dim_26636;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int64_t new_index_29660 = squot64(x_29626, n_26351);\n            int64_t binop_y_29661 = n_26351 * new_index_29660;\n            int64_t new_index_29662 = x_29626 - binop_y_29661;\n            int64_t lifted_0_get_arg_29666 = ((__global\n                                               int64_t *) res_mem_33488)[new_index_29662];\n            float lifted_0_get_arg_29667 = ((__global\n                                             float *) res_mem_33489)[new_index_29662];\n            float x_29668 = index_primexp_32608 / lifted_0_get_arg_29667;\n            float ceil_arg_29669 = x_29668 - 1.0F;\n            float res_29670;\n            \n            res_29670 = futrts_ceil32(ceil_arg_29669);\n            \n            int64_t res_29671 = fptosi_f32_i64(res_29670);\n            int6",
                   "4_t max_arg_29672 = sub64(lifted_0_get_arg_29666, res_29671);\n            int64_t res_29673 = smax64(0, max_arg_29672);\n            bool cond_29674 = res_29673 == 0;\n            float res_29675;\n            \n            if (cond_29674) {\n                res_29675 = 0.0F;\n            } else {\n                float lifted_0_get_arg_29663 = ((__global\n                                                 float *) mem_33689)[phys_tid_29314 +\n                                                                     (new_index_29660 *\n                                                                      (segmap_usable_groups_29548 *\n                                                                       segmap_group_sizze_29547 *\n                                                                       n_26351) +\n                                                                      new_index_29662 *\n                                                                      (segmap_usable_groups_29548 *\n                                                                       segmap_group_sizze_29547))];\n                float lifted_0_get_arg_29664 = ((__global\n                                                 float *) res_mem_33486)[new_index_29662];\n                float lifted_0_get_arg_29665 = ((__global\n                                                 float *) res_mem_33487)[new_index_29662];\n                float res_29676;\n                \n                res_29676 = futrts_ceil32(x_29668);\n                \n                float start_29677 = lifted_0_get_arg_29667 * res_29676;\n                float res_29678;\n                \n                res_29678 = futrts_ceil32(ceil_arg_29669);\n                \n                int64_t res_29679 = fptosi_f32_i64(res_29678);\n                int64_t max_arg_29680 = sub64(lifted_0_get_arg_29666,\n                                              res_29679);\n                int64_t res_29681 = smax64(0, max_arg_29680);\n                int64_t sizze_29682 = s",
                   "ub64(res_29681, 1);\n                bool cond_29683 = res_29655 == 0;\n                float res_29684;\n                \n                if (cond_29683) {\n                    res_29684 = 1.0F;\n                } else {\n                    res_29684 = 0.0F;\n                }\n                \n                bool cond_29685 = slt64(0, res_29655);\n                float res_29686;\n                \n                if (cond_29685) {\n                    float y_29687 = lifted_0_get_arg_29664 *\n                          lifted_0_get_arg_29667;\n                    float res_29688 = res_29684 - y_29687;\n                    \n                    res_29686 = res_29688;\n                } else {\n                    res_29686 = res_29684;\n                }\n                \n                bool cond_29689 = res_29655 == sizze_29682;\n                float res_29690;\n                \n                if (cond_29689) {\n                    float res_29691 = res_29686 - 1.0F;\n                    \n                    res_29690 = res_29691;\n                } else {\n                    res_29690 = res_29686;\n                }\n                \n                float res_29692 = lifted_0_get_arg_29665 * res_29690;\n                float res_29693 = sitofp_i64_f32(res_29655);\n                float y_29694 = lifted_0_get_arg_29667 * res_29693;\n                float bondprice_arg_29695 = start_29677 + y_29694;\n                float y_29696 = bondprice_arg_29695 - index_primexp_32608;\n                float negate_arg_29697 = a_26359 * y_29696;\n                float exp_arg_29698 = 0.0F - negate_arg_29697;\n                float res_29699 = fpow32(2.7182817F, exp_arg_29698);\n                float x_29700 = 1.0F - res_29699;\n                float B_29701 = x_29700 / a_26359;\n                float x_29702 = B_29701 - bondprice_arg_29695;\n                float x_29703 = x_29702 + index_primexp_32608;\n                float x_29704 = fpow32(a_26359, 2.0F);\n                float x_29705 = b_26360 * x_29704;\n ",
                   "               float x_29706 = fpow32(sigma_26361, 2.0F);\n                float y_29707 = x_29706 / 2.0F;\n                float y_29708 = x_29705 - y_29707;\n                float x_29709 = x_29703 * y_29708;\n                float A1_29710 = x_29709 / x_29704;\n                float y_29711 = fpow32(B_29701, 2.0F);\n                float x_29712 = x_29706 * y_29711;\n                float y_29713 = 4.0F * a_26359;\n                float A2_29714 = x_29712 / y_29713;\n                float exp_arg_29715 = A1_29710 - A2_29714;\n                float res_29716 = fpow32(2.7182817F, exp_arg_29715);\n                float negate_arg_29717 = lifted_0_get_arg_29663 * B_29701;\n                float exp_arg_29718 = 0.0F - negate_arg_29717;\n                float res_29719 = fpow32(2.7182817F, exp_arg_29718);\n                float res_29720 = res_29716 * res_29719;\n                float x_29721 = res_29692 * res_29720;\n                float res_29722 = lifted_0_get_arg_29665 * x_29721;\n                \n                res_29675 = res_29722;\n            }\n            \n            float res_29732;\n            \n            if (res_29630) {\n                res_29732 = res_29675;\n            } else {\n                float res_29733 = inpacc_29612 + res_29675;\n                \n                res_29732 = res_29733;\n            }\n            \n            float res_29735;\n            \n            if (res_29630) {\n                res_29735 = res_29675;\n            } else {\n                float res_29736 = inpacc_29612 + res_29675;\n                \n                res_29735 = res_29736;\n            }\n            ((__global float *) mem_33767)[phys_tid_29314 + i_33284 *\n                                           num_threads_33988] = res_29732;\n            ((__global bool *) mem_33769)[phys_tid_29314 + i_33284 *\n                                          num_threads_33988] = res_29630;\n            \n            int64_t inpacc_tmp_34989 = res_29638;\n            float inpacc_tmp_34990 = res_29735;\n  ",
                   "          \n            inpacc_29610 = inpacc_tmp_34989;\n            inpacc_29612 = inpacc_tmp_34990;\n        }\n        inpacc_29602 = inpacc_29610;\n        inpacc_29604 = inpacc_29612;\n        \n        int64_t discard_33346;\n        int64_t scanacc_33342 = 0;\n        \n        for (int64_t i_33344 = 0; i_33344 < res_29571; i_33344++) {\n            int64_t i_p_o_33445 = add64(1, i_33344);\n            int64_t rot_i_33446 = smod64(i_p_o_33445, res_29571);\n            bool x_29742 = ((__global bool *) mem_33769)[phys_tid_29314 +\n                                                         rot_i_33446 *\n                                                         num_threads_33988];\n            int64_t res_29743 = btoi_bool_i64(x_29742);\n            int64_t res_29741 = add64(res_29743, scanacc_33342);\n            \n            ((__global int64_t *) mem_33795)[phys_tid_29314 + i_33344 *\n                                             num_threads_33988] = res_29741;\n            \n            int64_t scanacc_tmp_34993 = res_29741;\n            \n            scanacc_33342 = scanacc_tmp_34993;\n        }\n        discard_33346 = scanacc_33342;\n        \n        bool cond_29744 = slt64(0, res_29571);\n        int64_t num_segments_29745;\n        \n        if (cond_29744) {\n            int64_t i_29746 = sub64(res_29571, 1);\n            bool x_29747 = sle64(0, i_29746);\n            bool y_29748 = slt64(i_29746, res_29571);\n            bool bounds_check_29749 = x_29747 && y_29748;\n            bool index_certs_29750;\n            \n            if (!bounds_check_29749) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 28) ==\n                        -1) {\n                        global_failure_args[0] = i_29746;\n                        global_failure_args[1] = res_29571;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int64_t res_29751 = ((__global\n                                  i",
                   "nt64_t *) mem_33795)[phys_tid_29314 +\n                                                        i_29746 *\n                                                        num_threads_33988];\n            \n            num_segments_29745 = res_29751;\n        } else {\n            num_segments_29745 = 0;\n        }\n        for (int64_t i_34995 = 0; i_34995 < num_segments_29745; i_34995++) {\n            ((__global float *) mem_33809)[phys_tid_29314 + i_34995 *\n                                           num_threads_33988] = 0.0F;\n        }\n        for (int64_t write_iter_33347 = 0; write_iter_33347 < res_29571;\n             write_iter_33347++) {\n            int64_t i_p_o_33448 = add64(1, write_iter_33347);\n            int64_t rot_i_33449 = smod64(i_p_o_33448, res_29571);\n            bool write_iv_33350 = ((__global bool *) mem_33769)[phys_tid_29314 +\n                                                                rot_i_33449 *\n                                                                num_threads_33988];\n            int64_t res_29760;\n            \n            if (write_iv_33350) {\n                int64_t write_iv_33349 = ((__global\n                                           int64_t *) mem_33795)[phys_tid_29314 +\n                                                                 write_iter_33347 *\n                                                                 num_threads_33988];\n                int64_t res_29761 = sub64(write_iv_33349, 1);\n                \n                res_29760 = res_29761;\n            } else {\n                res_29760 = -1;\n            }\n            \n            bool less_than_zzero_33352 = slt64(res_29760, 0);\n            bool greater_than_sizze_33353 = sle64(num_segments_29745,\n                                                  res_29760);\n            bool outside_bounds_dim_33354 = less_than_zzero_33352 ||\n                 greater_than_sizze_33353;\n            \n            if (!outside_bounds_dim_33354) {\n                for (int64_t i_34997 = 0; i_34997 <",
                   " 1; i_34997++) {\n                    ((__global float *) mem_33809)[phys_tid_29314 + (res_29760 +\n                                                                     i_34997) *\n                                                   num_threads_33988] =\n                        ((__global float *) mem_33767)[phys_tid_29314 +\n                                                       num_threads_33988 *\n                                                       write_iter_33347 +\n                                                       i_34997 *\n                                                       num_threads_33988];\n                }\n            }\n        }\n        \n        bool dim_match_29762 = flat_dim_26636 == num_segments_29745;\n        bool empty_or_match_cert_29763;\n        \n        if (!dim_match_29762) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 29) == -1) {\n                    global_failure_args[0] = num_segments_29745;\n                    global_failure_args[1] = flat_dim_26636;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float res_29765;\n        float redout_33358 = 0.0F;\n        \n        for (int64_t i_33359 = 0; i_33359 < paths_26354; i_33359++) {\n            int64_t binop_x_33459 = n_26351 * i_33359;\n            float res_29770;\n            float redout_33360 = 0.0F;\n            \n            for (int64_t i_33361 = 0; i_33361 < n_26351; i_33361++) {\n                int64_t new_index_33460 = i_33361 + binop_x_33459;\n                float x_29774 = ((__global float *) mem_33809)[phys_tid_29314 +\n                                                               new_index_33460 *\n                                                               num_threads_33988];\n                float res_29773 = x_29774 + redout_33360;\n                float redout_tmp_34999 = res_29773;\n                \n                redout_33360 = redout_tmp_34999;\n            }\n            res_29770 = re",
                   "dout_33360;\n            \n            float res_29775 = fmax32(0.0F, res_29770);\n            float res_29768 = res_29775 + redout_33358;\n            float redout_tmp_34998 = res_29768;\n            \n            redout_33358 = redout_tmp_34998;\n        }\n        res_29765 = redout_33358;\n        \n        float res_29776 = res_29765 / res_26640;\n        \n        ((__global float *) mem_33823)[gtid_29313] = res_29776;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_29547\n}\n__kernel void mainzisegmap_29779(__global int *global_failure,\n                                 int64_t steps_26355, float res_26640, __global\n                                 unsigned char *mem_33950, __global\n                                 unsigned char *mem_33953)\n{\n    #define segmap_group_sizze_30494 (mainzisegmap_group_sizze_29781)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35322;\n    int32_t local_tid_35323;\n    int64_t group_sizze_35326;\n    int32_t wave_sizze_35325;\n    int32_t group_tid_35324;\n    \n    global_tid_35322 = get_global_id(0);\n    local_tid_35323 = get_local_id(0);\n    group_sizze_35326 = get_local_size(0);\n    wave_sizze_35325 = LOCKSTEP_WIDTH;\n    group_tid_35324 = get_group_id(0);\n    \n    int32_t phys_tid_29779;\n    \n    phys_tid_29779 = global_tid_35322;\n    \n    int64_t gtid_29778;\n    \n    gtid_29778 = sext_i32_i64(group_tid_35324) * segmap_group_sizze_30494 +\n        sext_i32_i64(local_tid_35323);\n    if (slt64(gtid_29778, steps_26355)) {\n        float res_30497 = ((__global float *) mem_33950)[gtid_29778];\n        float res_30498 = res_30497 / res_26640;\n        \n        ((__global float *) mem_33953)[gtid_29778] = res_30498;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30494\n}\n__kernel void mainzisegmap_29899(__global int *global_failure,\n                                 int failure_is_an_option, __global\n",
                   "                                 int64_t *global_failure_args, int64_t n_26351,\n                                 int64_t paths_26354, int64_t steps_26355,\n                                 float a_26359, float b_26360,\n                                 float sigma_26361, float sims_per_year_26449,\n                                 int64_t flat_dim_26636,\n                                 int64_t num_groups_30277, __global\n                                 unsigned char *res_mem_33486, __global\n                                 unsigned char *res_mem_33487, __global\n                                 unsigned char *res_mem_33488, __global\n                                 unsigned char *res_mem_33489, __global\n                                 unsigned char *res_mem_33685, __global\n                                 unsigned char *mem_33833, __global\n                                 unsigned char *mem_33836, __global\n                                 unsigned char *mem_33839, __global\n                                 unsigned char *mem_33853, __global\n                                 unsigned char *mem_33867, __global\n                                 unsigned char *mem_33869, __global\n                                 unsigned char *mem_33895, __global\n                                 unsigned char *mem_33909, __global\n                                 unsigned char *mem_33923, __global\n                                 unsigned char *mem_33939,\n                                 int64_t num_threads_34358)\n{\n    #define segmap_group_sizze_30276 (mainzisegmap_group_sizze_29901)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_35236;\n    int32_t local_tid_35237;\n    int64_t group_s",
                   "izze_35240;\n    int32_t wave_sizze_35239;\n    int32_t group_tid_35238;\n    \n    global_tid_35236 = get_global_id(0);\n    local_tid_35237 = get_local_id(0);\n    group_sizze_35240 = get_local_size(0);\n    wave_sizze_35239 = LOCKSTEP_WIDTH;\n    group_tid_35238 = get_group_id(0);\n    \n    int32_t phys_tid_29899;\n    \n    phys_tid_29899 = global_tid_35236;\n    \n    int32_t phys_group_id_35241;\n    \n    phys_group_id_35241 = get_group_id(0);\n    for (int32_t i_35242 = 0; i_35242 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(steps_26355,\n                                          segmap_group_sizze_30276)) -\n                   phys_group_id_35241, sext_i64_i32(num_groups_30277));\n         i_35242++) {\n        int32_t virt_group_id_35243 = phys_group_id_35241 + i_35242 *\n                sext_i64_i32(num_groups_30277);\n        int64_t gtid_29898 = sext_i32_i64(virt_group_id_35243) *\n                segmap_group_sizze_30276 + sext_i32_i64(local_tid_35237);\n        \n        if (slt64(gtid_29898, steps_26355)) {\n            int64_t convop_x_32622 = add64(1, gtid_29898);\n            float binop_x_32623 = sitofp_i64_f32(convop_x_32622);\n            float index_primexp_32624 = binop_x_32623 / sims_per_year_26449;\n            int64_t res_30283 = ((__global int64_t *) mem_33833)[gtid_29898];\n            bool bounds_invalid_upwards_30284 = slt64(res_30283, 0);\n            bool valid_30285 = !bounds_invalid_upwards_30284;\n            bool range_valid_c_30286;\n            \n            if (!valid_30285) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 32) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = 1;\n                        global_failure_args[2] = res_30283;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            for (int64_t i_35244 = 0; i_35244 < ",
                   "res_30283; i_35244++) {\n                ((__global int64_t *) mem_33839)[phys_tid_29899 + i_35244 *\n                                                 num_threads_34358] = 0;\n            }\n            for (int64_t iter_33362 = 0; iter_33362 < flat_dim_26636;\n                 iter_33362++) {\n                bool cond_30295 = iter_33362 == 0;\n                int64_t res_30296;\n                \n                if (cond_30295) {\n                    res_30296 = 0;\n                } else {\n                    int64_t pixel_33365 = ((__global\n                                            int64_t *) mem_33836)[iter_33362 *\n                                                                  steps_26355 +\n                                                                  gtid_29898];\n                    \n                    res_30296 = pixel_33365;\n                }\n                \n                bool less_than_zzero_33366 = slt64(res_30296, 0);\n                bool greater_than_sizze_33367 = sle64(res_30283, res_30296);\n                bool outside_bounds_dim_33368 = less_than_zzero_33366 ||\n                     greater_than_sizze_33367;\n                \n                if (!outside_bounds_dim_33368) {\n                    int64_t read_hist_33370 = ((__global\n                                                int64_t *) mem_33839)[phys_tid_29899 +\n                                                                      res_30296 *\n                                                                      num_threads_34358];\n                    int64_t res_30292 = smax64(iter_33362, read_hist_33370);\n                    \n                    ((__global int64_t *) mem_33839)[phys_tid_29899 +\n                                                     res_30296 *\n                                                     num_threads_34358] =\n                        res_30292;\n                }\n            }\n            \n            int64_t discard_33383;\n            int64_t scanacc_33376 = 0;\n            \n  ",
                   "          for (int64_t i_33379 = 0; i_33379 < res_30283; i_33379++) {\n                int64_t x_30306 = ((__global\n                                    int64_t *) mem_33839)[phys_tid_29899 +\n                                                          i_33379 *\n                                                          num_threads_34358];\n                bool res_30307 = slt64(0, x_30306);\n                int64_t res_30304;\n                \n                if (res_30307) {\n                    res_30304 = x_30306;\n                } else {\n                    int64_t res_30305 = add64(x_30306, scanacc_33376);\n                    \n                    res_30304 = res_30305;\n                }\n                ((__global int64_t *) mem_33853)[phys_tid_29899 + i_33379 *\n                                                 num_threads_34358] = res_30304;\n                \n                int64_t scanacc_tmp_35246 = res_30304;\n                \n                scanacc_33376 = scanacc_tmp_35246;\n            }\n            discard_33383 = scanacc_33376;\n            \n            int64_t discard_33397;\n            int64_t scanacc_33388 = 0;\n            \n            for (int64_t i_33392 = 0; i_33392 < res_30283; i_33392++) {\n                int64_t x_30329 = ((__global\n                                    int64_t *) mem_33853)[phys_tid_29899 +\n                                                          i_33392 *\n                                                          num_threads_34358];\n                int64_t i_p_o_33452 = add64(-1, i_33392);\n                int64_t rot_i_33453 = smod64(i_p_o_33452, res_30283);\n                int64_t x_30330 = ((__global\n                                    int64_t *) mem_33853)[phys_tid_29899 +\n                                                          rot_i_33453 *\n                                                          num_threads_34358];\n                bool res_30332 = x_30329 == x_30330;\n                bool res_30333 = !res_30332;\n                int6",
                   "4_t res_30327;\n                \n                if (res_30333) {\n                    res_30327 = 1;\n                } else {\n                    int64_t res_30328 = add64(1, scanacc_33388);\n                    \n                    res_30327 = res_30328;\n                }\n                ((__global int64_t *) mem_33867)[phys_tid_29899 + i_33392 *\n                                                 num_threads_34358] = res_30327;\n                ((__global bool *) mem_33869)[phys_tid_29899 + i_33392 *\n                                              num_threads_34358] = res_30333;\n                \n                int64_t scanacc_tmp_35248 = res_30327;\n                \n                scanacc_33388 = scanacc_tmp_35248;\n            }\n            discard_33397 = scanacc_33388;\n            \n            float discard_33408;\n            float scanacc_33401 = 0.0F;\n            \n            for (int64_t i_33404 = 0; i_33404 < res_30283; i_33404++) {\n                int64_t x_30353 = ((__global\n                                    int64_t *) mem_33867)[phys_tid_29899 +\n                                                          i_33404 *\n                                                          num_threads_34358];\n                int64_t x_30354 = ((__global\n                                    int64_t *) mem_33853)[phys_tid_29899 +\n                                                          i_33404 *\n                                                          num_threads_34358];\n                bool x_30355 = ((__global bool *) mem_33869)[phys_tid_29899 +\n                                                             i_33404 *\n                                                             num_threads_34358];\n                int64_t res_30358 = sub64(x_30353, 1);\n                bool x_30359 = sle64(0, x_30354);\n                bool y_30360 = slt64(x_30354, flat_dim_26636);\n                bool bounds_check_30361 = x_30359 && y_30360;\n                bool index_certs_30362;\n                \n   ",
                   "             if (!bounds_check_30361) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 33) ==\n                            -1) {\n                            global_failure_args[0] = x_30354;\n                            global_failure_args[1] = flat_dim_26636;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t new_index_30363 = squot64(x_30354, n_26351);\n                int64_t binop_y_30364 = n_26351 * new_index_30363;\n                int64_t new_index_30365 = x_30354 - binop_y_30364;\n                int64_t lifted_0_get_arg_30369 = ((__global\n                                                   int64_t *) res_mem_33488)[new_index_30365];\n                float lifted_0_get_arg_30370 = ((__global\n                                                 float *) res_mem_33489)[new_index_30365];\n                float x_30371 = index_primexp_32624 / lifted_0_get_arg_30370;\n                float ceil_arg_30372 = x_30371 - 1.0F;\n                float res_30373;\n                \n                res_30373 = futrts_ceil32(ceil_arg_30372);\n                \n                int64_t res_30374 = fptosi_f32_i64(res_30373);\n                int64_t max_arg_30375 = sub64(lifted_0_get_arg_30369,\n                                              res_30374);\n                int64_t res_30376 = smax64(0, max_arg_30375);\n                bool cond_30377 = res_30376 == 0;\n                float res_30378;\n                \n                if (cond_30377) {\n                    res_30378 = 0.0F;\n                } else {\n                    float lifted_0_get_arg_30366 = ((__global\n                                                     float *) res_mem_33685)[new_index_30363 *\n                                                                             steps_26355 +\n                               ",
                   "                                              gtid_29898];\n                    float lifted_0_get_arg_30367 = ((__global\n                                                     float *) res_mem_33486)[new_index_30365];\n                    float lifted_0_get_arg_30368 = ((__global\n                                                     float *) res_mem_33487)[new_index_30365];\n                    float res_30379;\n                    \n                    res_30379 = futrts_ceil32(x_30371);\n                    \n                    float start_30380 = lifted_0_get_arg_30370 * res_30379;\n                    float res_30381;\n                    \n                    res_30381 = futrts_ceil32(ceil_arg_30372);\n                    \n                    int64_t res_30382 = fptosi_f32_i64(res_30381);\n                    int64_t max_arg_30383 = sub64(lifted_0_get_arg_30369,\n                                                  res_30382);\n                    int64_t res_30384 = smax64(0, max_arg_30383);\n                    int64_t sizze_30385 = sub64(res_30384, 1);\n                    bool cond_30386 = res_30358 == 0;\n                    float res_30387;\n                    \n                    if (cond_30386) {\n                        res_30387 = 1.0F;\n                    } else {\n                        res_30387 = 0.0F;\n                    }\n                    \n                    bool cond_30388 = slt64(0, res_30358);\n                    float res_30389;\n                    \n                    if (cond_30388) {\n                        float y_30390 = lifted_0_get_arg_30367 *\n                              lifted_0_get_arg_30370;\n                        float res_30391 = res_30387 - y_30390;\n                        \n                        res_30389 = res_30391;\n                    } else {\n                        res_30389 = res_30387;\n                    }\n                    \n                    bool cond_30392 = res_30358 == sizze_30385;\n                    float res_30393;\n       ",
                   "             \n                    if (cond_30392) {\n                        float res_30394 = res_30389 - 1.0F;\n                        \n                        res_30393 = res_30394;\n                    } else {\n                        res_30393 = res_30389;\n                    }\n                    \n                    float res_30395 = lifted_0_get_arg_30368 * res_30393;\n                    float res_30396 = sitofp_i64_f32(res_30358);\n                    float y_30397 = lifted_0_get_arg_30370 * res_30396;\n                    float bondprice_arg_30398 = start_30380 + y_30397;\n                    float y_30399 = bondprice_arg_30398 - index_primexp_32624;\n                    float negate_arg_30400 = a_26359 * y_30399;\n                    float exp_arg_30401 = 0.0F - negate_arg_30400;\n                    float res_30402 = fpow32(2.7182817F, exp_arg_30401);\n                    float x_30403 = 1.0F - res_30402;\n                    float B_30404 = x_30403 / a_26359;\n                    float x_30405 = B_30404 - bondprice_arg_30398;\n                    float x_30406 = x_30405 + index_primexp_32624;\n                    float x_30407 = fpow32(a_26359, 2.0F);\n                    float x_30408 = b_26360 * x_30407;\n                    float x_30409 = fpow32(sigma_26361, 2.0F);\n                    float y_30410 = x_30409 / 2.0F;\n                    float y_30411 = x_30408 - y_30410;\n                    float x_30412 = x_30406 * y_30411;\n                    float A1_30413 = x_30412 / x_30407;\n                    float y_30414 = fpow32(B_30404, 2.0F);\n                    float x_30415 = x_30409 * y_30414;\n                    float y_30416 = 4.0F * a_26359;\n                    float A2_30417 = x_30415 / y_30416;\n                    float exp_arg_30418 = A1_30413 - A2_30417;\n                    float res_30419 = fpow32(2.7182817F, exp_arg_30418);\n                    float negate_arg_30420 = lifted_0_get_arg_30366 * B_30404;\n                    float exp_arg_30421 = 0.0F - negate_a",
                   "rg_30420;\n                    float res_30422 = fpow32(2.7182817F, exp_arg_30421);\n                    float res_30423 = res_30419 * res_30422;\n                    float x_30424 = res_30395 * res_30423;\n                    float res_30425 = lifted_0_get_arg_30368 * x_30424;\n                    \n                    res_30378 = res_30425;\n                }\n                \n                float res_30350;\n                \n                if (x_30355) {\n                    res_30350 = res_30378;\n                } else {\n                    float res_30351 = res_30378 + scanacc_33401;\n                    \n                    res_30350 = res_30351;\n                }\n                ((__global float *) mem_33895)[phys_tid_29899 + i_33404 *\n                                               num_threads_34358] = res_30350;\n                \n                float scanacc_tmp_35251 = res_30350;\n                \n                scanacc_33401 = scanacc_tmp_35251;\n            }\n            discard_33408 = scanacc_33401;\n            \n            int64_t discard_33414;\n            int64_t scanacc_33410 = 0;\n            \n            for (int64_t i_33412 = 0; i_33412 < res_30283; i_33412++) {\n                int64_t i_p_o_33454 = add64(1, i_33412);\n                int64_t rot_i_33455 = smod64(i_p_o_33454, res_30283);\n                bool x_30452 = ((__global bool *) mem_33869)[phys_tid_29899 +\n                                                             rot_i_33455 *\n                                                             num_threads_34358];\n                int64_t res_30453 = btoi_bool_i64(x_30452);\n                int64_t res_30451 = add64(res_30453, scanacc_33410);\n                \n                ((__global int64_t *) mem_33909)[phys_tid_29899 + i_33412 *\n                                                 num_threads_34358] = res_30451;\n                \n                int64_t scanacc_tmp_35253 = res_30451;\n                \n                scanacc_33410 = scanacc_tmp_35253;\n      ",
                   "      }\n            discard_33414 = scanacc_33410;\n            \n            bool cond_30454 = slt64(0, res_30283);\n            int64_t num_segments_30455;\n            \n            if (cond_30454) {\n                int64_t i_30456 = sub64(res_30283, 1);\n                bool x_30457 = sle64(0, i_30456);\n                bool y_30458 = slt64(i_30456, res_30283);\n                bool bounds_check_30459 = x_30457 && y_30458;\n                bool index_certs_30460;\n                \n                if (!bounds_check_30459) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 34) ==\n                            -1) {\n                            global_failure_args[0] = i_30456;\n                            global_failure_args[1] = res_30283;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t res_30461 = ((__global\n                                      int64_t *) mem_33909)[phys_tid_29899 +\n                                                            i_30456 *\n                                                            num_threads_34358];\n                \n                num_segments_30455 = res_30461;\n            } else {\n                num_segments_30455 = 0;\n            }\n            for (int64_t i_35255 = 0; i_35255 < num_segments_30455; i_35255++) {\n                ((__global float *) mem_33923)[phys_tid_29899 + i_35255 *\n                                               num_threads_34358] = 0.0F;\n            }\n            for (int64_t write_iter_33415 = 0; write_iter_33415 < res_30283;\n                 write_iter_33415++) {\n                int64_t i_p_o_33457 = add64(1, write_iter_33415);\n                int64_t rot_i_33458 = smod64(i_p_o_33457, res_30283);\n                bool write_iv_33418 = ((__global\n                                        bool *) mem_33869)[",
                   "phys_tid_29899 +\n                                                           rot_i_33458 *\n                                                           num_threads_34358];\n                int64_t res_30471;\n                \n                if (write_iv_33418) {\n                    int64_t write_iv_33417 = ((__global\n                                               int64_t *) mem_33909)[phys_tid_29899 +\n                                                                     write_iter_33415 *\n                                                                     num_threads_34358];\n                    int64_t res_30472 = sub64(write_iv_33417, 1);\n                    \n                    res_30471 = res_30472;\n                } else {\n                    res_30471 = -1;\n                }\n                \n                bool less_than_zzero_33420 = slt64(res_30471, 0);\n                bool greater_than_sizze_33421 = sle64(num_segments_30455,\n                                                      res_30471);\n                bool outside_bounds_dim_33422 = less_than_zzero_33420 ||\n                     greater_than_sizze_33421;\n                \n                if (!outside_bounds_dim_33422) {\n                    for (int64_t i_35257 = 0; i_35257 < 1; i_35257++) {\n                        ((__global float *) mem_33923)[phys_tid_29899 +\n                                                       (res_30471 + i_35257) *\n                                                       num_threads_34358] =\n                            ((__global float *) mem_33895)[phys_tid_29899 +\n                                                           num_threads_34358 *\n                                                           write_iter_33415 +\n                                                           i_35257 *\n                                                           num_threads_34358];\n                    }\n                }\n            }\n            \n            bool dim_match_30473 = flat_dim_26636 == num_",
                   "segments_30455;\n            bool empty_or_match_cert_30474;\n            \n            if (!dim_match_30473) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 35) ==\n                        -1) {\n                        global_failure_args[0] = num_segments_30455;\n                        global_failure_args[1] = flat_dim_26636;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            for (int64_t i_35258 = 0; i_35258 < paths_26354; i_35258++) {\n                for (int64_t i_35259 = 0; i_35259 < n_26351; i_35259++) {\n                    ((__global float *) mem_33939)[i_35258 * (steps_26355 *\n                                                              n_26351) +\n                                                   i_35259 * steps_26355 +\n                                                   gtid_29898] = ((__global\n                                                                   float *) mem_33923)[phys_tid_29899 +\n                                                                                       (i_35258 *\n                                                                                        n_26351 +\n                                                                                        i_35259) *\n                                                                                       num_threads_34358];\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30276\n}\n__kernel void mainzisegmap_intragroup_27629(__global int *global_failure,\n                                            int failure_is_an_option, __global\n                                            int64_t *global_failure_args,\n                                            __local volatile\n                                            int64_t *mem_33",
                   "562_backing_aligned_0,\n                                            __local volatile\n                                            int64_t *red_arr_mem_34714_backing_aligned_1,\n                                            __local volatile\n                                            int64_t *mem_33559_backing_aligned_2,\n                                            __local volatile\n                                            int64_t *mem_33544_backing_aligned_3,\n                                            __local volatile\n                                            int64_t *mem_33542_backing_aligned_4,\n                                            int64_t n_26351,\n                                            int64_t steps_26355, float a_26359,\n                                            float b_26360, float sigma_26361,\n                                            float r0_26362, float dt_26377,\n                                            float sims_per_year_26449,\n                                            int64_t upper_bound_26463,\n                                            float res_26464,\n                                            int64_t computed_group_sizze_27486,\n                                            __global\n                                            unsigned char *res_mem_33486,\n                                            __global\n                                            unsigned char *res_mem_33487,\n                                            __global\n                                            unsigned char *res_mem_33488,\n                                            __global\n                                            unsigned char *res_mem_33489,\n                                            __global unsigned char *mem_33565,\n                                            __global unsigned char *mem_33568)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict mem_33562_backing_4 = (__",
                   "local volatile\n                                                           char *) mem_33562_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_34714_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_34714_backing_aligned_1;\n    __local volatile char *restrict mem_33559_backing_2 = (__local volatile\n                                                           char *) mem_33559_backing_aligned_2;\n    __local volatile char *restrict mem_33544_backing_1 = (__local volatile\n                                                           char *) mem_33544_backing_aligned_3;\n    __local volatile char *restrict mem_33542_backing_0 = (__local volatile\n                                                           char *) mem_33542_backing_aligned_4;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34704;\n    int32_t local_tid_34705;\n    int64_t group_sizze_34708;\n    int32_t wave_sizze_34707;\n    int32_t group_tid_34706;\n    \n    global_tid_34704 = get_global_id(0);\n    local_tid_34705 = get_local_id(0);\n    group_sizze_34708 = get_local_size(0);\n    wave_sizze_34707 = LOCKSTEP_WIDTH;\n    group_tid_34706 = get_group_id(0);\n    \n    int32_t phys_tid_27629;\n    \n    phys_tid_27629 = group_tid_34706;\n    \n    int32_t ltid_pre_34709;\n    \n    ltid_pre_34709 = local_tid_34705;\n    \n    int32_t ltid_pre_34710;\n    \n    ltid_pre_34710 = squot32(local_tid_34705, sext_i64_i32(n_26351));\n    \n    int32_t ltid_pre_34711;\n    \n    ltid_pre_34711 = local_tid_34705 - squot32(local_tid_34705,\n                                               sext_i64_i32(n_26351)) *\n        sext_i64_i32(n_26351);\n    \n    int64_t gtid_27484;\n    \n    gtid_27484 = sext_i32_i64(group_tid_34706);\n    \n    int32_t res_27986;\n    \n    res_27986 ",
                   "= sext_i64_i32(gtid_27484);\n    \n    int32_t x_27987 = lshr32(res_27986, 16);\n    int32_t x_27988 = res_27986 ^ x_27987;\n    int32_t x_27989 = mul32(73244475, x_27988);\n    int32_t x_27990 = lshr32(x_27989, 16);\n    int32_t x_27991 = x_27989 ^ x_27990;\n    int32_t x_27992 = mul32(73244475, x_27991);\n    int32_t x_27993 = lshr32(x_27992, 16);\n    int32_t x_27994 = x_27992 ^ x_27993;\n    int32_t unsign_arg_27995 = 777822902 ^ x_27994;\n    int32_t unsign_arg_27996 = mul32(48271, unsign_arg_27995);\n    int32_t unsign_arg_27997 = umod32(unsign_arg_27996, 2147483647);\n    __local char *mem_33542;\n    \n    mem_33542 = (__local char *) mem_33542_backing_0;\n    \n    int64_t gtid_27487 = sext_i32_i64(ltid_pre_34709);\n    int32_t phys_tid_27488 = local_tid_34705;\n    \n    if (slt64(gtid_27487, steps_26355)) {\n        int32_t res_28000 = sext_i64_i32(gtid_27487);\n        int32_t x_28001 = lshr32(res_28000, 16);\n        int32_t x_28002 = res_28000 ^ x_28001;\n        int32_t x_28003 = mul32(73244475, x_28002);\n        int32_t x_28004 = lshr32(x_28003, 16);\n        int32_t x_28005 = x_28003 ^ x_28004;\n        int32_t x_28006 = mul32(73244475, x_28005);\n        int32_t x_28007 = lshr32(x_28006, 16);\n        int32_t x_28008 = x_28006 ^ x_28007;\n        int32_t unsign_arg_28009 = unsign_arg_27997 ^ x_28008;\n        int32_t unsign_arg_28010 = mul32(48271, unsign_arg_28009);\n        int32_t unsign_arg_28011 = umod32(unsign_arg_28010, 2147483647);\n        int32_t unsign_arg_28012 = mul32(48271, unsign_arg_28011);\n        int32_t unsign_arg_28013 = umod32(unsign_arg_28012, 2147483647);\n        float res_28014 = uitofp_i32_f32(unsign_arg_28011);\n        float res_28015 = res_28014 / 2.1474836e9F;\n        float res_28016 = uitofp_i32_f32(unsign_arg_28013);\n        float res_28017 = res_28016 / 2.1474836e9F;\n        float res_28018;\n        \n        res_28018 = futrts_log32(res_28015);\n        \n        float res_28019 = -2.0F * res_28018;\n        float res_28020;\n        \n        res_28020 ",
                   "= futrts_sqrt32(res_28019);\n        \n        float res_28021 = 6.2831855F * res_28017;\n        float res_28022;\n        \n        res_28022 = futrts_cos32(res_28021);\n        \n        float res_28023 = res_28020 * res_28022;\n        \n        ((__local float *) mem_33542)[gtid_27487] = res_28023;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local char *mem_33544;\n    \n    mem_33544 = (__local char *) mem_33544_backing_1;\n    for (int64_t i_34712 = 0; i_34712 < sdiv_up64(steps_26355 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_27486);\n         i_34712++) {\n        ((__local float *) mem_33544)[i_34712 * computed_group_sizze_27486 +\n                                      sext_i32_i64(local_tid_34705)] = r0_26362;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_28026 = 0; i_28026 < upper_bound_26463; i_28026++) {\n        bool y_28028 = slt64(i_28026, steps_26355);\n        bool index_certs_28029;\n        \n        if (!y_28028) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 8) == -1) {\n                    global_failure_args[0] = i_28026;\n                    global_failure_args[1] = steps_26355;\n                    ;\n                }\n                local_failure = true;\n                goto error_1;\n            }\n        }\n        \n        float shortstep_arg_28030 = ((__local float *) mem_33542)[i_28026];\n        float shortstep_arg_28031 = ((__local float *) mem_33544)[i_28026];\n        float y_28032 = b_26360 - shortstep_arg_28031;\n        float x_28033 = a_26359 * y_28032;\n        float x_28034 = dt_26377 * x_28033;\n        float x_28035 = res_26464 * shortstep_arg_28030;\n        float y_28036 = sigma_26361 * x_28035;\n        float delta_r_28037 = x_28034 + y_28036;\n        float res_28038 = shortstep_arg_28031 + delta_r_28037;\n        int64_t i_28039 = add64(1, i_28026);\n        bool x_28040 = sle64(0, i_2803",
                   "9);\n        bool y_28041 = slt64(i_28039, steps_26355);\n        bool bounds_check_28042 = x_28040 && y_28041;\n        bool index_certs_28043;\n        \n        if (!bounds_check_28042) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 9) == -1) {\n                    global_failure_args[0] = i_28039;\n                    global_failure_args[1] = steps_26355;\n                    ;\n                }\n                local_failure = true;\n                goto error_1;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34705 == 0) {\n            ((__local float *) mem_33544)[i_28039] = res_28038;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    __local char *mem_33559;\n    \n    mem_33559 = (__local char *) mem_33559_backing_2;\n    \n    int64_t gtid_27519 = sext_i32_i64(ltid_pre_34710);\n    int64_t gtid_27520 = sext_i32_i64(ltid_pre_34711);\n    int32_t phys_tid_27521 = local_tid_34705;\n    __local char *red_arr_mem_34714;\n    \n    red_arr_mem_34714 = (__local char *) red_arr_mem_34714_backing_3;\n    if (slt64(gtid_27519, steps_26355) && slt64(gtid_27520, n_26351)) {\n        int64_t convop_x_32577 = add64(1, gtid_27519);\n        float binop_x_32578 = sitofp_i64_f32(convop_x_32577);\n        float index_primexp_32579 = binop_x_32578 / sims_per_year_26449;\n        int64_t x_28053 = ((__global int64_t *) res_mem_33488)[gtid_27520];\n        float x_28054 = ((__global float *) res_mem_33489)[gtid_27520];\n        int64_t i64_arg_28055 = sub64(x_28053, 1);\n        float res_28056 = sitofp_i64_f32(i64_arg_28055);\n        float y_28057 = x_28054 * res_28056;\n        bool cond_28058 = y_28057 < index_primexp_32579;\n        float ceil_arg_28059 = index_primexp_32579 / x_28054;\n        float res_28060;\n        \n        res_28060 = futrts_ceil32(ceil_arg_28059);\n        \n        int64_t res_28061 = fptosi_f32_i64(res_28060);\n        int64_t remaining_28062 = sub64(x_28053, res_28061);\n        float res_28063;\n   ",
                   "     \n        if (cond_28058) {\n            res_28063 = 0.0F;\n        } else {\n            float x_28049 = ((__local float *) mem_33544)[gtid_27519];\n            float x_28051 = ((__global float *) res_mem_33486)[gtid_27520];\n            float x_28052 = ((__global float *) res_mem_33487)[gtid_27520];\n            float nextpayment_28064 = x_28054 * res_28060;\n            bool bounds_invalid_upwards_28065 = slt64(remaining_28062, 1);\n            bool valid_28066 = !bounds_invalid_upwards_28065;\n            bool range_valid_c_28067;\n            \n            if (!valid_28066) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 10) ==\n                        -1) {\n                        global_failure_args[0] = 1;\n                        global_failure_args[1] = 2;\n                        global_failure_args[2] = remaining_28062;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_1;\n                }\n            }\n            \n            float y_28069 = nextpayment_28064 - index_primexp_32579;\n            float negate_arg_28070 = a_26359 * y_28069;\n            float exp_arg_28071 = 0.0F - negate_arg_28070;\n            float res_28072 = fpow32(2.7182817F, exp_arg_28071);\n            float x_28073 = 1.0F - res_28072;\n            float B_28074 = x_28073 / a_26359;\n            float x_28075 = B_28074 - nextpayment_28064;\n            float x_28076 = x_28075 + index_primexp_32579;\n            float x_28077 = fpow32(a_26359, 2.0F);\n            float x_28078 = b_26360 * x_28077;\n            float x_28079 = fpow32(sigma_26361, 2.0F);\n            float y_28080 = x_28079 / 2.0F;\n            float y_28081 = x_28078 - y_28080;\n            float x_28082 = x_28076 * y_28081;\n            float A1_28083 = x_28082 / x_28077;\n            float y_28084 = fpow32(B_28074, 2.0F);\n            float x_28085 = x_28079 * y_28084;\n            float y_28086 = 4.0F * a_26359;\n            floa",
                   "t A2_28087 = x_28085 / y_28086;\n            float exp_arg_28088 = A1_28083 - A2_28087;\n            float res_28089 = fpow32(2.7182817F, exp_arg_28088);\n            float negate_arg_28090 = x_28049 * B_28074;\n            float exp_arg_28091 = 0.0F - negate_arg_28090;\n            float res_28092 = fpow32(2.7182817F, exp_arg_28091);\n            float res_28093 = res_28089 * res_28092;\n            bool y_28094 = slt64(0, remaining_28062);\n            bool index_certs_28095;\n            \n            if (!y_28094) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 11) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = remaining_28062;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_1;\n                }\n            }\n            \n            float binop_y_28096 = sitofp_i64_f32(remaining_28062);\n            float binop_y_28097 = x_28054 * binop_y_28096;\n            float index_primexp_28098 = nextpayment_28064 + binop_y_28097;\n            float y_28099 = index_primexp_28098 - index_primexp_32579;\n            float negate_arg_28100 = a_26359 * y_28099;\n            float exp_arg_28101 = 0.0F - negate_arg_28100;\n            float res_28102 = fpow32(2.7182817F, exp_arg_28101);\n            float x_28103 = 1.0F - res_28102;\n            float B_28104 = x_28103 / a_26359;\n            float x_28105 = B_28104 - index_primexp_28098;\n            float x_28106 = x_28105 + index_primexp_32579;\n            float x_28107 = y_28081 * x_28106;\n            float A1_28108 = x_28107 / x_28077;\n            float y_28109 = fpow32(B_28104, 2.0F);\n            float x_28110 = x_28079 * y_28109;\n            float A2_28111 = x_28110 / y_28086;\n            float exp_arg_28112 = A1_28108 - A2_28111;\n            float res_28113 = fpow32(2.7182817F, exp_arg_28112);\n            float negate_arg_28114 = x_28049 * B",
                   "_28104;\n            float exp_arg_28115 = 0.0F - negate_arg_28114;\n            float res_28116 = fpow32(2.7182817F, exp_arg_28115);\n            float res_28117 = res_28113 * res_28116;\n            float res_28118;\n            float redout_32574 = 0.0F;\n            \n            for (int64_t i_32575 = 0; i_32575 < remaining_28062; i_32575++) {\n                int64_t index_primexp_32638 = add64(1, i_32575);\n                float res_28123 = sitofp_i64_f32(index_primexp_32638);\n                float res_28124 = x_28054 * res_28123;\n                float res_28125 = nextpayment_28064 + res_28124;\n                float y_28126 = res_28125 - index_primexp_32579;\n                float negate_arg_28127 = a_26359 * y_28126;\n                float exp_arg_28128 = 0.0F - negate_arg_28127;\n                float res_28129 = fpow32(2.7182817F, exp_arg_28128);\n                float x_28130 = 1.0F - res_28129;\n                float B_28131 = x_28130 / a_26359;\n                float x_28132 = B_28131 - res_28125;\n                float x_28133 = x_28132 + index_primexp_32579;\n                float x_28134 = y_28081 * x_28133;\n                float A1_28135 = x_28134 / x_28077;\n                float y_28136 = fpow32(B_28131, 2.0F);\n                float x_28137 = x_28079 * y_28136;\n                float A2_28138 = x_28137 / y_28086;\n                float exp_arg_28139 = A1_28135 - A2_28138;\n                float res_28140 = fpow32(2.7182817F, exp_arg_28139);\n                float negate_arg_28141 = x_28049 * B_28131;\n                float exp_arg_28142 = 0.0F - negate_arg_28141;\n                float res_28143 = fpow32(2.7182817F, exp_arg_28142);\n                float res_28144 = res_28140 * res_28143;\n                float res_28121 = res_28144 + redout_32574;\n                float redout_tmp_34716 = res_28121;\n                \n                redout_32574 = redout_tmp_34716;\n            }\n            res_28118 = redout_32574;\n            \n            float x_28145 = res_28093 - res_2",
                   "8117;\n            float x_28146 = x_28051 * x_28054;\n            float y_28147 = res_28118 * x_28146;\n            float y_28148 = x_28145 - y_28147;\n            float res_28149 = x_28052 * y_28148;\n            \n            res_28063 = res_28149;\n        }\n        ((__local float *) red_arr_mem_34714)[gtid_27519 * n_26351 +\n                                              gtid_27520] = res_28063;\n    }\n    \n  error_1:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t dims_flat_34717;\n    \n    dims_flat_34717 = steps_26355 * n_26351;\n    \n    float x_28046;\n    float x_28047;\n    float x_34719;\n    float x_34720;\n    bool ltid_in_bounds_34722;\n    \n    ltid_in_bounds_34722 = slt64(sext_i32_i64(local_tid_34705), steps_26355 *\n                                 n_26351);\n    \n    int32_t skip_threads_34723;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_34722) {\n            x_28047 = ((volatile __local\n                        float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)];\n            if ((local_tid_34705 - squot32(local_tid_34705, 32) * 32) == 0) {\n                x_28046 = x_28047;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_34723 = 1;\n        while (slt32(skip_threads_34723, 32)) {\n            if (sle32(skip_threads_34723, local_tid_34705 -\n                      squot32(local_tid_34705, 32) * 32) &&\n                ltid_in_bounds_34722) {\n                // read operands\n                {\n                    x_28046 = ((volatile __local\n                                float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705) -\n                                                            sext_i32_i64(skip_threads_34723)];\n                }\n                // perform operation\n                {\n                    bool inactive_34724 =\n                         slt64(srem64(sext_i32_i64(local_tid_3470",
                   "5), n_26351),\n                               sext_i32_i64(local_tid_34705) -\n                               sext_i32_i64(local_tid_34705 -\n                               skip_threads_34723));\n                    \n                    if (inactive_34724) {\n                        x_28046 = x_28047;\n                    }\n                    if (!inactive_34724) {\n                        float res_28048 = x_28046 + x_28047;\n                        \n                        x_28046 = res_28048;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_34707, skip_threads_34723)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_34723, local_tid_34705 -\n                      squot32(local_tid_34705, 32) * 32) &&\n                ltid_in_bounds_34722) {\n                // write result\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                        x_28046;\n                    x_28047 = x_28046;\n                }\n            }\n            if (sle32(wave_sizze_34707, skip_threads_34723)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_34723 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_34705 - squot32(local_tid_34705, 32) * 32) == 31 &&\n            ltid_in_bounds_34722) {\n            ((volatile __local\n              float *) red_arr_mem_34714)[sext_i32_i64(squot32(local_tid_34705,\n                                                               32))] = x_28046;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_34725;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_34705, 32) == 0 && ltid_in_bounds_34722)",
                   " {\n                x_34720 = ((volatile __local\n                            float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)];\n                if ((local_tid_34705 - squot32(local_tid_34705, 32) * 32) ==\n                    0) {\n                    x_34719 = x_34720;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34725 = 1;\n            while (slt32(skip_threads_34725, 32)) {\n                if (sle32(skip_threads_34725, local_tid_34705 -\n                          squot32(local_tid_34705, 32) * 32) &&\n                    (squot32(local_tid_34705, 32) == 0 &&\n                     ltid_in_bounds_34722)) {\n                    // read operands\n                    {\n                        x_34719 = ((volatile __local\n                                    float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705) -\n                                                                sext_i32_i64(skip_threads_34725)];\n                    }\n                    // perform operation\n                    {\n                        bool inactive_34726 =\n                             slt64(srem64(sext_i32_i64(local_tid_34705 * 32 +\n                                          32 - 1), n_26351),\n                                   sext_i32_i64(local_tid_34705 * 32 + 32 - 1) -\n                                   sext_i32_i64((local_tid_34705 -\n                                                 skip_threads_34725) * 32 + 32 -\n                                   1));\n                        \n                        if (inactive_34726) {\n                            x_34719 = x_34720;\n                        }\n                        if (!inactive_34726) {\n                            float res_34721 = x_34719 + x_34720;\n                            \n                            x_34719 = res_34721;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_34707, skip_",
                   "threads_34725)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34725, local_tid_34705 -\n                          squot32(local_tid_34705, 32) * 32) &&\n                    (squot32(local_tid_34705, 32) == 0 &&\n                     ltid_in_bounds_34722)) {\n                    // write result\n                    {\n                        ((volatile __local\n                          float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                            x_34719;\n                        x_34720 = x_34719;\n                    }\n                }\n                if (sle32(wave_sizze_34707, skip_threads_34725)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34725 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_34705, 32) == 0 || !ltid_in_bounds_34722)) {\n            // read operands\n            {\n                x_28047 = x_28046;\n                x_28046 = ((__local\n                            float *) red_arr_mem_34714)[sext_i32_i64(squot32(local_tid_34705,\n                                                                             32)) -\n                                                        1];\n            }\n            // perform operation\n            {\n                bool inactive_34727 =\n                     slt64(srem64(sext_i32_i64(local_tid_34705), n_26351),\n                           sext_i32_i64(local_tid_34705) -\n                           sext_i32_i64(squot32(local_tid_34705, 32) * 32 - 1));\n                \n                if (inactive_34727) {\n                    x_28046 = x_28047;\n                }\n                if (!inactive_34727) {\n                    float res_28048 = x_28046 + x_28047;\n                    \n                    x_28046 = res_28048;\n                }\n            }\n            // write final result\n",
                   "            {\n                ((__local\n                  float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                    x_28046;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_34705, 32) == 0) {\n            ((__local\n              float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                x_28047;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_34728 = 0; i_34728 < sdiv_up64(steps_26355 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_27486);\n         i_34728++) {\n        ((__local float *) mem_33559)[i_34728 * computed_group_sizze_27486 +\n                                      sext_i32_i64(local_tid_34705)] = ((__local\n                                                                         float *) red_arr_mem_34714)[(i_34728 *\n                                                                                                      computed_group_sizze_27486 +\n                                                                                                      sext_i32_i64(local_tid_34705)) *\n                                                                                                     n_26351 +\n                                                                                                     (n_26351 -\n                                                                                                      1)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local char *mem_33562;\n    \n    mem_33562 = (__local char *) mem_33562_backing_4;\n    \n    int64_t gtid_27515 = sext_i32_i64(ltid_pre_34709);\n    int32_t phys_tid_27516 = local_tid_34705;\n    \n    if (slt64(gtid_27515, steps_26355)) {\n        float res_28151 = ((__local float *) mem_",
                   "33559)[gtid_27515];\n        float res_28152 = fmax32(0.0F, res_28151);\n        \n        ((__local float *) mem_33562)[gtid_27515] = res_28152;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_34729 = 0; i_34729 < sdiv_up64(steps_26355 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_27486);\n         i_34729++) {\n        ((__global float *) mem_33565)[gtid_27484 * steps_26355 + (i_34729 *\n                                                                   computed_group_sizze_27486 +\n                                                                   sext_i32_i64(local_tid_34705))] =\n            ((__local float *) mem_33562)[i_34729 * computed_group_sizze_27486 +\n                                          sext_i32_i64(local_tid_34705)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_34730 = 0; i_34730 < sdiv_up64(steps_26355 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_27486);\n         i_34730++) {\n        ((__global float *) mem_33568)[gtid_27484 * steps_26355 + (i_34730 *\n                                                                   computed_group_sizze_27486 +\n                                                                   sext_i32_i64(local_tid_34705))] =\n            ((__local float *) mem_33544)[i_34730 * computed_group_sizze_27486 +\n                                          sext_i32_i64(local_tid_34705)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_4:\n    return;\n}\n__kernel void mainzisegmap_intragroup_28171(__global int *global_failure,\n                                            int failure_is_an_option, __global\n                                            int64_t *global_failure_args,\n                                            __local volatile\n                                            int64_t *red_arr_mem_3477",
                   "2_backing_aligned_0,\n                                            int64_t n_26351,\n                                            int64_t paths_26354,\n                                            int64_t steps_26355, float a_26359,\n                                            float b_26360, float sigma_26361,\n                                            float sims_per_year_26449, __global\n                                            unsigned char *res_mem_33486,\n                                            __global\n                                            unsigned char *res_mem_33487,\n                                            __global\n                                            unsigned char *res_mem_33488,\n                                            __global\n                                            unsigned char *res_mem_33489,\n                                            __global unsigned char *mem_33596,\n                                            __global unsigned char *mem_33659)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34772_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_34772_backing_aligned_0;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34766;\n    int32_t local_tid_34767;\n    int64_t group_sizze_34770;\n    int32_t wave_sizze_34769;\n    int32_t group_tid_34768;\n    \n    global_tid_34766 = get_global_id(0);\n    local_tid_34767 = get_local_id(0);\n    group_sizze_34770 = get_local_size(0);\n    wave_sizze_34769 = LOCKSTEP_WIDTH;\n    group_tid_34768 = get_group_id(0);\n    \n    int32_t phys_tid_28171;\n    \n    phys_tid_28171 = group_tid_34768;\n    \n    int32_t ltid_pre_34771;\n    \n    ltid_pre_3477",
                   "1 = local_tid_34767;\n    \n    int64_t gtid_28164;\n    \n    gtid_28164 = squot64(sext_i32_i64(group_tid_34768), steps_26355);\n    \n    int64_t gtid_28165;\n    \n    gtid_28165 = sext_i32_i64(group_tid_34768) -\n        squot64(sext_i32_i64(group_tid_34768), steps_26355) * steps_26355;\n    \n    float x_29047;\n    \n    x_29047 = ((__global float *) mem_33596)[gtid_28165 * paths_26354 +\n                                             gtid_28164];\n    \n    int64_t convop_x_32596 = add64(1, gtid_28165);\n    float binop_x_32597 = sitofp_i64_f32(convop_x_32596);\n    float index_primexp_32598 = binop_x_32597 / sims_per_year_26449;\n    float res_29049;\n    int64_t gtid_28169 = sext_i32_i64(ltid_pre_34771);\n    int32_t phys_tid_28170 = local_tid_34767;\n    __local char *red_arr_mem_34772;\n    \n    red_arr_mem_34772 = (__local char *) red_arr_mem_34772_backing_0;\n    if (slt64(gtid_28169, n_26351)) {\n        int64_t x_29055 = ((__global int64_t *) res_mem_33488)[gtid_28169];\n        float x_29056 = ((__global float *) res_mem_33489)[gtid_28169];\n        int64_t i64_arg_29057 = sub64(x_29055, 1);\n        float res_29058 = sitofp_i64_f32(i64_arg_29057);\n        float y_29059 = x_29056 * res_29058;\n        bool cond_29060 = y_29059 < index_primexp_32598;\n        float ceil_arg_29061 = index_primexp_32598 / x_29056;\n        float res_29062;\n        \n        res_29062 = futrts_ceil32(ceil_arg_29061);\n        \n        int64_t res_29063 = fptosi_f32_i64(res_29062);\n        int64_t remaining_29064 = sub64(x_29055, res_29063);\n        float res_29065;\n        \n        if (cond_29060) {\n            res_29065 = 0.0F;\n        } else {\n            float x_29053 = ((__global float *) res_mem_33486)[gtid_28169];\n            float x_29054 = ((__global float *) res_mem_33487)[gtid_28169];\n            float nextpayment_29066 = x_29056 * res_29062;\n            bool bounds_invalid_upwards_29067 = slt64(remaining_29064, 1);\n            bool valid_29068 = !bounds_invalid_upwards_29067;\n            bool r",
                   "ange_valid_c_29069;\n            \n            if (!valid_29068) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 18) ==\n                        -1) {\n                        global_failure_args[0] = 1;\n                        global_failure_args[1] = 2;\n                        global_failure_args[2] = remaining_29064;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            float y_29071 = nextpayment_29066 - index_primexp_32598;\n            float negate_arg_29072 = a_26359 * y_29071;\n            float exp_arg_29073 = 0.0F - negate_arg_29072;\n            float res_29074 = fpow32(2.7182817F, exp_arg_29073);\n            float x_29075 = 1.0F - res_29074;\n            float B_29076 = x_29075 / a_26359;\n            float x_29077 = B_29076 - nextpayment_29066;\n            float x_29078 = x_29077 + index_primexp_32598;\n            float x_29079 = fpow32(a_26359, 2.0F);\n            float x_29080 = b_26360 * x_29079;\n            float x_29081 = fpow32(sigma_26361, 2.0F);\n            float y_29082 = x_29081 / 2.0F;\n            float y_29083 = x_29080 - y_29082;\n            float x_29084 = x_29078 * y_29083;\n            float A1_29085 = x_29084 / x_29079;\n            float y_29086 = fpow32(B_29076, 2.0F);\n            float x_29087 = x_29081 * y_29086;\n            float y_29088 = 4.0F * a_26359;\n            float A2_29089 = x_29087 / y_29088;\n            float exp_arg_29090 = A1_29085 - A2_29089;\n            float res_29091 = fpow32(2.7182817F, exp_arg_29090);\n            float negate_arg_29092 = x_29047 * B_29076;\n            float exp_arg_29093 = 0.0F - negate_arg_29092;\n            float res_29094 = fpow32(2.7182817F, exp_arg_29093);\n            float res_29095 = res_29091 * res_29094;\n            bool y_29096 = slt64(0, remaining_29064);\n            bool index_certs_29097;\n            \n            if (!y_29096) {\n",
                   "                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 19) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = remaining_29064;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            float binop_y_29098 = sitofp_i64_f32(remaining_29064);\n            float binop_y_29099 = x_29056 * binop_y_29098;\n            float index_primexp_29100 = nextpayment_29066 + binop_y_29099;\n            float y_29101 = index_primexp_29100 - index_primexp_32598;\n            float negate_arg_29102 = a_26359 * y_29101;\n            float exp_arg_29103 = 0.0F - negate_arg_29102;\n            float res_29104 = fpow32(2.7182817F, exp_arg_29103);\n            float x_29105 = 1.0F - res_29104;\n            float B_29106 = x_29105 / a_26359;\n            float x_29107 = B_29106 - index_primexp_29100;\n            float x_29108 = x_29107 + index_primexp_32598;\n            float x_29109 = y_29083 * x_29108;\n            float A1_29110 = x_29109 / x_29079;\n            float y_29111 = fpow32(B_29106, 2.0F);\n            float x_29112 = x_29081 * y_29111;\n            float A2_29113 = x_29112 / y_29088;\n            float exp_arg_29114 = A1_29110 - A2_29113;\n            float res_29115 = fpow32(2.7182817F, exp_arg_29114);\n            float negate_arg_29116 = x_29047 * B_29106;\n            float exp_arg_29117 = 0.0F - negate_arg_29116;\n            float res_29118 = fpow32(2.7182817F, exp_arg_29117);\n            float res_29119 = res_29115 * res_29118;\n            float res_29120;\n            float redout_32593 = 0.0F;\n            \n            for (int64_t i_32594 = 0; i_32594 < remaining_29064; i_32594++) {\n                int64_t index_primexp_32642 = add64(1, i_32594);\n                float res_29125 = sitofp_i64_f32(index_primexp_32642);\n                float res_29126 = x_",
                   "29056 * res_29125;\n                float res_29127 = nextpayment_29066 + res_29126;\n                float y_29128 = res_29127 - index_primexp_32598;\n                float negate_arg_29129 = a_26359 * y_29128;\n                float exp_arg_29130 = 0.0F - negate_arg_29129;\n                float res_29131 = fpow32(2.7182817F, exp_arg_29130);\n                float x_29132 = 1.0F - res_29131;\n                float B_29133 = x_29132 / a_26359;\n                float x_29134 = B_29133 - res_29127;\n                float x_29135 = x_29134 + index_primexp_32598;\n                float x_29136 = y_29083 * x_29135;\n                float A1_29137 = x_29136 / x_29079;\n                float y_29138 = fpow32(B_29133, 2.0F);\n                float x_29139 = x_29081 * y_29138;\n                float A2_29140 = x_29139 / y_29088;\n                float exp_arg_29141 = A1_29137 - A2_29140;\n                float res_29142 = fpow32(2.7182817F, exp_arg_29141);\n                float negate_arg_29143 = x_29047 * B_29133;\n                float exp_arg_29144 = 0.0F - negate_arg_29143;\n                float res_29145 = fpow32(2.7182817F, exp_arg_29144);\n                float res_29146 = res_29142 * res_29145;\n                float res_29123 = res_29146 + redout_32593;\n                float redout_tmp_34774 = res_29123;\n                \n                redout_32593 = redout_tmp_34774;\n            }\n            res_29120 = redout_32593;\n            \n            float x_29147 = res_29095 - res_29119;\n            float x_29148 = x_29053 * x_29056;\n            float y_29149 = res_29120 * x_29148;\n            float y_29150 = x_29147 - y_29149;\n            float res_29151 = x_29054 * y_29150;\n            \n            res_29065 = res_29151;\n        }\n        ((__local float *) red_arr_mem_34772)[gtid_28169] = res_29065;\n    }\n    \n  error_0:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34775;\n    int32_t skip_waves_34776;",
                   "\n    \n    skip_waves_34776 = 1;\n    \n    float x_29050;\n    float x_29051;\n    \n    offset_34775 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34767, sext_i64_i32(n_26351))) {\n            x_29050 = ((__local\n                        float *) red_arr_mem_34772)[sext_i32_i64(local_tid_34767 +\n                                                    offset_34775)];\n        }\n    }\n    offset_34775 = 1;\n    while (slt32(offset_34775, wave_sizze_34769)) {\n        if (slt32(local_tid_34767 + offset_34775, sext_i64_i32(n_26351)) &&\n            ((local_tid_34767 - squot32(local_tid_34767, wave_sizze_34769) *\n              wave_sizze_34769) & (2 * offset_34775 - 1)) == 0) {\n            // read array element\n            {\n                x_29051 = ((volatile __local\n                            float *) red_arr_mem_34772)[sext_i32_i64(local_tid_34767 +\n                                                        offset_34775)];\n            }\n            // apply reduction operation\n            {\n                float res_29052 = x_29050 + x_29051;\n                \n                x_29050 = res_29052;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_34772)[sext_i32_i64(local_tid_34767)] =\n                    x_29050;\n            }\n        }\n        offset_34775 *= 2;\n    }\n    while (slt32(skip_waves_34776, squot32(sext_i64_i32(n_26351) +\n                                           wave_sizze_34769 - 1,\n                                           wave_sizze_34769))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34775 = skip_waves_34776 * wave_sizze_34769;\n        if (slt32(local_tid_34767 + offset_34775, sext_i64_i32(n_26351)) &&\n            ((local_tid_34767 - squot32(local_tid_34767, wave_sizze_34769) *\n              wave_sizze_34769) == 0 && (squot32(local_tid_34767,\n                                                 wave_sizze_34769) & (2 *\n",
                   "                                                                      skip_waves_34776 -\n                                                                      1)) ==\n             0)) {\n            // read array element\n            {\n                x_29051 = ((__local\n                            float *) red_arr_mem_34772)[sext_i32_i64(local_tid_34767 +\n                                                        offset_34775)];\n            }\n            // apply reduction operation\n            {\n                float res_29052 = x_29050 + x_29051;\n                \n                x_29050 = res_29052;\n            }\n            // write result of operation\n            {\n                ((__local\n                  float *) red_arr_mem_34772)[sext_i32_i64(local_tid_34767)] =\n                    x_29050;\n            }\n        }\n        skip_waves_34776 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    res_29049 = ((__local float *) red_arr_mem_34772)[0];\n    \n    float res_29152 = fmax32(0.0F, res_29049);\n    \n    if (local_tid_34767 == 0) {\n        ((__global float *) mem_33659)[gtid_28164 * steps_26355 + gtid_28165] =\n            res_29152;\n    }\n    \n  error_2:\n    return;\n}\n__kernel void mainzisegmap_intragroup_32669(__global int *global_failure,\n                                            int failure_is_an_option, __global\n                                            int64_t *global_failure_args,\n                                            __local volatile\n                                            int64_t *mem_33640_backing_aligned_0,\n                                            __local volatile\n                                            int64_t *mem_33638_backing_aligned_1,\n                                            __local volatile\n                                            int64_t *mem_33636_backing_aligned_2,\n                                            __local volatile\n                                            int64_t *mem_33634_backing_aligned_3,\n             ",
                   "                               __local volatile\n                                            int64_t *mem_33621_backing_aligned_4,\n                                            __local volatile\n                                            int64_t *mem_33619_backing_aligned_5,\n                                            __local volatile\n                                            int64_t *mem_33617_backing_aligned_6,\n                                            __local volatile\n                                            int64_t *mem_33615_backing_aligned_7,\n                                            int64_t n_26351,\n                                            int64_t paths_26354,\n                                            int64_t steps_26355, float a_26359,\n                                            float b_26360, float sigma_26361,\n                                            float sims_per_year_26449,\n                                            int64_t computed_group_sizze_32670,\n                                            int64_t ldim_32671,\n                                            int64_t num_whole_tiles_32694,\n                                            int64_t residual_input_33096,\n                                            unsigned char cond_33097, __global\n                                            unsigned char *res_mem_33486,\n                                            __global\n                                            unsigned char *res_mem_33487,\n                                            __global\n                                            unsigned char *res_mem_33488,\n                                            __global\n                                            unsigned char *res_mem_33489,\n                                            __global unsigned char *mem_33596,\n                                            __global unsigned char *mem_33654)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __loc",
                   "al volatile char *restrict mem_33640_backing_11 = (__local volatile\n                                                            char *) mem_33640_backing_aligned_0;\n    __local volatile char *restrict mem_33638_backing_10 = (__local volatile\n                                                            char *) mem_33638_backing_aligned_1;\n    __local volatile char *restrict mem_33636_backing_9 = (__local volatile\n                                                           char *) mem_33636_backing_aligned_2;\n    __local volatile char *restrict mem_33634_backing_8 = (__local volatile\n                                                           char *) mem_33634_backing_aligned_3;\n    __local volatile char *restrict mem_33621_backing_3 = (__local volatile\n                                                           char *) mem_33621_backing_aligned_4;\n    __local volatile char *restrict mem_33619_backing_2 = (__local volatile\n                                                           char *) mem_33619_backing_aligned_5;\n    __local volatile char *restrict mem_33617_backing_1 = (__local volatile\n                                                           char *) mem_33617_backing_aligned_6;\n    __local volatile char *restrict mem_33615_backing_0 = (__local volatile\n                                                           char *) mem_33615_backing_aligned_7;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34752;\n    int32_t local_tid_34753;\n    int64_t group_sizze_34756;\n    int32_t wave_sizze_34755;\n    int32_t group_tid_34754;\n    \n    global_tid_34752 = get_global_id(0);\n    local_tid_34753 = get_local_id(0);\n    group_sizze_34756 = get_local_size(0);\n    wave_sizze_34755 = LOCKSTEP_WIDTH;\n    group_tid_34754 = get_group_id(0);\n    \n    int32_t gid_flat_32669;",
                   "\n    \n    gid_flat_32669 = group_tid_34754;\n    \n    int32_t ltid_pre_34757;\n    \n    ltid_pre_34757 = local_tid_34753;\n    \n    int64_t gtid_28153;\n    \n    gtid_28153 = squot64(sext_i32_i64(group_tid_34754), ldim_32671);\n    \n    int64_t gid_32668;\n    \n    gid_32668 = sext_i32_i64(group_tid_34754) -\n        squot64(sext_i32_i64(group_tid_34754), ldim_32671) * ldim_32671;\n    \n    int64_t binop_x_32681;\n    \n    binop_x_32681 = gid_32668 * computed_group_sizze_32670;\n    \n    float mem_33600[1];\n    float mem_33602[1];\n    int64_t ltid_32673 = sext_i32_i64(ltid_pre_34757);\n    int32_t ltid_flat_32674 = local_tid_34753;\n    \n    if (slt64(ltid_32673, computed_group_sizze_32670)) {\n        int64_t gtid_32682 = ltid_32673 + binop_x_32681;\n        bool cond_32683 = slt64(gtid_32682, steps_26355);\n        float pre_32684;\n        float pre_32685;\n        \n        if (cond_32683) {\n            float x_32686 = ((__global float *) mem_33596)[gtid_32682 *\n                                                           paths_26354 +\n                                                           gtid_28153];\n            int64_t convop_x_32687 = add64(1, gtid_32682);\n            float binop_x_32688 = sitofp_i64_f32(convop_x_32687);\n            float index_primexp_32689 = binop_x_32688 / sims_per_year_26449;\n            \n            pre_32684 = x_32686;\n            pre_32685 = index_primexp_32689;\n        } else {\n            pre_32684 = 0.0F;\n            pre_32685 = 0.0F;\n        }\n        mem_33600[0] = pre_32684;\n        mem_33602[0] = pre_32685;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float mem_33605[1];\n    int64_t ltid_32695 = sext_i32_i64(ltid_pre_34757);\n    int32_t ltid_flat_32696 = local_tid_34753;\n    \n    if (slt64(ltid_32695, computed_group_sizze_32670)) {\n        mem_33605[0] = 0.0F;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local char *mem_33615;\n    \n    mem_33615 = (__local char *) mem_33615_backing_0;\n    \n    __local char *mem_33617;\n    \n    mem_33",
                   "617 = (__local char *) mem_33617_backing_1;\n    \n    __local char *mem_33619;\n    \n    mem_33619 = (__local char *) mem_33619_backing_2;\n    \n    __local char *mem_33621;\n    \n    mem_33621 = (__local char *) mem_33621_backing_3;\n    \n    float accs_mem_33631[1];\n    float mem_param_33610[1];\n    \n    for (int32_t i_4 = 0; i_4 < 1; i_4++)\n        mem_param_33610[i_4] = mem_33605[i_4];\n    for (int64_t tile_id_32702 = 0; tile_id_32702 < num_whole_tiles_32694;\n         tile_id_32702++) {\n        int64_t binop_x_32865 = computed_group_sizze_32670 * tile_id_32702;\n        int64_t ltid_32703 = sext_i32_i64(ltid_pre_34757);\n        int32_t ltid_flat_32704 = local_tid_34753;\n        \n        if (slt64(ltid_32703, computed_group_sizze_32670)) {\n            int64_t j_32866 = ltid_32703 + binop_x_32865;\n            bool cond_32871 = slt64(j_32866, n_26351);\n            float pre_32872;\n            float pre_32873;\n            int64_t pre_32874;\n            float pre_32875;\n            \n            if (cond_32871) {\n                float tile_elem_32876 = ((__global\n                                          float *) res_mem_33486)[j_32866];\n                float tile_elem_32877 = ((__global\n                                          float *) res_mem_33487)[j_32866];\n                int64_t tile_elem_32878 = ((__global\n                                            int64_t *) res_mem_33488)[j_32866];\n                float tile_elem_32879 = ((__global\n                                          float *) res_mem_33489)[j_32866];\n                \n                pre_32872 = tile_elem_32876;\n                pre_32873 = tile_elem_32877;\n                pre_32874 = tile_elem_32878;\n                pre_32875 = tile_elem_32879;\n            } else {\n                pre_32872 = 0.0F;\n                pre_32873 = 0.0F;\n                pre_32874 = 0;\n                pre_32875 = 0.0F;\n            }\n            ((__local float *) mem_33615)[ltid_32703] = pre_32872;\n            ((__local float *) me",
                   "m_33617)[ltid_32703] = pre_32873;\n            ((__local int64_t *) mem_33619)[ltid_32703] = pre_32874;\n            ((__local float *) mem_33621)[ltid_32703] = pre_32875;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        float mem_33624[1];\n        int64_t ltid_32744 = sext_i32_i64(ltid_pre_34757);\n        int32_t ltid_flat_32745 = local_tid_34753;\n        \n        if (slt64(ltid_32744, computed_group_sizze_32670)) {\n            int64_t gtid_32886 = binop_x_32681 + ltid_32744;\n            float acc_32889 = mem_param_33610[0];\n            bool cond_32890 = slt64(gtid_32886, steps_26355);\n            float acc_32891;\n            \n            if (cond_32890) {\n                float x_32887 = mem_33600[0];\n                float index_primexp_32888 = mem_33602[0];\n                float x_32892;\n                float redout_33300 = acc_32889;\n                \n                for (int64_t i_33301 = 0; i_33301 < computed_group_sizze_32670;\n                     i_33301++) {\n                    int64_t x_32898 = ((__local int64_t *) mem_33619)[i_33301];\n                    float x_32899 = ((__local float *) mem_33621)[i_33301];\n                    int64_t i64_arg_32900 = sub64(x_32898, 1);\n                    float res_32901 = sitofp_i64_f32(i64_arg_32900);\n                    float y_32902 = x_32899 * res_32901;\n                    bool cond_32903 = y_32902 < index_primexp_32888;\n                    float ceil_arg_32904 = index_primexp_32888 / x_32899;\n                    float res_32905;\n                    \n                    res_32905 = futrts_ceil32(ceil_arg_32904);\n                    \n                    int64_t res_32906 = fptosi_f32_i64(res_32905);\n                    int64_t remaining_32907 = sub64(x_32898, res_32906);\n                    float res_32908;\n                    \n                    if (cond_32903) {\n                        res_32908 = 0.0F;\n                    } else {\n                        float x_32896 = ((__local float *) mem_33615)",
                   "[i_33301];\n                        float x_32897 = ((__local float *) mem_33617)[i_33301];\n                        float nextpayment_32909 = x_32899 * res_32905;\n                        bool bounds_invalid_upwards_32910 =\n                             slt64(remaining_32907, 1);\n                        bool valid_32911 = !bounds_invalid_upwards_32910;\n                        bool range_valid_c_32912;\n                        \n                        if (!valid_32911) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 14) == -1) {\n                                    global_failure_args[0] = 1;\n                                    global_failure_args[1] = 2;\n                                    global_failure_args[2] = remaining_32907;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_3;\n                            }\n                        }\n                        \n                        float y_32913 = nextpayment_32909 - index_primexp_32888;\n                        float negate_arg_32914 = a_26359 * y_32913;\n                        float exp_arg_32915 = 0.0F - negate_arg_32914;\n                        float res_32916 = fpow32(2.7182817F, exp_arg_32915);\n                        float x_32917 = 1.0F - res_32916;\n                        float B_32918 = x_32917 / a_26359;\n                        float x_32919 = B_32918 - nextpayment_32909;\n                        float x_32920 = index_primexp_32888 + x_32919;\n                        float x_32921 = fpow32(a_26359, 2.0F);\n                        float x_32922 = b_26360 * x_32921;\n                        float x_32923 = fpow32(sigma_26361, 2.0F);\n                        float y_32924 = x_32923 / 2.0F;\n                        float y_32925 = x_32922 - y_32924;\n                        f",
                   "loat x_32926 = x_32920 * y_32925;\n                        float A1_32927 = x_32926 / x_32921;\n                        float y_32928 = fpow32(B_32918, 2.0F);\n                        float x_32929 = x_32923 * y_32928;\n                        float y_32930 = 4.0F * a_26359;\n                        float A2_32931 = x_32929 / y_32930;\n                        float exp_arg_32932 = A1_32927 - A2_32931;\n                        float res_32933 = fpow32(2.7182817F, exp_arg_32932);\n                        float negate_arg_32934 = x_32887 * B_32918;\n                        float exp_arg_32935 = 0.0F - negate_arg_32934;\n                        float res_32936 = fpow32(2.7182817F, exp_arg_32935);\n                        float res_32937 = res_32933 * res_32936;\n                        bool y_32938 = slt64(0, remaining_32907);\n                        bool index_certs_32939;\n                        \n                        if (!y_32938) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 15) == -1) {\n                                    global_failure_args[0] = 0;\n                                    global_failure_args[1] = remaining_32907;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_3;\n                            }\n                        }\n                        \n                        float binop_y_32940 = sitofp_i64_f32(remaining_32907);\n                        float binop_y_32941 = x_32899 * binop_y_32940;\n                        float index_primexp_32942 = nextpayment_32909 +\n                              binop_y_32941;\n                        float y_32943 = index_primexp_32942 -\n                              index_primexp_32888;\n                        float negate_arg_32944 = a_26359 * y_32943;\n                        float exp_",
                   "arg_32945 = 0.0F - negate_arg_32944;\n                        float res_32946 = fpow32(2.7182817F, exp_arg_32945);\n                        float x_32947 = 1.0F - res_32946;\n                        float B_32948 = x_32947 / a_26359;\n                        float x_32949 = B_32948 - index_primexp_32942;\n                        float x_32950 = index_primexp_32888 + x_32949;\n                        float x_32951 = y_32925 * x_32950;\n                        float A1_32952 = x_32951 / x_32921;\n                        float y_32953 = fpow32(B_32948, 2.0F);\n                        float x_32954 = x_32923 * y_32953;\n                        float A2_32955 = x_32954 / y_32930;\n                        float exp_arg_32956 = A1_32952 - A2_32955;\n                        float res_32957 = fpow32(2.7182817F, exp_arg_32956);\n                        float negate_arg_32958 = x_32887 * B_32948;\n                        float exp_arg_32959 = 0.0F - negate_arg_32958;\n                        float res_32960 = fpow32(2.7182817F, exp_arg_32959);\n                        float res_32961 = res_32957 * res_32960;\n                        float res_32962;\n                        float redout_32964 = 0.0F;\n                        \n                        for (int64_t i_32963 = 0; i_32963 < remaining_32907;\n                             i_32963++) {\n                            int64_t index_primexp_32965 = add64(1, i_32963);\n                            float res_32966 =\n                                  sitofp_i64_f32(index_primexp_32965);\n                            float res_32967 = x_32899 * res_32966;\n                            float res_32968 = nextpayment_32909 + res_32967;\n                            float y_32969 = res_32968 - index_primexp_32888;\n                            float negate_arg_32970 = a_26359 * y_32969;\n                            float exp_arg_32971 = 0.0F - negate_arg_32970;\n                            float res_32972 = fpow32(2.7182817F, exp_arg_32971);\n                      ",
                   "      float x_32973 = 1.0F - res_32972;\n                            float B_32974 = x_32973 / a_26359;\n                            float x_32975 = B_32974 - res_32968;\n                            float x_32976 = index_primexp_32888 + x_32975;\n                            float x_32977 = y_32925 * x_32976;\n                            float A1_32978 = x_32977 / x_32921;\n                            float y_32979 = fpow32(B_32974, 2.0F);\n                            float x_32980 = x_32923 * y_32979;\n                            float A2_32981 = x_32980 / y_32930;\n                            float exp_arg_32982 = A1_32978 - A2_32981;\n                            float res_32983 = fpow32(2.7182817F, exp_arg_32982);\n                            float negate_arg_32984 = x_32887 * B_32974;\n                            float exp_arg_32985 = 0.0F - negate_arg_32984;\n                            float res_32986 = fpow32(2.7182817F, exp_arg_32985);\n                            float res_32987 = res_32983 * res_32986;\n                            float res_32988 = redout_32964 + res_32987;\n                            float redout_tmp_34761 = res_32988;\n                            \n                            redout_32964 = redout_tmp_34761;\n                        }\n                        res_32962 = redout_32964;\n                        \n                        float x_32989 = res_32937 - res_32961;\n                        float x_32990 = x_32896 * x_32899;\n                        float y_32991 = res_32962 * x_32990;\n                        float y_32992 = x_32989 - y_32991;\n                        float res_32993 = x_32897 * y_32992;\n                        \n                        res_32908 = res_32993;\n                    }\n                    \n                    float res_32895 = res_32908 + redout_33300;\n                    float redout_tmp_34760 = res_32895;\n                    \n                    redout_33300 = redout_tmp_34760;\n                }\n                x_32892 = redo",
                   "ut_33300;\n                acc_32891 = x_32892;\n            } else {\n                acc_32891 = acc_32889;\n            }\n            mem_33624[0] = acc_32891;\n        }\n        \n      error_3:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        float mem_param_tmp_34758[1];\n        \n        for (int32_t i_5 = 0; i_5 < 1; i_5++)\n            mem_param_tmp_34758[i_5] = mem_33624[i_5];\n        for (int32_t i_6 = 0; i_6 < 1; i_6++)\n            mem_param_33610[i_6] = mem_param_tmp_34758[i_6];\n    }\n    for (int32_t i_7 = 0; i_7 < 1; i_7++)\n        accs_mem_33631[i_7] = mem_param_33610[i_7];\n    \n    __local char *mem_33634;\n    \n    mem_33634 = (__local char *) mem_33634_backing_8;\n    \n    __local char *mem_33636;\n    \n    mem_33636 = (__local char *) mem_33636_backing_9;\n    \n    __local char *mem_33638;\n    \n    mem_33638 = (__local char *) mem_33638_backing_10;\n    \n    __local char *mem_33640;\n    \n    mem_33640 = (__local char *) mem_33640_backing_11;\n    \n    float mem_33643[1];\n    float mem_33967[1];\n    \n    if (cond_33097) {\n        mem_33967[0] = accs_mem_33631[0];\n    } else {\n        int64_t binop_x_33116 = computed_group_sizze_32670 *\n                num_whole_tiles_32694;\n        int64_t ltid_33098 = sext_i32_i64(ltid_pre_34757);\n        int32_t ltid_flat_33099 = local_tid_34753;\n        \n        if (slt64(ltid_33098, computed_group_sizze_32670)) {\n            int64_t j_33117 = ltid_33098 + binop_x_33116;\n            bool cond_33122 = slt64(j_33117, n_26351);\n            float pre_33123;\n            float pre_33124;\n            int64_t pre_33125;\n            float pre_33126;\n            \n            if (cond_33122) {\n                float tile_elem_33127 = ((__global\n                                          float *) res_mem_33486)[j_33117];\n                float tile_elem_33128 = ((__global\n                                          float *) res_mem_33487)[j_33117];\n   ",
                   "             int64_t tile_elem_33129 = ((__global\n                                            int64_t *) res_mem_33488)[j_33117];\n                float tile_elem_33130 = ((__global\n                                          float *) res_mem_33489)[j_33117];\n                \n                pre_33123 = tile_elem_33127;\n                pre_33124 = tile_elem_33128;\n                pre_33125 = tile_elem_33129;\n                pre_33126 = tile_elem_33130;\n            } else {\n                pre_33123 = 0.0F;\n                pre_33124 = 0.0F;\n                pre_33125 = 0;\n                pre_33126 = 0.0F;\n            }\n            ((__local float *) mem_33634)[ltid_33098] = pre_33123;\n            ((__local float *) mem_33636)[ltid_33098] = pre_33124;\n            ((__local int64_t *) mem_33638)[ltid_33098] = pre_33125;\n            ((__local float *) mem_33640)[ltid_33098] = pre_33126;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t ltid_33143 = sext_i32_i64(ltid_pre_34757);\n        int32_t ltid_flat_33144 = local_tid_34753;\n        \n        if (slt64(ltid_33143, computed_group_sizze_32670)) {\n            int64_t gtid_33151 = binop_x_32681 + ltid_33143;\n            float acc_33154 = accs_mem_33631[0];\n            bool cond_33155 = slt64(gtid_33151, steps_26355);\n            float acc_33156;\n            \n            if (cond_33155) {\n                float x_33152 = mem_33600[0];\n                float index_primexp_33153 = mem_33602[0];\n                float x_33157;\n                float redout_33302 = acc_33154;\n                \n                for (int64_t i_33303 = 0; i_33303 < residual_input_33096;\n                     i_33303++) {\n                    int64_t x_33163 = ((__local int64_t *) mem_33638)[i_33303];\n                    float x_33164 = ((__local float *) mem_33640)[i_33303];\n                    int64_t i64_arg_33165 = sub64(x_33163, 1);\n                    float res_33166 = sitofp_i64_f32(i64_arg_33165);\n                    float y_331",
                   "67 = x_33164 * res_33166;\n                    bool cond_33168 = y_33167 < index_primexp_33153;\n                    float ceil_arg_33169 = index_primexp_33153 / x_33164;\n                    float res_33170;\n                    \n                    res_33170 = futrts_ceil32(ceil_arg_33169);\n                    \n                    int64_t res_33171 = fptosi_f32_i64(res_33170);\n                    int64_t remaining_33172 = sub64(x_33163, res_33171);\n                    float res_33173;\n                    \n                    if (cond_33168) {\n                        res_33173 = 0.0F;\n                    } else {\n                        float x_33161 = ((__local float *) mem_33634)[i_33303];\n                        float x_33162 = ((__local float *) mem_33636)[i_33303];\n                        float nextpayment_33174 = x_33164 * res_33170;\n                        bool bounds_invalid_upwards_33175 =\n                             slt64(remaining_33172, 1);\n                        bool valid_33176 = !bounds_invalid_upwards_33175;\n                        bool range_valid_c_33177;\n                        \n                        if (!valid_33176) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 16) == -1) {\n                                    global_failure_args[0] = 1;\n                                    global_failure_args[1] = 2;\n                                    global_failure_args[2] = remaining_33172;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_5;\n                            }\n                        }\n                        \n                        float y_33178 = nextpayment_33174 - index_primexp_33153;\n                        float negate_arg_33179 = a_26359 * y_33178;\n                        float exp_arg_33180 = 0",
                   ".0F - negate_arg_33179;\n                        float res_33181 = fpow32(2.7182817F, exp_arg_33180);\n                        float x_33182 = 1.0F - res_33181;\n                        float B_33183 = x_33182 / a_26359;\n                        float x_33184 = B_33183 - nextpayment_33174;\n                        float x_33185 = index_primexp_33153 + x_33184;\n                        float x_33186 = fpow32(a_26359, 2.0F);\n                        float x_33187 = b_26360 * x_33186;\n                        float x_33188 = fpow32(sigma_26361, 2.0F);\n                        float y_33189 = x_33188 / 2.0F;\n                        float y_33190 = x_33187 - y_33189;\n                        float x_33191 = x_33185 * y_33190;\n                        float A1_33192 = x_33191 / x_33186;\n                        float y_33193 = fpow32(B_33183, 2.0F);\n                        float x_33194 = x_33188 * y_33193;\n                        float y_33195 = 4.0F * a_26359;\n                        float A2_33196 = x_33194 / y_33195;\n                        float exp_arg_33197 = A1_33192 - A2_33196;\n                        float res_33198 = fpow32(2.7182817F, exp_arg_33197);\n                        float negate_arg_33199 = x_33152 * B_33183;\n                        float exp_arg_33200 = 0.0F - negate_arg_33199;\n                        float res_33201 = fpow32(2.7182817F, exp_arg_33200);\n                        float res_33202 = res_33198 * res_33201;\n                        bool y_33203 = slt64(0, remaining_33172);\n                        bool index_certs_33204;\n                        \n                        if (!y_33203) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 17) == -1) {\n                                    global_failure_args[0] = 0;\n                                    global_failure_args[1] = remaining_33172;\n                                    ;\n          ",
                   "                      }\n                                local_failure = true;\n                                goto error_5;\n                            }\n                        }\n                        \n                        float binop_y_33205 = sitofp_i64_f32(remaining_33172);\n                        float binop_y_33206 = x_33164 * binop_y_33205;\n                        float index_primexp_33207 = nextpayment_33174 +\n                              binop_y_33206;\n                        float y_33208 = index_primexp_33207 -\n                              index_primexp_33153;\n                        float negate_arg_33209 = a_26359 * y_33208;\n                        float exp_arg_33210 = 0.0F - negate_arg_33209;\n                        float res_33211 = fpow32(2.7182817F, exp_arg_33210);\n                        float x_33212 = 1.0F - res_33211;\n                        float B_33213 = x_33212 / a_26359;\n                        float x_33214 = B_33213 - index_primexp_33207;\n                        float x_33215 = index_primexp_33153 + x_33214;\n                        float x_33216 = y_33190 * x_33215;\n                        float A1_33217 = x_33216 / x_33186;\n                        float y_33218 = fpow32(B_33213, 2.0F);\n                        float x_33219 = x_33188 * y_33218;\n                        float A2_33220 = x_33219 / y_33195;\n                        float exp_arg_33221 = A1_33217 - A2_33220;\n                        float res_33222 = fpow32(2.7182817F, exp_arg_33221);\n                        float negate_arg_33223 = x_33152 * B_33213;\n                        float exp_arg_33224 = 0.0F - negate_arg_33223;\n                        float res_33225 = fpow32(2.7182817F, exp_arg_33224);\n                        float res_33226 = res_33222 * res_33225;\n                        float res_33227;\n                        float redout_33229 = 0.0F;\n                        \n                        for (int64_t i_33228 = 0; i_33228 < remaining_33172;\n                    ",
                   "         i_33228++) {\n                            int64_t index_primexp_33230 = add64(1, i_33228);\n                            float res_33231 =\n                                  sitofp_i64_f32(index_primexp_33230);\n                            float res_33232 = x_33164 * res_33231;\n                            float res_33233 = nextpayment_33174 + res_33232;\n                            float y_33234 = res_33233 - index_primexp_33153;\n                            float negate_arg_33235 = a_26359 * y_33234;\n                            float exp_arg_33236 = 0.0F - negate_arg_33235;\n                            float res_33237 = fpow32(2.7182817F, exp_arg_33236);\n                            float x_33238 = 1.0F - res_33237;\n                            float B_33239 = x_33238 / a_26359;\n                            float x_33240 = B_33239 - res_33233;\n                            float x_33241 = index_primexp_33153 + x_33240;\n                            float x_33242 = y_33190 * x_33241;\n                            float A1_33243 = x_33242 / x_33186;\n                            float y_33244 = fpow32(B_33239, 2.0F);\n                            float x_33245 = x_33188 * y_33244;\n                            float A2_33246 = x_33245 / y_33195;\n                            float exp_arg_33247 = A1_33243 - A2_33246;\n                            float res_33248 = fpow32(2.7182817F, exp_arg_33247);\n                            float negate_arg_33249 = x_33152 * B_33239;\n                            float exp_arg_33250 = 0.0F - negate_arg_33249;\n                            float res_33251 = fpow32(2.7182817F, exp_arg_33250);\n                            float res_33252 = res_33248 * res_33251;\n                            float res_33253 = redout_33229 + res_33252;\n                            float redout_tmp_34763 = res_33253;\n                            \n                            redout_33229 = redout_tmp_34763;\n                        }\n                        res_33227 = redout_33229",
                   ";\n                        \n                        float x_33254 = res_33202 - res_33226;\n                        float x_33255 = x_33161 * x_33164;\n                        float y_33256 = res_33227 * x_33255;\n                        float y_33257 = x_33254 - y_33256;\n                        float res_33258 = x_33162 * y_33257;\n                        \n                        res_33173 = res_33258;\n                    }\n                    \n                    float res_33160 = res_33173 + redout_33302;\n                    float redout_tmp_34762 = res_33160;\n                    \n                    redout_33302 = redout_tmp_34762;\n                }\n                x_33157 = redout_33302;\n                acc_33156 = x_33157;\n            } else {\n                acc_33156 = acc_33154;\n            }\n            mem_33643[0] = acc_33156;\n        }\n        \n      error_5:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        mem_33967[0] = mem_33643[0];\n    }\n    \n    float mem_33651[1];\n    int64_t ltid_33261 = sext_i32_i64(ltid_pre_34757);\n    int32_t ltid_flat_33262 = local_tid_34753;\n    \n    if (slt64(ltid_33261, computed_group_sizze_32670)) {\n        int64_t gtid_33268 = binop_x_32681 + ltid_33261;\n        bool cond_33270 = slt64(gtid_33268, steps_26355);\n        float postlude_33271;\n        \n        if (cond_33270) {\n            float res_33269 = mem_33967[0];\n            float res_33274 = fmax32(0.0F, res_33269);\n            \n            postlude_33271 = res_33274;\n        } else {\n            postlude_33271 = 0.0F;\n        }\n        mem_33651[0] = postlude_33271;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t thread_out_index_34764 = gtid_28153 +\n            squot64(sext_i32_i64(local_tid_34753), computed_group_sizze_32670);\n    int64_t thread_out_index_34765 = gid_32668 * computed_group_sizze_32670 +\n            (sext_i32_i64(local_tid_34753) -\n             squot64(sext_i32_",
                   "i64(local_tid_34753),\n                     computed_group_sizze_32670) * computed_group_sizze_32670);\n    \n    if (slt64(thread_out_index_34764, paths_26354) &&\n        slt64(thread_out_index_34765, steps_26355)) {\n        ((__global float *) mem_33654)[thread_out_index_34764 * steps_26355 +\n                                       thread_out_index_34765] = mem_33651[0];\n    }\n    \n  error_7:\n    return;\n}\n__kernel void mainzisegred_large_28414(__global int *global_failure,\n                                       int failure_is_an_option, __global\n                                       int64_t *global_failure_args,\n                                       __local volatile\n                                       int64_t *sync_arr_mem_34815_backing_aligned_0,\n                                       __local volatile\n                                       int64_t *red_arr_mem_34813_backing_aligned_1,\n                                       int64_t n_26351, int64_t paths_26354,\n                                       int64_t steps_26355, float a_26359,\n                                       float b_26360, float sigma_26361,\n                                       float sims_per_year_26449,\n                                       int64_t num_groups_29157, __global\n                                       unsigned char *res_mem_33486, __global\n                                       unsigned char *res_mem_33487, __global\n                                       unsigned char *res_mem_33488, __global\n                                       unsigned char *res_mem_33489, __global\n                                       unsigned char *mem_33596, __global\n                                       unsigned char *mem_33663,\n                                       int64_t groups_per_segment_34799,\n                                       int64_t elements_per_thread_34800,\n                                       int64_t virt_num_groups_34801,\n                                       int64_t threads_per_segme",
                   "nt_34803,\n                                       __global\n                                       unsigned char *group_res_arr_mem_34804,\n                                       __global\n                                       unsigned char *mainzicounter_mem_34806)\n{\n    #define segred_group_sizze_29156 (mainzisegred_group_sizze_28408)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict sync_arr_mem_34815_backing_1 =\n                          (__local volatile\n                           char *) sync_arr_mem_34815_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_34813_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_34813_backing_aligned_1;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34808;\n    int32_t local_tid_34809;\n    int64_t group_sizze_34812;\n    int32_t wave_sizze_34811;\n    int32_t group_tid_34810;\n    \n    global_tid_34808 = get_global_id(0);\n    local_tid_34809 = get_local_id(0);\n    group_sizze_34812 = get_local_size(0);\n    wave_sizze_34811 = LOCKSTEP_WIDTH;\n    group_tid_34810 = get_group_id(0);\n    \n    int32_t phys_tid_28414;\n    \n    phys_tid_28414 = global_tid_34808;\n    \n    __local char *red_arr_mem_34813;\n    \n    red_arr_mem_34813 = (__local char *) red_arr_mem_34813_backing_0;\n    \n    __local char *sync_arr_mem_34815;\n    \n    sync_arr_mem_34815 = (__local char *) sync_arr_mem_34815_backing_1;\n    \n    int32_t phys_group_id_34817;\n    \n    phys_group_id_34817 = get_group_id(0);\n    for (int32_t i_34818 = 0; i_34818 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_34801) - phys_group_id_34817,\n                   sext_i64_i32(num_groups_29157)); i_34818++) {\n        int32_t virt_gr",
                   "oup_id_34819 = phys_group_id_34817 + i_34818 *\n                sext_i64_i32(num_groups_29157);\n        int32_t flat_segment_id_34820 = squot32(virt_group_id_34819,\n                                                sext_i64_i32(groups_per_segment_34799));\n        int64_t global_tid_34821 = srem64(sext_i32_i64(virt_group_id_34819) *\n                                          segred_group_sizze_29156 +\n                                          sext_i32_i64(local_tid_34809),\n                                          segred_group_sizze_29156 *\n                                          groups_per_segment_34799);\n        int64_t gtid_28403 = squot64(sext_i32_i64(flat_segment_id_34820),\n                                     steps_26355);\n        int64_t gtid_28404 = sext_i32_i64(flat_segment_id_34820) -\n                squot64(sext_i32_i64(flat_segment_id_34820), steps_26355) *\n                steps_26355;\n        int64_t gtid_28413;\n        float x_acc_34822;\n        int64_t chunk_sizze_34823;\n        \n        chunk_sizze_34823 = smin64(elements_per_thread_34800,\n                                   sdiv_up64(n_26351 -\n                                             sext_i32_i64(sext_i64_i32(global_tid_34821)),\n                                             threads_per_segment_34803));\n        \n        float x_29160;\n        float x_29161;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_34822 = 0.0F;\n        }\n        for (int64_t i_34827 = 0; i_34827 < chunk_sizze_34823; i_34827++) {\n            gtid_28413 = sext_i32_i64(sext_i64_i32(global_tid_34821)) +\n                threads_per_segment_34803 * i_34827;\n            // apply map function\n            {\n                int64_t convop_x_32602 = add64(1, gtid_28404);\n                float binop_x_32603 = sitofp_i64_f32(convop_x_32602);\n                float index_primexp_32604 = binop_x_32603 / sims_per_year_26449;\n                int64_t x_29168 = ((__global\n                                    int6",
                   "4_t *) res_mem_33488)[gtid_28413];\n                float x_29169 = ((__global float *) res_mem_33489)[gtid_28413];\n                int64_t i64_arg_29170 = sub64(x_29168, 1);\n                float res_29171 = sitofp_i64_f32(i64_arg_29170);\n                float y_29172 = x_29169 * res_29171;\n                bool cond_29173 = y_29172 < index_primexp_32604;\n                float ceil_arg_29174 = index_primexp_32604 / x_29169;\n                float res_29175;\n                \n                res_29175 = futrts_ceil32(ceil_arg_29174);\n                \n                int64_t res_29176 = fptosi_f32_i64(res_29175);\n                int64_t remaining_29177 = sub64(x_29168, res_29176);\n                float res_29178;\n                \n                if (cond_29173) {\n                    res_29178 = 0.0F;\n                } else {\n                    float x_29164 = ((__global float *) mem_33596)[gtid_28404 *\n                                                                   paths_26354 +\n                                                                   gtid_28403];\n                    float x_29166 = ((__global\n                                      float *) res_mem_33486)[gtid_28413];\n                    float x_29167 = ((__global\n                                      float *) res_mem_33487)[gtid_28413];\n                    float nextpayment_29179 = x_29169 * res_29175;\n                    bool bounds_invalid_upwards_29180 = slt64(remaining_29177,\n                                                              1);\n                    bool valid_29181 = !bounds_invalid_upwards_29180;\n                    bool range_valid_c_29182;\n                    \n                    if (!valid_29181) {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          22) == -1) {\n                                global_failure_args[0] = 1;\n                                global_failure_args[1] = 2;",
                   "\n                                global_failure_args[2] = remaining_29177;\n                                ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float y_29184 = nextpayment_29179 - index_primexp_32604;\n                    float negate_arg_29185 = a_26359 * y_29184;\n                    float exp_arg_29186 = 0.0F - negate_arg_29185;\n                    float res_29187 = fpow32(2.7182817F, exp_arg_29186);\n                    float x_29188 = 1.0F - res_29187;\n                    float B_29189 = x_29188 / a_26359;\n                    float x_29190 = B_29189 - nextpayment_29179;\n                    float x_29191 = x_29190 + index_primexp_32604;\n                    float x_29192 = fpow32(a_26359, 2.0F);\n                    float x_29193 = b_26360 * x_29192;\n                    float x_29194 = fpow32(sigma_26361, 2.0F);\n                    float y_29195 = x_29194 / 2.0F;\n                    float y_29196 = x_29193 - y_29195;\n                    float x_29197 = x_29191 * y_29196;\n                    float A1_29198 = x_29197 / x_29192;\n                    float y_29199 = fpow32(B_29189, 2.0F);\n                    float x_29200 = x_29194 * y_29199;\n                    float y_29201 = 4.0F * a_26359;\n                    float A2_29202 = x_29200 / y_29201;\n                    float exp_arg_29203 = A1_29198 - A2_29202;\n                    float res_29204 = fpow32(2.7182817F, exp_arg_29203);\n                    float negate_arg_29205 = x_29164 * B_29189;\n                    float exp_arg_29206 = 0.0F - negate_arg_29205;\n                    float res_29207 = fpow32(2.7182817F, exp_arg_29206);\n                    float res_29208 = res_29204 * res_29207;\n                    bool y_29209 = slt64(0, remaining_29177);\n                    bool index_certs_29210;\n                    \n                    if (!y_29209)",
                   " {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          23) == -1) {\n                                global_failure_args[0] = 0;\n                                global_failure_args[1] = remaining_29177;\n                                ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float binop_y_29211 = sitofp_i64_f32(remaining_29177);\n                    float binop_y_29212 = x_29169 * binop_y_29211;\n                    float index_primexp_29213 = nextpayment_29179 +\n                          binop_y_29212;\n                    float y_29214 = index_primexp_29213 - index_primexp_32604;\n                    float negate_arg_29215 = a_26359 * y_29214;\n                    float exp_arg_29216 = 0.0F - negate_arg_29215;\n                    float res_29217 = fpow32(2.7182817F, exp_arg_29216);\n                    float x_29218 = 1.0F - res_29217;\n                    float B_29219 = x_29218 / a_26359;\n                    float x_29220 = B_29219 - index_primexp_29213;\n                    float x_29221 = x_29220 + index_primexp_32604;\n                    float x_29222 = y_29196 * x_29221;\n                    float A1_29223 = x_29222 / x_29192;\n                    float y_29224 = fpow32(B_29219, 2.0F);\n                    float x_29225 = x_29194 * y_29224;\n                    float A2_29226 = x_29225 / y_29201;\n                    float exp_arg_29227 = A1_29223 - A2_29226;\n                    float res_29228 = fpow32(2.7182817F, exp_arg_29227);\n                    float negate_arg_29229 = x_29164 * B_29219;\n                    float exp_arg_29230 = 0.0F - negate_arg_29229;\n                    float res_29231 = fpow32(2.7182817F, exp_arg_29230);\n                    float res_29232 = res_29228 * res_29231;\n    ",
                   "                float res_29233;\n                    float redout_32599 = 0.0F;\n                    \n                    for (int64_t i_32600 = 0; i_32600 < remaining_29177;\n                         i_32600++) {\n                        int64_t index_primexp_32644 = add64(1, i_32600);\n                        float res_29238 = sitofp_i64_f32(index_primexp_32644);\n                        float res_29239 = x_29169 * res_29238;\n                        float res_29240 = nextpayment_29179 + res_29239;\n                        float y_29241 = res_29240 - index_primexp_32604;\n                        float negate_arg_29242 = a_26359 * y_29241;\n                        float exp_arg_29243 = 0.0F - negate_arg_29242;\n                        float res_29244 = fpow32(2.7182817F, exp_arg_29243);\n                        float x_29245 = 1.0F - res_29244;\n                        float B_29246 = x_29245 / a_26359;\n                        float x_29247 = B_29246 - res_29240;\n                        float x_29248 = x_29247 + index_primexp_32604;\n                        float x_29249 = y_29196 * x_29248;\n                        float A1_29250 = x_29249 / x_29192;\n                        float y_29251 = fpow32(B_29246, 2.0F);\n                        float x_29252 = x_29194 * y_29251;\n                        float A2_29253 = x_29252 / y_29201;\n                        float exp_arg_29254 = A1_29250 - A2_29253;\n                        float res_29255 = fpow32(2.7182817F, exp_arg_29254);\n                        float negate_arg_29256 = x_29164 * B_29246;\n                        float exp_arg_29257 = 0.0F - negate_arg_29256;\n                        float res_29258 = fpow32(2.7182817F, exp_arg_29257);\n                        float res_29259 = res_29255 * res_29258;\n                        float res_29236 = res_29259 + redout_32599;\n                        float redout_tmp_34828 = res_29236;\n                        \n                        redout_32599 = redout_tmp_34828;\n                    }\n    ",
                   "                res_29233 = redout_32599;\n                    \n                    float x_29260 = res_29208 - res_29232;\n                    float x_29261 = x_29166 * x_29169;\n                    float y_29262 = res_29233 * x_29261;\n                    float y_29263 = x_29260 - y_29262;\n                    float res_29264 = x_29167 * y_29263;\n                    \n                    res_29178 = res_29264;\n                }\n                // save map-out results\n                { }\n                // load accumulator\n                {\n                    x_29160 = x_acc_34822;\n                }\n                // load new values\n                {\n                    x_29161 = res_29178;\n                }\n                // apply reduction operator\n                {\n                    float res_29162 = x_29160 + x_29161;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_34822 = res_29162;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_29160 = x_acc_34822;\n            ((__local\n              float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809)] =\n                x_29160;\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_34829;\n        int32_t skip_waves_34830;\n        \n        skip_waves_34830 = 1;\n        \n        float x_34824;\n        float x_34825;\n        \n        offset_34829 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_34809,\n                      sext_i64_i32(segred_group_sizze_29156))) {\n                x_34824 = ((__local\n                            float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809 +\n                                                        offset_34829)];\n    ",
                   "        }\n        }\n        offset_34829 = 1;\n        while (slt32(offset_34829, wave_sizze_34811)) {\n            if (slt32(local_tid_34809 + offset_34829,\n                      sext_i64_i32(segred_group_sizze_29156)) &&\n                ((local_tid_34809 - squot32(local_tid_34809, wave_sizze_34811) *\n                  wave_sizze_34811) & (2 * offset_34829 - 1)) == 0) {\n                // read array element\n                {\n                    x_34825 = ((volatile __local\n                                float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809 +\n                                                            offset_34829)];\n                }\n                // apply reduction operation\n                {\n                    float res_34826 = x_34824 + x_34825;\n                    \n                    x_34824 = res_34826;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809)] =\n                        x_34824;\n                }\n            }\n            offset_34829 *= 2;\n        }\n        while (slt32(skip_waves_34830,\n                     squot32(sext_i64_i32(segred_group_sizze_29156) +\n                             wave_sizze_34811 - 1, wave_sizze_34811))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_34829 = skip_waves_34830 * wave_sizze_34811;\n            if (slt32(local_tid_34809 + offset_34829,\n                      sext_i64_i32(segred_group_sizze_29156)) &&\n                ((local_tid_34809 - squot32(local_tid_34809, wave_sizze_34811) *\n                  wave_sizze_34811) == 0 && (squot32(local_tid_34809,\n                                                     wave_sizze_34811) & (2 *\n                                                                          skip_waves_34830 -\n                                                                          1)) ==\n                 0)) {\n              ",
                   "  // read array element\n                {\n                    x_34825 = ((__local\n                                float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809 +\n                                                            offset_34829)];\n                }\n                // apply reduction operation\n                {\n                    float res_34826 = x_34824 + x_34825;\n                    \n                    x_34824 = res_34826;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809)] =\n                        x_34824;\n                }\n            }\n            skip_waves_34830 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_34809) == 0) {\n                x_acc_34822 = x_34824;\n            }\n        }\n        if (groups_per_segment_34799 == 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_34809 == 0) {\n                    ((__global float *) mem_33663)[gtid_28403 * steps_26355 +\n                                                   gtid_28404] = x_acc_34822;\n                }\n            }\n        } else {\n            int32_t old_counter_34831;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_34809 == 0) {\n                    ((__global\n                      float *) group_res_arr_mem_34804)[sext_i32_i64(virt_group_id_34819) *\n                                                        segred_group_sizze_29156] =\n                        x_acc_34822;\n                    mem_fence_global();\n                    old_counter_34831 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) mainzicounter_mem_3480",
                   "6)[sext_i32_i64(srem32(flat_segment_id_34820,\n                                                                                                     10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_34815)[0] =\n                        old_counter_34831 == groups_per_segment_34799 - 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_34832;\n            \n            is_last_group_34832 = ((__local bool *) sync_arr_mem_34815)[0];\n            if (is_last_group_34832) {\n                if (local_tid_34809 == 0) {\n                    old_counter_34831 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) mainzicounter_mem_34806)[sext_i32_i64(srem32(flat_segment_id_34820,\n                                                                                                     10240))],\n                                              (int) (0 -\n                                                     groups_per_segment_34799));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_34833 =\n                            sdiv_up64(groups_per_segment_34799,\n                                      segred_group_sizze_29156);\n                    \n                    x_29160 = 0.0F;\n                    for (int64_t i_34834 = 0; i_34834 < read_per_thread_34833;\n                         i_34834++) {\n                        int64_t group_res_id_34835 =\n                                sext_i32_i64(local_tid_34809) *\n                                read_per_thread_34833 + i_34834;\n                        int64_t index_of_group_res_34836 =\n                                sext_i32_i64(flat_segment_id_34820) *\n                                groups_per_segment_34799 + group_res_id_34835;\n                   ",
                   "     \n                        if (slt64(group_res_id_34835,\n                                  groups_per_segment_34799)) {\n                            x_29161 = ((__global\n                                        float *) group_res_arr_mem_34804)[index_of_group_res_34836 *\n                                                                          segred_group_sizze_29156];\n                            \n                            float res_29162;\n                            \n                            res_29162 = x_29160 + x_29161;\n                            x_29160 = res_29162;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809)] =\n                    x_29160;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_34837;\n                    int32_t skip_waves_34838;\n                    \n                    skip_waves_34838 = 1;\n                    \n                    float x_34824;\n                    float x_34825;\n                    \n                    offset_34837 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_34809,\n                                  sext_i64_i32(segred_group_sizze_29156))) {\n                            x_34824 = ((__local\n                                        float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809 +\n                                                                    offset_34837)];\n                        }\n                    }\n                    offset_34837 = 1;\n                    while (slt32(offset_34837, wave_sizze_34811)) {\n                        if (slt32(local_tid_34809 + offset_34837,\n                                  sext_i64_i32(segred_group_sizze_29156)) &&\n                            ((local_tid_34809 - squot3",
                   "2(local_tid_34809,\n                                                        wave_sizze_34811) *\n                              wave_sizze_34811) & (2 * offset_34837 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_34825 = ((volatile __local\n                                            float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809 +\n                                                                        offset_34837)];\n                            }\n                            // apply reduction operation\n                            {\n                                float res_34826 = x_34824 + x_34825;\n                                \n                                x_34824 = res_34826;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809)] =\n                                    x_34824;\n                            }\n                        }\n                        offset_34837 *= 2;\n                    }\n                    while (slt32(skip_waves_34838,\n                                 squot32(sext_i64_i32(segred_group_sizze_29156) +\n                                         wave_sizze_34811 - 1,\n                                         wave_sizze_34811))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_34837 = skip_waves_34838 * wave_sizze_34811;\n                        if (slt32(local_tid_34809 + offset_34837,\n                                  sext_i64_i32(segred_group_sizze_29156)) &&\n                            ((local_tid_34809 - squot32(local_tid_34809,\n                                                        wave_sizze_34811) *\n                              wave_sizze_34811) == 0 &&\n                         ",
                   "    (squot32(local_tid_34809, wave_sizze_34811) & (2 *\n                                                                            skip_waves_34838 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_34825 = ((__local\n                                            float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809 +\n                                                                        offset_34837)];\n                            }\n                            // apply reduction operation\n                            {\n                                float res_34826 = x_34824 + x_34825;\n                                \n                                x_34824 = res_34826;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_34813)[sext_i32_i64(local_tid_34809)] =\n                                    x_34824;\n                            }\n                        }\n                        skip_waves_34838 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_34809 == 0) {\n                            ((__global float *) mem_33663)[gtid_28403 *\n                                                           steps_26355 +\n                                                           gtid_28404] =\n                                x_34824;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_29156\n}\n__kernel void mainzisegred_large_29796(__global int *global_failure,\n                        ",
                   "               __local volatile\n                                       int64_t *sync_arr_mem_35298_backing_aligned_0,\n                                       __local volatile\n                                       int64_t *red_arr_mem_35296_backing_aligned_1,\n                                       int64_t n_26351, int64_t paths_26354,\n                                       int64_t steps_26355,\n                                       int64_t num_groups_30479, __global\n                                       unsigned char *mem_33947, __global\n                                       unsigned char *mem_33950,\n                                       int64_t groups_per_segment_35282,\n                                       int64_t elements_per_thread_35283,\n                                       int64_t virt_num_groups_35284,\n                                       int64_t threads_per_segment_35286,\n                                       __global\n                                       unsigned char *group_res_arr_mem_35287,\n                                       __global\n                                       unsigned char *mainzicounter_mem_35289)\n{\n    #define segred_group_sizze_30478 (mainzisegred_group_sizze_29790)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict sync_arr_mem_35298_backing_1 =\n                          (__local volatile\n                           char *) sync_arr_mem_35298_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_35296_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_35296_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35291;\n    int32_t local_tid_35292;\n    int64_t group_sizze_35295;\n    int32_t wave_sizze_35294;\n    int32_t group_tid_35293;\n    \n    global_tid_35291 = get_global_id(0);\n    local_tid_35292 = get_local_id(0);\n    group_sizze_35295 =",
                   " get_local_size(0);\n    wave_sizze_35294 = LOCKSTEP_WIDTH;\n    group_tid_35293 = get_group_id(0);\n    \n    int32_t phys_tid_29796;\n    \n    phys_tid_29796 = global_tid_35291;\n    \n    __local char *red_arr_mem_35296;\n    \n    red_arr_mem_35296 = (__local char *) red_arr_mem_35296_backing_0;\n    \n    __local char *sync_arr_mem_35298;\n    \n    sync_arr_mem_35298 = (__local char *) sync_arr_mem_35298_backing_1;\n    \n    int32_t phys_group_id_35300;\n    \n    phys_group_id_35300 = get_group_id(0);\n    for (int32_t i_35301 = 0; i_35301 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_35284) - phys_group_id_35300,\n                   sext_i64_i32(num_groups_30479)); i_35301++) {\n        int32_t virt_group_id_35302 = phys_group_id_35300 + i_35301 *\n                sext_i64_i32(num_groups_30479);\n        int32_t flat_segment_id_35303 = squot32(virt_group_id_35302,\n                                                sext_i64_i32(groups_per_segment_35282));\n        int64_t global_tid_35304 = srem64(sext_i32_i64(virt_group_id_35302) *\n                                          segred_group_sizze_30478 +\n                                          sext_i32_i64(local_tid_35292),\n                                          segred_group_sizze_30478 *\n                                          groups_per_segment_35282);\n        int64_t gtid_29787 = sext_i32_i64(flat_segment_id_35303);\n        int64_t gtid_29795;\n        float x_acc_35305;\n        int64_t chunk_sizze_35306;\n        \n        chunk_sizze_35306 = smin64(elements_per_thread_35283,\n                                   sdiv_up64(paths_26354 -\n                                             sext_i32_i64(sext_i64_i32(global_tid_35304)),\n                                             threads_per_segment_35286));\n        \n        float x_30482;\n        float x_30483;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_35305 = 0.0F;\n        }\n        for (int64_t i_35310 = 0; i_35310 < chunk_sizze_35306; i_35310+",
                   "+) {\n            gtid_29795 = sext_i32_i64(sext_i64_i32(global_tid_35304)) +\n                threads_per_segment_35286 * i_35310;\n            // apply map function\n            {\n                float res_30487;\n                float redout_33426 = 0.0F;\n                \n                for (int64_t i_33427 = 0; i_33427 < n_26351; i_33427++) {\n                    float x_30491 = ((__global float *) mem_33947)[i_33427 *\n                                                                   (paths_26354 *\n                                                                    steps_26355) +\n                                                                   gtid_29787 *\n                                                                   paths_26354 +\n                                                                   gtid_29795];\n                    float res_30490 = x_30491 + redout_33426;\n                    float redout_tmp_35311 = res_30490;\n                    \n                    redout_33426 = redout_tmp_35311;\n                }\n                res_30487 = redout_33426;\n                \n                float res_30492 = fmax32(0.0F, res_30487);\n                \n                // save map-out results\n                { }\n                // load accumulator\n                {\n                    x_30482 = x_acc_35305;\n                }\n                // load new values\n                {\n                    x_30483 = res_30492;\n                }\n                // apply reduction operator\n                {\n                    float res_30484 = x_30482 + x_30483;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_35305 = res_30484;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_30482 = x_acc_35305;\n            ((__local\n              float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292)] =\n          ",
                   "      x_30482;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_35312;\n        int32_t skip_waves_35313;\n        \n        skip_waves_35313 = 1;\n        \n        float x_35307;\n        float x_35308;\n        \n        offset_35312 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_35292,\n                      sext_i64_i32(segred_group_sizze_30478))) {\n                x_35307 = ((__local\n                            float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292 +\n                                                        offset_35312)];\n            }\n        }\n        offset_35312 = 1;\n        while (slt32(offset_35312, wave_sizze_35294)) {\n            if (slt32(local_tid_35292 + offset_35312,\n                      sext_i64_i32(segred_group_sizze_30478)) &&\n                ((local_tid_35292 - squot32(local_tid_35292, wave_sizze_35294) *\n                  wave_sizze_35294) & (2 * offset_35312 - 1)) == 0) {\n                // read array element\n                {\n                    x_35308 = ((volatile __local\n                                float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292 +\n                                                            offset_35312)];\n                }\n                // apply reduction operation\n                {\n                    float res_35309 = x_35307 + x_35308;\n                    \n                    x_35307 = res_35309;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292)] =\n                        x_35307;\n                }\n            }\n            offset_35312 *= 2;\n        }\n        while (slt32(skip_waves_35313,\n                     squot32(sext_i64_i32(segred_group_sizze_30478) +\n                             wave_sizze_35294 - 1, wave_sizze_35294))) {\n            barrier(CLK_LOCAL",
                   "_MEM_FENCE);\n            offset_35312 = skip_waves_35313 * wave_sizze_35294;\n            if (slt32(local_tid_35292 + offset_35312,\n                      sext_i64_i32(segred_group_sizze_30478)) &&\n                ((local_tid_35292 - squot32(local_tid_35292, wave_sizze_35294) *\n                  wave_sizze_35294) == 0 && (squot32(local_tid_35292,\n                                                     wave_sizze_35294) & (2 *\n                                                                          skip_waves_35313 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_35308 = ((__local\n                                float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292 +\n                                                            offset_35312)];\n                }\n                // apply reduction operation\n                {\n                    float res_35309 = x_35307 + x_35308;\n                    \n                    x_35307 = res_35309;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292)] =\n                        x_35307;\n                }\n            }\n            skip_waves_35313 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_35292) == 0) {\n                x_acc_35305 = x_35307;\n            }\n        }\n        if (groups_per_segment_35282 == 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_35292 == 0) {\n                    ((__global float *) mem_33950)[gtid_29787] = x_acc_35305;\n                }\n            }\n        } else {\n            int32_t old_counter_35314;\n            \n            // first thread in group saves",
                   " group result to global memory\n            {\n                if (local_tid_35292 == 0) {\n                    ((__global\n                      float *) group_res_arr_mem_35287)[sext_i32_i64(virt_group_id_35302) *\n                                                        segred_group_sizze_30478] =\n                        x_acc_35305;\n                    mem_fence_global();\n                    old_counter_35314 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) mainzicounter_mem_35289)[sext_i32_i64(srem32(flat_segment_id_35303,\n                                                                                                     10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_35298)[0] =\n                        old_counter_35314 == groups_per_segment_35282 - 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_35315;\n            \n            is_last_group_35315 = ((__local bool *) sync_arr_mem_35298)[0];\n            if (is_last_group_35315) {\n                if (local_tid_35292 == 0) {\n                    old_counter_35314 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) mainzicounter_mem_35289)[sext_i32_i64(srem32(flat_segment_id_35303,\n                                                                                                     10240))],\n                                              (int) (0 -\n                                                     groups_per_segment_35282));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_35316 =\n                            sdiv_up64(groups_per_segment_35282,\n                                      segred_group_sizze_30478);\n                    \n    ",
                   "                x_30482 = 0.0F;\n                    for (int64_t i_35317 = 0; i_35317 < read_per_thread_35316;\n                         i_35317++) {\n                        int64_t group_res_id_35318 =\n                                sext_i32_i64(local_tid_35292) *\n                                read_per_thread_35316 + i_35317;\n                        int64_t index_of_group_res_35319 =\n                                sext_i32_i64(flat_segment_id_35303) *\n                                groups_per_segment_35282 + group_res_id_35318;\n                        \n                        if (slt64(group_res_id_35318,\n                                  groups_per_segment_35282)) {\n                            x_30483 = ((__global\n                                        float *) group_res_arr_mem_35287)[index_of_group_res_35319 *\n                                                                          segred_group_sizze_30478];\n                            \n                            float res_30484;\n                            \n                            res_30484 = x_30482 + x_30483;\n                            x_30482 = res_30484;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292)] =\n                    x_30482;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_35320;\n                    int32_t skip_waves_35321;\n                    \n                    skip_waves_35321 = 1;\n                    \n                    float x_35307;\n                    float x_35308;\n                    \n                    offset_35320 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_35292,\n                                  sext_i64_i32(segred_group_sizze_30478))) {\n                        ",
                   "    x_35307 = ((__local\n                                        float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292 +\n                                                                    offset_35320)];\n                        }\n                    }\n                    offset_35320 = 1;\n                    while (slt32(offset_35320, wave_sizze_35294)) {\n                        if (slt32(local_tid_35292 + offset_35320,\n                                  sext_i64_i32(segred_group_sizze_30478)) &&\n                            ((local_tid_35292 - squot32(local_tid_35292,\n                                                        wave_sizze_35294) *\n                              wave_sizze_35294) & (2 * offset_35320 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_35308 = ((volatile __local\n                                            float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292 +\n                                                                        offset_35320)];\n                            }\n                            // apply reduction operation\n                            {\n                                float res_35309 = x_35307 + x_35308;\n                                \n                                x_35307 = res_35309;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292)] =\n                                    x_35307;\n                            }\n                        }\n                        offset_35320 *= 2;\n                    }\n                    while (slt32(skip_waves_35321,\n                                 squot32(sext_i64_i32(segred_group_sizze_30478) +\n                                         wave_sizze_35294 - 1,\n        ",
                   "                                 wave_sizze_35294))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_35320 = skip_waves_35321 * wave_sizze_35294;\n                        if (slt32(local_tid_35292 + offset_35320,\n                                  sext_i64_i32(segred_group_sizze_30478)) &&\n                            ((local_tid_35292 - squot32(local_tid_35292,\n                                                        wave_sizze_35294) *\n                              wave_sizze_35294) == 0 &&\n                             (squot32(local_tid_35292, wave_sizze_35294) & (2 *\n                                                                            skip_waves_35321 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_35308 = ((__local\n                                            float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292 +\n                                                                        offset_35320)];\n                            }\n                            // apply reduction operation\n                            {\n                                float res_35309 = x_35307 + x_35308;\n                                \n                                x_35307 = res_35309;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_35296)[sext_i32_i64(local_tid_35292)] =\n                                    x_35307;\n                            }\n                        }\n                        skip_waves_35321 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_35292 == 0) {\n                 ",
                   "           ((__global float *) mem_33950)[gtid_29787] =\n                                x_35307;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_30478\n}\n__kernel void mainzisegred_large_30112(__global int *global_failure,\n                                       __local volatile\n                                       int64_t *sync_arr_mem_35093_backing_aligned_0,\n                                       __local volatile\n                                       int64_t *red_arr_mem_35091_backing_aligned_1,\n                                       int64_t flat_dim_26636,\n                                       int64_t num_groups_30267, __global\n                                       unsigned char *mem_33830, __global\n                                       unsigned char *mem_33833,\n                                       int64_t groups_per_segment_35077,\n                                       int64_t elements_per_thread_35078,\n                                       int64_t virt_num_groups_35079,\n                                       int64_t threads_per_segment_35081,\n                                       __global\n                                       unsigned char *group_res_arr_mem_35082,\n                                       __global\n                                       unsigned char *mainzicounter_mem_35084)\n{\n    #define segred_group_sizze_30266 (mainzisegred_group_sizze_30106)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict sync_arr_mem_35093_backing_1 =\n                          (__local volatile\n                           char *) sync_arr_mem_35093_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_35091_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem",
                   "_35091_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35086;\n    int32_t local_tid_35087;\n    int64_t group_sizze_35090;\n    int32_t wave_sizze_35089;\n    int32_t group_tid_35088;\n    \n    global_tid_35086 = get_global_id(0);\n    local_tid_35087 = get_local_id(0);\n    group_sizze_35090 = get_local_size(0);\n    wave_sizze_35089 = LOCKSTEP_WIDTH;\n    group_tid_35088 = get_group_id(0);\n    \n    int32_t phys_tid_30112;\n    \n    phys_tid_30112 = global_tid_35086;\n    \n    __local char *red_arr_mem_35091;\n    \n    red_arr_mem_35091 = (__local char *) red_arr_mem_35091_backing_0;\n    \n    __local char *sync_arr_mem_35093;\n    \n    sync_arr_mem_35093 = (__local char *) sync_arr_mem_35093_backing_1;\n    \n    int32_t phys_group_id_35095;\n    \n    phys_group_id_35095 = get_group_id(0);\n    for (int32_t i_35096 = 0; i_35096 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_35079) - phys_group_id_35095,\n                   sext_i64_i32(num_groups_30267)); i_35096++) {\n        int32_t virt_group_id_35097 = phys_group_id_35095 + i_35096 *\n                sext_i64_i32(num_groups_30267);\n        int32_t flat_segment_id_35098 = squot32(virt_group_id_35097,\n                                                sext_i64_i32(groups_per_segment_35077));\n        int64_t global_tid_35099 = srem64(sext_i32_i64(virt_group_id_35097) *\n                                          segred_group_sizze_30266 +\n                                          sext_i32_i64(local_tid_35087),\n                                          segred_group_sizze_30266 *\n                                          groups_per_segment_35077);\n        int64_t gtid_30103 = sext_i32_i64(flat_segment_id_35098);\n        int64_t gtid_30111;\n        int64_t x_acc_35100;\n        int64_t chunk_sizze_35101;\n        \n        chunk_sizze_35101 = smin64(elements_per_thread_35078,\n                                   sdiv_up64(flat_dim_26636 -\n                                             sext_i32_i",
                   "64(sext_i64_i32(global_tid_35099)),\n                                             threads_per_segment_35081));\n        \n        int64_t x_30270;\n        int64_t x_30271;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_35100 = 0;\n        }\n        for (int64_t i_35105 = 0; i_35105 < chunk_sizze_35101; i_35105++) {\n            gtid_30111 = sext_i32_i64(sext_i64_i32(global_tid_35099)) +\n                threads_per_segment_35081 * i_35105;\n            // apply map function\n            {\n                int64_t x_30274 = ((__global int64_t *) mem_33830)[gtid_30103 *\n                                                                   flat_dim_26636 +\n                                                                   gtid_30111];\n                \n                // save map-out results\n                { }\n                // load accumulator\n                {\n                    x_30270 = x_acc_35100;\n                }\n                // load new values\n                {\n                    x_30271 = x_30274;\n                }\n                // apply reduction operator\n                {\n                    int64_t res_30272 = add64(x_30270, x_30271);\n                    \n                    // store in accumulator\n                    {\n                        x_acc_35100 = res_30272;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_30270 = x_acc_35100;\n            ((__local\n              int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087)] =\n                x_30270;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_35106;\n        int32_t skip_waves_35107;\n        \n        skip_waves_35107 = 1;\n        \n        int64_t x_35102;\n        int64_t x_35103;\n        \n        offset_35106 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_35087,\n     ",
                   "                 sext_i64_i32(segred_group_sizze_30266))) {\n                x_35102 = ((__local\n                            int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087 +\n                                                          offset_35106)];\n            }\n        }\n        offset_35106 = 1;\n        while (slt32(offset_35106, wave_sizze_35089)) {\n            if (slt32(local_tid_35087 + offset_35106,\n                      sext_i64_i32(segred_group_sizze_30266)) &&\n                ((local_tid_35087 - squot32(local_tid_35087, wave_sizze_35089) *\n                  wave_sizze_35089) & (2 * offset_35106 - 1)) == 0) {\n                // read array element\n                {\n                    x_35103 = ((volatile __local\n                                int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087 +\n                                                              offset_35106)];\n                }\n                // apply reduction operation\n                {\n                    int64_t res_35104 = add64(x_35102, x_35103);\n                    \n                    x_35102 = res_35104;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087)] =\n                        x_35102;\n                }\n            }\n            offset_35106 *= 2;\n        }\n        while (slt32(skip_waves_35107,\n                     squot32(sext_i64_i32(segred_group_sizze_30266) +\n                             wave_sizze_35089 - 1, wave_sizze_35089))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_35106 = skip_waves_35107 * wave_sizze_35089;\n            if (slt32(local_tid_35087 + offset_35106,\n                      sext_i64_i32(segred_group_sizze_30266)) &&\n                ((local_tid_35087 - squot32(local_tid_35087, wave_sizze_35089) *\n                  wave_sizze_35089) == 0 && (squot32(local_tid_35087,\n            ",
                   "                                         wave_sizze_35089) & (2 *\n                                                                          skip_waves_35107 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_35103 = ((__local\n                                int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087 +\n                                                              offset_35106)];\n                }\n                // apply reduction operation\n                {\n                    int64_t res_35104 = add64(x_35102, x_35103);\n                    \n                    x_35102 = res_35104;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087)] =\n                        x_35102;\n                }\n            }\n            skip_waves_35107 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_35087) == 0) {\n                x_acc_35100 = x_35102;\n            }\n        }\n        if (groups_per_segment_35077 == 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_35087 == 0) {\n                    ((__global int64_t *) mem_33833)[gtid_30103] = x_acc_35100;\n                }\n            }\n        } else {\n            int32_t old_counter_35108;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_35087 == 0) {\n                    ((__global\n                      int64_t *) group_res_arr_mem_35082)[sext_i32_i64(virt_group_id_35097) *\n                                                          segred_group_sizze_30266] =\n                        x_acc_35100;\n      ",
                   "              mem_fence_global();\n                    old_counter_35108 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) mainzicounter_mem_35084)[sext_i32_i64(srem32(flat_segment_id_35098,\n                                                                                                     10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_35093)[0] =\n                        old_counter_35108 == groups_per_segment_35077 - 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_35109;\n            \n            is_last_group_35109 = ((__local bool *) sync_arr_mem_35093)[0];\n            if (is_last_group_35109) {\n                if (local_tid_35087 == 0) {\n                    old_counter_35108 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) mainzicounter_mem_35084)[sext_i32_i64(srem32(flat_segment_id_35098,\n                                                                                                     10240))],\n                                              (int) (0 -\n                                                     groups_per_segment_35077));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_35110 =\n                            sdiv_up64(groups_per_segment_35077,\n                                      segred_group_sizze_30266);\n                    \n                    x_30270 = 0;\n                    for (int64_t i_35111 = 0; i_35111 < read_per_thread_35110;\n                         i_35111++) {\n                        int64_t group_res_id_35112 =\n                                sext_i32_i64(local_tid_35087) *\n                                read_per_thread_35110 + i_35111;\n           ",
                   "             int64_t index_of_group_res_35113 =\n                                sext_i32_i64(flat_segment_id_35098) *\n                                groups_per_segment_35077 + group_res_id_35112;\n                        \n                        if (slt64(group_res_id_35112,\n                                  groups_per_segment_35077)) {\n                            x_30271 = ((__global\n                                        int64_t *) group_res_arr_mem_35082)[index_of_group_res_35113 *\n                                                                            segred_group_sizze_30266];\n                            \n                            int64_t res_30272;\n                            \n                            res_30272 = add64(x_30270, x_30271);\n                            x_30270 = res_30272;\n                        }\n                    }\n                }\n                ((__local\n                  int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087)] =\n                    x_30270;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_35114;\n                    int32_t skip_waves_35115;\n                    \n                    skip_waves_35115 = 1;\n                    \n                    int64_t x_35102;\n                    int64_t x_35103;\n                    \n                    offset_35114 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_35087,\n                                  sext_i64_i32(segred_group_sizze_30266))) {\n                            x_35102 = ((__local\n                                        int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087 +\n                                                                      offset_35114)];\n                        }\n                    }\n                    offset_35114 = 1;\n                    while (",
                   "slt32(offset_35114, wave_sizze_35089)) {\n                        if (slt32(local_tid_35087 + offset_35114,\n                                  sext_i64_i32(segred_group_sizze_30266)) &&\n                            ((local_tid_35087 - squot32(local_tid_35087,\n                                                        wave_sizze_35089) *\n                              wave_sizze_35089) & (2 * offset_35114 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_35103 = ((volatile __local\n                                            int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087 +\n                                                                          offset_35114)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t res_35104 = add64(x_35102, x_35103);\n                                \n                                x_35102 = res_35104;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087)] =\n                                    x_35102;\n                            }\n                        }\n                        offset_35114 *= 2;\n                    }\n                    while (slt32(skip_waves_35115,\n                                 squot32(sext_i64_i32(segred_group_sizze_30266) +\n                                         wave_sizze_35089 - 1,\n                                         wave_sizze_35089))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_35114 = skip_waves_35115 * wave_sizze_35089;\n                        if (slt32(local_tid_35087 + offset_35114,\n                                  sext_i64_i32(segred_g",
                   "roup_sizze_30266)) &&\n                            ((local_tid_35087 - squot32(local_tid_35087,\n                                                        wave_sizze_35089) *\n                              wave_sizze_35089) == 0 &&\n                             (squot32(local_tid_35087, wave_sizze_35089) & (2 *\n                                                                            skip_waves_35115 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_35103 = ((__local\n                                            int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087 +\n                                                                          offset_35114)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t res_35104 = add64(x_35102, x_35103);\n                                \n                                x_35102 = res_35104;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  int64_t *) red_arr_mem_35091)[sext_i32_i64(local_tid_35087)] =\n                                    x_35102;\n                            }\n                        }\n                        skip_waves_35115 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_35087 == 0) {\n                            ((__global int64_t *) mem_33833)[gtid_30103] =\n                                x_35102;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #und",
                   "ef segred_group_sizze_30266\n}\n__kernel void mainzisegred_nonseg_27159(__global int *global_failure,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34654_backing_aligned_0,\n                                        __local volatile\n                                        int64_t *sync_arr_mem_34652_backing_aligned_1,\n                                        int64_t n_26351,\n                                        int64_t num_groups_27154, __global\n                                        unsigned char *swap_term_mem_33462,\n                                        __global\n                                        unsigned char *payments_mem_33463,\n                                        __global unsigned char *mem_33467,\n                                        __global\n                                        unsigned char *mainzicounter_mem_34642,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34644,\n                                        int64_t num_threads_34646)\n{\n    #define segred_group_sizze_27152 (mainzisegred_group_sizze_27151)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34654_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_34654_backing_aligned_0;\n    __local volatile char *restrict sync_arr_mem_34652_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_34652_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34647;\n    int32_t local_tid_34648;\n    int64_t group_sizze_34651;\n    int32_t wave_sizze_34650;\n    int32_t group_tid_34649;\n    \n    global_tid_34647 = get_global_id(0);\n    local_tid_34648 = get_local_id(0);\n    group_sizze_34651 = get_local_size(0);\n    wave_sizze_",
                   "34650 = LOCKSTEP_WIDTH;\n    group_tid_34649 = get_group_id(0);\n    \n    int32_t phys_tid_27159;\n    \n    phys_tid_27159 = global_tid_34647;\n    \n    __local char *sync_arr_mem_34652;\n    \n    sync_arr_mem_34652 = (__local char *) sync_arr_mem_34652_backing_0;\n    \n    __local char *red_arr_mem_34654;\n    \n    red_arr_mem_34654 = (__local char *) red_arr_mem_34654_backing_1;\n    \n    int64_t dummy_27157;\n    \n    dummy_27157 = 0;\n    \n    int64_t gtid_27158;\n    \n    gtid_27158 = 0;\n    \n    float x_acc_34656;\n    int64_t chunk_sizze_34657;\n    \n    chunk_sizze_34657 = smin64(sdiv_up64(n_26351,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_27152 *\n                                         num_groups_27154))),\n                               sdiv_up64(n_26351 - sext_i32_i64(phys_tid_27159),\n                                         num_threads_34646));\n    \n    float x_26369;\n    float x_26370;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34656 = -INFINITY;\n    }\n    for (int64_t i_34661 = 0; i_34661 < chunk_sizze_34657; i_34661++) {\n        gtid_27158 = sext_i32_i64(phys_tid_27159) + num_threads_34646 * i_34661;\n        // apply map function\n        {\n            float x_26372 = ((__global\n                              float *) swap_term_mem_33462)[gtid_27158];\n            int64_t x_26373 = ((__global\n                                int64_t *) payments_mem_33463)[gtid_27158];\n            float res_26374 = sitofp_i64_f32(x_26373);\n            float res_26375 = x_26372 * res_26374;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_26369 = x_acc_34656;\n            }\n            // load new values\n            {\n                x_26370 = res_26375;\n            }\n            // apply reduction operator\n            {\n                float res_26371 = fmax32(x_26369, x_26370);\n                \n                // store in accumulator\n     ",
                   "           {\n                    x_acc_34656 = res_26371;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_26369 = x_acc_34656;\n        ((__local float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648)] =\n            x_26369;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34662;\n    int32_t skip_waves_34663;\n    \n    skip_waves_34663 = 1;\n    \n    float x_34658;\n    float x_34659;\n    \n    offset_34662 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34648, sext_i64_i32(segred_group_sizze_27152))) {\n            x_34658 = ((__local\n                        float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648 +\n                                                    offset_34662)];\n        }\n    }\n    offset_34662 = 1;\n    while (slt32(offset_34662, wave_sizze_34650)) {\n        if (slt32(local_tid_34648 + offset_34662,\n                  sext_i64_i32(segred_group_sizze_27152)) && ((local_tid_34648 -\n                                                               squot32(local_tid_34648,\n                                                                       wave_sizze_34650) *\n                                                               wave_sizze_34650) &\n                                                              (2 *\n                                                               offset_34662 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_34659 = ((volatile __local\n                            float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648 +\n                                                        offset_34662)];\n            }\n            // apply reduction operation\n            {\n                float res_34660 = fmax32(x_34658, x_34659);\n                \n                x_34658 = res_34660;\n            }\n            // wr",
                   "ite result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648)] =\n                    x_34658;\n            }\n        }\n        offset_34662 *= 2;\n    }\n    while (slt32(skip_waves_34663,\n                 squot32(sext_i64_i32(segred_group_sizze_27152) +\n                         wave_sizze_34650 - 1, wave_sizze_34650))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34662 = skip_waves_34663 * wave_sizze_34650;\n        if (slt32(local_tid_34648 + offset_34662,\n                  sext_i64_i32(segred_group_sizze_27152)) && ((local_tid_34648 -\n                                                               squot32(local_tid_34648,\n                                                                       wave_sizze_34650) *\n                                                               wave_sizze_34650) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34648,\n                                                                       wave_sizze_34650) &\n                                                               (2 *\n                                                                skip_waves_34663 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_34659 = ((__local\n                            float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648 +\n                                                        offset_34662)];\n            }\n            // apply reduction operation\n            {\n                float res_34660 = fmax32(x_34658, x_34659);\n                \n                x_34658 = res_34660;\n            }\n            // write result of operation\n            {\n                ((__local\n                  float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648)] =\n                    x_3465",
                   "8;\n            }\n        }\n        skip_waves_34663 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_34648) == 0) {\n            x_acc_34656 = x_34658;\n        }\n    }\n    \n    int32_t old_counter_34664;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34648 == 0) {\n            ((__global\n              float *) group_res_arr_mem_34644)[sext_i32_i64(group_tid_34649) *\n                                                segred_group_sizze_27152] =\n                x_acc_34656;\n            mem_fence_global();\n            old_counter_34664 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_34642)[0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34652)[0] = old_counter_34664 ==\n                num_groups_27154 - 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34665;\n    \n    is_last_group_34665 = ((__local bool *) sync_arr_mem_34652)[0];\n    if (is_last_group_34665) {\n        if (local_tid_34648 == 0) {\n            old_counter_34664 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_34642)[0],\n                                                      (int) (0 -\n                                                             num_groups_27154));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34666 = sdiv_up64(num_groups_27154,\n                                                      segred_group_sizze_27152);\n            \n            x_26369 = -INFINITY;\n            for (int64_t i_34667 = 0; i_34667 < read_per_thread_34666;\n                 i_34667++) {\n                int64_t group_res_id_34668 = sext_i32_i64(local_tid_34648) *\n         ",
                   "               read_per_thread_34666 + i_34667;\n                int64_t index_of_group_res_34669 = group_res_id_34668;\n                \n                if (slt64(group_res_id_34668, num_groups_27154)) {\n                    x_26370 = ((__global\n                                float *) group_res_arr_mem_34644)[index_of_group_res_34669 *\n                                                                  segred_group_sizze_27152];\n                    \n                    float res_26371;\n                    \n                    res_26371 = fmax32(x_26369, x_26370);\n                    x_26369 = res_26371;\n                }\n            }\n        }\n        ((__local float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648)] =\n            x_26369;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34670;\n            int32_t skip_waves_34671;\n            \n            skip_waves_34671 = 1;\n            \n            float x_34658;\n            float x_34659;\n            \n            offset_34670 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34648,\n                          sext_i64_i32(segred_group_sizze_27152))) {\n                    x_34658 = ((__local\n                                float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648 +\n                                                            offset_34670)];\n                }\n            }\n            offset_34670 = 1;\n            while (slt32(offset_34670, wave_sizze_34650)) {\n                if (slt32(local_tid_34648 + offset_34670,\n                          sext_i64_i32(segred_group_sizze_27152)) &&\n                    ((local_tid_34648 - squot32(local_tid_34648,\n                                                wave_sizze_34650) *\n                      wave_sizze_34650) & (2 * offset_34670 - 1)) == 0) {\n                    // read array element\n                    {\n                  ",
                   "      x_34659 = ((volatile __local\n                                    float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648 +\n                                                                offset_34670)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_34660 = fmax32(x_34658, x_34659);\n                        \n                        x_34658 = res_34660;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648)] =\n                            x_34658;\n                    }\n                }\n                offset_34670 *= 2;\n            }\n            while (slt32(skip_waves_34671,\n                         squot32(sext_i64_i32(segred_group_sizze_27152) +\n                                 wave_sizze_34650 - 1, wave_sizze_34650))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34670 = skip_waves_34671 * wave_sizze_34650;\n                if (slt32(local_tid_34648 + offset_34670,\n                          sext_i64_i32(segred_group_sizze_27152)) &&\n                    ((local_tid_34648 - squot32(local_tid_34648,\n                                                wave_sizze_34650) *\n                      wave_sizze_34650) == 0 && (squot32(local_tid_34648,\n                                                         wave_sizze_34650) &\n                                                 (2 * skip_waves_34671 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_34659 = ((__local\n                                    float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648 +\n                                                                offset_34670)];\n                    }\n                    // apply reduction operation\n                    {\n        ",
                   "                float res_34660 = fmax32(x_34658, x_34659);\n                        \n                        x_34658 = res_34660;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          float *) red_arr_mem_34654)[sext_i32_i64(local_tid_34648)] =\n                            x_34658;\n                    }\n                }\n                skip_waves_34671 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34648 == 0) {\n                    ((__global float *) mem_33467)[0] = x_34658;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_27152\n}\n__kernel void mainzisegred_nonseg_34026(__global int *global_failure,\n                                        int failure_is_an_option, __global\n                                        int64_t *global_failure_args,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34932_backing_aligned_0,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34930_backing_aligned_1,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34928_backing_aligned_2,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34926_backing_aligned_3,\n                                        __local volatile\n                                        int64_t *sync_arr_mem_34924_backing_aligned_4,\n                                        int64_t n_26351, int64_t steps_26355,\n                                        float sims_per_year_26449,\n                                        int64_t flat_dim_26636, __global\n                                        unsigned char *res_mem_33488, __global\n     ",
                   "                                   unsigned char *res_mem_33489, __global\n                                        unsigned char *mem_34145, __global\n                                        unsigned char *mem_34147, __global\n                                        unsigned char *mem_34173, __global\n                                        unsigned char *mem_34187, __global\n                                        unsigned char *mem_34201, __global\n                                        unsigned char *mem_34215, __global\n                                        unsigned char *mem_34229, __global\n                                        unsigned char *mem_34231, __global\n                                        unsigned char *mem_34233, __global\n                                        unsigned char *mem_34235, __global\n                                        unsigned char *mainzicounter_mem_34908,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34910,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34912,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34914,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34916,\n                                        int64_t num_threads_34918)\n{\n    #define segred_num_groups_34017 (mainzisegred_num_groups_34016)\n    #define segred_group_sizze_34019 (mainzisegred_group_sizze_34018)\n    #define num_threads_34238 (mainzisegred_num_groups_34016 * mainzisegred_group_sizze_34018)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34932_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_34932_backing_aligned_0;\n ",
                   "   __local volatile char *restrict red_arr_mem_34930_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_34930_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_34928_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_34928_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_34926_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_34926_backing_aligned_3;\n    __local volatile char *restrict sync_arr_mem_34924_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_34924_backing_aligned_4;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34919;\n    int32_t local_tid_34920;\n    int64_t group_sizze_34923;\n    int32_t wave_sizze_34922;\n    int32_t group_tid_34921;\n    \n    global_tid_34919 = get_global_id(0);\n    local_tid_34920 = get_local_id(0);\n    group_sizze_34923 = get_local_size(0);\n    wave_sizze_34922 = LOCKSTEP_WIDTH;\n    group_tid_34921 = get_group_id(0);\n    \n    int32_t phys_tid_34026;\n    \n    phys_tid_34026 = global_tid_34919;\n    \n    __local char *sync_arr_mem_34924;\n    \n    sync_arr_mem_34924 = (__local char *) sync_arr_mem_34924_backing_0;\n    \n    __local char *red_arr_mem_34926;\n    \n    red_arr_mem_34926 = (__local char *) red_arr_mem_34926_backing_1;\n    \n    __local char *red_arr_mem_34928;\n    \n    red_arr_mem_34928 = (__local char *) red_arr_mem_34928_backing_2;\n    \n    __local char *red_arr_mem_34930;\n    \n    red_arr_mem_34930 = (__local char *) red_arr_mem_34930_backing_3;\n    \n    __local char *red_arr_mem_34932;\n    \n    red_arr_mem_34932 = (__local char *) red_arr_mem_34932_backing_4;\n    \n    ",
                   "int64_t dummy_34024;\n    \n    dummy_34024 = 0;\n    \n    int64_t gtid_34025;\n    \n    gtid_34025 = 0;\n    \n    int64_t x_acc_34934;\n    int64_t x_acc_34935;\n    int64_t x_acc_34936;\n    int64_t x_acc_34937;\n    int64_t chunk_sizze_34938;\n    \n    chunk_sizze_34938 = smin64(sdiv_up64(steps_26355,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_34019 *\n                                         segred_num_groups_34017))),\n                               sdiv_up64(steps_26355 -\n                                         sext_i32_i64(phys_tid_34026),\n                                         num_threads_34918));\n    \n    int64_t x_34027;\n    int64_t x_34028;\n    int64_t x_34029;\n    int64_t x_34030;\n    int64_t y_34031;\n    int64_t y_34032;\n    int64_t y_34033;\n    int64_t y_34034;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34934 = 0;\n        x_acc_34935 = 0;\n        x_acc_34936 = 0;\n        x_acc_34937 = 0;\n    }\n    for (int64_t i_34951 = 0; i_34951 < chunk_sizze_34938; i_34951++) {\n        gtid_34025 = sext_i32_i64(phys_tid_34026) + num_threads_34918 * i_34951;\n        // apply map function\n        {\n            int64_t convop_x_34040 = add64(1, gtid_34025);\n            float binop_x_34041 = sitofp_i64_f32(convop_x_34040);\n            float index_primexp_34042 = binop_x_34041 / sims_per_year_26449;\n            int64_t discard_34045;\n            int64_t scanacc_34049 = 0;\n            \n            for (int64_t i_34048 = 0; i_34048 < flat_dim_26636; i_34048++) {\n                int64_t binop_x_34052 = squot64(i_34048, n_26351);\n                int64_t binop_y_34053 = n_26351 * binop_x_34052;\n                int64_t new_index_34054 = i_34048 - binop_y_34053;\n                int64_t x_34055 = ((__global\n                                    int64_t *) res_mem_33488)[new_index_34054];\n                float x_34056 = ((__global\n                                  float *) res_mem_33489)[new_index_34054];\n                fl",
                   "oat x_34057 = index_primexp_34042 / x_34056;\n                float ceil_arg_34058 = x_34057 - 1.0F;\n                float res_34059;\n                \n                res_34059 = futrts_ceil32(ceil_arg_34058);\n                \n                int64_t res_34060 = fptosi_f32_i64(res_34059);\n                int64_t max_arg_34061 = sub64(x_34055, res_34060);\n                int64_t res_34062 = smax64(0, max_arg_34061);\n                bool cond_34063 = res_34062 == 0;\n                int64_t res_34064;\n                \n                if (cond_34063) {\n                    res_34064 = 1;\n                } else {\n                    res_34064 = res_34062;\n                }\n                \n                int64_t res_34065 = add64(scanacc_34049, res_34064);\n                \n                ((__global int64_t *) mem_34145)[phys_tid_34026 + i_34048 *\n                                                 (segred_num_groups_34017 *\n                                                  segred_group_sizze_34019)] =\n                    res_34065;\n                ((__global int64_t *) mem_34147)[phys_tid_34026 + i_34048 *\n                                                 (segred_num_groups_34017 *\n                                                  segred_group_sizze_34019)] =\n                    res_34064;\n                \n                int64_t scanacc_tmp_34952 = res_34065;\n                \n                scanacc_34049 = scanacc_tmp_34952;\n            }\n            discard_34045 = scanacc_34049;\n            \n            int64_t res_34068;\n            int64_t redout_34070 = 0;\n            \n            for (int64_t i_34069 = 0; i_34069 < flat_dim_26636; i_34069++) {\n                int64_t x_34071 = ((__global\n                                    int64_t *) mem_34147)[phys_tid_34026 +\n                                                          i_34069 *\n                                                          (segred_num_groups_34017 *\n                                                        ",
                   "   segred_group_sizze_34019)];\n                int64_t res_34072 = add64(redout_34070, x_34071);\n                int64_t redout_tmp_34955 = res_34072;\n                \n                redout_34070 = redout_tmp_34955;\n            }\n            res_34068 = redout_34070;\n            \n            bool bounds_invalid_upwards_34073 = slt64(res_34068, 0);\n            bool valid_34074 = !bounds_invalid_upwards_34073;\n            bool range_valid_c_34075;\n            \n            if (!valid_34074) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 24) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = 1;\n                        global_failure_args[2] = res_34068;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            int64_t bytes_34076 = 8 * res_34068;\n            \n            for (int64_t i_34956 = 0; i_34956 < res_34068; i_34956++) {\n                ((__global int64_t *) mem_34173)[phys_tid_34026 + i_34956 *\n                                                 num_threads_34238] = 0;\n            }\n            for (int64_t iter_34079 = 0; iter_34079 < flat_dim_26636;\n                 iter_34079++) {\n                int64_t i_p_o_34081 = add64(-1, iter_34079);\n                int64_t rot_i_34082 = smod64(i_p_o_34081, flat_dim_26636);\n                bool cond_34083 = iter_34079 == 0;\n                int64_t res_34084;\n                \n                if (cond_34083) {\n                    res_34084 = 0;\n                } else {\n                    int64_t pixel_34085 = ((__global\n                                            int64_t *) mem_34145)[phys_tid_34026 +\n                                                                  rot_i_34082 *\n                                                                  (segred_num_groups_34017 *\n    ",
                   "                                                               segred_group_sizze_34019)];\n                    \n                    res_34084 = pixel_34085;\n                }\n                \n                bool less_than_zzero_34086 = slt64(res_34084, 0);\n                bool greater_than_sizze_34087 = sle64(res_34068, res_34084);\n                bool outside_bounds_dim_34088 = less_than_zzero_34086 ||\n                     greater_than_sizze_34087;\n                \n                if (!outside_bounds_dim_34088) {\n                    int64_t read_hist_34090 = ((__global\n                                                int64_t *) mem_34173)[phys_tid_34026 +\n                                                                      res_34084 *\n                                                                      num_threads_34238];\n                    int64_t res_34091 = smax64(iter_34079, read_hist_34090);\n                    \n                    ((__global int64_t *) mem_34173)[phys_tid_34026 +\n                                                     res_34084 *\n                                                     num_threads_34238] =\n                        res_34091;\n                }\n            }\n            \n            int64_t discard_34094;\n            int64_t scanacc_34097 = 0;\n            \n            for (int64_t i_34096 = 0; i_34096 < res_34068; i_34096++) {\n                int64_t x_34099 = ((__global\n                                    int64_t *) mem_34173)[phys_tid_34026 +\n                                                          i_34096 *\n                                                          num_threads_34238];\n                bool res_34100 = slt64(0, x_34099);\n                int64_t res_34101;\n                \n                if (res_34100) {\n                    res_34101 = x_34099;\n                } else {\n                    int64_t res_34102 = add64(scanacc_34097, x_34099);\n                    \n                    res_34101 = res_34102;\n             ",
                   "   }\n                ((__global int64_t *) mem_34187)[phys_tid_34026 + i_34096 *\n                                                 num_threads_34238] = res_34101;\n                \n                int64_t scanacc_tmp_34958 = res_34101;\n                \n                scanacc_34097 = scanacc_tmp_34958;\n            }\n            discard_34094 = scanacc_34097;\n            \n            int64_t bytes_34104 = 4 * res_34068;\n            \n            for (int64_t i_34107 = 0; i_34107 < res_34068; i_34107++) {\n                int64_t x_34109 = ((__global\n                                    int64_t *) mem_34187)[phys_tid_34026 +\n                                                          i_34107 *\n                                                          num_threads_34238];\n                int64_t i_p_o_34110 = add64(-1, i_34107);\n                int64_t rot_i_34111 = smod64(i_p_o_34110, res_34068);\n                int64_t x_34112 = ((__global\n                                    int64_t *) mem_34187)[phys_tid_34026 +\n                                                          rot_i_34111 *\n                                                          num_threads_34238];\n                bool res_34113 = x_34109 == x_34112;\n                bool res_34114 = !res_34113;\n                \n                ((__global bool *) mem_34201)[phys_tid_34026 + i_34107 *\n                                              num_threads_34238] = res_34114;\n            }\n            \n            int64_t discard_34117;\n            int64_t scanacc_34120 = 0;\n            \n            for (int64_t i_34119 = 0; i_34119 < res_34068; i_34119++) {\n                int64_t i_p_o_34122 = add64(1, i_34119);\n                int64_t rot_i_34123 = smod64(i_p_o_34122, res_34068);\n                bool x_34124 = ((__global bool *) mem_34201)[phys_tid_34026 +\n                                                             rot_i_34123 *\n                                                             num_threads_34238];\n                i",
                   "nt64_t res_34125 = btoi_bool_i64(x_34124);\n                int64_t res_34126 = add64(scanacc_34120, res_34125);\n                \n                ((__global int64_t *) mem_34215)[phys_tid_34026 + i_34119 *\n                                                 num_threads_34238] = res_34126;\n                \n                int64_t scanacc_tmp_34961 = res_34126;\n                \n                scanacc_34120 = scanacc_tmp_34961;\n            }\n            discard_34117 = scanacc_34120;\n            \n            bool cond_34128 = slt64(0, res_34068);\n            int64_t num_segments_34129;\n            \n            if (cond_34128) {\n                int64_t i_34130 = sub64(res_34068, 1);\n                bool x_34131 = sle64(0, i_34130);\n                bool y_34132 = slt64(i_34130, res_34068);\n                bool bounds_check_34133 = x_34131 && y_34132;\n                bool index_certs_34134;\n                \n                if (!bounds_check_34133) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 25) ==\n                            -1) {\n                            global_failure_args[0] = i_34130;\n                            global_failure_args[1] = res_34068;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t res_34135 = ((__global\n                                      int64_t *) mem_34215)[phys_tid_34026 +\n                                                            i_34130 *\n                                                            num_threads_34238];\n                \n                num_segments_34129 = res_34135;\n            } else {\n                num_segments_34129 = 0;\n            }\n            \n            int64_t bytes_34136 = 4 * num_segments_34129;\n            \n            // save map-out results\n            { }\n            // load accumulator\n   ",
                   "         {\n                x_34027 = x_acc_34934;\n                x_34028 = x_acc_34935;\n                x_34029 = x_acc_34936;\n                x_34030 = x_acc_34937;\n            }\n            // load new values\n            {\n                y_34031 = res_34068;\n                y_34032 = bytes_34076;\n                y_34033 = bytes_34104;\n                y_34034 = bytes_34136;\n            }\n            // apply reduction operator\n            {\n                int64_t zz_34035 = smax64(x_34027, y_34031);\n                int64_t zz_34036 = smax64(x_34028, y_34032);\n                int64_t zz_34037 = smax64(x_34029, y_34033);\n                int64_t zz_34038 = smax64(x_34030, y_34034);\n                \n                // store in accumulator\n                {\n                    x_acc_34934 = zz_34035;\n                    x_acc_34935 = zz_34036;\n                    x_acc_34936 = zz_34037;\n                    x_acc_34937 = zz_34038;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_34027 = x_acc_34934;\n        x_34028 = x_acc_34935;\n        x_34029 = x_acc_34936;\n        x_34030 = x_acc_34937;\n        ((__local int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920)] =\n            x_34027;\n        ((__local int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920)] =\n            x_34028;\n        ((__local int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920)] =\n            x_34029;\n        ((__local int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920)] =\n            x_34030;\n    }\n    \n  error_0:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34963;\n    int32_t skip_waves_34964;\n    \n    skip_waves_34964 = 1;\n    \n    int64_t x_34939;\n    int64_t x_34940;\n    int64_t x_34941;\n    int64_t x_34942;\n    int64_t y_34943;\n    int64_t y_34944;\n    int64_t y_34945;\n    int64_t y_34946;\n    \n    off",
                   "set_34963 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34920, sext_i64_i32(segred_group_sizze_34019))) {\n            x_34939 = ((__local\n                        int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920 +\n                                                      offset_34963)];\n            x_34940 = ((__local\n                        int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920 +\n                                                      offset_34963)];\n            x_34941 = ((__local\n                        int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920 +\n                                                      offset_34963)];\n            x_34942 = ((__local\n                        int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920 +\n                                                      offset_34963)];\n        }\n    }\n    offset_34963 = 1;\n    while (slt32(offset_34963, wave_sizze_34922)) {\n        if (slt32(local_tid_34920 + offset_34963,\n                  sext_i64_i32(segred_group_sizze_34019)) && ((local_tid_34920 -\n                                                               squot32(local_tid_34920,\n                                                                       wave_sizze_34922) *\n                                                               wave_sizze_34922) &\n                                                              (2 *\n                                                               offset_34963 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                y_34943 = ((volatile __local\n                            int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n                y_34944 = ((volatile __local\n                            int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920 +\n      ",
                   "                                                    offset_34963)];\n                y_34945 = ((volatile __local\n                            int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n                y_34946 = ((volatile __local\n                            int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_34947 = smax64(x_34939, y_34943);\n                int64_t zz_34948 = smax64(x_34940, y_34944);\n                int64_t zz_34949 = smax64(x_34941, y_34945);\n                int64_t zz_34950 = smax64(x_34942, y_34946);\n                \n                x_34939 = zz_34947;\n                x_34940 = zz_34948;\n                x_34941 = zz_34949;\n                x_34942 = zz_34950;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920)] =\n                    x_34939;\n                ((volatile __local\n                  int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920)] =\n                    x_34940;\n                ((volatile __local\n                  int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920)] =\n                    x_34941;\n                ((volatile __local\n                  int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920)] =\n                    x_34942;\n            }\n        }\n        offset_34963 *= 2;\n    }\n    while (slt32(skip_waves_34964,\n                 squot32(sext_i64_i32(segred_group_sizze_34019) +\n                         wave_sizze_34922 - 1, wave_sizze_34922))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34963 = skip_waves_34964 * wave_sizze_34922;\n        if (slt32(local_tid_34920 + offset_34963,\n                  ",
                   "sext_i64_i32(segred_group_sizze_34019)) && ((local_tid_34920 -\n                                                               squot32(local_tid_34920,\n                                                                       wave_sizze_34922) *\n                                                               wave_sizze_34922) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34920,\n                                                                       wave_sizze_34922) &\n                                                               (2 *\n                                                                skip_waves_34964 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                y_34943 = ((__local\n                            int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n                y_34944 = ((__local\n                            int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n                y_34945 = ((__local\n                            int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n                y_34946 = ((__local\n                            int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920 +\n                                                          offset_34963)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_34947 = smax64(x_34939, y_34943);\n                int64_t zz_34948 = smax64(x_34940, y_34944);\n                int64_t zz_34949 = smax64(x_34941, y_34945);\n                int64_t zz_34950 = smax64(x_34942, y_34946);\n                \n                x_34939 = ",
                   "zz_34947;\n                x_34940 = zz_34948;\n                x_34941 = zz_34949;\n                x_34942 = zz_34950;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920)] =\n                    x_34939;\n                ((__local\n                  int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920)] =\n                    x_34940;\n                ((__local\n                  int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920)] =\n                    x_34941;\n                ((__local\n                  int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920)] =\n                    x_34942;\n            }\n        }\n        skip_waves_34964 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_34920) == 0) {\n            x_acc_34934 = x_34939;\n            x_acc_34935 = x_34940;\n            x_acc_34936 = x_34941;\n            x_acc_34937 = x_34942;\n        }\n    }\n    \n    int32_t old_counter_34965;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34920 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_34910)[sext_i32_i64(group_tid_34921) *\n                                                  segred_group_sizze_34019] =\n                x_acc_34934;\n            ((__global\n              int64_t *) group_res_arr_mem_34912)[sext_i32_i64(group_tid_34921) *\n                                                  segred_group_sizze_34019] =\n                x_acc_34935;\n            ((__global\n              int64_t *) group_res_arr_mem_34914)[sext_i32_i64(group_tid_34921) *\n                                                  segred_group_sizze_34019] =\n                x_acc_34936;\n            ((__global\n              int64_t *) group_res_arr_mem_34916)[sext_i32_i64(group_tid_34921) *\n                     ",
                   "                             segred_group_sizze_34019] =\n                x_acc_34937;\n            mem_fence_global();\n            old_counter_34965 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_34908)[0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34924)[0] = old_counter_34965 ==\n                segred_num_groups_34017 - 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34966;\n    \n    is_last_group_34966 = ((__local bool *) sync_arr_mem_34924)[0];\n    if (is_last_group_34966) {\n        if (local_tid_34920 == 0) {\n            old_counter_34965 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_34908)[0],\n                                                      (int) (0 -\n                                                             segred_num_groups_34017));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34967 = sdiv_up64(segred_num_groups_34017,\n                                                      segred_group_sizze_34019);\n            \n            x_34027 = 0;\n            x_34028 = 0;\n            x_34029 = 0;\n            x_34030 = 0;\n            for (int64_t i_34968 = 0; i_34968 < read_per_thread_34967;\n                 i_34968++) {\n                int64_t group_res_id_34969 = sext_i32_i64(local_tid_34920) *\n                        read_per_thread_34967 + i_34968;\n                int64_t index_of_group_res_34970 = group_res_id_34969;\n                \n                if (slt64(group_res_id_34969, segred_num_groups_34017)) {\n                    y_34031 = ((__global\n                                int64_t *) group_res_arr_mem_34910)[index_of_group_res_34970 *\n                                                                    segred_group_sizze_34019]",
                   ";\n                    y_34032 = ((__global\n                                int64_t *) group_res_arr_mem_34912)[index_of_group_res_34970 *\n                                                                    segred_group_sizze_34019];\n                    y_34033 = ((__global\n                                int64_t *) group_res_arr_mem_34914)[index_of_group_res_34970 *\n                                                                    segred_group_sizze_34019];\n                    y_34034 = ((__global\n                                int64_t *) group_res_arr_mem_34916)[index_of_group_res_34970 *\n                                                                    segred_group_sizze_34019];\n                    \n                    int64_t zz_34035;\n                    \n                    zz_34035 = smax64(x_34027, y_34031);\n                    \n                    int64_t zz_34036 = smax64(x_34028, y_34032);\n                    int64_t zz_34037 = smax64(x_34029, y_34033);\n                    int64_t zz_34038 = smax64(x_34030, y_34034);\n                    \n                    x_34027 = zz_34035;\n                    x_34028 = zz_34036;\n                    x_34029 = zz_34037;\n                    x_34030 = zz_34038;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920)] =\n            x_34027;\n        ((__local int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920)] =\n            x_34028;\n        ((__local int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920)] =\n            x_34029;\n        ((__local int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920)] =\n            x_34030;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34971;\n            int32_t skip_waves_34972;\n            \n            skip_waves_34972 = 1;\n            \n            int64_t x_34939;\n            int64_t x_34940;\n            int64_t x_34941;\n            in",
                   "t64_t x_34942;\n            int64_t y_34943;\n            int64_t y_34944;\n            int64_t y_34945;\n            int64_t y_34946;\n            \n            offset_34971 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34920,\n                          sext_i64_i32(segred_group_sizze_34019))) {\n                    x_34939 = ((__local\n                                int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920 +\n                                                              offset_34971)];\n                    x_34940 = ((__local\n                                int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920 +\n                                                              offset_34971)];\n                    x_34941 = ((__local\n                                int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920 +\n                                                              offset_34971)];\n                    x_34942 = ((__local\n                                int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920 +\n                                                              offset_34971)];\n                }\n            }\n            offset_34971 = 1;\n            while (slt32(offset_34971, wave_sizze_34922)) {\n                if (slt32(local_tid_34920 + offset_34971,\n                          sext_i64_i32(segred_group_sizze_34019)) &&\n                    ((local_tid_34920 - squot32(local_tid_34920,\n                                                wave_sizze_34922) *\n                      wave_sizze_34922) & (2 * offset_34971 - 1)) == 0) {\n                    // read array element\n                    {\n                        y_34943 = ((volatile __local\n                                    int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                        y_34944 = ((volati",
                   "le __local\n                                    int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                        y_34945 = ((volatile __local\n                                    int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                        y_34946 = ((volatile __local\n                                    int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_34947 = smax64(x_34939, y_34943);\n                        int64_t zz_34948 = smax64(x_34940, y_34944);\n                        int64_t zz_34949 = smax64(x_34941, y_34945);\n                        int64_t zz_34950 = smax64(x_34942, y_34946);\n                        \n                        x_34939 = zz_34947;\n                        x_34940 = zz_34948;\n                        x_34941 = zz_34949;\n                        x_34942 = zz_34950;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920)] =\n                            x_34939;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920)] =\n                            x_34940;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920)] =\n                            x_34941;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920)] =\n                            x_34942;\n       ",
                   "             }\n                }\n                offset_34971 *= 2;\n            }\n            while (slt32(skip_waves_34972,\n                         squot32(sext_i64_i32(segred_group_sizze_34019) +\n                                 wave_sizze_34922 - 1, wave_sizze_34922))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34971 = skip_waves_34972 * wave_sizze_34922;\n                if (slt32(local_tid_34920 + offset_34971,\n                          sext_i64_i32(segred_group_sizze_34019)) &&\n                    ((local_tid_34920 - squot32(local_tid_34920,\n                                                wave_sizze_34922) *\n                      wave_sizze_34922) == 0 && (squot32(local_tid_34920,\n                                                         wave_sizze_34922) &\n                                                 (2 * skip_waves_34972 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        y_34943 = ((__local\n                                    int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                        y_34944 = ((__local\n                                    int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                        y_34945 = ((__local\n                                    int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                        y_34946 = ((__local\n                                    int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920 +\n                                                                  offset_34971)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_34947 = ",
                   "smax64(x_34939, y_34943);\n                        int64_t zz_34948 = smax64(x_34940, y_34944);\n                        int64_t zz_34949 = smax64(x_34941, y_34945);\n                        int64_t zz_34950 = smax64(x_34942, y_34946);\n                        \n                        x_34939 = zz_34947;\n                        x_34940 = zz_34948;\n                        x_34941 = zz_34949;\n                        x_34942 = zz_34950;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_34926)[sext_i32_i64(local_tid_34920)] =\n                            x_34939;\n                        ((__local\n                          int64_t *) red_arr_mem_34928)[sext_i32_i64(local_tid_34920)] =\n                            x_34940;\n                        ((__local\n                          int64_t *) red_arr_mem_34930)[sext_i32_i64(local_tid_34920)] =\n                            x_34941;\n                        ((__local\n                          int64_t *) red_arr_mem_34932)[sext_i32_i64(local_tid_34920)] =\n                            x_34942;\n                    }\n                }\n                skip_waves_34972 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34920 == 0) {\n                    ((__global int64_t *) mem_34229)[0] = x_34939;\n                    ((__global int64_t *) mem_34231)[0] = x_34940;\n                    ((__global int64_t *) mem_34233)[0] = x_34941;\n                    ((__global int64_t *) mem_34235)[0] = x_34942;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_num_groups_34017\n    #undef segred_group_sizze_34019\n    #undef num_threads_34238\n}\n__kernel void mainzisegred_nonseg_34277(__global int *global_failure,\n                                        __local volatile\n                                        int64_t *red_",
                   "arr_mem_34876_backing_aligned_0,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34874_backing_aligned_1,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34872_backing_aligned_2,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34870_backing_aligned_3,\n                                        __local volatile\n                                        int64_t *sync_arr_mem_34868_backing_aligned_4,\n                                        int64_t n_26351, int64_t steps_26355,\n                                        float sims_per_year_26449,\n                                        int64_t flat_dim_26636, __global\n                                        unsigned char *res_mem_33488, __global\n                                        unsigned char *res_mem_33489, __global\n                                        unsigned char *mem_34331, __global\n                                        unsigned char *mem_34345, __global\n                                        unsigned char *mem_34347, __global\n                                        unsigned char *mem_34349, __global\n                                        unsigned char *mem_34351, __global\n                                        unsigned char *mainzicounter_mem_34852,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34854,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34856,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34858,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34860,\n                                        int64_t",
                   " num_threads_34862)\n{\n    #define segred_num_groups_34268 (mainzisegred_num_groups_34267)\n    #define segred_group_sizze_34270 (mainzisegred_group_sizze_34269)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34876_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_34876_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_34874_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_34874_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_34872_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_34872_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_34870_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_34870_backing_aligned_3;\n    __local volatile char *restrict sync_arr_mem_34868_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_34868_backing_aligned_4;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34863;\n    int32_t local_tid_34864;\n    int64_t group_sizze_34867;\n    int32_t wave_sizze_34866;\n    int32_t group_tid_34865;\n    \n    global_tid_34863 = get_global_id(0);\n    local_tid_34864 = get_local_id(0);\n    group_sizze_34867 = get_local_size(0);\n    wave_sizze_34866 = LOCKSTEP_WIDTH;\n    group_tid_34865 = get_group_id(0);\n    \n    int32_t phys_tid_34277;\n    \n    phys_tid_34277 = global_tid_34863;\n    \n    __local char *sync_arr_mem_34868;\n    \n    sync_arr_mem_34868 = (__local char *) sync_arr_mem_34868_backing_0;\n    \n    __local char *red_arr_mem_34870;\n    \n    red_arr_mem_34870 = (__local char *) red_arr_mem_34870_backing_1;\n    \n    __local char *red_arr_mem_34872;\n    \n    red_arr_mem_34872 = (__local char *) red_arr_mem_34872_ba",
                   "cking_2;\n    \n    __local char *red_arr_mem_34874;\n    \n    red_arr_mem_34874 = (__local char *) red_arr_mem_34874_backing_3;\n    \n    __local char *red_arr_mem_34876;\n    \n    red_arr_mem_34876 = (__local char *) red_arr_mem_34876_backing_4;\n    \n    int64_t dummy_34275;\n    \n    dummy_34275 = 0;\n    \n    int64_t gtid_34276;\n    \n    gtid_34276 = 0;\n    \n    int64_t x_acc_34878;\n    int64_t x_acc_34879;\n    int64_t x_acc_34880;\n    int64_t x_acc_34881;\n    int64_t chunk_sizze_34882;\n    \n    chunk_sizze_34882 = smin64(sdiv_up64(steps_26355,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_34270 *\n                                         segred_num_groups_34268))),\n                               sdiv_up64(steps_26355 -\n                                         sext_i32_i64(phys_tid_34277),\n                                         num_threads_34862));\n    \n    int64_t x_34278;\n    int64_t x_34279;\n    int64_t x_34280;\n    int64_t x_34281;\n    int64_t y_34282;\n    int64_t y_34283;\n    int64_t y_34284;\n    int64_t y_34285;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34878 = 0;\n        x_acc_34879 = 0;\n        x_acc_34880 = 0;\n        x_acc_34881 = 0;\n    }\n    for (int64_t i_34895 = 0; i_34895 < chunk_sizze_34882; i_34895++) {\n        gtid_34276 = sext_i32_i64(phys_tid_34277) + num_threads_34862 * i_34895;\n        // apply map function\n        {\n            int64_t binop_x_34291 = squot64(gtid_34276, steps_26355);\n            int64_t binop_y_34292 = steps_26355 * binop_x_34291;\n            int64_t gtid_34293 = gtid_34276 - binop_y_34292;\n            int64_t convop_x_34294 = add64(1, gtid_34293);\n            float binop_x_34295 = sitofp_i64_f32(convop_x_34294);\n            float index_primexp_34296 = binop_x_34295 / sims_per_year_26449;\n            \n            for (int64_t i_34299 = 0; i_34299 < flat_dim_26636; i_34299++) {\n                int64_t binop_x_34301 = squot64(i_34299, n_26351);\n                int6",
                   "4_t binop_y_34302 = n_26351 * binop_x_34301;\n                int64_t new_index_34303 = i_34299 - binop_y_34302;\n                int64_t x_34304 = ((__global\n                                    int64_t *) res_mem_33488)[new_index_34303];\n                float x_34305 = ((__global\n                                  float *) res_mem_33489)[new_index_34303];\n                float x_34306 = index_primexp_34296 / x_34305;\n                float ceil_arg_34307 = x_34306 - 1.0F;\n                float res_34308;\n                \n                res_34308 = futrts_ceil32(ceil_arg_34307);\n                \n                int64_t res_34309 = fptosi_f32_i64(res_34308);\n                int64_t max_arg_34310 = sub64(x_34304, res_34309);\n                int64_t res_34311 = smax64(0, max_arg_34310);\n                bool cond_34312 = res_34311 == 0;\n                int64_t res_34313;\n                \n                if (cond_34312) {\n                    res_34313 = 1;\n                } else {\n                    res_34313 = res_34311;\n                }\n                ((__global int64_t *) mem_34331)[phys_tid_34277 + i_34299 *\n                                                 (segred_num_groups_34268 *\n                                                  segred_group_sizze_34270)] =\n                    res_34313;\n            }\n            \n            int64_t res_34315;\n            int64_t redout_34317 = 0;\n            \n            for (int64_t i_34316 = 0; i_34316 < flat_dim_26636; i_34316++) {\n                int64_t x_34318 = ((__global\n                                    int64_t *) mem_34331)[phys_tid_34277 +\n                                                          i_34316 *\n                                                          (segred_num_groups_34268 *\n                                                           segred_group_sizze_34270)];\n                int64_t res_34319 = add64(redout_34317, x_34318);\n                int64_t redout_tmp_34897 = res_34319;\n                \n      ",
                   "          redout_34317 = redout_tmp_34897;\n            }\n            res_34315 = redout_34317;\n            \n            int64_t bytes_34320 = 8 * res_34315;\n            int64_t bytes_34321 = 8 * res_34315;\n            int64_t bytes_34322 = 8 * res_34315;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_34278 = x_acc_34878;\n                x_34279 = x_acc_34879;\n                x_34280 = x_acc_34880;\n                x_34281 = x_acc_34881;\n            }\n            // load new values\n            {\n                y_34282 = res_34315;\n                y_34283 = bytes_34320;\n                y_34284 = bytes_34321;\n                y_34285 = bytes_34322;\n            }\n            // apply reduction operator\n            {\n                int64_t zz_34286 = smax64(x_34278, y_34282);\n                int64_t zz_34287 = smax64(x_34279, y_34283);\n                int64_t zz_34288 = smax64(x_34280, y_34284);\n                int64_t zz_34289 = smax64(x_34281, y_34285);\n                \n                // store in accumulator\n                {\n                    x_acc_34878 = zz_34286;\n                    x_acc_34879 = zz_34287;\n                    x_acc_34880 = zz_34288;\n                    x_acc_34881 = zz_34289;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_34278 = x_acc_34878;\n        x_34279 = x_acc_34879;\n        x_34280 = x_acc_34880;\n        x_34281 = x_acc_34881;\n        ((__local int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864)] =\n            x_34278;\n        ((__local int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864)] =\n            x_34279;\n        ((__local int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864)] =\n            x_34280;\n        ((__local int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864)] =\n            x_34281;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    in",
                   "t32_t offset_34898;\n    int32_t skip_waves_34899;\n    \n    skip_waves_34899 = 1;\n    \n    int64_t x_34883;\n    int64_t x_34884;\n    int64_t x_34885;\n    int64_t x_34886;\n    int64_t y_34887;\n    int64_t y_34888;\n    int64_t y_34889;\n    int64_t y_34890;\n    \n    offset_34898 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34864, sext_i64_i32(segred_group_sizze_34270))) {\n            x_34883 = ((__local\n                        int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864 +\n                                                      offset_34898)];\n            x_34884 = ((__local\n                        int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864 +\n                                                      offset_34898)];\n            x_34885 = ((__local\n                        int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864 +\n                                                      offset_34898)];\n            x_34886 = ((__local\n                        int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864 +\n                                                      offset_34898)];\n        }\n    }\n    offset_34898 = 1;\n    while (slt32(offset_34898, wave_sizze_34866)) {\n        if (slt32(local_tid_34864 + offset_34898,\n                  sext_i64_i32(segred_group_sizze_34270)) && ((local_tid_34864 -\n                                                               squot32(local_tid_34864,\n                                                                       wave_sizze_34866) *\n                                                               wave_sizze_34866) &\n                                                              (2 *\n                                                               offset_34898 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                y_34887 = ((volatile __local\n                            int64_t *",
                   ") red_arr_mem_34870)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n                y_34888 = ((volatile __local\n                            int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n                y_34889 = ((volatile __local\n                            int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n                y_34890 = ((volatile __local\n                            int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_34891 = smax64(x_34883, y_34887);\n                int64_t zz_34892 = smax64(x_34884, y_34888);\n                int64_t zz_34893 = smax64(x_34885, y_34889);\n                int64_t zz_34894 = smax64(x_34886, y_34890);\n                \n                x_34883 = zz_34891;\n                x_34884 = zz_34892;\n                x_34885 = zz_34893;\n                x_34886 = zz_34894;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864)] =\n                    x_34883;\n                ((volatile __local\n                  int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864)] =\n                    x_34884;\n                ((volatile __local\n                  int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864)] =\n                    x_34885;\n                ((volatile __local\n                  int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864)] =\n                    x_34886;\n            }\n        }\n        offset_34898 *= 2;\n    }\n    while (slt32(skip_waves_34899,\n                 squot32(sext_i64_i",
                   "32(segred_group_sizze_34270) +\n                         wave_sizze_34866 - 1, wave_sizze_34866))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34898 = skip_waves_34899 * wave_sizze_34866;\n        if (slt32(local_tid_34864 + offset_34898,\n                  sext_i64_i32(segred_group_sizze_34270)) && ((local_tid_34864 -\n                                                               squot32(local_tid_34864,\n                                                                       wave_sizze_34866) *\n                                                               wave_sizze_34866) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34864,\n                                                                       wave_sizze_34866) &\n                                                               (2 *\n                                                                skip_waves_34899 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                y_34887 = ((__local\n                            int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n                y_34888 = ((__local\n                            int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n                y_34889 = ((__local\n                            int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n                y_34890 = ((__local\n                            int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864 +\n                                                          offset_34898)];\n            }\n            // apply reduction operation\n            {\n                int64",
                   "_t zz_34891 = smax64(x_34883, y_34887);\n                int64_t zz_34892 = smax64(x_34884, y_34888);\n                int64_t zz_34893 = smax64(x_34885, y_34889);\n                int64_t zz_34894 = smax64(x_34886, y_34890);\n                \n                x_34883 = zz_34891;\n                x_34884 = zz_34892;\n                x_34885 = zz_34893;\n                x_34886 = zz_34894;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864)] =\n                    x_34883;\n                ((__local\n                  int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864)] =\n                    x_34884;\n                ((__local\n                  int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864)] =\n                    x_34885;\n                ((__local\n                  int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864)] =\n                    x_34886;\n            }\n        }\n        skip_waves_34899 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_34864) == 0) {\n            x_acc_34878 = x_34883;\n            x_acc_34879 = x_34884;\n            x_acc_34880 = x_34885;\n            x_acc_34881 = x_34886;\n        }\n    }\n    \n    int32_t old_counter_34900;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34864 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_34854)[sext_i32_i64(group_tid_34865) *\n                                                  segred_group_sizze_34270] =\n                x_acc_34878;\n            ((__global\n              int64_t *) group_res_arr_mem_34856)[sext_i32_i64(group_tid_34865) *\n                                                  segred_group_sizze_34270] =\n                x_acc_34879;\n            ((__global\n              int64_t *) group_res_arr_mem_34858)",
                   "[sext_i32_i64(group_tid_34865) *\n                                                  segred_group_sizze_34270] =\n                x_acc_34880;\n            ((__global\n              int64_t *) group_res_arr_mem_34860)[sext_i32_i64(group_tid_34865) *\n                                                  segred_group_sizze_34270] =\n                x_acc_34881;\n            mem_fence_global();\n            old_counter_34900 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_34852)[0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34868)[0] = old_counter_34900 ==\n                segred_num_groups_34268 - 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34901;\n    \n    is_last_group_34901 = ((__local bool *) sync_arr_mem_34868)[0];\n    if (is_last_group_34901) {\n        if (local_tid_34864 == 0) {\n            old_counter_34900 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_34852)[0],\n                                                      (int) (0 -\n                                                             segred_num_groups_34268));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34902 = sdiv_up64(segred_num_groups_34268,\n                                                      segred_group_sizze_34270);\n            \n            x_34278 = 0;\n            x_34279 = 0;\n            x_34280 = 0;\n            x_34281 = 0;\n            for (int64_t i_34903 = 0; i_34903 < read_per_thread_34902;\n                 i_34903++) {\n                int64_t group_res_id_34904 = sext_i32_i64(local_tid_34864) *\n                        read_per_thread_34902 + i_34903;\n                int64_t index_of_group_res_34905 = group_res_id_34904;\n                \n                if (slt64(group_res_i",
                   "d_34904, segred_num_groups_34268)) {\n                    y_34282 = ((__global\n                                int64_t *) group_res_arr_mem_34854)[index_of_group_res_34905 *\n                                                                    segred_group_sizze_34270];\n                    y_34283 = ((__global\n                                int64_t *) group_res_arr_mem_34856)[index_of_group_res_34905 *\n                                                                    segred_group_sizze_34270];\n                    y_34284 = ((__global\n                                int64_t *) group_res_arr_mem_34858)[index_of_group_res_34905 *\n                                                                    segred_group_sizze_34270];\n                    y_34285 = ((__global\n                                int64_t *) group_res_arr_mem_34860)[index_of_group_res_34905 *\n                                                                    segred_group_sizze_34270];\n                    \n                    int64_t zz_34286;\n                    \n                    zz_34286 = smax64(x_34278, y_34282);\n                    \n                    int64_t zz_34287 = smax64(x_34279, y_34283);\n                    int64_t zz_34288 = smax64(x_34280, y_34284);\n                    int64_t zz_34289 = smax64(x_34281, y_34285);\n                    \n                    x_34278 = zz_34286;\n                    x_34279 = zz_34287;\n                    x_34280 = zz_34288;\n                    x_34281 = zz_34289;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864)] =\n            x_34278;\n        ((__local int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864)] =\n            x_34279;\n        ((__local int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864)] =\n            x_34280;\n        ((__local int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864)] =\n            x_34281;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce",
                   " the per-group results\n        {\n            int32_t offset_34906;\n            int32_t skip_waves_34907;\n            \n            skip_waves_34907 = 1;\n            \n            int64_t x_34883;\n            int64_t x_34884;\n            int64_t x_34885;\n            int64_t x_34886;\n            int64_t y_34887;\n            int64_t y_34888;\n            int64_t y_34889;\n            int64_t y_34890;\n            \n            offset_34906 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34864,\n                          sext_i64_i32(segred_group_sizze_34270))) {\n                    x_34883 = ((__local\n                                int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864 +\n                                                              offset_34906)];\n                    x_34884 = ((__local\n                                int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864 +\n                                                              offset_34906)];\n                    x_34885 = ((__local\n                                int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864 +\n                                                              offset_34906)];\n                    x_34886 = ((__local\n                                int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864 +\n                                                              offset_34906)];\n                }\n            }\n            offset_34906 = 1;\n            while (slt32(offset_34906, wave_sizze_34866)) {\n                if (slt32(local_tid_34864 + offset_34906,\n                          sext_i64_i32(segred_group_sizze_34270)) &&\n                    ((local_tid_34864 - squot32(local_tid_34864,\n                                                wave_sizze_34866) *\n                      wave_sizze_34866) & (2 * offset_34906 - 1)) == 0) {\n                    // read array element\n                    {\n        ",
                   "                y_34887 = ((volatile __local\n                                    int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                        y_34888 = ((volatile __local\n                                    int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                        y_34889 = ((volatile __local\n                                    int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                        y_34890 = ((volatile __local\n                                    int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_34891 = smax64(x_34883, y_34887);\n                        int64_t zz_34892 = smax64(x_34884, y_34888);\n                        int64_t zz_34893 = smax64(x_34885, y_34889);\n                        int64_t zz_34894 = smax64(x_34886, y_34890);\n                        \n                        x_34883 = zz_34891;\n                        x_34884 = zz_34892;\n                        x_34885 = zz_34893;\n                        x_34886 = zz_34894;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864)] =\n                            x_34883;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864)] =\n                            x_34884;\n                        ((volatile __local\n                          int64_t *)",
                   " red_arr_mem_34874)[sext_i32_i64(local_tid_34864)] =\n                            x_34885;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864)] =\n                            x_34886;\n                    }\n                }\n                offset_34906 *= 2;\n            }\n            while (slt32(skip_waves_34907,\n                         squot32(sext_i64_i32(segred_group_sizze_34270) +\n                                 wave_sizze_34866 - 1, wave_sizze_34866))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34906 = skip_waves_34907 * wave_sizze_34866;\n                if (slt32(local_tid_34864 + offset_34906,\n                          sext_i64_i32(segred_group_sizze_34270)) &&\n                    ((local_tid_34864 - squot32(local_tid_34864,\n                                                wave_sizze_34866) *\n                      wave_sizze_34866) == 0 && (squot32(local_tid_34864,\n                                                         wave_sizze_34866) &\n                                                 (2 * skip_waves_34907 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        y_34887 = ((__local\n                                    int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                        y_34888 = ((__local\n                                    int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                        y_34889 = ((__local\n                                    int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                        y_34890 = ((__local\n                                    int64_t *) re",
                   "d_arr_mem_34876)[sext_i32_i64(local_tid_34864 +\n                                                                  offset_34906)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_34891 = smax64(x_34883, y_34887);\n                        int64_t zz_34892 = smax64(x_34884, y_34888);\n                        int64_t zz_34893 = smax64(x_34885, y_34889);\n                        int64_t zz_34894 = smax64(x_34886, y_34890);\n                        \n                        x_34883 = zz_34891;\n                        x_34884 = zz_34892;\n                        x_34885 = zz_34893;\n                        x_34886 = zz_34894;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_34870)[sext_i32_i64(local_tid_34864)] =\n                            x_34883;\n                        ((__local\n                          int64_t *) red_arr_mem_34872)[sext_i32_i64(local_tid_34864)] =\n                            x_34884;\n                        ((__local\n                          int64_t *) red_arr_mem_34874)[sext_i32_i64(local_tid_34864)] =\n                            x_34885;\n                        ((__local\n                          int64_t *) red_arr_mem_34876)[sext_i32_i64(local_tid_34864)] =\n                            x_34886;\n                    }\n                }\n                skip_waves_34907 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34864 == 0) {\n                    ((__global int64_t *) mem_34345)[0] = x_34883;\n                    ((__global int64_t *) mem_34347)[0] = x_34884;\n                    ((__global int64_t *) mem_34349)[0] = x_34885;\n                    ((__global int64_t *) mem_34351)[0] = x_34886;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segre",
                   "d_num_groups_34268\n    #undef segred_group_sizze_34270\n}\n__kernel void mainzisegred_nonseg_34392(__global int *global_failure,\n                                        int failure_is_an_option, __global\n                                        int64_t *global_failure_args,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35199_backing_aligned_0,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35197_backing_aligned_1,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35195_backing_aligned_2,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35193_backing_aligned_3,\n                                        __local volatile\n                                        int64_t *sync_arr_mem_35191_backing_aligned_4,\n                                        int64_t steps_26355,\n                                        int64_t flat_dim_26636, __global\n                                        unsigned char *mem_33833, __global\n                                        unsigned char *mem_33836, __global\n                                        unsigned char *mem_34477, __global\n                                        unsigned char *mem_34491, __global\n                                        unsigned char *mem_34505, __global\n                                        unsigned char *mem_34519, __global\n                                        unsigned char *mem_34533, __global\n                                        unsigned char *mem_34535, __global\n                                        unsigned char *mem_34537, __global\n                                        unsigned char *mem_34539, __global\n                                        unsigned char *mainzicounter_mem_35175,\n                                        __global",
                   "\n                                        unsigned char *group_res_arr_mem_35177,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35179,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35181,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35183,\n                                        int64_t num_threads_35185)\n{\n    #define segred_num_groups_34383 (mainzisegred_num_groups_34382)\n    #define segred_group_sizze_34385 (mainzisegred_group_sizze_34384)\n    #define num_threads_34542 (mainzisegred_num_groups_34382 * mainzisegred_group_sizze_34384)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_35199_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_35199_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_35197_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_35197_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_35195_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_35195_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_35193_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_35193_backing_aligned_3;\n    __local volatile char *restrict sync_arr_mem_35191_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_35191_backing_aligned_4;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCA",
                   "L_MEM_FENCE);\n    \n    int32_t global_tid_35186;\n    int32_t local_tid_35187;\n    int64_t group_sizze_35190;\n    int32_t wave_sizze_35189;\n    int32_t group_tid_35188;\n    \n    global_tid_35186 = get_global_id(0);\n    local_tid_35187 = get_local_id(0);\n    group_sizze_35190 = get_local_size(0);\n    wave_sizze_35189 = LOCKSTEP_WIDTH;\n    group_tid_35188 = get_group_id(0);\n    \n    int32_t phys_tid_34392;\n    \n    phys_tid_34392 = global_tid_35186;\n    \n    __local char *sync_arr_mem_35191;\n    \n    sync_arr_mem_35191 = (__local char *) sync_arr_mem_35191_backing_0;\n    \n    __local char *red_arr_mem_35193;\n    \n    red_arr_mem_35193 = (__local char *) red_arr_mem_35193_backing_1;\n    \n    __local char *red_arr_mem_35195;\n    \n    red_arr_mem_35195 = (__local char *) red_arr_mem_35195_backing_2;\n    \n    __local char *red_arr_mem_35197;\n    \n    red_arr_mem_35197 = (__local char *) red_arr_mem_35197_backing_3;\n    \n    __local char *red_arr_mem_35199;\n    \n    red_arr_mem_35199 = (__local char *) red_arr_mem_35199_backing_4;\n    \n    int64_t dummy_34390;\n    \n    dummy_34390 = 0;\n    \n    int64_t gtid_34391;\n    \n    gtid_34391 = 0;\n    \n    int64_t x_acc_35201;\n    int64_t x_acc_35202;\n    int64_t x_acc_35203;\n    int64_t x_acc_35204;\n    int64_t chunk_sizze_35205;\n    \n    chunk_sizze_35205 = smin64(sdiv_up64(steps_26355,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_34385 *\n                                         segred_num_groups_34383))),\n                               sdiv_up64(steps_26355 -\n                                         sext_i32_i64(phys_tid_34392),\n                                         num_threads_35185));\n    \n    int64_t x_34393;\n    int64_t x_34394;\n    int64_t x_34395;\n    int64_t x_34396;\n    int64_t y_34397;\n    int64_t y_34398;\n    int64_t y_34399;\n    int64_t y_34400;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_35201 = 0;\n        x_acc_35202 = 0;\n        x_acc_35203 = 0;\n   ",
                   "     x_acc_35204 = 0;\n    }\n    for (int64_t i_35218 = 0; i_35218 < chunk_sizze_35205; i_35218++) {\n        gtid_34391 = sext_i32_i64(phys_tid_34392) + num_threads_35185 * i_35218;\n        // apply map function\n        {\n            int64_t res_34406 = ((__global int64_t *) mem_33833)[gtid_34391];\n            bool bounds_invalid_upwards_34407 = slt64(res_34406, 0);\n            bool valid_34408 = !bounds_invalid_upwards_34407;\n            bool range_valid_c_34409;\n            \n            if (!valid_34408) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 30) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = 1;\n                        global_failure_args[2] = res_34406;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            int64_t bytes_34410 = 8 * res_34406;\n            \n            for (int64_t i_35219 = 0; i_35219 < res_34406; i_35219++) {\n                ((__global int64_t *) mem_34477)[phys_tid_34392 + i_35219 *\n                                                 num_threads_34542] = 0;\n            }\n            for (int64_t iter_34413 = 0; iter_34413 < flat_dim_26636;\n                 iter_34413++) {\n                bool cond_34415 = iter_34413 == 0;\n                int64_t res_34416;\n                \n                if (cond_34415) {\n                    res_34416 = 0;\n                } else {\n                    int64_t pixel_34417 = ((__global\n                                            int64_t *) mem_33836)[iter_34413 *\n                                                                  steps_26355 +\n                                                                  gtid_34391];\n                    \n                    res_34416 = pixel_34417;\n                }\n                \n                bool less_than_zzero_344",
                   "18 = slt64(res_34416, 0);\n                bool greater_than_sizze_34419 = sle64(res_34406, res_34416);\n                bool outside_bounds_dim_34420 = less_than_zzero_34418 ||\n                     greater_than_sizze_34419;\n                \n                if (!outside_bounds_dim_34420) {\n                    int64_t read_hist_34422 = ((__global\n                                                int64_t *) mem_34477)[phys_tid_34392 +\n                                                                      res_34416 *\n                                                                      num_threads_34542];\n                    int64_t res_34423 = smax64(iter_34413, read_hist_34422);\n                    \n                    ((__global int64_t *) mem_34477)[phys_tid_34392 +\n                                                     res_34416 *\n                                                     num_threads_34542] =\n                        res_34423;\n                }\n            }\n            \n            int64_t discard_34426;\n            int64_t scanacc_34429 = 0;\n            \n            for (int64_t i_34428 = 0; i_34428 < res_34406; i_34428++) {\n                int64_t x_34431 = ((__global\n                                    int64_t *) mem_34477)[phys_tid_34392 +\n                                                          i_34428 *\n                                                          num_threads_34542];\n                bool res_34432 = slt64(0, x_34431);\n                int64_t res_34433;\n                \n                if (res_34432) {\n                    res_34433 = x_34431;\n                } else {\n                    int64_t res_34434 = add64(scanacc_34429, x_34431);\n                    \n                    res_34433 = res_34434;\n                }\n                ((__global int64_t *) mem_34491)[phys_tid_34392 + i_34428 *\n                                                 num_threads_34542] = res_34433;\n                \n                int64_t scanacc_tmp_35221 = res_34433",
                   ";\n                \n                scanacc_34429 = scanacc_tmp_35221;\n            }\n            discard_34426 = scanacc_34429;\n            for (int64_t i_34438 = 0; i_34438 < res_34406; i_34438++) {\n                int64_t x_34440 = ((__global\n                                    int64_t *) mem_34491)[phys_tid_34392 +\n                                                          i_34438 *\n                                                          num_threads_34542];\n                int64_t i_p_o_34441 = add64(-1, i_34438);\n                int64_t rot_i_34442 = smod64(i_p_o_34441, res_34406);\n                int64_t x_34443 = ((__global\n                                    int64_t *) mem_34491)[phys_tid_34392 +\n                                                          rot_i_34442 *\n                                                          num_threads_34542];\n                bool res_34444 = x_34440 == x_34443;\n                bool res_34445 = !res_34444;\n                \n                ((__global bool *) mem_34505)[phys_tid_34392 + i_34438 *\n                                              num_threads_34542] = res_34445;\n            }\n            \n            int64_t bytes_34447 = 4 * res_34406;\n            int64_t discard_34449;\n            int64_t scanacc_34452 = 0;\n            \n            for (int64_t i_34451 = 0; i_34451 < res_34406; i_34451++) {\n                int64_t i_p_o_34454 = add64(1, i_34451);\n                int64_t rot_i_34455 = smod64(i_p_o_34454, res_34406);\n                bool x_34456 = ((__global bool *) mem_34505)[phys_tid_34392 +\n                                                             rot_i_34455 *\n                                                             num_threads_34542];\n                int64_t res_34457 = btoi_bool_i64(x_34456);\n                int64_t res_34458 = add64(scanacc_34452, res_34457);\n                \n                ((__global int64_t *) mem_34519)[phys_tid_34392 + i_34451 *\n                                                 num_",
                   "threads_34542] = res_34458;\n                \n                int64_t scanacc_tmp_35224 = res_34458;\n                \n                scanacc_34452 = scanacc_tmp_35224;\n            }\n            discard_34449 = scanacc_34452;\n            \n            bool cond_34460 = slt64(0, res_34406);\n            int64_t num_segments_34461;\n            \n            if (cond_34460) {\n                int64_t i_34462 = sub64(res_34406, 1);\n                bool x_34463 = sle64(0, i_34462);\n                bool y_34464 = slt64(i_34462, res_34406);\n                bool bounds_check_34465 = x_34463 && y_34464;\n                bool index_certs_34466;\n                \n                if (!bounds_check_34465) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 31) ==\n                            -1) {\n                            global_failure_args[0] = i_34462;\n                            global_failure_args[1] = res_34406;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t res_34467 = ((__global\n                                      int64_t *) mem_34519)[phys_tid_34392 +\n                                                            i_34462 *\n                                                            num_threads_34542];\n                \n                num_segments_34461 = res_34467;\n            } else {\n                num_segments_34461 = 0;\n            }\n            \n            int64_t bytes_34468 = 4 * num_segments_34461;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_34393 = x_acc_35201;\n                x_34394 = x_acc_35202;\n                x_34395 = x_acc_35203;\n                x_34396 = x_acc_35204;\n            }\n            // load new values\n            {\n                y_34397 = res_34",
                   "406;\n                y_34398 = bytes_34410;\n                y_34399 = bytes_34447;\n                y_34400 = bytes_34468;\n            }\n            // apply reduction operator\n            {\n                int64_t zz_34401 = smax64(x_34393, y_34397);\n                int64_t zz_34402 = smax64(x_34394, y_34398);\n                int64_t zz_34403 = smax64(x_34395, y_34399);\n                int64_t zz_34404 = smax64(x_34396, y_34400);\n                \n                // store in accumulator\n                {\n                    x_acc_35201 = zz_34401;\n                    x_acc_35202 = zz_34402;\n                    x_acc_35203 = zz_34403;\n                    x_acc_35204 = zz_34404;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_34393 = x_acc_35201;\n        x_34394 = x_acc_35202;\n        x_34395 = x_acc_35203;\n        x_34396 = x_acc_35204;\n        ((__local int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187)] =\n            x_34393;\n        ((__local int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187)] =\n            x_34394;\n        ((__local int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187)] =\n            x_34395;\n        ((__local int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187)] =\n            x_34396;\n    }\n    \n  error_0:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_35226;\n    int32_t skip_waves_35227;\n    \n    skip_waves_35227 = 1;\n    \n    int64_t x_35206;\n    int64_t x_35207;\n    int64_t x_35208;\n    int64_t x_35209;\n    int64_t y_35210;\n    int64_t y_35211;\n    int64_t y_35212;\n    int64_t y_35213;\n    \n    offset_35226 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35187, sext_i64_i32(segred_group_sizze_34385))) {\n            x_35206 = ((__local\n                        int64_t *) red_arr_mem_35193)[sext_i32_i64(local_",
                   "tid_35187 +\n                                                      offset_35226)];\n            x_35207 = ((__local\n                        int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187 +\n                                                      offset_35226)];\n            x_35208 = ((__local\n                        int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187 +\n                                                      offset_35226)];\n            x_35209 = ((__local\n                        int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187 +\n                                                      offset_35226)];\n        }\n    }\n    offset_35226 = 1;\n    while (slt32(offset_35226, wave_sizze_35189)) {\n        if (slt32(local_tid_35187 + offset_35226,\n                  sext_i64_i32(segred_group_sizze_34385)) && ((local_tid_35187 -\n                                                               squot32(local_tid_35187,\n                                                                       wave_sizze_35189) *\n                                                               wave_sizze_35189) &\n                                                              (2 *\n                                                               offset_35226 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                y_35210 = ((volatile __local\n                            int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n                y_35211 = ((volatile __local\n                            int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n                y_35212 = ((volatile __local\n                            int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187 +\n                                                        ",
                   "  offset_35226)];\n                y_35213 = ((volatile __local\n                            int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_35214 = smax64(x_35206, y_35210);\n                int64_t zz_35215 = smax64(x_35207, y_35211);\n                int64_t zz_35216 = smax64(x_35208, y_35212);\n                int64_t zz_35217 = smax64(x_35209, y_35213);\n                \n                x_35206 = zz_35214;\n                x_35207 = zz_35215;\n                x_35208 = zz_35216;\n                x_35209 = zz_35217;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187)] =\n                    x_35206;\n                ((volatile __local\n                  int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187)] =\n                    x_35207;\n                ((volatile __local\n                  int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187)] =\n                    x_35208;\n                ((volatile __local\n                  int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187)] =\n                    x_35209;\n            }\n        }\n        offset_35226 *= 2;\n    }\n    while (slt32(skip_waves_35227,\n                 squot32(sext_i64_i32(segred_group_sizze_34385) +\n                         wave_sizze_35189 - 1, wave_sizze_35189))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_35226 = skip_waves_35227 * wave_sizze_35189;\n        if (slt32(local_tid_35187 + offset_35226,\n                  sext_i64_i32(segred_group_sizze_34385)) && ((local_tid_35187 -\n                                                               squot32(local_tid_35187,\n                                                                       wave_sizze_35189) *\n                ",
                   "                                               wave_sizze_35189) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35187,\n                                                                       wave_sizze_35189) &\n                                                               (2 *\n                                                                skip_waves_35227 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                y_35210 = ((__local\n                            int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n                y_35211 = ((__local\n                            int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n                y_35212 = ((__local\n                            int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n                y_35213 = ((__local\n                            int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187 +\n                                                          offset_35226)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_35214 = smax64(x_35206, y_35210);\n                int64_t zz_35215 = smax64(x_35207, y_35211);\n                int64_t zz_35216 = smax64(x_35208, y_35212);\n                int64_t zz_35217 = smax64(x_35209, y_35213);\n                \n                x_35206 = zz_35214;\n                x_35207 = zz_35215;\n                x_35208 = zz_35216;\n                x_35209 = zz_35217;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_3519",
                   "3)[sext_i32_i64(local_tid_35187)] =\n                    x_35206;\n                ((__local\n                  int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187)] =\n                    x_35207;\n                ((__local\n                  int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187)] =\n                    x_35208;\n                ((__local\n                  int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187)] =\n                    x_35209;\n            }\n        }\n        skip_waves_35227 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35187) == 0) {\n            x_acc_35201 = x_35206;\n            x_acc_35202 = x_35207;\n            x_acc_35203 = x_35208;\n            x_acc_35204 = x_35209;\n        }\n    }\n    \n    int32_t old_counter_35228;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35187 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_35177)[sext_i32_i64(group_tid_35188) *\n                                                  segred_group_sizze_34385] =\n                x_acc_35201;\n            ((__global\n              int64_t *) group_res_arr_mem_35179)[sext_i32_i64(group_tid_35188) *\n                                                  segred_group_sizze_34385] =\n                x_acc_35202;\n            ((__global\n              int64_t *) group_res_arr_mem_35181)[sext_i32_i64(group_tid_35188) *\n                                                  segred_group_sizze_34385] =\n                x_acc_35203;\n            ((__global\n              int64_t *) group_res_arr_mem_35183)[sext_i32_i64(group_tid_35188) *\n                                                  segred_group_sizze_34385] =\n                x_acc_35204;\n            mem_fence_global();\n            old_counter_35228 = atomic_add_i32_global(&((volatile __global\n                                                         int *) m",
                   "ainzicounter_mem_35175)[0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35191)[0] = old_counter_35228 ==\n                segred_num_groups_34383 - 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_35229;\n    \n    is_last_group_35229 = ((__local bool *) sync_arr_mem_35191)[0];\n    if (is_last_group_35229) {\n        if (local_tid_35187 == 0) {\n            old_counter_35228 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_35175)[0],\n                                                      (int) (0 -\n                                                             segred_num_groups_34383));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_35230 = sdiv_up64(segred_num_groups_34383,\n                                                      segred_group_sizze_34385);\n            \n            x_34393 = 0;\n            x_34394 = 0;\n            x_34395 = 0;\n            x_34396 = 0;\n            for (int64_t i_35231 = 0; i_35231 < read_per_thread_35230;\n                 i_35231++) {\n                int64_t group_res_id_35232 = sext_i32_i64(local_tid_35187) *\n                        read_per_thread_35230 + i_35231;\n                int64_t index_of_group_res_35233 = group_res_id_35232;\n                \n                if (slt64(group_res_id_35232, segred_num_groups_34383)) {\n                    y_34397 = ((__global\n                                int64_t *) group_res_arr_mem_35177)[index_of_group_res_35233 *\n                                                                    segred_group_sizze_34385];\n                    y_34398 = ((__global\n                                int64_t *) group_res_arr_mem_35179)[index_of_group_res_35233 *\n                                                                    segred_group_sizze_34385];\n                    y_343",
                   "99 = ((__global\n                                int64_t *) group_res_arr_mem_35181)[index_of_group_res_35233 *\n                                                                    segred_group_sizze_34385];\n                    y_34400 = ((__global\n                                int64_t *) group_res_arr_mem_35183)[index_of_group_res_35233 *\n                                                                    segred_group_sizze_34385];\n                    \n                    int64_t zz_34401;\n                    \n                    zz_34401 = smax64(x_34393, y_34397);\n                    \n                    int64_t zz_34402 = smax64(x_34394, y_34398);\n                    int64_t zz_34403 = smax64(x_34395, y_34399);\n                    int64_t zz_34404 = smax64(x_34396, y_34400);\n                    \n                    x_34393 = zz_34401;\n                    x_34394 = zz_34402;\n                    x_34395 = zz_34403;\n                    x_34396 = zz_34404;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187)] =\n            x_34393;\n        ((__local int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187)] =\n            x_34394;\n        ((__local int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187)] =\n            x_34395;\n        ((__local int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187)] =\n            x_34396;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_35234;\n            int32_t skip_waves_35235;\n            \n            skip_waves_35235 = 1;\n            \n            int64_t x_35206;\n            int64_t x_35207;\n            int64_t x_35208;\n            int64_t x_35209;\n            int64_t y_35210;\n            int64_t y_35211;\n            int64_t y_35212;\n            int64_t y_35213;\n            \n            offset_35234 = 0;\n            // participating threads read initial accumulator\n            {\n        ",
                   "        if (slt32(local_tid_35187,\n                          sext_i64_i32(segred_group_sizze_34385))) {\n                    x_35206 = ((__local\n                                int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187 +\n                                                              offset_35234)];\n                    x_35207 = ((__local\n                                int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187 +\n                                                              offset_35234)];\n                    x_35208 = ((__local\n                                int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187 +\n                                                              offset_35234)];\n                    x_35209 = ((__local\n                                int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187 +\n                                                              offset_35234)];\n                }\n            }\n            offset_35234 = 1;\n            while (slt32(offset_35234, wave_sizze_35189)) {\n                if (slt32(local_tid_35187 + offset_35234,\n                          sext_i64_i32(segred_group_sizze_34385)) &&\n                    ((local_tid_35187 - squot32(local_tid_35187,\n                                                wave_sizze_35189) *\n                      wave_sizze_35189) & (2 * offset_35234 - 1)) == 0) {\n                    // read array element\n                    {\n                        y_35210 = ((volatile __local\n                                    int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                        y_35211 = ((volatile __local\n                                    int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                        y_35212 = ((volatile __local\n               ",
                   "                     int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                        y_35213 = ((volatile __local\n                                    int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_35214 = smax64(x_35206, y_35210);\n                        int64_t zz_35215 = smax64(x_35207, y_35211);\n                        int64_t zz_35216 = smax64(x_35208, y_35212);\n                        int64_t zz_35217 = smax64(x_35209, y_35213);\n                        \n                        x_35206 = zz_35214;\n                        x_35207 = zz_35215;\n                        x_35208 = zz_35216;\n                        x_35209 = zz_35217;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187)] =\n                            x_35206;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187)] =\n                            x_35207;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187)] =\n                            x_35208;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187)] =\n                            x_35209;\n                    }\n                }\n                offset_35234 *= 2;\n            }\n            while (slt32(skip_waves_35235,\n                         squot32(sext_i64_i32(segred_group_sizze_34385) +\n                                 wave_sizze_35189 - 1, wave",
                   "_sizze_35189))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_35234 = skip_waves_35235 * wave_sizze_35189;\n                if (slt32(local_tid_35187 + offset_35234,\n                          sext_i64_i32(segred_group_sizze_34385)) &&\n                    ((local_tid_35187 - squot32(local_tid_35187,\n                                                wave_sizze_35189) *\n                      wave_sizze_35189) == 0 && (squot32(local_tid_35187,\n                                                         wave_sizze_35189) &\n                                                 (2 * skip_waves_35235 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        y_35210 = ((__local\n                                    int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                        y_35211 = ((__local\n                                    int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                        y_35212 = ((__local\n                                    int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                        y_35213 = ((__local\n                                    int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187 +\n                                                                  offset_35234)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_35214 = smax64(x_35206, y_35210);\n                        int64_t zz_35215 = smax64(x_35207, y_35211);\n                        int64_t zz_35216 = smax64(x_35208, y_35212);\n                        int64_t zz_35217 = smax64(x_35209, y_35213);\n                        \n",
                   "                        x_35206 = zz_35214;\n                        x_35207 = zz_35215;\n                        x_35208 = zz_35216;\n                        x_35209 = zz_35217;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_35193)[sext_i32_i64(local_tid_35187)] =\n                            x_35206;\n                        ((__local\n                          int64_t *) red_arr_mem_35195)[sext_i32_i64(local_tid_35187)] =\n                            x_35207;\n                        ((__local\n                          int64_t *) red_arr_mem_35197)[sext_i32_i64(local_tid_35187)] =\n                            x_35208;\n                        ((__local\n                          int64_t *) red_arr_mem_35199)[sext_i32_i64(local_tid_35187)] =\n                            x_35209;\n                    }\n                }\n                skip_waves_35235 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35187 == 0) {\n                    ((__global int64_t *) mem_34533)[0] = x_35206;\n                    ((__global int64_t *) mem_34535)[0] = x_35207;\n                    ((__global int64_t *) mem_34537)[0] = x_35208;\n                    ((__global int64_t *) mem_34539)[0] = x_35209;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_num_groups_34383\n    #undef segred_group_sizze_34385\n    #undef num_threads_34542\n}\n__kernel void mainzisegred_nonseg_34579(__global int *global_failure,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35145_backing_aligned_0,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35143_backing_aligned_1,\n                                        __local volatile\n                         ",
                   "               int64_t *red_arr_mem_35141_backing_aligned_2,\n                                        __local volatile\n                                        int64_t *red_arr_mem_35139_backing_aligned_3,\n                                        __local volatile\n                                        int64_t *sync_arr_mem_35137_backing_aligned_4,\n                                        int64_t steps_26355, __global\n                                        unsigned char *mem_33833, __global\n                                        unsigned char *mem_34608, __global\n                                        unsigned char *mem_34610, __global\n                                        unsigned char *mem_34612, __global\n                                        unsigned char *mem_34614, __global\n                                        unsigned char *mainzicounter_mem_35121,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35123,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35125,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35127,\n                                        __global\n                                        unsigned char *group_res_arr_mem_35129,\n                                        int64_t num_threads_35131)\n{\n    #define segred_num_groups_34570 (mainzisegred_num_groups_34569)\n    #define segred_group_sizze_34572 (mainzisegred_group_sizze_34571)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_35145_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_35145_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_35143_backing_3 =\n                          (__local volatile\n                 ",
                   "          char *) red_arr_mem_35143_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_35141_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_35141_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_35139_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_35139_backing_aligned_3;\n    __local volatile char *restrict sync_arr_mem_35137_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_35137_backing_aligned_4;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35132;\n    int32_t local_tid_35133;\n    int64_t group_sizze_35136;\n    int32_t wave_sizze_35135;\n    int32_t group_tid_35134;\n    \n    global_tid_35132 = get_global_id(0);\n    local_tid_35133 = get_local_id(0);\n    group_sizze_35136 = get_local_size(0);\n    wave_sizze_35135 = LOCKSTEP_WIDTH;\n    group_tid_35134 = get_group_id(0);\n    \n    int32_t phys_tid_34579;\n    \n    phys_tid_34579 = global_tid_35132;\n    \n    __local char *sync_arr_mem_35137;\n    \n    sync_arr_mem_35137 = (__local char *) sync_arr_mem_35137_backing_0;\n    \n    __local char *red_arr_mem_35139;\n    \n    red_arr_mem_35139 = (__local char *) red_arr_mem_35139_backing_1;\n    \n    __local char *red_arr_mem_35141;\n    \n    red_arr_mem_35141 = (__local char *) red_arr_mem_35141_backing_2;\n    \n    __local char *red_arr_mem_35143;\n    \n    red_arr_mem_35143 = (__local char *) red_arr_mem_35143_backing_3;\n    \n    __local char *red_arr_mem_35145;\n    \n    red_arr_mem_35145 = (__local char *) red_arr_mem_35145_backing_4;\n    \n    int64_t dummy_34577;\n    \n    dummy_34577 = 0;\n    \n    int64_t gtid_34578;\n    \n    gtid_34578 = 0;\n    \n    int64_t x_acc_35147;\n    int64_t x_acc_35148;\n    int64_t x_acc_35149;\n    int64_t x_acc_35150;\n    int64_t chunk_sizze_35151;\n    \n    chunk_sizze_35151 = smin64(sdiv_up64(steps_26355,\n                ",
                   "                         sext_i32_i64(sext_i64_i32(segred_group_sizze_34572 *\n                                         segred_num_groups_34570))),\n                               sdiv_up64(steps_26355 -\n                                         sext_i32_i64(phys_tid_34579),\n                                         num_threads_35131));\n    \n    int64_t x_34580;\n    int64_t x_34581;\n    int64_t x_34582;\n    int64_t x_34583;\n    int64_t y_34584;\n    int64_t y_34585;\n    int64_t y_34586;\n    int64_t y_34587;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_35147 = 0;\n        x_acc_35148 = 0;\n        x_acc_35149 = 0;\n        x_acc_35150 = 0;\n    }\n    for (int64_t i_35164 = 0; i_35164 < chunk_sizze_35151; i_35164++) {\n        gtid_34578 = sext_i32_i64(phys_tid_34579) + num_threads_35131 * i_35164;\n        // apply map function\n        {\n            int64_t binop_x_34593 = squot64(gtid_34578, steps_26355);\n            int64_t binop_y_34594 = steps_26355 * binop_x_34593;\n            int64_t gtid_34595 = gtid_34578 - binop_y_34594;\n            int64_t res_34596 = ((__global int64_t *) mem_33833)[gtid_34595];\n            int64_t bytes_34597 = 8 * res_34596;\n            int64_t bytes_34598 = 8 * res_34596;\n            int64_t bytes_34599 = 8 * res_34596;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_34580 = x_acc_35147;\n                x_34581 = x_acc_35148;\n                x_34582 = x_acc_35149;\n                x_34583 = x_acc_35150;\n            }\n            // load new values\n            {\n                y_34584 = res_34596;\n                y_34585 = bytes_34597;\n                y_34586 = bytes_34598;\n                y_34587 = bytes_34599;\n            }\n            // apply reduction operator\n            {\n                int64_t zz_34588 = smax64(x_34580, y_34584);\n                int64_t zz_34589 = smax64(x_34581, y_34585);\n                int64_t zz_34590 = smax64(x_3458",
                   "2, y_34586);\n                int64_t zz_34591 = smax64(x_34583, y_34587);\n                \n                // store in accumulator\n                {\n                    x_acc_35147 = zz_34588;\n                    x_acc_35148 = zz_34589;\n                    x_acc_35149 = zz_34590;\n                    x_acc_35150 = zz_34591;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_34580 = x_acc_35147;\n        x_34581 = x_acc_35148;\n        x_34582 = x_acc_35149;\n        x_34583 = x_acc_35150;\n        ((__local int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133)] =\n            x_34580;\n        ((__local int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133)] =\n            x_34581;\n        ((__local int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133)] =\n            x_34582;\n        ((__local int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133)] =\n            x_34583;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_35165;\n    int32_t skip_waves_35166;\n    \n    skip_waves_35166 = 1;\n    \n    int64_t x_35152;\n    int64_t x_35153;\n    int64_t x_35154;\n    int64_t x_35155;\n    int64_t y_35156;\n    int64_t y_35157;\n    int64_t y_35158;\n    int64_t y_35159;\n    \n    offset_35165 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35133, sext_i64_i32(segred_group_sizze_34572))) {\n            x_35152 = ((__local\n                        int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133 +\n                                                      offset_35165)];\n            x_35153 = ((__local\n                        int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133 +\n                                                      offset_35165)];\n            x_35154 = ((__local\n                        int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133 +\n                                                      offset_35",
                   "165)];\n            x_35155 = ((__local\n                        int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133 +\n                                                      offset_35165)];\n        }\n    }\n    offset_35165 = 1;\n    while (slt32(offset_35165, wave_sizze_35135)) {\n        if (slt32(local_tid_35133 + offset_35165,\n                  sext_i64_i32(segred_group_sizze_34572)) && ((local_tid_35133 -\n                                                               squot32(local_tid_35133,\n                                                                       wave_sizze_35135) *\n                                                               wave_sizze_35135) &\n                                                              (2 *\n                                                               offset_35165 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                y_35156 = ((volatile __local\n                            int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n                y_35157 = ((volatile __local\n                            int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n                y_35158 = ((volatile __local\n                            int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n                y_35159 = ((volatile __local\n                            int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_35160 = smax64(x_35152, y_35156);\n                int64_t zz_35161 = smax64(x_35153, y_35157);\n                int64_t zz_35162",
                   " = smax64(x_35154, y_35158);\n                int64_t zz_35163 = smax64(x_35155, y_35159);\n                \n                x_35152 = zz_35160;\n                x_35153 = zz_35161;\n                x_35154 = zz_35162;\n                x_35155 = zz_35163;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133)] =\n                    x_35152;\n                ((volatile __local\n                  int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133)] =\n                    x_35153;\n                ((volatile __local\n                  int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133)] =\n                    x_35154;\n                ((volatile __local\n                  int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133)] =\n                    x_35155;\n            }\n        }\n        offset_35165 *= 2;\n    }\n    while (slt32(skip_waves_35166,\n                 squot32(sext_i64_i32(segred_group_sizze_34572) +\n                         wave_sizze_35135 - 1, wave_sizze_35135))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_35165 = skip_waves_35166 * wave_sizze_35135;\n        if (slt32(local_tid_35133 + offset_35165,\n                  sext_i64_i32(segred_group_sizze_34572)) && ((local_tid_35133 -\n                                                               squot32(local_tid_35133,\n                                                                       wave_sizze_35135) *\n                                                               wave_sizze_35135) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35133,\n                                                                       wave_sizze_35135) &\n                                                               (2 *\n                                                                ski",
                   "p_waves_35166 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                y_35156 = ((__local\n                            int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n                y_35157 = ((__local\n                            int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n                y_35158 = ((__local\n                            int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n                y_35159 = ((__local\n                            int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133 +\n                                                          offset_35165)];\n            }\n            // apply reduction operation\n            {\n                int64_t zz_35160 = smax64(x_35152, y_35156);\n                int64_t zz_35161 = smax64(x_35153, y_35157);\n                int64_t zz_35162 = smax64(x_35154, y_35158);\n                int64_t zz_35163 = smax64(x_35155, y_35159);\n                \n                x_35152 = zz_35160;\n                x_35153 = zz_35161;\n                x_35154 = zz_35162;\n                x_35155 = zz_35163;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133)] =\n                    x_35152;\n                ((__local\n                  int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133)] =\n                    x_35153;\n                ((__local\n                  int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133)] =\n                    x_35154;\n                ((__local\n                  int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133)] =\n     ",
                   "               x_35155;\n            }\n        }\n        skip_waves_35166 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35133) == 0) {\n            x_acc_35147 = x_35152;\n            x_acc_35148 = x_35153;\n            x_acc_35149 = x_35154;\n            x_acc_35150 = x_35155;\n        }\n    }\n    \n    int32_t old_counter_35167;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35133 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_35123)[sext_i32_i64(group_tid_35134) *\n                                                  segred_group_sizze_34572] =\n                x_acc_35147;\n            ((__global\n              int64_t *) group_res_arr_mem_35125)[sext_i32_i64(group_tid_35134) *\n                                                  segred_group_sizze_34572] =\n                x_acc_35148;\n            ((__global\n              int64_t *) group_res_arr_mem_35127)[sext_i32_i64(group_tid_35134) *\n                                                  segred_group_sizze_34572] =\n                x_acc_35149;\n            ((__global\n              int64_t *) group_res_arr_mem_35129)[sext_i32_i64(group_tid_35134) *\n                                                  segred_group_sizze_34572] =\n                x_acc_35150;\n            mem_fence_global();\n            old_counter_35167 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_35121)[0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35137)[0] = old_counter_35167 ==\n                segred_num_groups_34570 - 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_35168;\n    \n    is_last_group_35168 = ((__local bool *) sync_arr_mem_35137)[0];\n    if (is_last_group_35168) {\n        if (local_tid_35",
                   "133 == 0) {\n            old_counter_35167 = atomic_add_i32_global(&((volatile __global\n                                                         int *) mainzicounter_mem_35121)[0],\n                                                      (int) (0 -\n                                                             segred_num_groups_34570));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_35169 = sdiv_up64(segred_num_groups_34570,\n                                                      segred_group_sizze_34572);\n            \n            x_34580 = 0;\n            x_34581 = 0;\n            x_34582 = 0;\n            x_34583 = 0;\n            for (int64_t i_35170 = 0; i_35170 < read_per_thread_35169;\n                 i_35170++) {\n                int64_t group_res_id_35171 = sext_i32_i64(local_tid_35133) *\n                        read_per_thread_35169 + i_35170;\n                int64_t index_of_group_res_35172 = group_res_id_35171;\n                \n                if (slt64(group_res_id_35171, segred_num_groups_34570)) {\n                    y_34584 = ((__global\n                                int64_t *) group_res_arr_mem_35123)[index_of_group_res_35172 *\n                                                                    segred_group_sizze_34572];\n                    y_34585 = ((__global\n                                int64_t *) group_res_arr_mem_35125)[index_of_group_res_35172 *\n                                                                    segred_group_sizze_34572];\n                    y_34586 = ((__global\n                                int64_t *) group_res_arr_mem_35127)[index_of_group_res_35172 *\n                                                                    segred_group_sizze_34572];\n                    y_34587 = ((__global\n                                int64_t *) group_res_arr_mem_35129)[index_of_group_res_35172 *\n                                                                    segred_group_sizze_34572];\n            ",
                   "        \n                    int64_t zz_34588;\n                    \n                    zz_34588 = smax64(x_34580, y_34584);\n                    \n                    int64_t zz_34589 = smax64(x_34581, y_34585);\n                    int64_t zz_34590 = smax64(x_34582, y_34586);\n                    int64_t zz_34591 = smax64(x_34583, y_34587);\n                    \n                    x_34580 = zz_34588;\n                    x_34581 = zz_34589;\n                    x_34582 = zz_34590;\n                    x_34583 = zz_34591;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133)] =\n            x_34580;\n        ((__local int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133)] =\n            x_34581;\n        ((__local int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133)] =\n            x_34582;\n        ((__local int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133)] =\n            x_34583;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_35173;\n            int32_t skip_waves_35174;\n            \n            skip_waves_35174 = 1;\n            \n            int64_t x_35152;\n            int64_t x_35153;\n            int64_t x_35154;\n            int64_t x_35155;\n            int64_t y_35156;\n            int64_t y_35157;\n            int64_t y_35158;\n            int64_t y_35159;\n            \n            offset_35173 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_35133,\n                          sext_i64_i32(segred_group_sizze_34572))) {\n                    x_35152 = ((__local\n                                int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133 +\n                                                              offset_35173)];\n                    x_35153 = ((__local\n                                int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133 +\n ",
                   "                                                             offset_35173)];\n                    x_35154 = ((__local\n                                int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133 +\n                                                              offset_35173)];\n                    x_35155 = ((__local\n                                int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133 +\n                                                              offset_35173)];\n                }\n            }\n            offset_35173 = 1;\n            while (slt32(offset_35173, wave_sizze_35135)) {\n                if (slt32(local_tid_35133 + offset_35173,\n                          sext_i64_i32(segred_group_sizze_34572)) &&\n                    ((local_tid_35133 - squot32(local_tid_35133,\n                                                wave_sizze_35135) *\n                      wave_sizze_35135) & (2 * offset_35173 - 1)) == 0) {\n                    // read array element\n                    {\n                        y_35156 = ((volatile __local\n                                    int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                        y_35157 = ((volatile __local\n                                    int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                        y_35158 = ((volatile __local\n                                    int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                        y_35159 = ((volatile __local\n                                    int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                    }\n                    // apply re",
                   "duction operation\n                    {\n                        int64_t zz_35160 = smax64(x_35152, y_35156);\n                        int64_t zz_35161 = smax64(x_35153, y_35157);\n                        int64_t zz_35162 = smax64(x_35154, y_35158);\n                        int64_t zz_35163 = smax64(x_35155, y_35159);\n                        \n                        x_35152 = zz_35160;\n                        x_35153 = zz_35161;\n                        x_35154 = zz_35162;\n                        x_35155 = zz_35163;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133)] =\n                            x_35152;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133)] =\n                            x_35153;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133)] =\n                            x_35154;\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133)] =\n                            x_35155;\n                    }\n                }\n                offset_35173 *= 2;\n            }\n            while (slt32(skip_waves_35174,\n                         squot32(sext_i64_i32(segred_group_sizze_34572) +\n                                 wave_sizze_35135 - 1, wave_sizze_35135))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_35173 = skip_waves_35174 * wave_sizze_35135;\n                if (slt32(local_tid_35133 + offset_35173,\n                          sext_i64_i32(segred_group_sizze_34572)) &&\n                    ((local_tid_35133 - squot32(local_tid_35133,\n                                                wave_sizze_35135) *\n                      wave_sizze_35135) == 0 && (squot32(",
                   "local_tid_35133,\n                                                         wave_sizze_35135) &\n                                                 (2 * skip_waves_35174 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        y_35156 = ((__local\n                                    int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                        y_35157 = ((__local\n                                    int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                        y_35158 = ((__local\n                                    int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                        y_35159 = ((__local\n                                    int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133 +\n                                                                  offset_35173)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t zz_35160 = smax64(x_35152, y_35156);\n                        int64_t zz_35161 = smax64(x_35153, y_35157);\n                        int64_t zz_35162 = smax64(x_35154, y_35158);\n                        int64_t zz_35163 = smax64(x_35155, y_35159);\n                        \n                        x_35152 = zz_35160;\n                        x_35153 = zz_35161;\n                        x_35154 = zz_35162;\n                        x_35155 = zz_35163;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_35139)[sext_i32_i64(local_tid_35133)] =\n                            x_35152;\n                    ",
                   "    ((__local\n                          int64_t *) red_arr_mem_35141)[sext_i32_i64(local_tid_35133)] =\n                            x_35153;\n                        ((__local\n                          int64_t *) red_arr_mem_35143)[sext_i32_i64(local_tid_35133)] =\n                            x_35154;\n                        ((__local\n                          int64_t *) red_arr_mem_35145)[sext_i32_i64(local_tid_35133)] =\n                            x_35155;\n                    }\n                }\n                skip_waves_35174 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35133 == 0) {\n                    ((__global int64_t *) mem_34608)[0] = x_35152;\n                    ((__global int64_t *) mem_34610)[0] = x_35153;\n                    ((__global int64_t *) mem_34612)[0] = x_35154;\n                    ((__global int64_t *) mem_34614)[0] = x_35155;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_num_groups_34570\n    #undef segred_group_sizze_34572\n}\n__kernel void mainzisegred_small_28414(__global int *global_failure,\n                                       int failure_is_an_option, __global\n                                       int64_t *global_failure_args,\n                                       __local volatile\n                                       int64_t *red_arr_mem_34784_backing_aligned_0,\n                                       int64_t n_26351, int64_t paths_26354,\n                                       int64_t steps_26355, float a_26359,\n                                       float b_26360, float sigma_26361,\n                                       float sims_per_year_26449,\n                                       int64_t num_groups_29157, __global\n                                       unsigned char *res_mem_33486, __global\n                                       unsigned char *res_mem_33487, __global\n                                       uns",
                   "igned char *res_mem_33488, __global\n                                       unsigned char *res_mem_33489, __global\n                                       unsigned char *mem_33596, __global\n                                       unsigned char *mem_33663,\n                                       int64_t segment_sizze_nonzzero_34777)\n{\n    #define segred_group_sizze_29156 (mainzisegred_group_sizze_28408)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34784_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_34784_backing_aligned_0;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34779;\n    int32_t local_tid_34780;\n    int64_t group_sizze_34783;\n    int32_t wave_sizze_34782;\n    int32_t group_tid_34781;\n    \n    global_tid_34779 = get_global_id(0);\n    local_tid_34780 = get_local_id(0);\n    group_sizze_34783 = get_local_size(0);\n    wave_sizze_34782 = LOCKSTEP_WIDTH;\n    group_tid_34781 = get_group_id(0);\n    \n    int32_t phys_tid_28414;\n    \n    phys_tid_28414 = global_tid_34779;\n    \n    __local char *red_arr_mem_34784;\n    \n    red_arr_mem_34784 = (__local char *) red_arr_mem_34784_backing_0;\n    \n    int32_t phys_group_id_34786;\n    \n    phys_group_id_34786 = get_group_id(0);\n    for (int32_t i_34787 = 0; i_34787 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(paths_26354 * steps_26355,\n                                          squot64(segred_group_sizze_29156,\n                                                  segment_sizze_nonzzero_34777))) -\n                   phys_group_id_34786, sext_i64_i32(num_groups_29157));\n         i_34787++) {\n        int32_t virt_group_id_34788 = phys_group_id_34786 + i_34787 *\n          ",
                   "      sext_i64_i32(num_groups_29157);\n        int64_t gtid_28403 = squot64(squot64(sext_i32_i64(local_tid_34780),\n                                             segment_sizze_nonzzero_34777) +\n                                     sext_i32_i64(virt_group_id_34788) *\n                                     squot64(segred_group_sizze_29156,\n                                             segment_sizze_nonzzero_34777),\n                                     steps_26355);\n        int64_t gtid_28404 = squot64(sext_i32_i64(local_tid_34780),\n                                     segment_sizze_nonzzero_34777) +\n                sext_i32_i64(virt_group_id_34788) *\n                squot64(segred_group_sizze_29156,\n                        segment_sizze_nonzzero_34777) -\n                squot64(squot64(sext_i32_i64(local_tid_34780),\n                                segment_sizze_nonzzero_34777) +\n                        sext_i32_i64(virt_group_id_34788) *\n                        squot64(segred_group_sizze_29156,\n                                segment_sizze_nonzzero_34777), steps_26355) *\n                steps_26355;\n        int64_t gtid_28413 = srem64(sext_i32_i64(local_tid_34780), n_26351);\n        \n        // apply map function if in bounds\n        {\n            if (slt64(0, n_26351) && ((slt64(gtid_28403, paths_26354) &&\n                                       slt64(gtid_28404, steps_26355)) &&\n                                      slt64(sext_i32_i64(local_tid_34780),\n                                            n_26351 *\n                                            squot64(segred_group_sizze_29156,\n                                                    segment_sizze_nonzzero_34777)))) {\n                int64_t convop_x_32602 = add64(1, gtid_28404);\n                float binop_x_32603 = sitofp_i64_f32(convop_x_32602);\n                float index_primexp_32604 = binop_x_32603 / sims_per_year_26449;\n                int64_t x_29168 = ((__global\n                                    int64_t *) res_m",
                   "em_33488)[gtid_28413];\n                float x_29169 = ((__global float *) res_mem_33489)[gtid_28413];\n                int64_t i64_arg_29170 = sub64(x_29168, 1);\n                float res_29171 = sitofp_i64_f32(i64_arg_29170);\n                float y_29172 = x_29169 * res_29171;\n                bool cond_29173 = y_29172 < index_primexp_32604;\n                float ceil_arg_29174 = index_primexp_32604 / x_29169;\n                float res_29175;\n                \n                res_29175 = futrts_ceil32(ceil_arg_29174);\n                \n                int64_t res_29176 = fptosi_f32_i64(res_29175);\n                int64_t remaining_29177 = sub64(x_29168, res_29176);\n                float res_29178;\n                \n                if (cond_29173) {\n                    res_29178 = 0.0F;\n                } else {\n                    float x_29164 = ((__global float *) mem_33596)[gtid_28404 *\n                                                                   paths_26354 +\n                                                                   gtid_28403];\n                    float x_29166 = ((__global\n                                      float *) res_mem_33486)[gtid_28413];\n                    float x_29167 = ((__global\n                                      float *) res_mem_33487)[gtid_28413];\n                    float nextpayment_29179 = x_29169 * res_29175;\n                    bool bounds_invalid_upwards_29180 = slt64(remaining_29177,\n                                                              1);\n                    bool valid_29181 = !bounds_invalid_upwards_29180;\n                    bool range_valid_c_29182;\n                    \n                    if (!valid_29181) {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          20) == -1) {\n                                global_failure_args[0] = 1;\n                                global_failure_args[1] = 2;\n           ",
                   "                     global_failure_args[2] = remaining_29177;\n                                ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float y_29184 = nextpayment_29179 - index_primexp_32604;\n                    float negate_arg_29185 = a_26359 * y_29184;\n                    float exp_arg_29186 = 0.0F - negate_arg_29185;\n                    float res_29187 = fpow32(2.7182817F, exp_arg_29186);\n                    float x_29188 = 1.0F - res_29187;\n                    float B_29189 = x_29188 / a_26359;\n                    float x_29190 = B_29189 - nextpayment_29179;\n                    float x_29191 = x_29190 + index_primexp_32604;\n                    float x_29192 = fpow32(a_26359, 2.0F);\n                    float x_29193 = b_26360 * x_29192;\n                    float x_29194 = fpow32(sigma_26361, 2.0F);\n                    float y_29195 = x_29194 / 2.0F;\n                    float y_29196 = x_29193 - y_29195;\n                    float x_29197 = x_29191 * y_29196;\n                    float A1_29198 = x_29197 / x_29192;\n                    float y_29199 = fpow32(B_29189, 2.0F);\n                    float x_29200 = x_29194 * y_29199;\n                    float y_29201 = 4.0F * a_26359;\n                    float A2_29202 = x_29200 / y_29201;\n                    float exp_arg_29203 = A1_29198 - A2_29202;\n                    float res_29204 = fpow32(2.7182817F, exp_arg_29203);\n                    float negate_arg_29205 = x_29164 * B_29189;\n                    float exp_arg_29206 = 0.0F - negate_arg_29205;\n                    float res_29207 = fpow32(2.7182817F, exp_arg_29206);\n                    float res_29208 = res_29204 * res_29207;\n                    bool y_29209 = slt64(0, remaining_29177);\n                    bool index_certs_29210;\n                    \n                    if (!y_29209) {\n         ",
                   "               {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          21) == -1) {\n                                global_failure_args[0] = 0;\n                                global_failure_args[1] = remaining_29177;\n                                ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float binop_y_29211 = sitofp_i64_f32(remaining_29177);\n                    float binop_y_29212 = x_29169 * binop_y_29211;\n                    float index_primexp_29213 = nextpayment_29179 +\n                          binop_y_29212;\n                    float y_29214 = index_primexp_29213 - index_primexp_32604;\n                    float negate_arg_29215 = a_26359 * y_29214;\n                    float exp_arg_29216 = 0.0F - negate_arg_29215;\n                    float res_29217 = fpow32(2.7182817F, exp_arg_29216);\n                    float x_29218 = 1.0F - res_29217;\n                    float B_29219 = x_29218 / a_26359;\n                    float x_29220 = B_29219 - index_primexp_29213;\n                    float x_29221 = x_29220 + index_primexp_32604;\n                    float x_29222 = y_29196 * x_29221;\n                    float A1_29223 = x_29222 / x_29192;\n                    float y_29224 = fpow32(B_29219, 2.0F);\n                    float x_29225 = x_29194 * y_29224;\n                    float A2_29226 = x_29225 / y_29201;\n                    float exp_arg_29227 = A1_29223 - A2_29226;\n                    float res_29228 = fpow32(2.7182817F, exp_arg_29227);\n                    float negate_arg_29229 = x_29164 * B_29219;\n                    float exp_arg_29230 = 0.0F - negate_arg_29229;\n                    float res_29231 = fpow32(2.7182817F, exp_arg_29230);\n                    float res_29232 = res_29228 * res_29231;\n                ",
                   "    float res_29233;\n                    float redout_32599 = 0.0F;\n                    \n                    for (int64_t i_32600 = 0; i_32600 < remaining_29177;\n                         i_32600++) {\n                        int64_t index_primexp_32644 = add64(1, i_32600);\n                        float res_29238 = sitofp_i64_f32(index_primexp_32644);\n                        float res_29239 = x_29169 * res_29238;\n                        float res_29240 = nextpayment_29179 + res_29239;\n                        float y_29241 = res_29240 - index_primexp_32604;\n                        float negate_arg_29242 = a_26359 * y_29241;\n                        float exp_arg_29243 = 0.0F - negate_arg_29242;\n                        float res_29244 = fpow32(2.7182817F, exp_arg_29243);\n                        float x_29245 = 1.0F - res_29244;\n                        float B_29246 = x_29245 / a_26359;\n                        float x_29247 = B_29246 - res_29240;\n                        float x_29248 = x_29247 + index_primexp_32604;\n                        float x_29249 = y_29196 * x_29248;\n                        float A1_29250 = x_29249 / x_29192;\n                        float y_29251 = fpow32(B_29246, 2.0F);\n                        float x_29252 = x_29194 * y_29251;\n                        float A2_29253 = x_29252 / y_29201;\n                        float exp_arg_29254 = A1_29250 - A2_29253;\n                        float res_29255 = fpow32(2.7182817F, exp_arg_29254);\n                        float negate_arg_29256 = x_29164 * B_29246;\n                        float exp_arg_29257 = 0.0F - negate_arg_29256;\n                        float res_29258 = fpow32(2.7182817F, exp_arg_29257);\n                        float res_29259 = res_29255 * res_29258;\n                        float res_29236 = res_29259 + redout_32599;\n                        float redout_tmp_34789 = res_29236;\n                        \n                        redout_32599 = redout_tmp_34789;\n                    }\n                ",
                   "    res_29233 = redout_32599;\n                    \n                    float x_29260 = res_29208 - res_29232;\n                    float x_29261 = x_29166 * x_29169;\n                    float y_29262 = res_29233 * x_29261;\n                    float y_29263 = x_29260 - y_29262;\n                    float res_29264 = x_29167 * y_29263;\n                    \n                    res_29178 = res_29264;\n                }\n                // save map-out results\n                { }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)] =\n                        res_29178;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)] =\n                    0.0F;\n            }\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64(0, n_26351)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_29160;\n                float x_29161;\n                float x_34790;\n                float x_34791;\n                bool ltid_in_bounds_34793;\n                \n                ltid_in_bounds_34793 = slt64(sext_i32_i64(local_tid_34780),\n                                             n_26351 *\n                                             squot64(segred_group_sizze_29156,\n                                                     segment_sizze_nonzzero_34777));\n                \n                int32_t skip_threads_34794;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_34793) {\n                        x_29161 = ((volatile __local\n                                    float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)];\n                        if ((local_tid_34780 ",
                   "- squot32(local_tid_34780, 32) *\n                             32) == 0) {\n                            x_29160 = x_29161;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_34794 = 1;\n                    while (slt32(skip_threads_34794, 32)) {\n                        if (sle32(skip_threads_34794, local_tid_34780 -\n                                  squot32(local_tid_34780, 32) * 32) &&\n                            ltid_in_bounds_34793) {\n                            // read operands\n                            {\n                                x_29160 = ((volatile __local\n                                            float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780) -\n                                                                        sext_i32_i64(skip_threads_34794)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_34795 =\n                                     slt64(srem64(sext_i32_i64(local_tid_34780),\n                                                  n_26351),\n                                           sext_i32_i64(local_tid_34780) -\n                                           sext_i32_i64(local_tid_34780 -\n                                           skip_threads_34794));\n                                \n                                if (inactive_34795) {\n                                    x_29160 = x_29161;\n                                }\n                                if (!inactive_34795) {\n                                    float res_29162 = x_29160 + x_29161;\n                                    \n                                    x_29160 = res_29162;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_34782, skip_threads_34794)) {\n   ",
                   "                         barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_34794, local_tid_34780 -\n                                  squot32(local_tid_34780, 32) * 32) &&\n                            ltid_in_bounds_34793) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)] =\n                                    x_29160;\n                                x_29161 = x_29160;\n                            }\n                        }\n                        if (sle32(wave_sizze_34782, skip_threads_34794)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_34794 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_34780 - squot32(local_tid_34780, 32) * 32) ==\n                        31 && ltid_in_bounds_34793) {\n                        ((volatile __local\n                          float *) red_arr_mem_34784)[sext_i32_i64(squot32(local_tid_34780,\n                                                                           32))] =\n                            x_29160;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_34796;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_34780, 32) == 0 &&\n                            ltid_in_bounds_34793) {\n                            x_34791 = ((volatile __local\n                                        float *) red_a",
                   "rr_mem_34784)[sext_i32_i64(local_tid_34780)];\n                            if ((local_tid_34780 - squot32(local_tid_34780,\n                                                           32) * 32) == 0) {\n                                x_34790 = x_34791;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_34796 = 1;\n                        while (slt32(skip_threads_34796, 32)) {\n                            if (sle32(skip_threads_34796, local_tid_34780 -\n                                      squot32(local_tid_34780, 32) * 32) &&\n                                (squot32(local_tid_34780, 32) == 0 &&\n                                 ltid_in_bounds_34793)) {\n                                // read operands\n                                {\n                                    x_34790 = ((volatile __local\n                                                float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780) -\n                                                                            sext_i32_i64(skip_threads_34796)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_34797 =\n                                         slt64(srem64(sext_i32_i64(local_tid_34780 *\n                                                      32 + 32 - 1), n_26351),\n                                               sext_i32_i64(local_tid_34780 *\n                                               32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_34780 -\n                                                             skip_threads_34796) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_34797) {\n                      ",
                   "                  x_34790 = x_34791;\n                                    }\n                                    if (!inactive_34797) {\n                                        float res_34792 = x_34790 + x_34791;\n                                        \n                                        x_34790 = res_34792;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_34782, skip_threads_34796)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_34796, local_tid_34780 -\n                                      squot32(local_tid_34780, 32) * 32) &&\n                                (squot32(local_tid_34780, 32) == 0 &&\n                                 ltid_in_bounds_34793)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)] =\n                                        x_34790;\n                                    x_34791 = x_34790;\n                                }\n                            }\n                            if (sle32(wave_sizze_34782, skip_threads_34796)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_34796 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_34780, 32) == 0 ||\n                          !ltid_in_bounds_34793)) {\n                        // read operands\n                        {\n                            x_29161 = x_29160;\n                            x_29160 = ((__local\n                                      ",
                   "  float *) red_arr_mem_34784)[sext_i32_i64(squot32(local_tid_34780,\n                                                                                         32)) -\n                                                                    1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_34798 =\n                                 slt64(srem64(sext_i32_i64(local_tid_34780),\n                                              n_26351),\n                                       sext_i32_i64(local_tid_34780) -\n                                       sext_i32_i64(squot32(local_tid_34780,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_34798) {\n                                x_29160 = x_29161;\n                            }\n                            if (!inactive_34798) {\n                                float res_29162 = x_29160 + x_29161;\n                                \n                                x_29160 = res_29162;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)] =\n                                x_29160;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_34780, 32) == 0) {\n                        ((__local\n                          float *) red_arr_mem_34784)[sext_i32_i64(local_tid_34780)] =\n                            x_29161;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n",
                   "        {\n            if (slt64(sext_i32_i64(virt_group_id_34788) *\n                      squot64(segred_group_sizze_29156,\n                              segment_sizze_nonzzero_34777) +\n                      sext_i32_i64(local_tid_34780), paths_26354 *\n                      steps_26355) && slt64(sext_i32_i64(local_tid_34780),\n                                            squot64(segred_group_sizze_29156,\n                                                    segment_sizze_nonzzero_34777))) {\n                ((__global\n                  float *) mem_33663)[squot64(sext_i32_i64(virt_group_id_34788) *\n                                              squot64(segred_group_sizze_29156,\n                                                      segment_sizze_nonzzero_34777) +\n                                              sext_i32_i64(local_tid_34780),\n                                              steps_26355) * steps_26355 +\n                                      (sext_i32_i64(virt_group_id_34788) *\n                                       squot64(segred_group_sizze_29156,\n                                               segment_sizze_nonzzero_34777) +\n                                       sext_i32_i64(local_tid_34780) -\n                                       squot64(sext_i32_i64(virt_group_id_34788) *\n                                               squot64(segred_group_sizze_29156,\n                                                       segment_sizze_nonzzero_34777) +\n                                               sext_i32_i64(local_tid_34780),\n                                               steps_26355) * steps_26355)] =\n                    ((__local\n                      float *) red_arr_mem_34784)[(sext_i32_i64(local_tid_34780) +\n                                                   1) *\n                                                  segment_sizze_nonzzero_34777 -\n                                                  1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        ba",
                   "rrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_29156\n}\n__kernel void mainzisegred_small_29796(__global int *global_failure,\n                                       __local volatile\n                                       int64_t *red_arr_mem_35267_backing_aligned_0,\n                                       int64_t n_26351, int64_t paths_26354,\n                                       int64_t steps_26355,\n                                       int64_t num_groups_30479, __global\n                                       unsigned char *mem_33947, __global\n                                       unsigned char *mem_33950,\n                                       int64_t segment_sizze_nonzzero_35260)\n{\n    #define segred_group_sizze_30478 (mainzisegred_group_sizze_29790)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_35267_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_35267_backing_aligned_0;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35262;\n    int32_t local_tid_35263;\n    int64_t group_sizze_35266;\n    int32_t wave_sizze_35265;\n    int32_t group_tid_35264;\n    \n    global_tid_35262 = get_global_id(0);\n    local_tid_35263 = get_local_id(0);\n    group_sizze_35266 = get_local_size(0);\n    wave_sizze_35265 = LOCKSTEP_WIDTH;\n    group_tid_35264 = get_group_id(0);\n    \n    int32_t phys_tid_29796;\n    \n    phys_tid_29796 = global_tid_35262;\n    \n    __local char *red_arr_mem_35267;\n    \n    red_arr_mem_35267 = (__local char *) red_arr_mem_35267_backing_0;\n    \n    int32_t phys_group_id_35269;\n    \n    phys_group_id_35269 = get_group_id(0);\n    for (int32_t i_35270 = 0; i_35270 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(steps_26355,\n                                          squot64(segred_group_sizze_30478,\n                             ",
                   "                     segment_sizze_nonzzero_35260))) -\n                   phys_group_id_35269, sext_i64_i32(num_groups_30479));\n         i_35270++) {\n        int32_t virt_group_id_35271 = phys_group_id_35269 + i_35270 *\n                sext_i64_i32(num_groups_30479);\n        int64_t gtid_29787 = squot64(sext_i32_i64(local_tid_35263),\n                                     segment_sizze_nonzzero_35260) +\n                sext_i32_i64(virt_group_id_35271) *\n                squot64(segred_group_sizze_30478, segment_sizze_nonzzero_35260);\n        int64_t gtid_29795 = srem64(sext_i32_i64(local_tid_35263), paths_26354);\n        \n        // apply map function if in bounds\n        {\n            if (slt64(0, paths_26354) && (slt64(gtid_29787, steps_26355) &&\n                                          slt64(sext_i32_i64(local_tid_35263),\n                                                paths_26354 *\n                                                squot64(segred_group_sizze_30478,\n                                                        segment_sizze_nonzzero_35260)))) {\n                float res_30487;\n                float redout_33426 = 0.0F;\n                \n                for (int64_t i_33427 = 0; i_33427 < n_26351; i_33427++) {\n                    float x_30491 = ((__global float *) mem_33947)[i_33427 *\n                                                                   (paths_26354 *\n                                                                    steps_26355) +\n                                                                   gtid_29787 *\n                                                                   paths_26354 +\n                                                                   gtid_29795];\n                    float res_30490 = x_30491 + redout_33426;\n                    float redout_tmp_35272 = res_30490;\n                    \n                    redout_33426 = redout_tmp_35272;\n                }\n                res_30487 = redout_33426;\n                \n          ",
                   "      float res_30492 = fmax32(0.0F, res_30487);\n                \n                // save map-out results\n                { }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)] =\n                        res_30492;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)] =\n                    0.0F;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64(0, paths_26354)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_30482;\n                float x_30483;\n                float x_35273;\n                float x_35274;\n                bool ltid_in_bounds_35276;\n                \n                ltid_in_bounds_35276 = slt64(sext_i32_i64(local_tid_35263),\n                                             paths_26354 *\n                                             squot64(segred_group_sizze_30478,\n                                                     segment_sizze_nonzzero_35260));\n                \n                int32_t skip_threads_35277;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_35276) {\n                        x_30483 = ((volatile __local\n                                    float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)];\n                        if ((local_tid_35263 - squot32(local_tid_35263, 32) *\n                             32) == 0) {\n                            x_30482 = x_30483;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_35277 = 1;\n                    while (slt32(skip_threads_35277, 32)) {\n                        if (sle32(skip_threads_35277, local_tid_35263 -\n      ",
                   "                            squot32(local_tid_35263, 32) * 32) &&\n                            ltid_in_bounds_35276) {\n                            // read operands\n                            {\n                                x_30482 = ((volatile __local\n                                            float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263) -\n                                                                        sext_i32_i64(skip_threads_35277)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_35278 =\n                                     slt64(srem64(sext_i32_i64(local_tid_35263),\n                                                  paths_26354),\n                                           sext_i32_i64(local_tid_35263) -\n                                           sext_i32_i64(local_tid_35263 -\n                                           skip_threads_35277));\n                                \n                                if (inactive_35278) {\n                                    x_30482 = x_30483;\n                                }\n                                if (!inactive_35278) {\n                                    float res_30484 = x_30482 + x_30483;\n                                    \n                                    x_30482 = res_30484;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_35265, skip_threads_35277)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_35277, local_tid_35263 -\n                                  squot32(local_tid_35263, 32) * 32) &&\n                            ltid_in_bounds_35276) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) re",
                   "d_arr_mem_35267)[sext_i32_i64(local_tid_35263)] =\n                                    x_30482;\n                                x_30483 = x_30482;\n                            }\n                        }\n                        if (sle32(wave_sizze_35265, skip_threads_35277)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_35277 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_35263 - squot32(local_tid_35263, 32) * 32) ==\n                        31 && ltid_in_bounds_35276) {\n                        ((volatile __local\n                          float *) red_arr_mem_35267)[sext_i32_i64(squot32(local_tid_35263,\n                                                                           32))] =\n                            x_30482;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_35279;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_35263, 32) == 0 &&\n                            ltid_in_bounds_35276) {\n                            x_35274 = ((volatile __local\n                                        float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)];\n                            if ((local_tid_35263 - squot32(local_tid_35263,\n                                                           32) * 32) == 0) {\n                                x_35273 = x_35274;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_",
                   "threads_35279 = 1;\n                        while (slt32(skip_threads_35279, 32)) {\n                            if (sle32(skip_threads_35279, local_tid_35263 -\n                                      squot32(local_tid_35263, 32) * 32) &&\n                                (squot32(local_tid_35263, 32) == 0 &&\n                                 ltid_in_bounds_35276)) {\n                                // read operands\n                                {\n                                    x_35273 = ((volatile __local\n                                                float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263) -\n                                                                            sext_i32_i64(skip_threads_35279)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_35280 =\n                                         slt64(srem64(sext_i32_i64(local_tid_35263 *\n                                                      32 + 32 - 1),\n                                                      paths_26354),\n                                               sext_i32_i64(local_tid_35263 *\n                                               32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_35263 -\n                                                             skip_threads_35279) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_35280) {\n                                        x_35273 = x_35274;\n                                    }\n                                    if (!inactive_35280) {\n                                        float res_35275 = x_35273 + x_35274;\n                                        \n                                        x_35273 = res_35275;\n                                    }\n                                }\n    ",
                   "                        }\n                            if (sle32(wave_sizze_35265, skip_threads_35279)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_35279, local_tid_35263 -\n                                      squot32(local_tid_35263, 32) * 32) &&\n                                (squot32(local_tid_35263, 32) == 0 &&\n                                 ltid_in_bounds_35276)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)] =\n                                        x_35273;\n                                    x_35274 = x_35273;\n                                }\n                            }\n                            if (sle32(wave_sizze_35265, skip_threads_35279)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_35279 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_35263, 32) == 0 ||\n                          !ltid_in_bounds_35276)) {\n                        // read operands\n                        {\n                            x_30483 = x_30482;\n                            x_30482 = ((__local\n                                        float *) red_arr_mem_35267)[sext_i32_i64(squot32(local_tid_35263,\n                                                                                         32)) -\n                                                                    1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_35281 =\n      ",
                   "                           slt64(srem64(sext_i32_i64(local_tid_35263),\n                                              paths_26354),\n                                       sext_i32_i64(local_tid_35263) -\n                                       sext_i32_i64(squot32(local_tid_35263,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_35281) {\n                                x_30482 = x_30483;\n                            }\n                            if (!inactive_35281) {\n                                float res_30484 = x_30482 + x_30483;\n                                \n                                x_30482 = res_30484;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)] =\n                                x_30482;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_35263, 32) == 0) {\n                        ((__local\n                          float *) red_arr_mem_35267)[sext_i32_i64(local_tid_35263)] =\n                            x_30483;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_35271) *\n                      squot64(segred_group_sizze_30478,\n                              segment_sizze_nonzzero_35260) +\n                      sext_i32_i64(local_tid_35263), steps_26355) &&\n                slt64(sext_i32_i64(local_tid_35263),\n                      squot64(segred_group_sizze_30478,\n                     ",
                   "         segment_sizze_nonzzero_35260))) {\n                ((__global\n                  float *) mem_33950)[sext_i32_i64(virt_group_id_35271) *\n                                      squot64(segred_group_sizze_30478,\n                                              segment_sizze_nonzzero_35260) +\n                                      sext_i32_i64(local_tid_35263)] = ((__local\n                                                                         float *) red_arr_mem_35267)[(sext_i32_i64(local_tid_35263) +\n                                                                                                      1) *\n                                                                                                     segment_sizze_nonzzero_35260 -\n                                                                                                     1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_30478\n}\n__kernel void mainzisegred_small_30112(__global int *global_failure,\n                                       __local volatile\n                                       int64_t *red_arr_mem_35063_backing_aligned_0,\n                                       int64_t steps_26355,\n                                       int64_t flat_dim_26636,\n                                       int64_t num_groups_30267, __global\n                                       unsigned char *mem_33830, __global\n                                       unsigned char *mem_33833,\n                                       int64_t segment_sizze_nonzzero_35056)\n{\n    #define segred_group_sizze_30266 (mainzisegred_group_sizze_30106)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_35063_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_35063",
                   "_backing_aligned_0;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35058;\n    int32_t local_tid_35059;\n    int64_t group_sizze_35062;\n    int32_t wave_sizze_35061;\n    int32_t group_tid_35060;\n    \n    global_tid_35058 = get_global_id(0);\n    local_tid_35059 = get_local_id(0);\n    group_sizze_35062 = get_local_size(0);\n    wave_sizze_35061 = LOCKSTEP_WIDTH;\n    group_tid_35060 = get_group_id(0);\n    \n    int32_t phys_tid_30112;\n    \n    phys_tid_30112 = global_tid_35058;\n    \n    __local char *red_arr_mem_35063;\n    \n    red_arr_mem_35063 = (__local char *) red_arr_mem_35063_backing_0;\n    \n    int32_t phys_group_id_35065;\n    \n    phys_group_id_35065 = get_group_id(0);\n    for (int32_t i_35066 = 0; i_35066 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(steps_26355,\n                                          squot64(segred_group_sizze_30266,\n                                                  segment_sizze_nonzzero_35056))) -\n                   phys_group_id_35065, sext_i64_i32(num_groups_30267));\n         i_35066++) {\n        int32_t virt_group_id_35067 = phys_group_id_35065 + i_35066 *\n                sext_i64_i32(num_groups_30267);\n        int64_t gtid_30103 = squot64(sext_i32_i64(local_tid_35059),\n                                     segment_sizze_nonzzero_35056) +\n                sext_i32_i64(virt_group_id_35067) *\n                squot64(segred_group_sizze_30266, segment_sizze_nonzzero_35056);\n        int64_t gtid_30111 = srem64(sext_i32_i64(local_tid_35059),\n                                    flat_dim_26636);\n        \n        // apply map function if in bounds\n        {\n            if (slt64(0, flat_dim_26636) && (slt64(gtid_30103, steps_26355) &&\n                                             slt64(sext_i32_i64(local_tid_35059),\n                                                   flat_dim_26636 *\n                                                   squot64(segred_group_sizze_30266,\n                                                       ",
                   "    segment_sizze_nonzzero_35056)))) {\n                int64_t x_30274 = ((__global int64_t *) mem_33830)[gtid_30103 *\n                                                                   flat_dim_26636 +\n                                                                   gtid_30111];\n                \n                // save map-out results\n                { }\n                // save results to be reduced\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)] =\n                        x_30274;\n                }\n            } else {\n                ((__local\n                  int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)] =\n                    0;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64(0, flat_dim_26636)) {\n            // perform segmented scan to imitate reduction\n            {\n                int64_t x_30270;\n                int64_t x_30271;\n                int64_t x_35068;\n                int64_t x_35069;\n                bool ltid_in_bounds_35071;\n                \n                ltid_in_bounds_35071 = slt64(sext_i32_i64(local_tid_35059),\n                                             flat_dim_26636 *\n                                             squot64(segred_group_sizze_30266,\n                                                     segment_sizze_nonzzero_35056));\n                \n                int32_t skip_threads_35072;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_35071) {\n                        x_30271 = ((volatile __local\n                                    int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)];\n                        if ((local_tid_35059 - squot32(local_tid_35059, 32) *\n                             32) == 0) {\n                            x_30270 = x_30271;\n                        }\n                    }\n                }\n               ",
                   " // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_35072 = 1;\n                    while (slt32(skip_threads_35072, 32)) {\n                        if (sle32(skip_threads_35072, local_tid_35059 -\n                                  squot32(local_tid_35059, 32) * 32) &&\n                            ltid_in_bounds_35071) {\n                            // read operands\n                            {\n                                x_30270 = ((volatile __local\n                                            int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059) -\n                                                                          sext_i32_i64(skip_threads_35072)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_35073 =\n                                     slt64(srem64(sext_i32_i64(local_tid_35059),\n                                                  flat_dim_26636),\n                                           sext_i32_i64(local_tid_35059) -\n                                           sext_i32_i64(local_tid_35059 -\n                                           skip_threads_35072));\n                                \n                                if (inactive_35073) {\n                                    x_30270 = x_30271;\n                                }\n                                if (!inactive_35073) {\n                                    int64_t res_30272 = add64(x_30270, x_30271);\n                                    \n                                    x_30270 = res_30272;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_35061, skip_threads_35072)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_35072, local_tid_35059 -\n                              ",
                   "    squot32(local_tid_35059, 32) * 32) &&\n                            ltid_in_bounds_35071) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)] =\n                                    x_30270;\n                                x_30271 = x_30270;\n                            }\n                        }\n                        if (sle32(wave_sizze_35061, skip_threads_35072)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_35072 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_35059 - squot32(local_tid_35059, 32) * 32) ==\n                        31 && ltid_in_bounds_35071) {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35063)[sext_i32_i64(squot32(local_tid_35059,\n                                                                             32))] =\n                            x_30270;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_35074;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_35059, 32) == 0 &&\n                            ltid_in_bounds_35071) {\n                            x_35069 = ((volatile __local\n                                        int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)];\n                            if ((local_tid_35059 - squot32(local_tid_35059,\n                                                     ",
                   "      32) * 32) == 0) {\n                                x_35068 = x_35069;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_35074 = 1;\n                        while (slt32(skip_threads_35074, 32)) {\n                            if (sle32(skip_threads_35074, local_tid_35059 -\n                                      squot32(local_tid_35059, 32) * 32) &&\n                                (squot32(local_tid_35059, 32) == 0 &&\n                                 ltid_in_bounds_35071)) {\n                                // read operands\n                                {\n                                    x_35068 = ((volatile __local\n                                                int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059) -\n                                                                              sext_i32_i64(skip_threads_35074)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_35075 =\n                                         slt64(srem64(sext_i32_i64(local_tid_35059 *\n                                                      32 + 32 - 1),\n                                                      flat_dim_26636),\n                                               sext_i32_i64(local_tid_35059 *\n                                               32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_35059 -\n                                                             skip_threads_35074) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_35075) {\n                                        x_35068 = x_35069;\n                                    }\n                                   ",
                   " if (!inactive_35075) {\n                                        int64_t res_35070 = add64(x_35068,\n                                                                  x_35069);\n                                        \n                                        x_35068 = res_35070;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_35061, skip_threads_35074)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_35074, local_tid_35059 -\n                                      squot32(local_tid_35059, 32) * 32) &&\n                                (squot32(local_tid_35059, 32) == 0 &&\n                                 ltid_in_bounds_35071)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)] =\n                                        x_35068;\n                                    x_35069 = x_35068;\n                                }\n                            }\n                            if (sle32(wave_sizze_35061, skip_threads_35074)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_35074 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_35059, 32) == 0 ||\n                          !ltid_in_bounds_35071)) {\n                        // read operands\n                        {\n                            x_30271 = x_30270;\n                            x_30270 = ((__local\n                                        int64_t *) red_arr_mem_35063)[se",
                   "xt_i32_i64(squot32(local_tid_35059,\n                                                                                           32)) -\n                                                                      1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_35076 =\n                                 slt64(srem64(sext_i32_i64(local_tid_35059),\n                                              flat_dim_26636),\n                                       sext_i32_i64(local_tid_35059) -\n                                       sext_i32_i64(squot32(local_tid_35059,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_35076) {\n                                x_30270 = x_30271;\n                            }\n                            if (!inactive_35076) {\n                                int64_t res_30272 = add64(x_30270, x_30271);\n                                \n                                x_30270 = res_30272;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)] =\n                                x_30270;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_35059, 32) == 0) {\n                        ((__local\n                          int64_t *) red_arr_mem_35063)[sext_i32_i64(local_tid_35059)] =\n                            x_30271;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {",
                   "\n            if (slt64(sext_i32_i64(virt_group_id_35067) *\n                      squot64(segred_group_sizze_30266,\n                              segment_sizze_nonzzero_35056) +\n                      sext_i32_i64(local_tid_35059), steps_26355) &&\n                slt64(sext_i32_i64(local_tid_35059),\n                      squot64(segred_group_sizze_30266,\n                              segment_sizze_nonzzero_35056))) {\n                ((__global\n                  int64_t *) mem_33833)[sext_i32_i64(virt_group_id_35067) *\n                                        squot64(segred_group_sizze_30266,\n                                                segment_sizze_nonzzero_35056) +\n                                        sext_i32_i64(local_tid_35059)] =\n                    ((__local\n                      int64_t *) red_arr_mem_35063)[(sext_i32_i64(local_tid_35059) +\n                                                     1) *\n                                                    segment_sizze_nonzzero_35056 -\n                                                    1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_30266\n}\n__kernel void testzisegmap_30513(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args, __global\n                                 unsigned char *mem_33465, __global\n                                 unsigned char *mem_33467, __global\n                                 unsigned char *mem_33479)\n{\n    #define segmap_group_sizze_30579 (testzisegmap_group_sizze_30515)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34673;\n    int32_t local_tid_34674;\n    int64_t group_sizze_34677;\n    int32_t wave_sizze_34676;\n   ",
                   " int32_t group_tid_34675;\n    \n    global_tid_34673 = get_global_id(0);\n    local_tid_34674 = get_local_id(0);\n    group_sizze_34677 = get_local_size(0);\n    wave_sizze_34676 = LOCKSTEP_WIDTH;\n    group_tid_34675 = get_group_id(0);\n    \n    int32_t phys_tid_30513;\n    \n    phys_tid_30513 = global_tid_34673;\n    \n    int64_t gtid_30512;\n    \n    gtid_30512 = sext_i32_i64(group_tid_34675) * segmap_group_sizze_30579 +\n        sext_i32_i64(local_tid_34674);\n    if (slt64(gtid_30512, 45)) {\n        float res_30590 = ((__global float *) mem_33467)[gtid_30512];\n        int64_t res_30591 = ((__global int64_t *) mem_33465)[gtid_30512];\n        bool bounds_invalid_upwards_30593 = slt64(res_30591, 1);\n        bool valid_30594 = !bounds_invalid_upwards_30593;\n        bool range_valid_c_30595;\n        \n        if (!valid_30594) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 36) == -1) {\n                    global_failure_args[0] = 1;\n                    global_failure_args[1] = 2;\n                    global_failure_args[2] = res_30591;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        bool y_30597 = slt64(0, res_30591);\n        bool index_certs_30598;\n        \n        if (!y_30597) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 37) == -1) {\n                    global_failure_args[0] = 0;\n                    global_failure_args[1] = res_30591;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float binop_y_30599 = sitofp_i64_f32(res_30591);\n        float index_primexp_30600 = res_30590 * binop_y_30599;\n        float negate_arg_30601 = 1.0e-2F * index_primexp_30600;\n        float exp_arg_30602 = 0.0F - negate_arg_30601;\n        float res_30603 = fpow32(2.7182817F, exp_arg_30602);\n        float x_30604 = 1.0F - res_30603;\n        float B_30605 = x_30604 / 1.0e-2F;\n        float x_30606 = B_30605 - index_p",
                   "rimexp_30600;\n        float x_30607 = 4.4999997e-6F * x_30606;\n        float A1_30608 = x_30607 / 1.0e-4F;\n        float y_30609 = fpow32(B_30605, 2.0F);\n        float x_30610 = 1.0000001e-6F * y_30609;\n        float A2_30611 = x_30610 / 4.0e-2F;\n        float exp_arg_30612 = A1_30608 - A2_30611;\n        float res_30613 = fpow32(2.7182817F, exp_arg_30612);\n        float negate_arg_30614 = 5.0e-2F * B_30605;\n        float exp_arg_30615 = 0.0F - negate_arg_30614;\n        float res_30616 = fpow32(2.7182817F, exp_arg_30615);\n        float res_30617 = res_30613 * res_30616;\n        float res_30618;\n        float redout_32558 = 0.0F;\n        \n        for (int64_t i_32559 = 0; i_32559 < res_30591; i_32559++) {\n            int64_t index_primexp_32606 = add64(1, i_32559);\n            float res_30623 = sitofp_i64_f32(index_primexp_32606);\n            float res_30624 = res_30590 * res_30623;\n            float negate_arg_30625 = 1.0e-2F * res_30624;\n            float exp_arg_30626 = 0.0F - negate_arg_30625;\n            float res_30627 = fpow32(2.7182817F, exp_arg_30626);\n            float x_30628 = 1.0F - res_30627;\n            float B_30629 = x_30628 / 1.0e-2F;\n            float x_30630 = B_30629 - res_30624;\n            float x_30631 = 4.4999997e-6F * x_30630;\n            float A1_30632 = x_30631 / 1.0e-4F;\n            float y_30633 = fpow32(B_30629, 2.0F);\n            float x_30634 = 1.0000001e-6F * y_30633;\n            float A2_30635 = x_30634 / 4.0e-2F;\n            float exp_arg_30636 = A1_30632 - A2_30635;\n            float res_30637 = fpow32(2.7182817F, exp_arg_30636);\n            float negate_arg_30638 = 5.0e-2F * B_30629;\n            float exp_arg_30639 = 0.0F - negate_arg_30638;\n            float res_30640 = fpow32(2.7182817F, exp_arg_30639);\n            float res_30641 = res_30637 * res_30640;\n            float res_30621 = res_30641 + redout_32558;\n            float redout_tmp_34678 = res_30621;\n            \n            redout_32558 = redout_tmp_34678;\n        }\n    ",
                   "    res_30618 = redout_32558;\n        \n        float x_30642 = 1.0F - res_30617;\n        float y_30643 = res_30590 * res_30618;\n        float res_30644 = x_30642 / y_30643;\n        \n        ((__global float *) mem_33479)[gtid_30512] = res_30644;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30579\n}\n__kernel void testzisegmap_30662(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args, __global\n                                 unsigned char *mem_33465, __global\n                                 unsigned char *mem_33467, __global\n                                 unsigned char *mem_33488)\n{\n    #define segmap_group_sizze_30728 (testzisegmap_group_sizze_30664)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34679;\n    int32_t local_tid_34680;\n    int64_t group_sizze_34683;\n    int32_t wave_sizze_34682;\n    int32_t group_tid_34681;\n    \n    global_tid_34679 = get_global_id(0);\n    local_tid_34680 = get_local_id(0);\n    group_sizze_34683 = get_local_size(0);\n    wave_sizze_34682 = LOCKSTEP_WIDTH;\n    group_tid_34681 = get_group_id(0);\n    \n    int32_t phys_tid_30662;\n    \n    phys_tid_30662 = global_tid_34679;\n    \n    int64_t gtid_30661;\n    \n    gtid_30661 = sext_i32_i64(group_tid_34681) * segmap_group_sizze_30728 +\n        sext_i32_i64(local_tid_34680);\n    if (slt64(gtid_30661, 45)) {\n        float res_30739 = ((__global float *) mem_33467)[gtid_30661];\n        int64_t res_30740 = ((__global int64_t *) mem_33465)[gtid_30661];\n        bool bounds_invalid_upwards_30742 = slt64(res_30740, 1);\n        bool valid_30743 = !bounds_invalid_upwards_30742;\n        bool range_valid_c_30744;\n        \n        if (!valid_30743) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 38) == -1) {\n                ",
                   "    global_failure_args[0] = 1;\n                    global_failure_args[1] = 2;\n                    global_failure_args[2] = res_30740;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        bool y_30746 = slt64(0, res_30740);\n        bool index_certs_30747;\n        \n        if (!y_30746) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 39) == -1) {\n                    global_failure_args[0] = 0;\n                    global_failure_args[1] = res_30740;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float binop_y_30748 = sitofp_i64_f32(res_30740);\n        float index_primexp_30749 = res_30739 * binop_y_30748;\n        float negate_arg_30750 = 1.0e-2F * index_primexp_30749;\n        float exp_arg_30751 = 0.0F - negate_arg_30750;\n        float res_30752 = fpow32(2.7182817F, exp_arg_30751);\n        float x_30753 = 1.0F - res_30752;\n        float B_30754 = x_30753 / 1.0e-2F;\n        float x_30755 = B_30754 - index_primexp_30749;\n        float x_30756 = 4.4999997e-6F * x_30755;\n        float A1_30757 = x_30756 / 1.0e-4F;\n        float y_30758 = fpow32(B_30754, 2.0F);\n        float x_30759 = 1.0000001e-6F * y_30758;\n        float A2_30760 = x_30759 / 4.0e-2F;\n        float exp_arg_30761 = A1_30757 - A2_30760;\n        float res_30762 = fpow32(2.7182817F, exp_arg_30761);\n        float negate_arg_30763 = 5.0e-2F * B_30754;\n        float exp_arg_30764 = 0.0F - negate_arg_30763;\n        float res_30765 = fpow32(2.7182817F, exp_arg_30764);\n        float res_30766 = res_30762 * res_30765;\n        float res_30767;\n        float redout_32562 = 0.0F;\n        \n        for (int64_t i_32563 = 0; i_32563 < res_30740; i_32563++) {\n            int64_t index_primexp_32608 = add64(1, i_32563);\n            float res_30772 = sitofp_i64_f32(index_primexp_32608);\n            float res_30773 = res_30739 * res_30772;\n            float negate_arg_30774 = 1.0e-2F",
                   " * res_30773;\n            float exp_arg_30775 = 0.0F - negate_arg_30774;\n            float res_30776 = fpow32(2.7182817F, exp_arg_30775);\n            float x_30777 = 1.0F - res_30776;\n            float B_30778 = x_30777 / 1.0e-2F;\n            float x_30779 = B_30778 - res_30773;\n            float x_30780 = 4.4999997e-6F * x_30779;\n            float A1_30781 = x_30780 / 1.0e-4F;\n            float y_30782 = fpow32(B_30778, 2.0F);\n            float x_30783 = 1.0000001e-6F * y_30782;\n            float A2_30784 = x_30783 / 4.0e-2F;\n            float exp_arg_30785 = A1_30781 - A2_30784;\n            float res_30786 = fpow32(2.7182817F, exp_arg_30785);\n            float negate_arg_30787 = 5.0e-2F * B_30778;\n            float exp_arg_30788 = 0.0F - negate_arg_30787;\n            float res_30789 = fpow32(2.7182817F, exp_arg_30788);\n            float res_30790 = res_30786 * res_30789;\n            float res_30770 = res_30790 + redout_32562;\n            float redout_tmp_34684 = res_30770;\n            \n            redout_32562 = redout_tmp_34684;\n        }\n        res_30767 = redout_32562;\n        \n        float x_30791 = 1.0F - res_30766;\n        float y_30792 = res_30739 * res_30767;\n        float res_30793 = x_30791 / y_30792;\n        \n        ((__global float *) mem_33488)[gtid_30661] = res_30793;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30728\n}\n__kernel void testzisegmap_30975(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args,\n                                 int64_t paths_26891, int64_t steps_26892,\n                                 float dt_26905, float sims_per_year_26971,\n                                 int64_t upper_bound_26985, float res_26986,\n                                 int64_t num_groups_31145, __global\n                                 unsigned char *res_mem_33489, __global\n                                 unsigned char *res_mem_33",
                   "490, __global\n                                 unsigned char *res_mem_33491, __global\n                                 unsigned char *res_mem_33492, __global\n                                 unsigned char *mem_33495, __global\n                                 unsigned char *mem_33509, __global\n                                 unsigned char *mem_33523, __global\n                                 unsigned char *mem_33538)\n{\n    #define segmap_group_sizze_31144 (testzisegmap_group_sizze_30977)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34689;\n    int32_t local_tid_34690;\n    int64_t group_sizze_34693;\n    int32_t wave_sizze_34692;\n    int32_t group_tid_34691;\n    \n    global_tid_34689 = get_global_id(0);\n    local_tid_34690 = get_local_id(0);\n    group_sizze_34693 = get_local_size(0);\n    wave_sizze_34692 = LOCKSTEP_WIDTH;\n    group_tid_34691 = get_group_id(0);\n    \n    int32_t phys_tid_30975;\n    \n    phys_tid_30975 = global_tid_34689;\n    \n    int32_t phys_group_id_34694;\n    \n    phys_group_id_34694 = get_group_id(0);\n    for (int32_t i_34695 = 0; i_34695 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(paths_26891,\n                                          segmap_group_sizze_31144)) -\n                   phys_group_id_34694, sext_i64_i32(num_groups_31145));\n         i_34695++) {\n        int32_t virt_group_id_34696 = phys_group_id_34694 + i_34695 *\n                sext_i64_i32(num_groups_31145);\n        int64_t gtid_30974 = sext_i32_i64(virt_group_id_34696) *\n                segmap_group_sizze_31144 + sext_i32_i64(local_tid_34690);\n        \n        if (slt64(gtid_30974, paths_26891)) {\n            int32_t res_31149 = sext_i64_i32(gtid_30974);\n            int32_t x",
                   "_31150 = lshr32(res_31149, 16);\n            int32_t x_31151 = res_31149 ^ x_31150;\n            int32_t x_31152 = mul32(73244475, x_31151);\n            int32_t x_31153 = lshr32(x_31152, 16);\n            int32_t x_31154 = x_31152 ^ x_31153;\n            int32_t x_31155 = mul32(73244475, x_31154);\n            int32_t x_31156 = lshr32(x_31155, 16);\n            int32_t x_31157 = x_31155 ^ x_31156;\n            int32_t unsign_arg_31158 = 777822902 ^ x_31157;\n            int32_t unsign_arg_31159 = mul32(48271, unsign_arg_31158);\n            int32_t unsign_arg_31160 = umod32(unsign_arg_31159, 2147483647);\n            \n            for (int64_t i_33292 = 0; i_33292 < steps_26892; i_33292++) {\n                int32_t res_31163 = sext_i64_i32(i_33292);\n                int32_t x_31164 = lshr32(res_31163, 16);\n                int32_t x_31165 = res_31163 ^ x_31164;\n                int32_t x_31166 = mul32(73244475, x_31165);\n                int32_t x_31167 = lshr32(x_31166, 16);\n                int32_t x_31168 = x_31166 ^ x_31167;\n                int32_t x_31169 = mul32(73244475, x_31168);\n                int32_t x_31170 = lshr32(x_31169, 16);\n                int32_t x_31171 = x_31169 ^ x_31170;\n                int32_t unsign_arg_31172 = unsign_arg_31160 ^ x_31171;\n                int32_t unsign_arg_31173 = mul32(48271, unsign_arg_31172);\n                int32_t unsign_arg_31174 = umod32(unsign_arg_31173, 2147483647);\n                int32_t unsign_arg_31175 = mul32(48271, unsign_arg_31174);\n                int32_t unsign_arg_31176 = umod32(unsign_arg_31175, 2147483647);\n                float res_31177 = uitofp_i32_f32(unsign_arg_31174);\n                float res_31178 = res_31177 / 2.1474836e9F;\n                float res_31179 = uitofp_i32_f32(unsign_arg_31176);\n                float res_31180 = res_31179 / 2.1474836e9F;\n                float res_31181;\n                \n                res_31181 = futrts_log32(res_31178);\n                \n                float res_31182 = -2.0F * re",
                   "s_31181;\n                float res_31183;\n                \n                res_31183 = futrts_sqrt32(res_31182);\n                \n                float res_31184 = 6.2831855F * res_31180;\n                float res_31185;\n                \n                res_31185 = futrts_cos32(res_31184);\n                \n                float res_31186 = res_31183 * res_31185;\n                \n                ((__global float *) mem_33495)[phys_tid_30975 + i_33292 *\n                                               (num_groups_31145 *\n                                                segmap_group_sizze_31144)] =\n                    res_31186;\n            }\n            for (int64_t i_34698 = 0; i_34698 < steps_26892; i_34698++) {\n                ((__global float *) mem_33509)[phys_tid_30975 + i_34698 *\n                                               (num_groups_31145 *\n                                                segmap_group_sizze_31144)] =\n                    5.0e-2F;\n            }\n            for (int64_t i_31189 = 0; i_31189 < upper_bound_26985; i_31189++) {\n                bool y_31191 = slt64(i_31189, steps_26892);\n                bool index_certs_31192;\n                \n                if (!y_31191) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 40) ==\n                            -1) {\n                            global_failure_args[0] = i_31189;\n                            global_failure_args[1] = steps_26892;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float shortstep_arg_31193 = ((__global\n                                              float *) mem_33495)[phys_tid_30975 +\n                                                                  i_31189 *\n                                                                  (num_groups_31145 *\n                             ",
                   "                                      segmap_group_sizze_31144)];\n                float shortstep_arg_31194 = ((__global\n                                              float *) mem_33509)[phys_tid_30975 +\n                                                                  i_31189 *\n                                                                  (num_groups_31145 *\n                                                                   segmap_group_sizze_31144)];\n                float y_31195 = 5.0e-2F - shortstep_arg_31194;\n                float x_31196 = 1.0e-2F * y_31195;\n                float x_31197 = dt_26905 * x_31196;\n                float x_31198 = res_26986 * shortstep_arg_31193;\n                float y_31199 = 1.0e-3F * x_31198;\n                float delta_r_31200 = x_31197 + y_31199;\n                float res_31201 = shortstep_arg_31194 + delta_r_31200;\n                int64_t i_31202 = add64(1, i_31189);\n                bool x_31203 = sle64(0, i_31202);\n                bool y_31204 = slt64(i_31202, steps_26892);\n                bool bounds_check_31205 = x_31203 && y_31204;\n                bool index_certs_31206;\n                \n                if (!bounds_check_31205) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 41) ==\n                            -1) {\n                            global_failure_args[0] = i_31202;\n                            global_failure_args[1] = steps_26892;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                ((__global float *) mem_33509)[phys_tid_30975 + i_31202 *\n                                               (num_groups_31145 *\n                                                segmap_group_sizze_31144)] =\n                    res_31201;\n            }\n            for (int64_t i_33296 = 0; i_33296 < steps_26892; i_33296++) {\n                float ",
                   "x_31209 = ((__global float *) mem_33509)[phys_tid_30975 +\n                                                               i_33296 *\n                                                               (num_groups_31145 *\n                                                                segmap_group_sizze_31144)];\n                int64_t convop_x_33431 = add64(1, i_33296);\n                float binop_x_33432 = sitofp_i64_f32(convop_x_33431);\n                float index_primexp_33433 = binop_x_33432 / sims_per_year_26971;\n                float res_31211;\n                float redout_33298 = 0.0F;\n                \n                for (int32_t i_33430 = 0; i_33430 < 45; i_33430++) {\n                    int64_t i_33299 = sext_i32_i64(i_33430);\n                    int64_t x_31217 = ((__global\n                                        int64_t *) res_mem_33491)[i_33299];\n                    float x_31218 = ((__global float *) res_mem_33492)[i_33299];\n                    int64_t i64_arg_31219 = sub64(x_31217, 1);\n                    float res_31220 = sitofp_i64_f32(i64_arg_31219);\n                    float y_31221 = x_31218 * res_31220;\n                    bool cond_31222 = y_31221 < index_primexp_33433;\n                    float ceil_arg_31223 = index_primexp_33433 / x_31218;\n                    float res_31224;\n                    \n                    res_31224 = futrts_ceil32(ceil_arg_31223);\n                    \n                    int64_t res_31225 = fptosi_f32_i64(res_31224);\n                    int64_t remaining_31226 = sub64(x_31217, res_31225);\n                    float res_31227;\n                    \n                    if (cond_31222) {\n                        res_31227 = 0.0F;\n                    } else {\n                        float x_31215 = ((__global\n                                          float *) res_mem_33489)[i_33299];\n                        float x_31216 = ((__global\n                                          float *) res_mem_33490)[i_33299];\n                   ",
                   "     float nextpayment_31228 = x_31218 * res_31224;\n                        bool bounds_invalid_upwards_31229 =\n                             slt64(remaining_31226, 1);\n                        bool valid_31230 = !bounds_invalid_upwards_31229;\n                        bool range_valid_c_31231;\n                        \n                        if (!valid_31230) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 42) == -1) {\n                                    global_failure_args[0] = 1;\n                                    global_failure_args[1] = 2;\n                                    global_failure_args[2] = remaining_31226;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_0;\n                            }\n                        }\n                        \n                        float y_31233 = nextpayment_31228 - index_primexp_33433;\n                        float negate_arg_31234 = 1.0e-2F * y_31233;\n                        float exp_arg_31235 = 0.0F - negate_arg_31234;\n                        float res_31236 = fpow32(2.7182817F, exp_arg_31235);\n                        float x_31237 = 1.0F - res_31236;\n                        float B_31238 = x_31237 / 1.0e-2F;\n                        float x_31239 = B_31238 - nextpayment_31228;\n                        float x_31240 = x_31239 + index_primexp_33433;\n                        float x_31241 = 4.4999997e-6F * x_31240;\n                        float A1_31242 = x_31241 / 1.0e-4F;\n                        float y_31243 = fpow32(B_31238, 2.0F);\n                        float x_31244 = 1.0000001e-6F * y_31243;\n                        float A2_31245 = x_31244 / 4.0e-2F;\n                        float exp_arg_31246 = A1_31242 - A2_31245;\n                        float res_31247 = fpow32(2.7182817F",
                   ", exp_arg_31246);\n                        float negate_arg_31248 = x_31209 * B_31238;\n                        float exp_arg_31249 = 0.0F - negate_arg_31248;\n                        float res_31250 = fpow32(2.7182817F, exp_arg_31249);\n                        float res_31251 = res_31247 * res_31250;\n                        bool y_31252 = slt64(0, remaining_31226);\n                        bool index_certs_31253;\n                        \n                        if (!y_31252) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 43) == -1) {\n                                    global_failure_args[0] = 0;\n                                    global_failure_args[1] = remaining_31226;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_0;\n                            }\n                        }\n                        \n                        float binop_y_31254 = sitofp_i64_f32(remaining_31226);\n                        float binop_y_31255 = x_31218 * binop_y_31254;\n                        float index_primexp_31256 = nextpayment_31228 +\n                              binop_y_31255;\n                        float y_31257 = index_primexp_31256 -\n                              index_primexp_33433;\n                        float negate_arg_31258 = 1.0e-2F * y_31257;\n                        float exp_arg_31259 = 0.0F - negate_arg_31258;\n                        float res_31260 = fpow32(2.7182817F, exp_arg_31259);\n                        float x_31261 = 1.0F - res_31260;\n                        float B_31262 = x_31261 / 1.0e-2F;\n                        float x_31263 = B_31262 - index_primexp_31256;\n                        float x_31264 = x_31263 + index_primexp_33433;\n                        float x_31265 = 4.4999997e-6F * x_31264;\n                    ",
                   "    float A1_31266 = x_31265 / 1.0e-4F;\n                        float y_31267 = fpow32(B_31262, 2.0F);\n                        float x_31268 = 1.0000001e-6F * y_31267;\n                        float A2_31269 = x_31268 / 4.0e-2F;\n                        float exp_arg_31270 = A1_31266 - A2_31269;\n                        float res_31271 = fpow32(2.7182817F, exp_arg_31270);\n                        float negate_arg_31272 = x_31209 * B_31262;\n                        float exp_arg_31273 = 0.0F - negate_arg_31272;\n                        float res_31274 = fpow32(2.7182817F, exp_arg_31273);\n                        float res_31275 = res_31271 * res_31274;\n                        float res_31276;\n                        float redout_32568 = 0.0F;\n                        \n                        for (int64_t i_32569 = 0; i_32569 < remaining_31226;\n                             i_32569++) {\n                            int64_t index_primexp_32616 = add64(1, i_32569);\n                            float res_31281 =\n                                  sitofp_i64_f32(index_primexp_32616);\n                            float res_31282 = x_31218 * res_31281;\n                            float res_31283 = nextpayment_31228 + res_31282;\n                            float y_31284 = res_31283 - index_primexp_33433;\n                            float negate_arg_31285 = 1.0e-2F * y_31284;\n                            float exp_arg_31286 = 0.0F - negate_arg_31285;\n                            float res_31287 = fpow32(2.7182817F, exp_arg_31286);\n                            float x_31288 = 1.0F - res_31287;\n                            float B_31289 = x_31288 / 1.0e-2F;\n                            float x_31290 = B_31289 - res_31283;\n                            float x_31291 = x_31290 + index_primexp_33433;\n                            float x_31292 = 4.4999997e-6F * x_31291;\n                            float A1_31293 = x_31292 / 1.0e-4F;\n                            float y_31294 = fpow32(B_31289, 2.0F);\n   ",
                   "                         float x_31295 = 1.0000001e-6F * y_31294;\n                            float A2_31296 = x_31295 / 4.0e-2F;\n                            float exp_arg_31297 = A1_31293 - A2_31296;\n                            float res_31298 = fpow32(2.7182817F, exp_arg_31297);\n                            float negate_arg_31299 = x_31209 * B_31289;\n                            float exp_arg_31300 = 0.0F - negate_arg_31299;\n                            float res_31301 = fpow32(2.7182817F, exp_arg_31300);\n                            float res_31302 = res_31298 * res_31301;\n                            float res_31279 = res_31302 + redout_32568;\n                            float redout_tmp_34702 = res_31279;\n                            \n                            redout_32568 = redout_tmp_34702;\n                        }\n                        res_31276 = redout_32568;\n                        \n                        float x_31303 = res_31251 - res_31275;\n                        float x_31304 = x_31215 * x_31218;\n                        float y_31305 = res_31276 * x_31304;\n                        float y_31306 = x_31303 - y_31305;\n                        float res_31307 = x_31216 * y_31306;\n                        \n                        res_31227 = res_31307;\n                    }\n                    \n                    float res_31214 = res_31227 + redout_33298;\n                    float redout_tmp_34701 = res_31214;\n                    \n                    redout_33298 = redout_tmp_34701;\n                }\n                res_31211 = redout_33298;\n                \n                float res_31308 = fmax32(0.0F, res_31211);\n                \n                ((__global float *) mem_33523)[phys_tid_30975 + i_33296 *\n                                               (num_groups_31145 *\n                                                segmap_group_sizze_31144)] =\n                    res_31308;\n            }\n            for (int64_t i_34703 = 0; i_34703 < steps_26892; i_347",
                   "03++) {\n                ((__global float *) mem_33538)[i_34703 * paths_26891 +\n                                               gtid_30974] = ((__global\n                                                               float *) mem_33523)[phys_tid_30975 +\n                                                                                   i_34703 *\n                                                                                   (num_groups_31145 *\n                                                                                    segmap_group_sizze_31144)];\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31144\n}\n__kernel void testzisegmap_31708(__global int *global_failure,\n                                 int64_t paths_26891, int64_t steps_26892,\n                                 __global unsigned char *mem_33660, __global\n                                 unsigned char *mem_33664)\n{\n    #define segmap_group_sizze_32550 (testzisegmap_group_sizze_31711)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34838;\n    int32_t local_tid_34839;\n    int64_t group_sizze_34842;\n    int32_t wave_sizze_34841;\n    int32_t group_tid_34840;\n    \n    global_tid_34838 = get_global_id(0);\n    local_tid_34839 = get_local_id(0);\n    group_sizze_34842 = get_local_size(0);\n    wave_sizze_34841 = LOCKSTEP_WIDTH;\n    group_tid_34840 = get_group_id(0);\n    \n    int32_t phys_tid_31708;\n    \n    phys_tid_31708 = global_tid_34838;\n    \n    int64_t gtid_31706;\n    \n    gtid_31706 = squot64(sext_i32_i64(group_tid_34840) *\n                         segmap_group_sizze_32550 +\n                         sext_i32_i64(local_tid_34839), steps_26892);\n    \n    int64_t gtid_31707;\n    \n    gtid_31707 = sext_i32_i64(group_tid_34840) * segmap_group_sizze_32550 +\n        sext_i32_i64(local_tid_3",
                   "4839) - squot64(sext_i32_i64(group_tid_34840) *\n                                                segmap_group_sizze_32550 +\n                                                sext_i32_i64(local_tid_34839),\n                                                steps_26892) * steps_26892;\n    if (slt64(gtid_31706, paths_26891) && slt64(gtid_31707, steps_26892)) {\n        float res_32553 = ((__global float *) mem_33660)[gtid_31706 *\n                                                         steps_26892 +\n                                                         gtid_31707];\n        float res_32554 = fmax32(0.0F, res_32553);\n        \n        ((__global float *) mem_33664)[gtid_31706 * steps_26892 + gtid_31707] =\n            res_32554;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_32550\n}\n__kernel void testzisegmap_31946(__global int *global_failure,\n                                 int failure_is_an_option, __global\n                                 int64_t *global_failure_args,\n                                 int64_t paths_26891, int64_t steps_26892,\n                                 float dt_26905, int64_t upper_bound_26985,\n                                 float res_26986, int64_t num_groups_32198,\n                                 __global unsigned char *mem_33575, __global\n                                 unsigned char *mem_33578, __global\n                                 unsigned char *mem_33593)\n{\n    #define segmap_group_sizze_32197 (testzisegmap_group_sizze_31948)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34740;\n    int32_t local_tid_34741;\n    int64_t group_sizze_34744;\n    int32_t wave_sizze_34743;\n    int32_t group_tid_34742;\n    \n    global_t",
                   "id_34740 = get_global_id(0);\n    local_tid_34741 = get_local_id(0);\n    group_sizze_34744 = get_local_size(0);\n    wave_sizze_34743 = LOCKSTEP_WIDTH;\n    group_tid_34742 = get_group_id(0);\n    \n    int32_t phys_tid_31946;\n    \n    phys_tid_31946 = global_tid_34740;\n    \n    int32_t phys_group_id_34745;\n    \n    phys_group_id_34745 = get_group_id(0);\n    for (int32_t i_34746 = 0; i_34746 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(paths_26891,\n                                          segmap_group_sizze_32197)) -\n                   phys_group_id_34745, sext_i64_i32(num_groups_32198));\n         i_34746++) {\n        int32_t virt_group_id_34747 = phys_group_id_34745 + i_34746 *\n                sext_i64_i32(num_groups_32198);\n        int64_t gtid_31945 = sext_i32_i64(virt_group_id_34747) *\n                segmap_group_sizze_32197 + sext_i32_i64(local_tid_34741);\n        \n        if (slt64(gtid_31945, paths_26891)) {\n            for (int64_t i_34748 = 0; i_34748 < steps_26892; i_34748++) {\n                ((__global float *) mem_33578)[phys_tid_31946 + i_34748 *\n                                               (num_groups_32198 *\n                                                segmap_group_sizze_32197)] =\n                    5.0e-2F;\n            }\n            for (int64_t i_32204 = 0; i_32204 < upper_bound_26985; i_32204++) {\n                bool y_32206 = slt64(i_32204, steps_26892);\n                bool index_certs_32207;\n                \n                if (!y_32206) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 48) ==\n                            -1) {\n                            global_failure_args[0] = i_32204;\n                            global_failure_args[1] = steps_26892;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float shortstep_arg_32208 = ((__g",
                   "lobal\n                                              float *) mem_33575)[i_32204 *\n                                                                  paths_26891 +\n                                                                  gtid_31945];\n                float shortstep_arg_32209 = ((__global\n                                              float *) mem_33578)[phys_tid_31946 +\n                                                                  i_32204 *\n                                                                  (num_groups_32198 *\n                                                                   segmap_group_sizze_32197)];\n                float y_32210 = 5.0e-2F - shortstep_arg_32209;\n                float x_32211 = 1.0e-2F * y_32210;\n                float x_32212 = dt_26905 * x_32211;\n                float x_32213 = res_26986 * shortstep_arg_32208;\n                float y_32214 = 1.0e-3F * x_32213;\n                float delta_r_32215 = x_32212 + y_32214;\n                float res_32216 = shortstep_arg_32209 + delta_r_32215;\n                int64_t i_32217 = add64(1, i_32204);\n                bool x_32218 = sle64(0, i_32217);\n                bool y_32219 = slt64(i_32217, steps_26892);\n                bool bounds_check_32220 = x_32218 && y_32219;\n                bool index_certs_32221;\n                \n                if (!bounds_check_32220) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 49) ==\n                            -1) {\n                            global_failure_args[0] = i_32217;\n                            global_failure_args[1] = steps_26892;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                ((__global float *) mem_33578)[phys_tid_31946 + i_32217 *\n                                               (num_groups_32198 *\n                                           ",
                   "     segmap_group_sizze_32197)] =\n                    res_32216;\n            }\n            for (int64_t i_34750 = 0; i_34750 < steps_26892; i_34750++) {\n                ((__global float *) mem_33593)[i_34750 * paths_26891 +\n                                               gtid_31945] = ((__global\n                                                               float *) mem_33578)[phys_tid_31946 +\n                                                                                   i_34750 *\n                                                                                   (num_groups_32198 *\n                                                                                    segmap_group_sizze_32197)];\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_32197\n}\n__kernel void testzisegmap_32044(__global int *global_failure,\n                                 int64_t paths_26891, int64_t steps_26892,\n                                 __global unsigned char *mem_33568, __global\n                                 unsigned char *mem_33572)\n{\n    #define segmap_group_sizze_32152 (testzisegmap_group_sizze_32047)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34735;\n    int32_t local_tid_34736;\n    int64_t group_sizze_34739;\n    int32_t wave_sizze_34738;\n    int32_t group_tid_34737;\n    \n    global_tid_34735 = get_global_id(0);\n    local_tid_34736 = get_local_id(0);\n    group_sizze_34739 = get_local_size(0);\n    wave_sizze_34738 = LOCKSTEP_WIDTH;\n    group_tid_34737 = get_group_id(0);\n    \n    int32_t phys_tid_32044;\n    \n    phys_tid_32044 = global_tid_34735;\n    \n    int64_t gtid_32042;\n    \n    gtid_32042 = squot64(sext_i32_i64(group_tid_34737) *\n                         segmap_group_sizze_32152 +\n                         sext_i32_i64(local_tid_34736), steps_26892",
                   ");\n    \n    int64_t gtid_32043;\n    \n    gtid_32043 = sext_i32_i64(group_tid_34737) * segmap_group_sizze_32152 +\n        sext_i32_i64(local_tid_34736) - squot64(sext_i32_i64(group_tid_34737) *\n                                                segmap_group_sizze_32152 +\n                                                sext_i32_i64(local_tid_34736),\n                                                steps_26892) * steps_26892;\n    if (slt64(gtid_32042, paths_26891) && slt64(gtid_32043, steps_26892)) {\n        int32_t unsign_arg_32155 = ((__global int32_t *) mem_33568)[gtid_32042];\n        int32_t res_32157 = sext_i64_i32(gtid_32043);\n        int32_t x_32158 = lshr32(res_32157, 16);\n        int32_t x_32159 = res_32157 ^ x_32158;\n        int32_t x_32160 = mul32(73244475, x_32159);\n        int32_t x_32161 = lshr32(x_32160, 16);\n        int32_t x_32162 = x_32160 ^ x_32161;\n        int32_t x_32163 = mul32(73244475, x_32162);\n        int32_t x_32164 = lshr32(x_32163, 16);\n        int32_t x_32165 = x_32163 ^ x_32164;\n        int32_t unsign_arg_32166 = unsign_arg_32155 ^ x_32165;\n        int32_t unsign_arg_32167 = mul32(48271, unsign_arg_32166);\n        int32_t unsign_arg_32168 = umod32(unsign_arg_32167, 2147483647);\n        int32_t unsign_arg_32169 = mul32(48271, unsign_arg_32168);\n        int32_t unsign_arg_32170 = umod32(unsign_arg_32169, 2147483647);\n        float res_32171 = uitofp_i32_f32(unsign_arg_32168);\n        float res_32172 = res_32171 / 2.1474836e9F;\n        float res_32173 = uitofp_i32_f32(unsign_arg_32170);\n        float res_32174 = res_32173 / 2.1474836e9F;\n        float res_32175;\n        \n        res_32175 = futrts_log32(res_32172);\n        \n        float res_32176 = -2.0F * res_32175;\n        float res_32177;\n        \n        res_32177 = futrts_sqrt32(res_32176);\n        \n        float res_32178 = 6.2831855F * res_32174;\n        float res_32179;\n        \n        res_32179 = futrts_cos32(res_32178);\n        \n        float res_32180 = res_32177 * res_32179;\n      ",
                   "  \n        ((__global float *) mem_33572)[gtid_32042 * steps_26892 + gtid_32043] =\n            res_32180;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_32152\n}\n__kernel void testzisegmap_32108(__global int *global_failure,\n                                 int64_t paths_26891, __global\n                                 unsigned char *mem_33568)\n{\n    #define segmap_group_sizze_32127 (testzisegmap_group_sizze_32110)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34730;\n    int32_t local_tid_34731;\n    int64_t group_sizze_34734;\n    int32_t wave_sizze_34733;\n    int32_t group_tid_34732;\n    \n    global_tid_34730 = get_global_id(0);\n    local_tid_34731 = get_local_id(0);\n    group_sizze_34734 = get_local_size(0);\n    wave_sizze_34733 = LOCKSTEP_WIDTH;\n    group_tid_34732 = get_group_id(0);\n    \n    int32_t phys_tid_32108;\n    \n    phys_tid_32108 = global_tid_34730;\n    \n    int64_t gtid_32107;\n    \n    gtid_32107 = sext_i32_i64(group_tid_34732) * segmap_group_sizze_32127 +\n        sext_i32_i64(local_tid_34731);\n    if (slt64(gtid_32107, paths_26891)) {\n        int32_t res_32131 = sext_i64_i32(gtid_32107);\n        int32_t x_32132 = lshr32(res_32131, 16);\n        int32_t x_32133 = res_32131 ^ x_32132;\n        int32_t x_32134 = mul32(73244475, x_32133);\n        int32_t x_32135 = lshr32(x_32134, 16);\n        int32_t x_32136 = x_32134 ^ x_32135;\n        int32_t x_32137 = mul32(73244475, x_32136);\n        int32_t x_32138 = lshr32(x_32137, 16);\n        int32_t x_32139 = x_32137 ^ x_32138;\n        int32_t unsign_arg_32140 = 777822902 ^ x_32139;\n        int32_t unsign_arg_32141 = mul32(48271, unsign_arg_32140);\n        int32_t unsign_arg_32142 = umod32(unsign_arg_32141, 2147483647);\n        \n        ((__global int32_t *) mem_33568)[gtid_32107] = unsign_arg_32142;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_32127\n}\n__k",
                   "ernel void testzisegmap_intragroup_30973(__global int *global_failure,\n                                            int failure_is_an_option, __global\n                                            int64_t *global_failure_args,\n                                            __local volatile\n                                            int64_t *mem_33562_backing_aligned_0,\n                                            __local volatile\n                                            int64_t *red_arr_mem_34714_backing_aligned_1,\n                                            __local volatile\n                                            int64_t *mem_33559_backing_aligned_2,\n                                            __local volatile\n                                            int64_t *mem_33544_backing_aligned_3,\n                                            __local volatile\n                                            int64_t *mem_33542_backing_aligned_4,\n                                            int64_t steps_26892, float dt_26905,\n                                            float sims_per_year_26971,\n                                            int64_t upper_bound_26985,\n                                            float res_26986,\n                                            int64_t computed_group_sizze_30836,\n                                            __global\n                                            unsigned char *res_mem_33489,\n                                            __global\n                                            unsigned char *res_mem_33490,\n                                            __global\n                                            unsigned char *res_mem_33491,\n                                            __global\n                                            unsigned char *res_mem_33492,\n                                            __global unsigned char *mem_33565)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __loca",
                   "l volatile char *restrict mem_33562_backing_4 = (__local volatile\n                                                           char *) mem_33562_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_34714_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_34714_backing_aligned_1;\n    __local volatile char *restrict mem_33559_backing_2 = (__local volatile\n                                                           char *) mem_33559_backing_aligned_2;\n    __local volatile char *restrict mem_33544_backing_1 = (__local volatile\n                                                           char *) mem_33544_backing_aligned_3;\n    __local volatile char *restrict mem_33542_backing_0 = (__local volatile\n                                                           char *) mem_33542_backing_aligned_4;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34704;\n    int32_t local_tid_34705;\n    int64_t group_sizze_34708;\n    int32_t wave_sizze_34707;\n    int32_t group_tid_34706;\n    \n    global_tid_34704 = get_global_id(0);\n    local_tid_34705 = get_local_id(0);\n    group_sizze_34708 = get_local_size(0);\n    wave_sizze_34707 = LOCKSTEP_WIDTH;\n    group_tid_34706 = get_group_id(0);\n    \n    int32_t phys_tid_30973;\n    \n    phys_tid_30973 = group_tid_34706;\n    \n    int32_t ltid_pre_34709;\n    \n    ltid_pre_34709 = local_tid_34705;\n    \n    int32_t ltid_pre_34710;\n    \n    ltid_pre_34710 = squot32(local_tid_34705, 45);\n    \n    int32_t ltid_pre_34711;\n    \n    ltid_pre_34711 = local_tid_34705 - squot32(local_tid_34705, 45) * 45;\n    \n    int64_t gtid_30834;\n    \n    gtid_30834 = sext_i32_i64(group_tid_34706);\n    \n    int32_t res_31316;\n    \n    res_31316 = sext_i64_i32(gtid_30834);\n    \n    int32_t x_31317 = lshr32",
                   "(res_31316, 16);\n    int32_t x_31318 = res_31316 ^ x_31317;\n    int32_t x_31319 = mul32(73244475, x_31318);\n    int32_t x_31320 = lshr32(x_31319, 16);\n    int32_t x_31321 = x_31319 ^ x_31320;\n    int32_t x_31322 = mul32(73244475, x_31321);\n    int32_t x_31323 = lshr32(x_31322, 16);\n    int32_t x_31324 = x_31322 ^ x_31323;\n    int32_t unsign_arg_31325 = 777822902 ^ x_31324;\n    int32_t unsign_arg_31326 = mul32(48271, unsign_arg_31325);\n    int32_t unsign_arg_31327 = umod32(unsign_arg_31326, 2147483647);\n    __local char *mem_33542;\n    \n    mem_33542 = (__local char *) mem_33542_backing_0;\n    \n    int64_t gtid_30837 = sext_i32_i64(ltid_pre_34709);\n    int32_t phys_tid_30838 = local_tid_34705;\n    \n    if (slt64(gtid_30837, steps_26892)) {\n        int32_t res_31330 = sext_i64_i32(gtid_30837);\n        int32_t x_31331 = lshr32(res_31330, 16);\n        int32_t x_31332 = res_31330 ^ x_31331;\n        int32_t x_31333 = mul32(73244475, x_31332);\n        int32_t x_31334 = lshr32(x_31333, 16);\n        int32_t x_31335 = x_31333 ^ x_31334;\n        int32_t x_31336 = mul32(73244475, x_31335);\n        int32_t x_31337 = lshr32(x_31336, 16);\n        int32_t x_31338 = x_31336 ^ x_31337;\n        int32_t unsign_arg_31339 = unsign_arg_31327 ^ x_31338;\n        int32_t unsign_arg_31340 = mul32(48271, unsign_arg_31339);\n        int32_t unsign_arg_31341 = umod32(unsign_arg_31340, 2147483647);\n        int32_t unsign_arg_31342 = mul32(48271, unsign_arg_31341);\n        int32_t unsign_arg_31343 = umod32(unsign_arg_31342, 2147483647);\n        float res_31344 = uitofp_i32_f32(unsign_arg_31341);\n        float res_31345 = res_31344 / 2.1474836e9F;\n        float res_31346 = uitofp_i32_f32(unsign_arg_31343);\n        float res_31347 = res_31346 / 2.1474836e9F;\n        float res_31348;\n        \n        res_31348 = futrts_log32(res_31345);\n        \n        float res_31349 = -2.0F * res_31348;\n        float res_31350;\n        \n        res_31350 = futrts_sqrt32(res_31349);\n        \n        float res_31351 ",
                   "= 6.2831855F * res_31347;\n        float res_31352;\n        \n        res_31352 = futrts_cos32(res_31351);\n        \n        float res_31353 = res_31350 * res_31352;\n        \n        ((__local float *) mem_33542)[gtid_30837] = res_31353;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local char *mem_33544;\n    \n    mem_33544 = (__local char *) mem_33544_backing_1;\n    for (int64_t i_34712 = 0; i_34712 < sdiv_up64(steps_26892 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_30836);\n         i_34712++) {\n        ((__local float *) mem_33544)[i_34712 * computed_group_sizze_30836 +\n                                      sext_i32_i64(local_tid_34705)] = 5.0e-2F;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_31356 = 0; i_31356 < upper_bound_26985; i_31356++) {\n        bool y_31358 = slt64(i_31356, steps_26892);\n        bool index_certs_31359;\n        \n        if (!y_31358) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 44) == -1) {\n                    global_failure_args[0] = i_31356;\n                    global_failure_args[1] = steps_26892;\n                    ;\n                }\n                local_failure = true;\n                goto error_1;\n            }\n        }\n        \n        float shortstep_arg_31360 = ((__local float *) mem_33542)[i_31356];\n        float shortstep_arg_31361 = ((__local float *) mem_33544)[i_31356];\n        float y_31362 = 5.0e-2F - shortstep_arg_31361;\n        float x_31363 = 1.0e-2F * y_31362;\n        float x_31364 = dt_26905 * x_31363;\n        float x_31365 = res_26986 * shortstep_arg_31360;\n        float y_31366 = 1.0e-3F * x_31365;\n        float delta_r_31367 = x_31364 + y_31366;\n        float res_31368 = shortstep_arg_31361 + delta_r_31367;\n        int64_t i_31369 = add64(1, i_31356);\n        bool x_31370 = sle64(0, i_31369);\n        bool y_31371 = slt64(i_31369, steps_26892);\n        b",
                   "ool bounds_check_31372 = x_31370 && y_31371;\n        bool index_certs_31373;\n        \n        if (!bounds_check_31372) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 45) == -1) {\n                    global_failure_args[0] = i_31369;\n                    global_failure_args[1] = steps_26892;\n                    ;\n                }\n                local_failure = true;\n                goto error_1;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34705 == 0) {\n            ((__local float *) mem_33544)[i_31369] = res_31368;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    __local char *mem_33559;\n    \n    mem_33559 = (__local char *) mem_33559_backing_2;\n    \n    int64_t gtid_30869 = sext_i32_i64(ltid_pre_34710);\n    int64_t gtid_30870 = sext_i32_i64(ltid_pre_34711);\n    int32_t phys_tid_30871 = local_tid_34705;\n    __local char *red_arr_mem_34714;\n    \n    red_arr_mem_34714 = (__local char *) red_arr_mem_34714_backing_3;\n    if (slt64(gtid_30869, steps_26892) && slt64(gtid_30870, 45)) {\n        int64_t convop_x_32577 = add64(1, gtid_30869);\n        float binop_x_32578 = sitofp_i64_f32(convop_x_32577);\n        float index_primexp_32579 = binop_x_32578 / sims_per_year_26971;\n        int64_t x_31383 = ((__global int64_t *) res_mem_33491)[gtid_30870];\n        float x_31384 = ((__global float *) res_mem_33492)[gtid_30870];\n        int64_t i64_arg_31385 = sub64(x_31383, 1);\n        float res_31386 = sitofp_i64_f32(i64_arg_31385);\n        float y_31387 = x_31384 * res_31386;\n        bool cond_31388 = y_31387 < index_primexp_32579;\n        float ceil_arg_31389 = index_primexp_32579 / x_31384;\n        float res_31390;\n        \n        res_31390 = futrts_ceil32(ceil_arg_31389);\n        \n        int64_t res_31391 = fptosi_f32_i64(res_31390);\n        int64_t remaining_31392 = sub64(x_31383, res_31391);\n        float res_31393;\n        \n        if (cond_31388) {\n            res_31393 = 0.0F;\n       ",
                   " } else {\n            float x_31379 = ((__local float *) mem_33544)[gtid_30869];\n            float x_31381 = ((__global float *) res_mem_33489)[gtid_30870];\n            float x_31382 = ((__global float *) res_mem_33490)[gtid_30870];\n            float nextpayment_31394 = x_31384 * res_31390;\n            bool bounds_invalid_upwards_31395 = slt64(remaining_31392, 1);\n            bool valid_31396 = !bounds_invalid_upwards_31395;\n            bool range_valid_c_31397;\n            \n            if (!valid_31396) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 46) ==\n                        -1) {\n                        global_failure_args[0] = 1;\n                        global_failure_args[1] = 2;\n                        global_failure_args[2] = remaining_31392;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_1;\n                }\n            }\n            \n            float y_31399 = nextpayment_31394 - index_primexp_32579;\n            float negate_arg_31400 = 1.0e-2F * y_31399;\n            float exp_arg_31401 = 0.0F - negate_arg_31400;\n            float res_31402 = fpow32(2.7182817F, exp_arg_31401);\n            float x_31403 = 1.0F - res_31402;\n            float B_31404 = x_31403 / 1.0e-2F;\n            float x_31405 = B_31404 - nextpayment_31394;\n            float x_31406 = x_31405 + index_primexp_32579;\n            float x_31407 = 4.4999997e-6F * x_31406;\n            float A1_31408 = x_31407 / 1.0e-4F;\n            float y_31409 = fpow32(B_31404, 2.0F);\n            float x_31410 = 1.0000001e-6F * y_31409;\n            float A2_31411 = x_31410 / 4.0e-2F;\n            float exp_arg_31412 = A1_31408 - A2_31411;\n            float res_31413 = fpow32(2.7182817F, exp_arg_31412);\n            float negate_arg_31414 = x_31379 * B_31404;\n            float exp_arg_31415 = 0.0F - negate_arg_31414;\n            float res_31416 = fpow32(2.7182817F, exp_arg_31415);\n            f",
                   "loat res_31417 = res_31413 * res_31416;\n            bool y_31418 = slt64(0, remaining_31392);\n            bool index_certs_31419;\n            \n            if (!y_31418) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 47) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = remaining_31392;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_1;\n                }\n            }\n            \n            float binop_y_31420 = sitofp_i64_f32(remaining_31392);\n            float binop_y_31421 = x_31384 * binop_y_31420;\n            float index_primexp_31422 = nextpayment_31394 + binop_y_31421;\n            float y_31423 = index_primexp_31422 - index_primexp_32579;\n            float negate_arg_31424 = 1.0e-2F * y_31423;\n            float exp_arg_31425 = 0.0F - negate_arg_31424;\n            float res_31426 = fpow32(2.7182817F, exp_arg_31425);\n            float x_31427 = 1.0F - res_31426;\n            float B_31428 = x_31427 / 1.0e-2F;\n            float x_31429 = B_31428 - index_primexp_31422;\n            float x_31430 = x_31429 + index_primexp_32579;\n            float x_31431 = 4.4999997e-6F * x_31430;\n            float A1_31432 = x_31431 / 1.0e-4F;\n            float y_31433 = fpow32(B_31428, 2.0F);\n            float x_31434 = 1.0000001e-6F * y_31433;\n            float A2_31435 = x_31434 / 4.0e-2F;\n            float exp_arg_31436 = A1_31432 - A2_31435;\n            float res_31437 = fpow32(2.7182817F, exp_arg_31436);\n            float negate_arg_31438 = x_31379 * B_31428;\n            float exp_arg_31439 = 0.0F - negate_arg_31438;\n            float res_31440 = fpow32(2.7182817F, exp_arg_31439);\n            float res_31441 = res_31437 * res_31440;\n            float res_31442;\n            float redout_32574 = 0.0F;\n            \n            for (int64_t i_32575 = 0; i_32575 < remaining_31392; i_",
                   "32575++) {\n                int64_t index_primexp_32618 = add64(1, i_32575);\n                float res_31447 = sitofp_i64_f32(index_primexp_32618);\n                float res_31448 = x_31384 * res_31447;\n                float res_31449 = nextpayment_31394 + res_31448;\n                float y_31450 = res_31449 - index_primexp_32579;\n                float negate_arg_31451 = 1.0e-2F * y_31450;\n                float exp_arg_31452 = 0.0F - negate_arg_31451;\n                float res_31453 = fpow32(2.7182817F, exp_arg_31452);\n                float x_31454 = 1.0F - res_31453;\n                float B_31455 = x_31454 / 1.0e-2F;\n                float x_31456 = B_31455 - res_31449;\n                float x_31457 = x_31456 + index_primexp_32579;\n                float x_31458 = 4.4999997e-6F * x_31457;\n                float A1_31459 = x_31458 / 1.0e-4F;\n                float y_31460 = fpow32(B_31455, 2.0F);\n                float x_31461 = 1.0000001e-6F * y_31460;\n                float A2_31462 = x_31461 / 4.0e-2F;\n                float exp_arg_31463 = A1_31459 - A2_31462;\n                float res_31464 = fpow32(2.7182817F, exp_arg_31463);\n                float negate_arg_31465 = x_31379 * B_31455;\n                float exp_arg_31466 = 0.0F - negate_arg_31465;\n                float res_31467 = fpow32(2.7182817F, exp_arg_31466);\n                float res_31468 = res_31464 * res_31467;\n                float res_31445 = res_31468 + redout_32574;\n                float redout_tmp_34716 = res_31445;\n                \n                redout_32574 = redout_tmp_34716;\n            }\n            res_31442 = redout_32574;\n            \n            float x_31469 = res_31417 - res_31441;\n            float x_31470 = x_31381 * x_31384;\n            float y_31471 = res_31442 * x_31470;\n            float y_31472 = x_31469 - y_31471;\n            float res_31473 = x_31382 * y_31472;\n            \n            res_31393 = res_31473;\n        }\n        ((__local float *) red_arr_mem_34714)[gtid_30869 * 45 + g",
                   "tid_30870] =\n            res_31393;\n    }\n    \n  error_1:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t dims_flat_34717;\n    \n    dims_flat_34717 = steps_26892 * 45;\n    \n    float x_31376;\n    float x_31377;\n    float x_34719;\n    float x_34720;\n    bool ltid_in_bounds_34722;\n    \n    ltid_in_bounds_34722 = slt64(sext_i32_i64(local_tid_34705), steps_26892 *\n                                 45);\n    \n    int32_t skip_threads_34723;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_34722) {\n            x_31377 = ((volatile __local\n                        float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)];\n            if ((local_tid_34705 - squot32(local_tid_34705, 32) * 32) == 0) {\n                x_31376 = x_31377;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_34723 = 1;\n        while (slt32(skip_threads_34723, 32)) {\n            if (sle32(skip_threads_34723, local_tid_34705 -\n                      squot32(local_tid_34705, 32) * 32) &&\n                ltid_in_bounds_34722) {\n                // read operands\n                {\n                    x_31376 = ((volatile __local\n                                float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705) -\n                                                            sext_i32_i64(skip_threads_34723)];\n                }\n                // perform operation\n                {\n                    bool inactive_34724 =\n                         slt64(srem64(sext_i32_i64(local_tid_34705), 45),\n                               sext_i32_i64(local_tid_34705) -\n                               sext_i32_i64(local_tid_34705 -\n                               skip_threads_34723));\n                    \n                    if (inactive_34724) {\n                        x_31376 = x_31377;\n                    }\n                    if (!inactive_34724) {\n            ",
                   "            float res_31378 = x_31376 + x_31377;\n                        \n                        x_31376 = res_31378;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_34707, skip_threads_34723)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_34723, local_tid_34705 -\n                      squot32(local_tid_34705, 32) * 32) &&\n                ltid_in_bounds_34722) {\n                // write result\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                        x_31376;\n                    x_31377 = x_31376;\n                }\n            }\n            if (sle32(wave_sizze_34707, skip_threads_34723)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_34723 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_34705 - squot32(local_tid_34705, 32) * 32) == 31 &&\n            ltid_in_bounds_34722) {\n            ((volatile __local\n              float *) red_arr_mem_34714)[sext_i32_i64(squot32(local_tid_34705,\n                                                               32))] = x_31376;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_34725;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_34705, 32) == 0 && ltid_in_bounds_34722) {\n                x_34720 = ((volatile __local\n                            float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)];\n                if ((local_tid_34705 - squot32(local_tid_34705, 32) * 32) ==\n                    0) {\n                    x_34719 = x_34720;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n",
                   "        {\n            skip_threads_34725 = 1;\n            while (slt32(skip_threads_34725, 32)) {\n                if (sle32(skip_threads_34725, local_tid_34705 -\n                          squot32(local_tid_34705, 32) * 32) &&\n                    (squot32(local_tid_34705, 32) == 0 &&\n                     ltid_in_bounds_34722)) {\n                    // read operands\n                    {\n                        x_34719 = ((volatile __local\n                                    float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705) -\n                                                                sext_i32_i64(skip_threads_34725)];\n                    }\n                    // perform operation\n                    {\n                        bool inactive_34726 =\n                             slt64(srem64(sext_i32_i64(local_tid_34705 * 32 +\n                                          32 - 1), 45),\n                                   sext_i32_i64(local_tid_34705 * 32 + 32 - 1) -\n                                   sext_i32_i64((local_tid_34705 -\n                                                 skip_threads_34725) * 32 + 32 -\n                                   1));\n                        \n                        if (inactive_34726) {\n                            x_34719 = x_34720;\n                        }\n                        if (!inactive_34726) {\n                            float res_34721 = x_34719 + x_34720;\n                            \n                            x_34719 = res_34721;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_34707, skip_threads_34725)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34725, local_tid_34705 -\n                          squot32(local_tid_34705, 32) * 32) &&\n                    (squot32(local_tid_34705, 32) == 0 &&\n                     ltid_in_bounds_34722)) {\n                    // write result\n                    {\n    ",
                   "                    ((volatile __local\n                          float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                            x_34719;\n                        x_34720 = x_34719;\n                    }\n                }\n                if (sle32(wave_sizze_34707, skip_threads_34725)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34725 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_34705, 32) == 0 || !ltid_in_bounds_34722)) {\n            // read operands\n            {\n                x_31377 = x_31376;\n                x_31376 = ((__local\n                            float *) red_arr_mem_34714)[sext_i32_i64(squot32(local_tid_34705,\n                                                                             32)) -\n                                                        1];\n            }\n            // perform operation\n            {\n                bool inactive_34727 =\n                     slt64(srem64(sext_i32_i64(local_tid_34705), 45),\n                           sext_i32_i64(local_tid_34705) -\n                           sext_i32_i64(squot32(local_tid_34705, 32) * 32 - 1));\n                \n                if (inactive_34727) {\n                    x_31376 = x_31377;\n                }\n                if (!inactive_34727) {\n                    float res_31378 = x_31376 + x_31377;\n                    \n                    x_31376 = res_31378;\n                }\n            }\n            // write final result\n            {\n                ((__local\n                  float *) red_arr_mem_34714)[sext_i32_i64(local_tid_34705)] =\n                    x_31376;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_34705, 32) == 0) {\n            ((__local\n              float *) red_arr_mem_34714)[sext_i32",
                   "_i64(local_tid_34705)] =\n                x_31377;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_34728 = 0; i_34728 < sdiv_up64(steps_26892 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_30836);\n         i_34728++) {\n        ((__local float *) mem_33559)[i_34728 * computed_group_sizze_30836 +\n                                      sext_i32_i64(local_tid_34705)] = ((__local\n                                                                         float *) red_arr_mem_34714)[(i_34728 *\n                                                                                                      computed_group_sizze_30836 +\n                                                                                                      sext_i32_i64(local_tid_34705)) *\n                                                                                                     45 +\n                                                                                                     44];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local char *mem_33562;\n    \n    mem_33562 = (__local char *) mem_33562_backing_4;\n    \n    int64_t gtid_30865 = sext_i32_i64(ltid_pre_34709);\n    int32_t phys_tid_30866 = local_tid_34705;\n    \n    if (slt64(gtid_30865, steps_26892)) {\n        float res_31475 = ((__local float *) mem_33559)[gtid_30865];\n        float res_31476 = fmax32(0.0F, res_31475);\n        \n        ((__local float *) mem_33562)[gtid_30865] = res_31476;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    for (int64_t i_34729 = 0; i_34729 < sdiv_up64(steps_26892 -\n                                                  sext_i32_i64(local_tid_34705),\n                                                  computed_group_sizze_30836);\n         i_34729++) {\n        ((__global float *) mem_33565)[gtid_30834 * steps_26892 + (i_34729",
                   " *\n                                                                   computed_group_sizze_30836 +\n                                                                   sext_i32_i64(local_tid_34705))] =\n            ((__local float *) mem_33562)[i_34729 * computed_group_sizze_30836 +\n                                          sext_i32_i64(local_tid_34705)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_4:\n    return;\n}\n__kernel void testzisegmap_intragroup_31496(__global int *global_failure,\n                                            int failure_is_an_option, __global\n                                            int64_t *global_failure_args,\n                                            __local volatile\n                                            int64_t *red_arr_mem_34771_backing_aligned_0,\n                                            int64_t paths_26891,\n                                            int64_t steps_26892,\n                                            float sims_per_year_26971, __global\n                                            unsigned char *res_mem_33489,\n                                            __global\n                                            unsigned char *res_mem_33490,\n                                            __global\n                                            unsigned char *res_mem_33491,\n                                            __global\n                                            unsigned char *res_mem_33492,\n                                            __global unsigned char *mem_33593,\n                                            __global unsigned char *mem_33656)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34771_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_34771_backing_aligned_0;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *",
                   "global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34765;\n    int32_t local_tid_34766;\n    int64_t group_sizze_34769;\n    int32_t wave_sizze_34768;\n    int32_t group_tid_34767;\n    \n    global_tid_34765 = get_global_id(0);\n    local_tid_34766 = get_local_id(0);\n    group_sizze_34769 = get_local_size(0);\n    wave_sizze_34768 = LOCKSTEP_WIDTH;\n    group_tid_34767 = get_group_id(0);\n    \n    int32_t phys_tid_31496;\n    \n    phys_tid_31496 = group_tid_34767;\n    \n    int32_t ltid_pre_34770;\n    \n    ltid_pre_34770 = local_tid_34766;\n    \n    int64_t gtid_31489;\n    \n    gtid_31489 = squot64(sext_i32_i64(group_tid_34767), steps_26892);\n    \n    int64_t gtid_31490;\n    \n    gtid_31490 = sext_i32_i64(group_tid_34767) -\n        squot64(sext_i32_i64(group_tid_34767), steps_26892) * steps_26892;\n    \n    float x_32342;\n    \n    x_32342 = ((__global float *) mem_33593)[gtid_31490 * paths_26891 +\n                                             gtid_31489];\n    \n    int64_t convop_x_32596 = add64(1, gtid_31490);\n    float binop_x_32597 = sitofp_i64_f32(convop_x_32596);\n    float index_primexp_32598 = binop_x_32597 / sims_per_year_26971;\n    float res_32344;\n    int64_t gtid_31494 = sext_i32_i64(ltid_pre_34770);\n    int32_t phys_tid_31495 = local_tid_34766;\n    __local char *red_arr_mem_34771;\n    \n    red_arr_mem_34771 = (__local char *) red_arr_mem_34771_backing_0;\n    if (slt64(gtid_31494, 45)) {\n        int64_t x_32350 = ((__global int64_t *) res_mem_33491)[gtid_31494];\n        float x_32351 = ((__global float *) res_mem_33492)[gtid_31494];\n        int64_t i64_arg_32352 = sub64(x_32350, 1);\n        float res_32353 = sitofp_i64_f32(i64_arg_32352);\n        float y_32354 = x_32351 * res_32353;\n        bool cond_32355 = y_32354 < index_primexp_32598;\n        float ceil_arg_32356 = index_primexp_32598 / x_32351;\n        float res_32357;\n        \n        res_32357 = futrts",
                   "_ceil32(ceil_arg_32356);\n        \n        int64_t res_32358 = fptosi_f32_i64(res_32357);\n        int64_t remaining_32359 = sub64(x_32350, res_32358);\n        float res_32360;\n        \n        if (cond_32355) {\n            res_32360 = 0.0F;\n        } else {\n            float x_32348 = ((__global float *) res_mem_33489)[gtid_31494];\n            float x_32349 = ((__global float *) res_mem_33490)[gtid_31494];\n            float nextpayment_32361 = x_32351 * res_32357;\n            bool bounds_invalid_upwards_32362 = slt64(remaining_32359, 1);\n            bool valid_32363 = !bounds_invalid_upwards_32362;\n            bool range_valid_c_32364;\n            \n            if (!valid_32363) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 54) ==\n                        -1) {\n                        global_failure_args[0] = 1;\n                        global_failure_args[1] = 2;\n                        global_failure_args[2] = remaining_32359;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            float y_32366 = nextpayment_32361 - index_primexp_32598;\n            float negate_arg_32367 = 1.0e-2F * y_32366;\n            float exp_arg_32368 = 0.0F - negate_arg_32367;\n            float res_32369 = fpow32(2.7182817F, exp_arg_32368);\n            float x_32370 = 1.0F - res_32369;\n            float B_32371 = x_32370 / 1.0e-2F;\n            float x_32372 = B_32371 - nextpayment_32361;\n            float x_32373 = x_32372 + index_primexp_32598;\n            float x_32374 = 4.4999997e-6F * x_32373;\n            float A1_32375 = x_32374 / 1.0e-4F;\n            float y_32376 = fpow32(B_32371, 2.0F);\n            float x_32377 = 1.0000001e-6F * y_32376;\n            float A2_32378 = x_32377 / 4.0e-2F;\n            float exp_arg_32379 = A1_32375 - A2_32378;\n            float res_32380 = fpow32(2.7182817F, exp_arg_32379);\n            float",
                   " negate_arg_32381 = x_32342 * B_32371;\n            float exp_arg_32382 = 0.0F - negate_arg_32381;\n            float res_32383 = fpow32(2.7182817F, exp_arg_32382);\n            float res_32384 = res_32380 * res_32383;\n            bool y_32385 = slt64(0, remaining_32359);\n            bool index_certs_32386;\n            \n            if (!y_32385) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 55) ==\n                        -1) {\n                        global_failure_args[0] = 0;\n                        global_failure_args[1] = remaining_32359;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            float binop_y_32387 = sitofp_i64_f32(remaining_32359);\n            float binop_y_32388 = x_32351 * binop_y_32387;\n            float index_primexp_32389 = nextpayment_32361 + binop_y_32388;\n            float y_32390 = index_primexp_32389 - index_primexp_32598;\n            float negate_arg_32391 = 1.0e-2F * y_32390;\n            float exp_arg_32392 = 0.0F - negate_arg_32391;\n            float res_32393 = fpow32(2.7182817F, exp_arg_32392);\n            float x_32394 = 1.0F - res_32393;\n            float B_32395 = x_32394 / 1.0e-2F;\n            float x_32396 = B_32395 - index_primexp_32389;\n            float x_32397 = x_32396 + index_primexp_32598;\n            float x_32398 = 4.4999997e-6F * x_32397;\n            float A1_32399 = x_32398 / 1.0e-4F;\n            float y_32400 = fpow32(B_32395, 2.0F);\n            float x_32401 = 1.0000001e-6F * y_32400;\n            float A2_32402 = x_32401 / 4.0e-2F;\n            float exp_arg_32403 = A1_32399 - A2_32402;\n            float res_32404 = fpow32(2.7182817F, exp_arg_32403);\n            float negate_arg_32405 = x_32342 * B_32395;\n            float exp_arg_32406 = 0.0F - negate_arg_32405;\n            float res_32407 = fpow32(2.7182817F, exp_arg_32406);\n            float res_324",
                   "08 = res_32404 * res_32407;\n            float res_32409;\n            float redout_32593 = 0.0F;\n            \n            for (int64_t i_32594 = 0; i_32594 < remaining_32359; i_32594++) {\n                int64_t index_primexp_32622 = add64(1, i_32594);\n                float res_32414 = sitofp_i64_f32(index_primexp_32622);\n                float res_32415 = x_32351 * res_32414;\n                float res_32416 = nextpayment_32361 + res_32415;\n                float y_32417 = res_32416 - index_primexp_32598;\n                float negate_arg_32418 = 1.0e-2F * y_32417;\n                float exp_arg_32419 = 0.0F - negate_arg_32418;\n                float res_32420 = fpow32(2.7182817F, exp_arg_32419);\n                float x_32421 = 1.0F - res_32420;\n                float B_32422 = x_32421 / 1.0e-2F;\n                float x_32423 = B_32422 - res_32416;\n                float x_32424 = x_32423 + index_primexp_32598;\n                float x_32425 = 4.4999997e-6F * x_32424;\n                float A1_32426 = x_32425 / 1.0e-4F;\n                float y_32427 = fpow32(B_32422, 2.0F);\n                float x_32428 = 1.0000001e-6F * y_32427;\n                float A2_32429 = x_32428 / 4.0e-2F;\n                float exp_arg_32430 = A1_32426 - A2_32429;\n                float res_32431 = fpow32(2.7182817F, exp_arg_32430);\n                float negate_arg_32432 = x_32342 * B_32422;\n                float exp_arg_32433 = 0.0F - negate_arg_32432;\n                float res_32434 = fpow32(2.7182817F, exp_arg_32433);\n                float res_32435 = res_32431 * res_32434;\n                float res_32412 = res_32435 + redout_32593;\n                float redout_tmp_34773 = res_32412;\n                \n                redout_32593 = redout_tmp_34773;\n            }\n            res_32409 = redout_32593;\n            \n            float x_32436 = res_32384 - res_32408;\n            float x_32437 = x_32348 * x_32351;\n            float y_32438 = res_32409 * x_32437;\n            float y_32439 = x_32436 - y_324",
                   "38;\n            float res_32440 = x_32349 * y_32439;\n            \n            res_32360 = res_32440;\n        }\n        ((__local float *) red_arr_mem_34771)[gtid_31494] = res_32360;\n    }\n    \n  error_0:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34774;\n    int32_t skip_waves_34775;\n    \n    skip_waves_34775 = 1;\n    \n    float x_32345;\n    float x_32346;\n    \n    offset_34774 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34766, 45)) {\n            x_32345 = ((__local\n                        float *) red_arr_mem_34771)[sext_i32_i64(local_tid_34766 +\n                                                    offset_34774)];\n        }\n    }\n    offset_34774 = 1;\n    while (slt32(offset_34774, wave_sizze_34768)) {\n        if (slt32(local_tid_34766 + offset_34774, 45) && ((local_tid_34766 -\n                                                           squot32(local_tid_34766,\n                                                                   wave_sizze_34768) *\n                                                           wave_sizze_34768) &\n                                                          (2 * offset_34774 -\n                                                           1)) == 0) {\n            // read array element\n            {\n                x_32346 = ((volatile __local\n                            float *) red_arr_mem_34771)[sext_i32_i64(local_tid_34766 +\n                                                        offset_34774)];\n            }\n            // apply reduction operation\n            {\n                float res_32347 = x_32345 + x_32346;\n                \n                x_32345 = res_32347;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_34771)[sext_i32_i64(local_tid_34766)] =\n                    x_32345;\n            }\n        }\n        offs",
                   "et_34774 *= 2;\n    }\n    while (slt32(skip_waves_34775, squot32(45 + wave_sizze_34768 - 1,\n                                           wave_sizze_34768))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34774 = skip_waves_34775 * wave_sizze_34768;\n        if (slt32(local_tid_34766 + offset_34774, 45) && ((local_tid_34766 -\n                                                           squot32(local_tid_34766,\n                                                                   wave_sizze_34768) *\n                                                           wave_sizze_34768) ==\n                                                          0 &&\n                                                          (squot32(local_tid_34766,\n                                                                   wave_sizze_34768) &\n                                                           (2 *\n                                                            skip_waves_34775 -\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_32346 = ((__local\n                            float *) red_arr_mem_34771)[sext_i32_i64(local_tid_34766 +\n                                                        offset_34774)];\n            }\n            // apply reduction operation\n            {\n                float res_32347 = x_32345 + x_32346;\n                \n                x_32345 = res_32347;\n            }\n            // write result of operation\n            {\n                ((__local\n                  float *) red_arr_mem_34771)[sext_i32_i64(local_tid_34766)] =\n                    x_32345;\n            }\n        }\n        skip_waves_34775 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    res_32344 = ((__local float *) red_arr_mem_34771)[0];\n    \n    float res_32441 = fmax32(0.0F, res_32344);\n    \n    if (local_tid_34766 == 0) {\n        ((__global float *) mem_33656)[gtid_31489 * steps_26892 + gtid_31490] =\n            res_32441;\n ",
                   "   }\n    \n  error_2:\n    return;\n}\n__kernel void testzisegmap_intragroup_32669(__global int *global_failure,\n                                            int failure_is_an_option, __global\n                                            int64_t *global_failure_args,\n                                            __local volatile\n                                            int64_t *mem_33637_backing_aligned_0,\n                                            __local volatile\n                                            int64_t *mem_33635_backing_aligned_1,\n                                            __local volatile\n                                            int64_t *mem_33633_backing_aligned_2,\n                                            __local volatile\n                                            int64_t *mem_33631_backing_aligned_3,\n                                            __local volatile\n                                            int64_t *mem_33618_backing_aligned_4,\n                                            __local volatile\n                                            int64_t *mem_33616_backing_aligned_5,\n                                            __local volatile\n                                            int64_t *mem_33614_backing_aligned_6,\n                                            __local volatile\n                                            int64_t *mem_33612_backing_aligned_7,\n                                            int64_t paths_26891,\n                                            int64_t steps_26892,\n                                            float sims_per_year_26971,\n                                            int64_t computed_group_sizze_32670,\n                                            int64_t ldim_32671,\n                                            int64_t num_whole_tiles_32694,\n                                            int64_t residual_input_33078,\n                                            unsigned char cond_33079, __global\n                     ",
                   "                       unsigned char *res_mem_33489,\n                                            __global\n                                            unsigned char *res_mem_33490,\n                                            __global\n                                            unsigned char *res_mem_33491,\n                                            __global\n                                            unsigned char *res_mem_33492,\n                                            __global unsigned char *mem_33593,\n                                            __global unsigned char *mem_33651)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict mem_33637_backing_11 = (__local volatile\n                                                            char *) mem_33637_backing_aligned_0;\n    __local volatile char *restrict mem_33635_backing_10 = (__local volatile\n                                                            char *) mem_33635_backing_aligned_1;\n    __local volatile char *restrict mem_33633_backing_9 = (__local volatile\n                                                           char *) mem_33633_backing_aligned_2;\n    __local volatile char *restrict mem_33631_backing_8 = (__local volatile\n                                                           char *) mem_33631_backing_aligned_3;\n    __local volatile char *restrict mem_33618_backing_3 = (__local volatile\n                                                           char *) mem_33618_backing_aligned_4;\n    __local volatile char *restrict mem_33616_backing_2 = (__local volatile\n                                                           char *) mem_33616_backing_aligned_5;\n    __local volatile char *restrict mem_33614_backing_1 = (__local volatile\n                                                           char *) mem_33614_backing_aligned_6;\n    __local volatile char *restrict mem_33612_backing_0 = (__local volatile\n                                ",
                   "                           char *) mem_33612_backing_aligned_7;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34751;\n    int32_t local_tid_34752;\n    int64_t group_sizze_34755;\n    int32_t wave_sizze_34754;\n    int32_t group_tid_34753;\n    \n    global_tid_34751 = get_global_id(0);\n    local_tid_34752 = get_local_id(0);\n    group_sizze_34755 = get_local_size(0);\n    wave_sizze_34754 = LOCKSTEP_WIDTH;\n    group_tid_34753 = get_group_id(0);\n    \n    int32_t gid_flat_32669;\n    \n    gid_flat_32669 = group_tid_34753;\n    \n    int32_t ltid_pre_34756;\n    \n    ltid_pre_34756 = local_tid_34752;\n    \n    int64_t gtid_31478;\n    \n    gtid_31478 = squot64(sext_i32_i64(group_tid_34753), ldim_32671);\n    \n    int64_t gid_32668;\n    \n    gid_32668 = sext_i32_i64(group_tid_34753) -\n        squot64(sext_i32_i64(group_tid_34753), ldim_32671) * ldim_32671;\n    \n    int64_t binop_x_32681;\n    \n    binop_x_32681 = gid_32668 * computed_group_sizze_32670;\n    \n    float mem_33597[1];\n    float mem_33599[1];\n    int64_t ltid_32673 = sext_i32_i64(ltid_pre_34756);\n    int32_t ltid_flat_32674 = local_tid_34752;\n    \n    if (slt64(ltid_32673, computed_group_sizze_32670)) {\n        int64_t gtid_32682 = ltid_32673 + binop_x_32681;\n        bool cond_32683 = slt64(gtid_32682, steps_26892);\n        float pre_32684;\n        float pre_32685;\n        \n        if (cond_32683) {\n            float x_32686 = ((__global float *) mem_33593)[gtid_32682 *\n                                                           paths_26891 +\n                                                           gtid_31478];\n            int64_t convop_x_32687 = add64(1, gtid_32682);\n            float binop_x_32688 = sitofp_i64_f32(convop_x_32687);\n            float index_primexp_32689 = binop_x_32688 / sims_per_year_2697",
                   "1;\n            \n            pre_32684 = x_32686;\n            pre_32685 = index_primexp_32689;\n        } else {\n            pre_32684 = 0.0F;\n            pre_32685 = 0.0F;\n        }\n        mem_33597[0] = pre_32684;\n        mem_33599[0] = pre_32685;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float mem_33602[1];\n    int64_t ltid_32695 = sext_i32_i64(ltid_pre_34756);\n    int32_t ltid_flat_32696 = local_tid_34752;\n    \n    if (slt64(ltid_32695, computed_group_sizze_32670)) {\n        mem_33602[0] = 0.0F;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local char *mem_33612;\n    \n    mem_33612 = (__local char *) mem_33612_backing_0;\n    \n    __local char *mem_33614;\n    \n    mem_33614 = (__local char *) mem_33614_backing_1;\n    \n    __local char *mem_33616;\n    \n    mem_33616 = (__local char *) mem_33616_backing_2;\n    \n    __local char *mem_33618;\n    \n    mem_33618 = (__local char *) mem_33618_backing_3;\n    \n    float accs_mem_33628[1];\n    float mem_param_33607[1];\n    \n    for (int32_t i_4 = 0; i_4 < 1; i_4++)\n        mem_param_33607[i_4] = mem_33602[i_4];\n    for (int64_t tile_id_32702 = 0; tile_id_32702 < num_whole_tiles_32694;\n         tile_id_32702++) {\n        int64_t binop_x_32859 = computed_group_sizze_32670 * tile_id_32702;\n        int64_t ltid_32703 = sext_i32_i64(ltid_pre_34756);\n        int32_t ltid_flat_32704 = local_tid_34752;\n        \n        if (slt64(ltid_32703, computed_group_sizze_32670)) {\n            int64_t j_32860 = ltid_32703 + binop_x_32859;\n            bool cond_32865 = slt64(j_32860, 45);\n            float pre_32866;\n            float pre_32867;\n            int64_t pre_32868;\n            float pre_32869;\n            \n            if (cond_32865) {\n                float tile_elem_32870 = ((__global\n                                          float *) res_mem_33489)[j_32860];\n                float tile_elem_32871 = ((__global\n                                          float *) res_mem_33490)[j_32860];\n                int64_t tile_elem_328",
                   "72 = ((__global\n                                            int64_t *) res_mem_33491)[j_32860];\n                float tile_elem_32873 = ((__global\n                                          float *) res_mem_33492)[j_32860];\n                \n                pre_32866 = tile_elem_32870;\n                pre_32867 = tile_elem_32871;\n                pre_32868 = tile_elem_32872;\n                pre_32869 = tile_elem_32873;\n            } else {\n                pre_32866 = 0.0F;\n                pre_32867 = 0.0F;\n                pre_32868 = 0;\n                pre_32869 = 0.0F;\n            }\n            ((__local float *) mem_33612)[ltid_32703] = pre_32866;\n            ((__local float *) mem_33614)[ltid_32703] = pre_32867;\n            ((__local int64_t *) mem_33616)[ltid_32703] = pre_32868;\n            ((__local float *) mem_33618)[ltid_32703] = pre_32869;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        float mem_33621[1];\n        int64_t ltid_32744 = sext_i32_i64(ltid_pre_34756);\n        int32_t ltid_flat_32745 = local_tid_34752;\n        \n        if (slt64(ltid_32744, computed_group_sizze_32670)) {\n            int64_t gtid_32880 = binop_x_32681 + ltid_32744;\n            float acc_32883 = mem_param_33607[0];\n            bool cond_32884 = slt64(gtid_32880, steps_26892);\n            float acc_32885;\n            \n            if (cond_32884) {\n                float x_32881 = mem_33597[0];\n                float index_primexp_32882 = mem_33599[0];\n                float x_32886;\n                float redout_33300 = acc_32883;\n                \n                for (int64_t i_33301 = 0; i_33301 < computed_group_sizze_32670;\n                     i_33301++) {\n                    int64_t x_32892 = ((__local int64_t *) mem_33616)[i_33301];\n                    float x_32893 = ((__local float *) mem_33618)[i_33301];\n                    int64_t i64_arg_32894 = sub64(x_32892, 1);\n                    float res_32895 = sitofp_i64_f32(i64_arg_32894);\n                    float y_32",
                   "896 = x_32893 * res_32895;\n                    bool cond_32897 = y_32896 < index_primexp_32882;\n                    float ceil_arg_32898 = index_primexp_32882 / x_32893;\n                    float res_32899;\n                    \n                    res_32899 = futrts_ceil32(ceil_arg_32898);\n                    \n                    int64_t res_32900 = fptosi_f32_i64(res_32899);\n                    int64_t remaining_32901 = sub64(x_32892, res_32900);\n                    float res_32902;\n                    \n                    if (cond_32897) {\n                        res_32902 = 0.0F;\n                    } else {\n                        float x_32890 = ((__local float *) mem_33612)[i_33301];\n                        float x_32891 = ((__local float *) mem_33614)[i_33301];\n                        float nextpayment_32903 = x_32893 * res_32899;\n                        bool bounds_invalid_upwards_32904 =\n                             slt64(remaining_32901, 1);\n                        bool valid_32905 = !bounds_invalid_upwards_32904;\n                        bool range_valid_c_32906;\n                        \n                        if (!valid_32905) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 50) == -1) {\n                                    global_failure_args[0] = 1;\n                                    global_failure_args[1] = 2;\n                                    global_failure_args[2] = remaining_32901;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_3;\n                            }\n                        }\n                        \n                        float y_32907 = nextpayment_32903 - index_primexp_32882;\n                        float negate_arg_32908 = 1.0e-2F * y_32907;\n                        float exp_arg_32909 = ",
                   "0.0F - negate_arg_32908;\n                        float res_32910 = fpow32(2.7182817F, exp_arg_32909);\n                        float x_32911 = 1.0F - res_32910;\n                        float B_32912 = x_32911 / 1.0e-2F;\n                        float x_32913 = B_32912 - nextpayment_32903;\n                        float x_32914 = index_primexp_32882 + x_32913;\n                        float x_32915 = 4.4999997e-6F * x_32914;\n                        float A1_32916 = x_32915 / 1.0e-4F;\n                        float y_32917 = fpow32(B_32912, 2.0F);\n                        float x_32918 = 1.0000001e-6F * y_32917;\n                        float A2_32919 = x_32918 / 4.0e-2F;\n                        float exp_arg_32920 = A1_32916 - A2_32919;\n                        float res_32921 = fpow32(2.7182817F, exp_arg_32920);\n                        float negate_arg_32922 = x_32881 * B_32912;\n                        float exp_arg_32923 = 0.0F - negate_arg_32922;\n                        float res_32924 = fpow32(2.7182817F, exp_arg_32923);\n                        float res_32925 = res_32921 * res_32924;\n                        bool y_32926 = slt64(0, remaining_32901);\n                        bool index_certs_32927;\n                        \n                        if (!y_32926) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 51) == -1) {\n                                    global_failure_args[0] = 0;\n                                    global_failure_args[1] = remaining_32901;\n                                    ;\n                                }\n                                local_failure = true;\n                                goto error_3;\n                            }\n                        }\n                        \n                        float binop_y_32928 = sitofp_i64_f32(remaining_32901);\n                        float binop_y_32929 = x_32893 * binop_y",
                   "_32928;\n                        float index_primexp_32930 = nextpayment_32903 +\n                              binop_y_32929;\n                        float y_32931 = index_primexp_32930 -\n                              index_primexp_32882;\n                        float negate_arg_32932 = 1.0e-2F * y_32931;\n                        float exp_arg_32933 = 0.0F - negate_arg_32932;\n                        float res_32934 = fpow32(2.7182817F, exp_arg_32933);\n                        float x_32935 = 1.0F - res_32934;\n                        float B_32936 = x_32935 / 1.0e-2F;\n                        float x_32937 = B_32936 - index_primexp_32930;\n                        float x_32938 = index_primexp_32882 + x_32937;\n                        float x_32939 = 4.4999997e-6F * x_32938;\n                        float A1_32940 = x_32939 / 1.0e-4F;\n                        float y_32941 = fpow32(B_32936, 2.0F);\n                        float x_32942 = 1.0000001e-6F * y_32941;\n                        float A2_32943 = x_32942 / 4.0e-2F;\n                        float exp_arg_32944 = A1_32940 - A2_32943;\n                        float res_32945 = fpow32(2.7182817F, exp_arg_32944);\n                        float negate_arg_32946 = x_32881 * B_32936;\n                        float exp_arg_32947 = 0.0F - negate_arg_32946;\n                        float res_32948 = fpow32(2.7182817F, exp_arg_32947);\n                        float res_32949 = res_32945 * res_32948;\n                        float res_32950;\n                        float redout_32952 = 0.0F;\n                        \n                        for (int64_t i_32951 = 0; i_32951 < remaining_32901;\n                             i_32951++) {\n                            int64_t index_primexp_32953 = add64(1, i_32951);\n                            float res_32954 =\n                                  sitofp_i64_f32(index_primexp_32953);\n                            float res_32955 = x_32893 * res_32954;\n                            float res_32956 = nextpa",
                   "yment_32903 + res_32955;\n                            float y_32957 = res_32956 - index_primexp_32882;\n                            float negate_arg_32958 = 1.0e-2F * y_32957;\n                            float exp_arg_32959 = 0.0F - negate_arg_32958;\n                            float res_32960 = fpow32(2.7182817F, exp_arg_32959);\n                            float x_32961 = 1.0F - res_32960;\n                            float B_32962 = x_32961 / 1.0e-2F;\n                            float x_32963 = B_32962 - res_32956;\n                            float x_32964 = index_primexp_32882 + x_32963;\n                            float x_32965 = 4.4999997e-6F * x_32964;\n                            float A1_32966 = x_32965 / 1.0e-4F;\n                            float y_32967 = fpow32(B_32962, 2.0F);\n                            float x_32968 = 1.0000001e-6F * y_32967;\n                            float A2_32969 = x_32968 / 4.0e-2F;\n                            float exp_arg_32970 = A1_32966 - A2_32969;\n                            float res_32971 = fpow32(2.7182817F, exp_arg_32970);\n                            float negate_arg_32972 = x_32881 * B_32962;\n                            float exp_arg_32973 = 0.0F - negate_arg_32972;\n                            float res_32974 = fpow32(2.7182817F, exp_arg_32973);\n                            float res_32975 = res_32971 * res_32974;\n                            float res_32976 = redout_32952 + res_32975;\n                            float redout_tmp_34760 = res_32976;\n                            \n                            redout_32952 = redout_tmp_34760;\n                        }\n                        res_32950 = redout_32952;\n                        \n                        float x_32977 = res_32925 - res_32949;\n                        float x_32978 = x_32890 * x_32893;\n                        float y_32979 = res_32950 * x_32978;\n                        float y_32980 = x_32977 - y_32979;\n                        float res_32981 = x_32891 * y_",
                   "32980;\n                        \n                        res_32902 = res_32981;\n                    }\n                    \n                    float res_32889 = res_32902 + redout_33300;\n                    float redout_tmp_34759 = res_32889;\n                    \n                    redout_33300 = redout_tmp_34759;\n                }\n                x_32886 = redout_33300;\n                acc_32885 = x_32886;\n            } else {\n                acc_32885 = acc_32883;\n            }\n            mem_33621[0] = acc_32885;\n        }\n        \n      error_3:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        float mem_param_tmp_34757[1];\n        \n        for (int32_t i_5 = 0; i_5 < 1; i_5++)\n            mem_param_tmp_34757[i_5] = mem_33621[i_5];\n        for (int32_t i_6 = 0; i_6 < 1; i_6++)\n            mem_param_33607[i_6] = mem_param_tmp_34757[i_6];\n    }\n    for (int32_t i_7 = 0; i_7 < 1; i_7++)\n        accs_mem_33628[i_7] = mem_param_33607[i_7];\n    \n    __local char *mem_33631;\n    \n    mem_33631 = (__local char *) mem_33631_backing_8;\n    \n    __local char *mem_33633;\n    \n    mem_33633 = (__local char *) mem_33633_backing_9;\n    \n    __local char *mem_33635;\n    \n    mem_33635 = (__local char *) mem_33635_backing_10;\n    \n    __local char *mem_33637;\n    \n    mem_33637 = (__local char *) mem_33637_backing_11;\n    \n    float mem_33640[1];\n    float mem_33967[1];\n    \n    if (cond_33079) {\n        mem_33967[0] = accs_mem_33628[0];\n    } else {\n        int64_t binop_x_33098 = computed_group_sizze_32670 *\n                num_whole_tiles_32694;\n        int64_t ltid_33080 = sext_i32_i64(ltid_pre_34756);\n        int32_t ltid_flat_33081 = local_tid_34752;\n        \n        if (slt64(ltid_33080, computed_group_sizze_32670)) {\n            int64_t j_33099 = ltid_33080 + binop_x_33098;\n            bool cond_33104 = slt64(j_33099, 45);\n            float pre_33105;\n            float pre_33106;\n ",
                   "           int64_t pre_33107;\n            float pre_33108;\n            \n            if (cond_33104) {\n                float tile_elem_33109 = ((__global\n                                          float *) res_mem_33489)[j_33099];\n                float tile_elem_33110 = ((__global\n                                          float *) res_mem_33490)[j_33099];\n                int64_t tile_elem_33111 = ((__global\n                                            int64_t *) res_mem_33491)[j_33099];\n                float tile_elem_33112 = ((__global\n                                          float *) res_mem_33492)[j_33099];\n                \n                pre_33105 = tile_elem_33109;\n                pre_33106 = tile_elem_33110;\n                pre_33107 = tile_elem_33111;\n                pre_33108 = tile_elem_33112;\n            } else {\n                pre_33105 = 0.0F;\n                pre_33106 = 0.0F;\n                pre_33107 = 0;\n                pre_33108 = 0.0F;\n            }\n            ((__local float *) mem_33631)[ltid_33080] = pre_33105;\n            ((__local float *) mem_33633)[ltid_33080] = pre_33106;\n            ((__local int64_t *) mem_33635)[ltid_33080] = pre_33107;\n            ((__local float *) mem_33637)[ltid_33080] = pre_33108;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t ltid_33125 = sext_i32_i64(ltid_pre_34756);\n        int32_t ltid_flat_33126 = local_tid_34752;\n        \n        if (slt64(ltid_33125, computed_group_sizze_32670)) {\n            int64_t gtid_33133 = binop_x_32681 + ltid_33125;\n            float acc_33136 = accs_mem_33628[0];\n            bool cond_33137 = slt64(gtid_33133, steps_26892);\n            float acc_33138;\n            \n            if (cond_33137) {\n                float x_33134 = mem_33597[0];\n                float index_primexp_33135 = mem_33599[0];\n                float x_33139;\n                float redout_33302 = acc_33136;\n                \n                for (int64_t i_33303 = 0; i_33303 < residual_input_3",
                   "3078;\n                     i_33303++) {\n                    int64_t x_33145 = ((__local int64_t *) mem_33635)[i_33303];\n                    float x_33146 = ((__local float *) mem_33637)[i_33303];\n                    int64_t i64_arg_33147 = sub64(x_33145, 1);\n                    float res_33148 = sitofp_i64_f32(i64_arg_33147);\n                    float y_33149 = x_33146 * res_33148;\n                    bool cond_33150 = y_33149 < index_primexp_33135;\n                    float ceil_arg_33151 = index_primexp_33135 / x_33146;\n                    float res_33152;\n                    \n                    res_33152 = futrts_ceil32(ceil_arg_33151);\n                    \n                    int64_t res_33153 = fptosi_f32_i64(res_33152);\n                    int64_t remaining_33154 = sub64(x_33145, res_33153);\n                    float res_33155;\n                    \n                    if (cond_33150) {\n                        res_33155 = 0.0F;\n                    } else {\n                        float x_33143 = ((__local float *) mem_33631)[i_33303];\n                        float x_33144 = ((__local float *) mem_33633)[i_33303];\n                        float nextpayment_33156 = x_33146 * res_33152;\n                        bool bounds_invalid_upwards_33157 =\n                             slt64(remaining_33154, 1);\n                        bool valid_33158 = !bounds_invalid_upwards_33157;\n                        bool range_valid_c_33159;\n                        \n                        if (!valid_33158) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 52) == -1) {\n                                    global_failure_args[0] = 1;\n                                    global_failure_args[1] = 2;\n                                    global_failure_args[2] = remaining_33154;\n                                    ;\n                                }\n                  ",
                   "              local_failure = true;\n                                goto error_5;\n                            }\n                        }\n                        \n                        float y_33160 = nextpayment_33156 - index_primexp_33135;\n                        float negate_arg_33161 = 1.0e-2F * y_33160;\n                        float exp_arg_33162 = 0.0F - negate_arg_33161;\n                        float res_33163 = fpow32(2.7182817F, exp_arg_33162);\n                        float x_33164 = 1.0F - res_33163;\n                        float B_33165 = x_33164 / 1.0e-2F;\n                        float x_33166 = B_33165 - nextpayment_33156;\n                        float x_33167 = index_primexp_33135 + x_33166;\n                        float x_33168 = 4.4999997e-6F * x_33167;\n                        float A1_33169 = x_33168 / 1.0e-4F;\n                        float y_33170 = fpow32(B_33165, 2.0F);\n                        float x_33171 = 1.0000001e-6F * y_33170;\n                        float A2_33172 = x_33171 / 4.0e-2F;\n                        float exp_arg_33173 = A1_33169 - A2_33172;\n                        float res_33174 = fpow32(2.7182817F, exp_arg_33173);\n                        float negate_arg_33175 = x_33134 * B_33165;\n                        float exp_arg_33176 = 0.0F - negate_arg_33175;\n                        float res_33177 = fpow32(2.7182817F, exp_arg_33176);\n                        float res_33178 = res_33174 * res_33177;\n                        bool y_33179 = slt64(0, remaining_33154);\n                        bool index_certs_33180;\n                        \n                        if (!y_33179) {\n                            {\n                                if (atomic_cmpxchg_i32_global(global_failure,\n                                                              -1, 53) == -1) {\n                                    global_failure_args[0] = 0;\n                                    global_failure_args[1] = remaining_33154;\n                                    ;",
                   "\n                                }\n                                local_failure = true;\n                                goto error_5;\n                            }\n                        }\n                        \n                        float binop_y_33181 = sitofp_i64_f32(remaining_33154);\n                        float binop_y_33182 = x_33146 * binop_y_33181;\n                        float index_primexp_33183 = nextpayment_33156 +\n                              binop_y_33182;\n                        float y_33184 = index_primexp_33183 -\n                              index_primexp_33135;\n                        float negate_arg_33185 = 1.0e-2F * y_33184;\n                        float exp_arg_33186 = 0.0F - negate_arg_33185;\n                        float res_33187 = fpow32(2.7182817F, exp_arg_33186);\n                        float x_33188 = 1.0F - res_33187;\n                        float B_33189 = x_33188 / 1.0e-2F;\n                        float x_33190 = B_33189 - index_primexp_33183;\n                        float x_33191 = index_primexp_33135 + x_33190;\n                        float x_33192 = 4.4999997e-6F * x_33191;\n                        float A1_33193 = x_33192 / 1.0e-4F;\n                        float y_33194 = fpow32(B_33189, 2.0F);\n                        float x_33195 = 1.0000001e-6F * y_33194;\n                        float A2_33196 = x_33195 / 4.0e-2F;\n                        float exp_arg_33197 = A1_33193 - A2_33196;\n                        float res_33198 = fpow32(2.7182817F, exp_arg_33197);\n                        float negate_arg_33199 = x_33134 * B_33189;\n                        float exp_arg_33200 = 0.0F - negate_arg_33199;\n                        float res_33201 = fpow32(2.7182817F, exp_arg_33200);\n                        float res_33202 = res_33198 * res_33201;\n                        float res_33203;\n                        float redout_33205 = 0.0F;\n                        \n                        for (int64_t i_33204 = 0; i_33204 < remaining_3315",
                   "4;\n                             i_33204++) {\n                            int64_t index_primexp_33206 = add64(1, i_33204);\n                            float res_33207 =\n                                  sitofp_i64_f32(index_primexp_33206);\n                            float res_33208 = x_33146 * res_33207;\n                            float res_33209 = nextpayment_33156 + res_33208;\n                            float y_33210 = res_33209 - index_primexp_33135;\n                            float negate_arg_33211 = 1.0e-2F * y_33210;\n                            float exp_arg_33212 = 0.0F - negate_arg_33211;\n                            float res_33213 = fpow32(2.7182817F, exp_arg_33212);\n                            float x_33214 = 1.0F - res_33213;\n                            float B_33215 = x_33214 / 1.0e-2F;\n                            float x_33216 = B_33215 - res_33209;\n                            float x_33217 = index_primexp_33135 + x_33216;\n                            float x_33218 = 4.4999997e-6F * x_33217;\n                            float A1_33219 = x_33218 / 1.0e-4F;\n                            float y_33220 = fpow32(B_33215, 2.0F);\n                            float x_33221 = 1.0000001e-6F * y_33220;\n                            float A2_33222 = x_33221 / 4.0e-2F;\n                            float exp_arg_33223 = A1_33219 - A2_33222;\n                            float res_33224 = fpow32(2.7182817F, exp_arg_33223);\n                            float negate_arg_33225 = x_33134 * B_33215;\n                            float exp_arg_33226 = 0.0F - negate_arg_33225;\n                            float res_33227 = fpow32(2.7182817F, exp_arg_33226);\n                            float res_33228 = res_33224 * res_33227;\n                            float res_33229 = redout_33205 + res_33228;\n                            float redout_tmp_34762 = res_33229;\n                            \n                            redout_33205 = redout_tmp_34762;\n                        }\n             ",
                   "           res_33203 = redout_33205;\n                        \n                        float x_33230 = res_33178 - res_33202;\n                        float x_33231 = x_33143 * x_33146;\n                        float y_33232 = res_33203 * x_33231;\n                        float y_33233 = x_33230 - y_33232;\n                        float res_33234 = x_33144 * y_33233;\n                        \n                        res_33155 = res_33234;\n                    }\n                    \n                    float res_33142 = res_33155 + redout_33302;\n                    float redout_tmp_34761 = res_33142;\n                    \n                    redout_33302 = redout_tmp_34761;\n                }\n                x_33139 = redout_33302;\n                acc_33138 = x_33139;\n            } else {\n                acc_33138 = acc_33136;\n            }\n            mem_33640[0] = acc_33138;\n        }\n        \n      error_5:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        mem_33967[0] = mem_33640[0];\n    }\n    \n    float mem_33648[1];\n    int64_t ltid_33237 = sext_i32_i64(ltid_pre_34756);\n    int32_t ltid_flat_33238 = local_tid_34752;\n    \n    if (slt64(ltid_33237, computed_group_sizze_32670)) {\n        int64_t gtid_33244 = binop_x_32681 + ltid_33237;\n        bool cond_33246 = slt64(gtid_33244, steps_26892);\n        float postlude_33247;\n        \n        if (cond_33246) {\n            float res_33245 = mem_33967[0];\n            float res_33250 = fmax32(0.0F, res_33245);\n            \n            postlude_33247 = res_33250;\n        } else {\n            postlude_33247 = 0.0F;\n        }\n        mem_33648[0] = postlude_33247;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t thread_out_index_34763 = gtid_31478 +\n            squot64(sext_i32_i64(local_tid_34752), computed_group_sizze_32670);\n    int64_t thread_out_index_34764 = gid_32668 * computed_group_sizze_32670 +\n            (sext_i32_i64(local_tid_3475",
                   "2) -\n             squot64(sext_i32_i64(local_tid_34752),\n                     computed_group_sizze_32670) * computed_group_sizze_32670);\n    \n    if (slt64(thread_out_index_34763, paths_26891) &&\n        slt64(thread_out_index_34764, steps_26892)) {\n        ((__global float *) mem_33651)[thread_out_index_34763 * steps_26892 +\n                                       thread_out_index_34764] = mem_33648[0];\n    }\n    \n  error_7:\n    return;\n}\n__kernel void testzisegred_large_31727(__global int *global_failure,\n                                       int failure_is_an_option, __global\n                                       int64_t *global_failure_args,\n                                       __local volatile\n                                       int64_t *sync_arr_mem_34814_backing_aligned_0,\n                                       __local volatile\n                                       int64_t *red_arr_mem_34812_backing_aligned_1,\n                                       int64_t paths_26891, int64_t steps_26892,\n                                       float sims_per_year_26971,\n                                       int64_t num_groups_32446, __global\n                                       unsigned char *res_mem_33489, __global\n                                       unsigned char *res_mem_33490, __global\n                                       unsigned char *res_mem_33491, __global\n                                       unsigned char *res_mem_33492, __global\n                                       unsigned char *mem_33593, __global\n                                       unsigned char *mem_33660,\n                                       int64_t groups_per_segment_34798,\n                                       int64_t elements_per_thread_34799,\n                                       int64_t virt_num_groups_34800,\n                                       int64_t threads_per_segment_34802,\n                                       __global\n                                       unsigned cha",
                   "r *group_res_arr_mem_34803,\n                                       __global\n                                       unsigned char *testzicounter_mem_34805)\n{\n    #define segred_group_sizze_32445 (testzisegred_group_sizze_31721)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict sync_arr_mem_34814_backing_1 =\n                          (__local volatile\n                           char *) sync_arr_mem_34814_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_34812_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_34812_backing_aligned_1;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34807;\n    int32_t local_tid_34808;\n    int64_t group_sizze_34811;\n    int32_t wave_sizze_34810;\n    int32_t group_tid_34809;\n    \n    global_tid_34807 = get_global_id(0);\n    local_tid_34808 = get_local_id(0);\n    group_sizze_34811 = get_local_size(0);\n    wave_sizze_34810 = LOCKSTEP_WIDTH;\n    group_tid_34809 = get_group_id(0);\n    \n    int32_t phys_tid_31727;\n    \n    phys_tid_31727 = global_tid_34807;\n    \n    __local char *red_arr_mem_34812;\n    \n    red_arr_mem_34812 = (__local char *) red_arr_mem_34812_backing_0;\n    \n    __local char *sync_arr_mem_34814;\n    \n    sync_arr_mem_34814 = (__local char *) sync_arr_mem_34814_backing_1;\n    \n    int32_t phys_group_id_34816;\n    \n    phys_group_id_34816 = get_group_id(0);\n    for (int32_t i_34817 = 0; i_34817 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_34800) - phys_group_id_34816,\n                   sext_i64_i32(num_groups_32446)); i_34817++) {\n        int32_t virt_group_id_34818 = phys_group_id_34816 + i_34817 *\n                sext_i64_i32(num_groups_32446);\n        int32_",
                   "t flat_segment_id_34819 = squot32(virt_group_id_34818,\n                                                sext_i64_i32(groups_per_segment_34798));\n        int64_t global_tid_34820 = srem64(sext_i32_i64(virt_group_id_34818) *\n                                          segred_group_sizze_32445 +\n                                          sext_i32_i64(local_tid_34808),\n                                          segred_group_sizze_32445 *\n                                          groups_per_segment_34798);\n        int64_t gtid_31716 = squot64(sext_i32_i64(flat_segment_id_34819),\n                                     steps_26892);\n        int64_t gtid_31717 = sext_i32_i64(flat_segment_id_34819) -\n                squot64(sext_i32_i64(flat_segment_id_34819), steps_26892) *\n                steps_26892;\n        int64_t gtid_31726;\n        float x_acc_34821;\n        int64_t chunk_sizze_34822;\n        \n        chunk_sizze_34822 = smin64(elements_per_thread_34799, sdiv_up64(45 -\n                                                                        sext_i32_i64(sext_i64_i32(global_tid_34820)),\n                                                                        threads_per_segment_34802));\n        \n        float x_32449;\n        float x_32450;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_34821 = 0.0F;\n        }\n        for (int64_t i_34826 = 0; i_34826 < chunk_sizze_34822; i_34826++) {\n            gtid_31726 = sext_i32_i64(sext_i64_i32(global_tid_34820)) +\n                threads_per_segment_34802 * i_34826;\n            // apply map function\n            {\n                int64_t convop_x_32602 = add64(1, gtid_31717);\n                float binop_x_32603 = sitofp_i64_f32(convop_x_32602);\n                float index_primexp_32604 = binop_x_32603 / sims_per_year_26971;\n                int64_t x_32457 = ((__global\n                                    int64_t *) res_mem_33491)[gtid_31726];\n                float x_32458 = ((__global float *) res_mem_",
                   "33492)[gtid_31726];\n                int64_t i64_arg_32459 = sub64(x_32457, 1);\n                float res_32460 = sitofp_i64_f32(i64_arg_32459);\n                float y_32461 = x_32458 * res_32460;\n                bool cond_32462 = y_32461 < index_primexp_32604;\n                float ceil_arg_32463 = index_primexp_32604 / x_32458;\n                float res_32464;\n                \n                res_32464 = futrts_ceil32(ceil_arg_32463);\n                \n                int64_t res_32465 = fptosi_f32_i64(res_32464);\n                int64_t remaining_32466 = sub64(x_32457, res_32465);\n                float res_32467;\n                \n                if (cond_32462) {\n                    res_32467 = 0.0F;\n                } else {\n                    float x_32453 = ((__global float *) mem_33593)[gtid_31717 *\n                                                                   paths_26891 +\n                                                                   gtid_31716];\n                    float x_32455 = ((__global\n                                      float *) res_mem_33489)[gtid_31726];\n                    float x_32456 = ((__global\n                                      float *) res_mem_33490)[gtid_31726];\n                    float nextpayment_32468 = x_32458 * res_32464;\n                    bool bounds_invalid_upwards_32469 = slt64(remaining_32466,\n                                                              1);\n                    bool valid_32470 = !bounds_invalid_upwards_32469;\n                    bool range_valid_c_32471;\n                    \n                    if (!valid_32470) {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          58) == -1) {\n                                global_failure_args[0] = 1;\n                                global_failure_args[1] = 2;\n                                global_failure_args[2] = remaining_32466;\n                    ",
                   "            ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float y_32473 = nextpayment_32468 - index_primexp_32604;\n                    float negate_arg_32474 = 1.0e-2F * y_32473;\n                    float exp_arg_32475 = 0.0F - negate_arg_32474;\n                    float res_32476 = fpow32(2.7182817F, exp_arg_32475);\n                    float x_32477 = 1.0F - res_32476;\n                    float B_32478 = x_32477 / 1.0e-2F;\n                    float x_32479 = B_32478 - nextpayment_32468;\n                    float x_32480 = x_32479 + index_primexp_32604;\n                    float x_32481 = 4.4999997e-6F * x_32480;\n                    float A1_32482 = x_32481 / 1.0e-4F;\n                    float y_32483 = fpow32(B_32478, 2.0F);\n                    float x_32484 = 1.0000001e-6F * y_32483;\n                    float A2_32485 = x_32484 / 4.0e-2F;\n                    float exp_arg_32486 = A1_32482 - A2_32485;\n                    float res_32487 = fpow32(2.7182817F, exp_arg_32486);\n                    float negate_arg_32488 = x_32453 * B_32478;\n                    float exp_arg_32489 = 0.0F - negate_arg_32488;\n                    float res_32490 = fpow32(2.7182817F, exp_arg_32489);\n                    float res_32491 = res_32487 * res_32490;\n                    bool y_32492 = slt64(0, remaining_32466);\n                    bool index_certs_32493;\n                    \n                    if (!y_32492) {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          59) == -1) {\n                                global_failure_args[0] = 0;\n                                global_failure_args[1] = remaining_32466;\n                                ;\n                            }\n                            local_failure =",
                   " true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float binop_y_32494 = sitofp_i64_f32(remaining_32466);\n                    float binop_y_32495 = x_32458 * binop_y_32494;\n                    float index_primexp_32496 = nextpayment_32468 +\n                          binop_y_32495;\n                    float y_32497 = index_primexp_32496 - index_primexp_32604;\n                    float negate_arg_32498 = 1.0e-2F * y_32497;\n                    float exp_arg_32499 = 0.0F - negate_arg_32498;\n                    float res_32500 = fpow32(2.7182817F, exp_arg_32499);\n                    float x_32501 = 1.0F - res_32500;\n                    float B_32502 = x_32501 / 1.0e-2F;\n                    float x_32503 = B_32502 - index_primexp_32496;\n                    float x_32504 = x_32503 + index_primexp_32604;\n                    float x_32505 = 4.4999997e-6F * x_32504;\n                    float A1_32506 = x_32505 / 1.0e-4F;\n                    float y_32507 = fpow32(B_32502, 2.0F);\n                    float x_32508 = 1.0000001e-6F * y_32507;\n                    float A2_32509 = x_32508 / 4.0e-2F;\n                    float exp_arg_32510 = A1_32506 - A2_32509;\n                    float res_32511 = fpow32(2.7182817F, exp_arg_32510);\n                    float negate_arg_32512 = x_32453 * B_32502;\n                    float exp_arg_32513 = 0.0F - negate_arg_32512;\n                    float res_32514 = fpow32(2.7182817F, exp_arg_32513);\n                    float res_32515 = res_32511 * res_32514;\n                    float res_32516;\n                    float redout_32599 = 0.0F;\n                    \n                    for (int64_t i_32600 = 0; i_32600 < remaining_32466;\n                         i_32600++) {\n                        int64_t index_primexp_32624 = add64(1, i_32600);\n                        float res_32521 = sitofp_i64_f32(index_primexp_32624);\n                        float res_32522 = x",
                   "_32458 * res_32521;\n                        float res_32523 = nextpayment_32468 + res_32522;\n                        float y_32524 = res_32523 - index_primexp_32604;\n                        float negate_arg_32525 = 1.0e-2F * y_32524;\n                        float exp_arg_32526 = 0.0F - negate_arg_32525;\n                        float res_32527 = fpow32(2.7182817F, exp_arg_32526);\n                        float x_32528 = 1.0F - res_32527;\n                        float B_32529 = x_32528 / 1.0e-2F;\n                        float x_32530 = B_32529 - res_32523;\n                        float x_32531 = x_32530 + index_primexp_32604;\n                        float x_32532 = 4.4999997e-6F * x_32531;\n                        float A1_32533 = x_32532 / 1.0e-4F;\n                        float y_32534 = fpow32(B_32529, 2.0F);\n                        float x_32535 = 1.0000001e-6F * y_32534;\n                        float A2_32536 = x_32535 / 4.0e-2F;\n                        float exp_arg_32537 = A1_32533 - A2_32536;\n                        float res_32538 = fpow32(2.7182817F, exp_arg_32537);\n                        float negate_arg_32539 = x_32453 * B_32529;\n                        float exp_arg_32540 = 0.0F - negate_arg_32539;\n                        float res_32541 = fpow32(2.7182817F, exp_arg_32540);\n                        float res_32542 = res_32538 * res_32541;\n                        float res_32519 = res_32542 + redout_32599;\n                        float redout_tmp_34827 = res_32519;\n                        \n                        redout_32599 = redout_tmp_34827;\n                    }\n                    res_32516 = redout_32599;\n                    \n                    float x_32543 = res_32491 - res_32515;\n                    float x_32544 = x_32455 * x_32458;\n                    float y_32545 = res_32516 * x_32544;\n                    float y_32546 = x_32543 - y_32545;\n                    float res_32547 = x_32456 * y_32546;\n                    \n                    res_3246",
                   "7 = res_32547;\n                }\n                // save map-out results\n                { }\n                // load accumulator\n                {\n                    x_32449 = x_acc_34821;\n                }\n                // load new values\n                {\n                    x_32450 = res_32467;\n                }\n                // apply reduction operator\n                {\n                    float res_32451 = x_32449 + x_32450;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_34821 = res_32451;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_32449 = x_acc_34821;\n            ((__local\n              float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808)] =\n                x_32449;\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_34828;\n        int32_t skip_waves_34829;\n        \n        skip_waves_34829 = 1;\n        \n        float x_34823;\n        float x_34824;\n        \n        offset_34828 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_34808,\n                      sext_i64_i32(segred_group_sizze_32445))) {\n                x_34823 = ((__local\n                            float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808 +\n                                                        offset_34828)];\n            }\n        }\n        offset_34828 = 1;\n        while (slt32(offset_34828, wave_sizze_34810)) {\n            if (slt32(local_tid_34808 + offset_34828,\n                      sext_i64_i32(segred_group_sizze_32445)) &&\n                ((local_tid_34808 - squot32(local_tid_34808, wave_sizze_34810) *\n                  wave_sizze_34810) & (2 * offset_34828 - 1)) == 0) {\n                // read",
                   " array element\n                {\n                    x_34824 = ((volatile __local\n                                float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808 +\n                                                            offset_34828)];\n                }\n                // apply reduction operation\n                {\n                    float res_34825 = x_34823 + x_34824;\n                    \n                    x_34823 = res_34825;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808)] =\n                        x_34823;\n                }\n            }\n            offset_34828 *= 2;\n        }\n        while (slt32(skip_waves_34829,\n                     squot32(sext_i64_i32(segred_group_sizze_32445) +\n                             wave_sizze_34810 - 1, wave_sizze_34810))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_34828 = skip_waves_34829 * wave_sizze_34810;\n            if (slt32(local_tid_34808 + offset_34828,\n                      sext_i64_i32(segred_group_sizze_32445)) &&\n                ((local_tid_34808 - squot32(local_tid_34808, wave_sizze_34810) *\n                  wave_sizze_34810) == 0 && (squot32(local_tid_34808,\n                                                     wave_sizze_34810) & (2 *\n                                                                          skip_waves_34829 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_34824 = ((__local\n                                float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808 +\n                                                            offset_34828)];\n                }\n                // apply reduction operation\n                {\n                    float res_34825 = x_34823 + x_34824;\n        ",
                   "            \n                    x_34823 = res_34825;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808)] =\n                        x_34823;\n                }\n            }\n            skip_waves_34829 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_34808) == 0) {\n                x_acc_34821 = x_34823;\n            }\n        }\n        if (groups_per_segment_34798 == 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_34808 == 0) {\n                    ((__global float *) mem_33660)[gtid_31716 * steps_26892 +\n                                                   gtid_31717] = x_acc_34821;\n                }\n            }\n        } else {\n            int32_t old_counter_34830;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_34808 == 0) {\n                    ((__global\n                      float *) group_res_arr_mem_34803)[sext_i32_i64(virt_group_id_34818) *\n                                                        segred_group_sizze_32445] =\n                        x_acc_34821;\n                    mem_fence_global();\n                    old_counter_34830 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) testzicounter_mem_34805)[sext_i32_i64(srem32(flat_segment_id_34819,\n                                                                                                     10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_34814)[0] =\n                        old_counter_34830 == groups_per_segment_34798 - 1;\n                }\n            }\n            ",
                   "barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_34831;\n            \n            is_last_group_34831 = ((__local bool *) sync_arr_mem_34814)[0];\n            if (is_last_group_34831) {\n                if (local_tid_34808 == 0) {\n                    old_counter_34830 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) testzicounter_mem_34805)[sext_i32_i64(srem32(flat_segment_id_34819,\n                                                                                                     10240))],\n                                              (int) (0 -\n                                                     groups_per_segment_34798));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_34832 =\n                            sdiv_up64(groups_per_segment_34798,\n                                      segred_group_sizze_32445);\n                    \n                    x_32449 = 0.0F;\n                    for (int64_t i_34833 = 0; i_34833 < read_per_thread_34832;\n                         i_34833++) {\n                        int64_t group_res_id_34834 =\n                                sext_i32_i64(local_tid_34808) *\n                                read_per_thread_34832 + i_34833;\n                        int64_t index_of_group_res_34835 =\n                                sext_i32_i64(flat_segment_id_34819) *\n                                groups_per_segment_34798 + group_res_id_34834;\n                        \n                        if (slt64(group_res_id_34834,\n                                  groups_per_segment_34798)) {\n                            x_32450 = ((__global\n                                        float *) group_res_arr_mem_34803)[index_of_group_res_34835 *\n                                                                          segred_group_sizze_32445];\n                     ",
                   "       \n                            float res_32451;\n                            \n                            res_32451 = x_32449 + x_32450;\n                            x_32449 = res_32451;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808)] =\n                    x_32449;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_34836;\n                    int32_t skip_waves_34837;\n                    \n                    skip_waves_34837 = 1;\n                    \n                    float x_34823;\n                    float x_34824;\n                    \n                    offset_34836 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_34808,\n                                  sext_i64_i32(segred_group_sizze_32445))) {\n                            x_34823 = ((__local\n                                        float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808 +\n                                                                    offset_34836)];\n                        }\n                    }\n                    offset_34836 = 1;\n                    while (slt32(offset_34836, wave_sizze_34810)) {\n                        if (slt32(local_tid_34808 + offset_34836,\n                                  sext_i64_i32(segred_group_sizze_32445)) &&\n                            ((local_tid_34808 - squot32(local_tid_34808,\n                                                        wave_sizze_34810) *\n                              wave_sizze_34810) & (2 * offset_34836 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_34824 = ((volatile __local\n                                            float",
                   " *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808 +\n                                                                        offset_34836)];\n                            }\n                            // apply reduction operation\n                            {\n                                float res_34825 = x_34823 + x_34824;\n                                \n                                x_34823 = res_34825;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808)] =\n                                    x_34823;\n                            }\n                        }\n                        offset_34836 *= 2;\n                    }\n                    while (slt32(skip_waves_34837,\n                                 squot32(sext_i64_i32(segred_group_sizze_32445) +\n                                         wave_sizze_34810 - 1,\n                                         wave_sizze_34810))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_34836 = skip_waves_34837 * wave_sizze_34810;\n                        if (slt32(local_tid_34808 + offset_34836,\n                                  sext_i64_i32(segred_group_sizze_32445)) &&\n                            ((local_tid_34808 - squot32(local_tid_34808,\n                                                        wave_sizze_34810) *\n                              wave_sizze_34810) == 0 &&\n                             (squot32(local_tid_34808, wave_sizze_34810) & (2 *\n                                                                            skip_waves_34837 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_34824 = ((__l",
                   "ocal\n                                            float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808 +\n                                                                        offset_34836)];\n                            }\n                            // apply reduction operation\n                            {\n                                float res_34825 = x_34823 + x_34824;\n                                \n                                x_34823 = res_34825;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_34812)[sext_i32_i64(local_tid_34808)] =\n                                    x_34823;\n                            }\n                        }\n                        skip_waves_34837 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_34808 == 0) {\n                            ((__global float *) mem_33660)[gtid_31716 *\n                                                           steps_26892 +\n                                                           gtid_31717] =\n                                x_34823;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_32445\n}\n__kernel void testzisegred_nonseg_30509(__global int *global_failure,\n                                        __local volatile\n                                        int64_t *red_arr_mem_34655_backing_aligned_0,\n                                        __local volatile\n                                        int64_t *sync_arr_mem_34653_backing_aligned_1,\n                                        int64_t num_groups_30504, __global\n                                        unsigned char *m",
                   "em_33465, __global\n                                        unsigned char *mem_33467, __global\n                                        unsigned char *mem_33470, __global\n                                        unsigned char *testzicounter_mem_34643,\n                                        __global\n                                        unsigned char *group_res_arr_mem_34645,\n                                        int64_t num_threads_34647)\n{\n    #define segred_group_sizze_30502 (testzisegred_group_sizze_30501)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34655_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_34655_backing_aligned_0;\n    __local volatile char *restrict sync_arr_mem_34653_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_34653_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34648;\n    int32_t local_tid_34649;\n    int64_t group_sizze_34652;\n    int32_t wave_sizze_34651;\n    int32_t group_tid_34650;\n    \n    global_tid_34648 = get_global_id(0);\n    local_tid_34649 = get_local_id(0);\n    group_sizze_34652 = get_local_size(0);\n    wave_sizze_34651 = LOCKSTEP_WIDTH;\n    group_tid_34650 = get_group_id(0);\n    \n    int32_t phys_tid_30509;\n    \n    phys_tid_30509 = global_tid_34648;\n    \n    __local char *sync_arr_mem_34653;\n    \n    sync_arr_mem_34653 = (__local char *) sync_arr_mem_34653_backing_0;\n    \n    __local char *red_arr_mem_34655;\n    \n    red_arr_mem_34655 = (__local char *) red_arr_mem_34655_backing_1;\n    \n    int64_t dummy_30507;\n    \n    dummy_30507 = 0;\n    \n    int64_t gtid_30508;\n    \n    gtid_30508 = 0;\n    \n    float x_acc_34657;\n    int64_t chunk_sizze_34658;\n    \n    chunk_sizze_34658 = smin64(sdiv_up64(45,\n                                         sext_i32_i64(sext_i64_i32(segred_grou",
                   "p_sizze_30502 *\n                                         num_groups_30504))), sdiv_up64(45 -\n                                                                        sext_i32_i64(phys_tid_30509),\n                                                                        num_threads_34647));\n    \n    float x_26897;\n    float x_26898;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34657 = -INFINITY;\n    }\n    for (int64_t i_34662 = 0; i_34662 < chunk_sizze_34658; i_34662++) {\n        gtid_30508 = sext_i32_i64(phys_tid_30509) + num_threads_34647 * i_34662;\n        // apply map function\n        {\n            float x_26900 = ((__global float *) mem_33467)[gtid_30508];\n            int64_t x_26901 = ((__global int64_t *) mem_33465)[gtid_30508];\n            float res_26902 = sitofp_i64_f32(x_26901);\n            float res_26903 = x_26900 * res_26902;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_26897 = x_acc_34657;\n            }\n            // load new values\n            {\n                x_26898 = res_26903;\n            }\n            // apply reduction operator\n            {\n                float res_26899 = fmax32(x_26897, x_26898);\n                \n                // store in accumulator\n                {\n                    x_acc_34657 = res_26899;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_26897 = x_acc_34657;\n        ((__local float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649)] =\n            x_26897;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34663;\n    int32_t skip_waves_34664;\n    \n    skip_waves_34664 = 1;\n    \n    float x_34659;\n    float x_34660;\n    \n    offset_34663 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34649, sext_i64_i32(segred_group_sizze_30502))) {\n            x_34659 = ((__local\n             ",
                   "           float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649 +\n                                                    offset_34663)];\n        }\n    }\n    offset_34663 = 1;\n    while (slt32(offset_34663, wave_sizze_34651)) {\n        if (slt32(local_tid_34649 + offset_34663,\n                  sext_i64_i32(segred_group_sizze_30502)) && ((local_tid_34649 -\n                                                               squot32(local_tid_34649,\n                                                                       wave_sizze_34651) *\n                                                               wave_sizze_34651) &\n                                                              (2 *\n                                                               offset_34663 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_34660 = ((volatile __local\n                            float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649 +\n                                                        offset_34663)];\n            }\n            // apply reduction operation\n            {\n                float res_34661 = fmax32(x_34659, x_34660);\n                \n                x_34659 = res_34661;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649)] =\n                    x_34659;\n            }\n        }\n        offset_34663 *= 2;\n    }\n    while (slt32(skip_waves_34664,\n                 squot32(sext_i64_i32(segred_group_sizze_30502) +\n                         wave_sizze_34651 - 1, wave_sizze_34651))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34663 = skip_waves_34664 * wave_sizze_34651;\n        if (slt32(local_tid_34649 + offset_34663,\n                  sext_i64_i32(segred_group_sizze_30502)) && ((local_tid_34649 -\n                                                        ",
                   "       squot32(local_tid_34649,\n                                                                       wave_sizze_34651) *\n                                                               wave_sizze_34651) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34649,\n                                                                       wave_sizze_34651) &\n                                                               (2 *\n                                                                skip_waves_34664 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_34660 = ((__local\n                            float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649 +\n                                                        offset_34663)];\n            }\n            // apply reduction operation\n            {\n                float res_34661 = fmax32(x_34659, x_34660);\n                \n                x_34659 = res_34661;\n            }\n            // write result of operation\n            {\n                ((__local\n                  float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649)] =\n                    x_34659;\n            }\n        }\n        skip_waves_34664 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_34649) == 0) {\n            x_acc_34657 = x_34659;\n        }\n    }\n    \n    int32_t old_counter_34665;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34649 == 0) {\n            ((__global\n              float *) group_res_arr_mem_34645)[sext_i32_i64(group_tid_34650) *\n                                                segred_group_sizze_30502] =\n                x_acc_34657;\n            mem_fence_global();\n            old_counter_34665 = atomic_add_i32_g",
                   "lobal(&((volatile __global\n                                                         int *) testzicounter_mem_34643)[0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34653)[0] = old_counter_34665 ==\n                num_groups_30504 - 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34666;\n    \n    is_last_group_34666 = ((__local bool *) sync_arr_mem_34653)[0];\n    if (is_last_group_34666) {\n        if (local_tid_34649 == 0) {\n            old_counter_34665 = atomic_add_i32_global(&((volatile __global\n                                                         int *) testzicounter_mem_34643)[0],\n                                                      (int) (0 -\n                                                             num_groups_30504));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34667 = sdiv_up64(num_groups_30504,\n                                                      segred_group_sizze_30502);\n            \n            x_26897 = -INFINITY;\n            for (int64_t i_34668 = 0; i_34668 < read_per_thread_34667;\n                 i_34668++) {\n                int64_t group_res_id_34669 = sext_i32_i64(local_tid_34649) *\n                        read_per_thread_34667 + i_34668;\n                int64_t index_of_group_res_34670 = group_res_id_34669;\n                \n                if (slt64(group_res_id_34669, num_groups_30504)) {\n                    x_26898 = ((__global\n                                float *) group_res_arr_mem_34645)[index_of_group_res_34670 *\n                                                                  segred_group_sizze_30502];\n                    \n                    float res_26899;\n                    \n                    res_26899 = fmax32(x_26897, x_26898);\n                    x_26897 = res_26899;\n                }\n            }\n        }\n        ((__local float *) red_arr_mem_3465",
                   "5)[sext_i32_i64(local_tid_34649)] =\n            x_26897;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34671;\n            int32_t skip_waves_34672;\n            \n            skip_waves_34672 = 1;\n            \n            float x_34659;\n            float x_34660;\n            \n            offset_34671 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34649,\n                          sext_i64_i32(segred_group_sizze_30502))) {\n                    x_34659 = ((__local\n                                float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649 +\n                                                            offset_34671)];\n                }\n            }\n            offset_34671 = 1;\n            while (slt32(offset_34671, wave_sizze_34651)) {\n                if (slt32(local_tid_34649 + offset_34671,\n                          sext_i64_i32(segred_group_sizze_30502)) &&\n                    ((local_tid_34649 - squot32(local_tid_34649,\n                                                wave_sizze_34651) *\n                      wave_sizze_34651) & (2 * offset_34671 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_34660 = ((volatile __local\n                                    float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649 +\n                                                                offset_34671)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_34661 = fmax32(x_34659, x_34660);\n                        \n                        x_34659 = res_34661;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649)] =\n                            x",
                   "_34659;\n                    }\n                }\n                offset_34671 *= 2;\n            }\n            while (slt32(skip_waves_34672,\n                         squot32(sext_i64_i32(segred_group_sizze_30502) +\n                                 wave_sizze_34651 - 1, wave_sizze_34651))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34671 = skip_waves_34672 * wave_sizze_34651;\n                if (slt32(local_tid_34649 + offset_34671,\n                          sext_i64_i32(segred_group_sizze_30502)) &&\n                    ((local_tid_34649 - squot32(local_tid_34649,\n                                                wave_sizze_34651) *\n                      wave_sizze_34651) == 0 && (squot32(local_tid_34649,\n                                                         wave_sizze_34651) &\n                                                 (2 * skip_waves_34672 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_34660 = ((__local\n                                    float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649 +\n                                                                offset_34671)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_34661 = fmax32(x_34659, x_34660);\n                        \n                        x_34659 = res_34661;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          float *) red_arr_mem_34655)[sext_i32_i64(local_tid_34649)] =\n                            x_34659;\n                    }\n                }\n                skip_waves_34672 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34649 == 0) {\n                    ((__global float *) mem_33470)[0] = x_34659;\n                }\n            }\n        ",
                   "}\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_30502\n}\n__kernel void testzisegred_small_31727(__global int *global_failure,\n                                       int failure_is_an_option, __global\n                                       int64_t *global_failure_args,\n                                       __local volatile\n                                       int64_t *red_arr_mem_34783_backing_aligned_0,\n                                       int64_t paths_26891, int64_t steps_26892,\n                                       float sims_per_year_26971,\n                                       int64_t num_groups_32446, __global\n                                       unsigned char *res_mem_33489, __global\n                                       unsigned char *res_mem_33490, __global\n                                       unsigned char *res_mem_33491, __global\n                                       unsigned char *res_mem_33492, __global\n                                       unsigned char *mem_33593, __global\n                                       unsigned char *mem_33660,\n                                       int64_t segment_sizze_nonzzero_34776)\n{\n    #define segred_group_sizze_32445 (testzisegred_group_sizze_31721)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_34783_backing_0 =\n                          (__local volatile\n                           char *) red_arr_mem_34783_backing_aligned_0;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34778;\n    int32_t local_tid_34779;\n    int64_t group_sizze_34782;\n    int32_t wave_sizze_34781;\n    int32_t group_tid_34780;\n    \n    global_tid_34778 = get_global_id(0);\n    local_tid_34779 = get_local_id(0);",
                   "\n    group_sizze_34782 = get_local_size(0);\n    wave_sizze_34781 = LOCKSTEP_WIDTH;\n    group_tid_34780 = get_group_id(0);\n    \n    int32_t phys_tid_31727;\n    \n    phys_tid_31727 = global_tid_34778;\n    \n    __local char *red_arr_mem_34783;\n    \n    red_arr_mem_34783 = (__local char *) red_arr_mem_34783_backing_0;\n    \n    int32_t phys_group_id_34785;\n    \n    phys_group_id_34785 = get_group_id(0);\n    for (int32_t i_34786 = 0; i_34786 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(paths_26891 * steps_26892,\n                                          squot64(segred_group_sizze_32445,\n                                                  segment_sizze_nonzzero_34776))) -\n                   phys_group_id_34785, sext_i64_i32(num_groups_32446));\n         i_34786++) {\n        int32_t virt_group_id_34787 = phys_group_id_34785 + i_34786 *\n                sext_i64_i32(num_groups_32446);\n        int64_t gtid_31716 = squot64(squot64(sext_i32_i64(local_tid_34779),\n                                             segment_sizze_nonzzero_34776) +\n                                     sext_i32_i64(virt_group_id_34787) *\n                                     squot64(segred_group_sizze_32445,\n                                             segment_sizze_nonzzero_34776),\n                                     steps_26892);\n        int64_t gtid_31717 = squot64(sext_i32_i64(local_tid_34779),\n                                     segment_sizze_nonzzero_34776) +\n                sext_i32_i64(virt_group_id_34787) *\n                squot64(segred_group_sizze_32445,\n                        segment_sizze_nonzzero_34776) -\n                squot64(squot64(sext_i32_i64(local_tid_34779),\n                                segment_sizze_nonzzero_34776) +\n                        sext_i32_i64(virt_group_id_34787) *\n                        squot64(segred_group_sizze_32445,\n                                segment_sizze_nonzzero_34776), steps_26892) *\n                steps_26892;\n        int64_t gtid_31726 = srem64(sext_i32_",
                   "i64(local_tid_34779), 45);\n        \n        // apply map function if in bounds\n        {\n            if (slt64(0, 45) && ((slt64(gtid_31716, paths_26891) &&\n                                  slt64(gtid_31717, steps_26892)) &&\n                                 slt64(sext_i32_i64(local_tid_34779), 45 *\n                                       squot64(segred_group_sizze_32445,\n                                               segment_sizze_nonzzero_34776)))) {\n                int64_t convop_x_32602 = add64(1, gtid_31717);\n                float binop_x_32603 = sitofp_i64_f32(convop_x_32602);\n                float index_primexp_32604 = binop_x_32603 / sims_per_year_26971;\n                int64_t x_32457 = ((__global\n                                    int64_t *) res_mem_33491)[gtid_31726];\n                float x_32458 = ((__global float *) res_mem_33492)[gtid_31726];\n                int64_t i64_arg_32459 = sub64(x_32457, 1);\n                float res_32460 = sitofp_i64_f32(i64_arg_32459);\n                float y_32461 = x_32458 * res_32460;\n                bool cond_32462 = y_32461 < index_primexp_32604;\n                float ceil_arg_32463 = index_primexp_32604 / x_32458;\n                float res_32464;\n                \n                res_32464 = futrts_ceil32(ceil_arg_32463);\n                \n                int64_t res_32465 = fptosi_f32_i64(res_32464);\n                int64_t remaining_32466 = sub64(x_32457, res_32465);\n                float res_32467;\n                \n                if (cond_32462) {\n                    res_32467 = 0.0F;\n                } else {\n                    float x_32453 = ((__global float *) mem_33593)[gtid_31717 *\n                                                                   paths_26891 +\n                                                                   gtid_31716];\n                    float x_32455 = ((__global\n                                      float *) res_mem_33489)[gtid_31726];\n                    float x_32456 = ((__global\n   ",
                   "                                   float *) res_mem_33490)[gtid_31726];\n                    float nextpayment_32468 = x_32458 * res_32464;\n                    bool bounds_invalid_upwards_32469 = slt64(remaining_32466,\n                                                              1);\n                    bool valid_32470 = !bounds_invalid_upwards_32469;\n                    bool range_valid_c_32471;\n                    \n                    if (!valid_32470) {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          56) == -1) {\n                                global_failure_args[0] = 1;\n                                global_failure_args[1] = 2;\n                                global_failure_args[2] = remaining_32466;\n                                ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float y_32473 = nextpayment_32468 - index_primexp_32604;\n                    float negate_arg_32474 = 1.0e-2F * y_32473;\n                    float exp_arg_32475 = 0.0F - negate_arg_32474;\n                    float res_32476 = fpow32(2.7182817F, exp_arg_32475);\n                    float x_32477 = 1.0F - res_32476;\n                    float B_32478 = x_32477 / 1.0e-2F;\n                    float x_32479 = B_32478 - nextpayment_32468;\n                    float x_32480 = x_32479 + index_primexp_32604;\n                    float x_32481 = 4.4999997e-6F * x_32480;\n                    float A1_32482 = x_32481 / 1.0e-4F;\n                    float y_32483 = fpow32(B_32478, 2.0F);\n                    float x_32484 = 1.0000001e-6F * y_32483;\n                    float A2_32485 = x_32484 / 4.0e-2F;\n                    float exp_arg_32486 = A1_32482 - A2_32485;\n                    float res_32487 = fpow32(2.7182817F, exp_arg_32",
                   "486);\n                    float negate_arg_32488 = x_32453 * B_32478;\n                    float exp_arg_32489 = 0.0F - negate_arg_32488;\n                    float res_32490 = fpow32(2.7182817F, exp_arg_32489);\n                    float res_32491 = res_32487 * res_32490;\n                    bool y_32492 = slt64(0, remaining_32466);\n                    bool index_certs_32493;\n                    \n                    if (!y_32492) {\n                        {\n                            if (atomic_cmpxchg_i32_global(global_failure, -1,\n                                                          57) == -1) {\n                                global_failure_args[0] = 0;\n                                global_failure_args[1] = remaining_32466;\n                                ;\n                            }\n                            local_failure = true;\n                            goto error_0;\n                        }\n                    }\n                    \n                    float binop_y_32494 = sitofp_i64_f32(remaining_32466);\n                    float binop_y_32495 = x_32458 * binop_y_32494;\n                    float index_primexp_32496 = nextpayment_32468 +\n                          binop_y_32495;\n                    float y_32497 = index_primexp_32496 - index_primexp_32604;\n                    float negate_arg_32498 = 1.0e-2F * y_32497;\n                    float exp_arg_32499 = 0.0F - negate_arg_32498;\n                    float res_32500 = fpow32(2.7182817F, exp_arg_32499);\n                    float x_32501 = 1.0F - res_32500;\n                    float B_32502 = x_32501 / 1.0e-2F;\n                    float x_32503 = B_32502 - index_primexp_32496;\n                    float x_32504 = x_32503 + index_primexp_32604;\n                    float x_32505 = 4.4999997e-6F * x_32504;\n                    float A1_32506 = x_32505 / 1.0e-4F;\n                    float y_32507 = fpow32(B_32502, 2.0F);\n                    float x_32508 = 1.0000001e-6F * y_32507;\n                  ",
                   "  float A2_32509 = x_32508 / 4.0e-2F;\n                    float exp_arg_32510 = A1_32506 - A2_32509;\n                    float res_32511 = fpow32(2.7182817F, exp_arg_32510);\n                    float negate_arg_32512 = x_32453 * B_32502;\n                    float exp_arg_32513 = 0.0F - negate_arg_32512;\n                    float res_32514 = fpow32(2.7182817F, exp_arg_32513);\n                    float res_32515 = res_32511 * res_32514;\n                    float res_32516;\n                    float redout_32599 = 0.0F;\n                    \n                    for (int64_t i_32600 = 0; i_32600 < remaining_32466;\n                         i_32600++) {\n                        int64_t index_primexp_32624 = add64(1, i_32600);\n                        float res_32521 = sitofp_i64_f32(index_primexp_32624);\n                        float res_32522 = x_32458 * res_32521;\n                        float res_32523 = nextpayment_32468 + res_32522;\n                        float y_32524 = res_32523 - index_primexp_32604;\n                        float negate_arg_32525 = 1.0e-2F * y_32524;\n                        float exp_arg_32526 = 0.0F - negate_arg_32525;\n                        float res_32527 = fpow32(2.7182817F, exp_arg_32526);\n                        float x_32528 = 1.0F - res_32527;\n                        float B_32529 = x_32528 / 1.0e-2F;\n                        float x_32530 = B_32529 - res_32523;\n                        float x_32531 = x_32530 + index_primexp_32604;\n                        float x_32532 = 4.4999997e-6F * x_32531;\n                        float A1_32533 = x_32532 / 1.0e-4F;\n                        float y_32534 = fpow32(B_32529, 2.0F);\n                        float x_32535 = 1.0000001e-6F * y_32534;\n                        float A2_32536 = x_32535 / 4.0e-2F;\n                        float exp_arg_32537 = A1_32533 - A2_32536;\n                        float res_32538 = fpow32(2.7182817F, exp_arg_32537);\n                        float negate_arg_32539 = x_32453 * B_3",
                   "2529;\n                        float exp_arg_32540 = 0.0F - negate_arg_32539;\n                        float res_32541 = fpow32(2.7182817F, exp_arg_32540);\n                        float res_32542 = res_32538 * res_32541;\n                        float res_32519 = res_32542 + redout_32599;\n                        float redout_tmp_34788 = res_32519;\n                        \n                        redout_32599 = redout_tmp_34788;\n                    }\n                    res_32516 = redout_32599;\n                    \n                    float x_32543 = res_32491 - res_32515;\n                    float x_32544 = x_32455 * x_32458;\n                    float y_32545 = res_32516 * x_32544;\n                    float y_32546 = x_32543 - y_32545;\n                    float res_32547 = x_32456 * y_32546;\n                    \n                    res_32467 = res_32547;\n                }\n                // save map-out results\n                { }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)] =\n                        res_32467;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)] =\n                    0.0F;\n            }\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64(0, 45)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_32449;\n                float x_32450;\n                float x_34789;\n                float x_34790;\n                bool ltid_in_bounds_34792;\n                \n                ltid_in_bounds_34792 = slt64(sext_i32_i64(local_tid_34779), 45 *\n                                             squot64(segred_group_sizze_32445,\n                                                     segmen",
                   "t_sizze_nonzzero_34776));\n                \n                int32_t skip_threads_34793;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_34792) {\n                        x_32450 = ((volatile __local\n                                    float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)];\n                        if ((local_tid_34779 - squot32(local_tid_34779, 32) *\n                             32) == 0) {\n                            x_32449 = x_32450;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_34793 = 1;\n                    while (slt32(skip_threads_34793, 32)) {\n                        if (sle32(skip_threads_34793, local_tid_34779 -\n                                  squot32(local_tid_34779, 32) * 32) &&\n                            ltid_in_bounds_34792) {\n                            // read operands\n                            {\n                                x_32449 = ((volatile __local\n                                            float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779) -\n                                                                        sext_i32_i64(skip_threads_34793)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_34794 =\n                                     slt64(srem64(sext_i32_i64(local_tid_34779),\n                                                  45),\n                                           sext_i32_i64(local_tid_34779) -\n                                           sext_i32_i64(local_tid_34779 -\n                                           skip_threads_34793));\n                                \n                                if (inactive_34794) {\n                                    x_32449 = x_32450;\n                 ",
                   "               }\n                                if (!inactive_34794) {\n                                    float res_32451 = x_32449 + x_32450;\n                                    \n                                    x_32449 = res_32451;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_34781, skip_threads_34793)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_34793, local_tid_34779 -\n                                  squot32(local_tid_34779, 32) * 32) &&\n                            ltid_in_bounds_34792) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)] =\n                                    x_32449;\n                                x_32450 = x_32449;\n                            }\n                        }\n                        if (sle32(wave_sizze_34781, skip_threads_34793)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_34793 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_34779 - squot32(local_tid_34779, 32) * 32) ==\n                        31 && ltid_in_bounds_34792) {\n                        ((volatile __local\n                          float *) red_arr_mem_34783)[sext_i32_i64(squot32(local_tid_34779,\n                                                                           32))] =\n                            x_32449;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-i",
                   "n for block 'i+1'\n                {\n                    int32_t skip_threads_34795;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_34779, 32) == 0 &&\n                            ltid_in_bounds_34792) {\n                            x_34790 = ((volatile __local\n                                        float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)];\n                            if ((local_tid_34779 - squot32(local_tid_34779,\n                                                           32) * 32) == 0) {\n                                x_34789 = x_34790;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_34795 = 1;\n                        while (slt32(skip_threads_34795, 32)) {\n                            if (sle32(skip_threads_34795, local_tid_34779 -\n                                      squot32(local_tid_34779, 32) * 32) &&\n                                (squot32(local_tid_34779, 32) == 0 &&\n                                 ltid_in_bounds_34792)) {\n                                // read operands\n                                {\n                                    x_34789 = ((volatile __local\n                                                float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779) -\n                                                                            sext_i32_i64(skip_threads_34795)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_34796 =\n                                         slt64(srem64(sext_i32_i64(local_tid_34779 *\n                                                      32 + 32 - 1), 45),\n                                               sext_i32_i64(local_tid_34779 *\n ",
                   "                                              32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_34779 -\n                                                             skip_threads_34795) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_34796) {\n                                        x_34789 = x_34790;\n                                    }\n                                    if (!inactive_34796) {\n                                        float res_34791 = x_34789 + x_34790;\n                                        \n                                        x_34789 = res_34791;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_34781, skip_threads_34795)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_34795, local_tid_34779 -\n                                      squot32(local_tid_34779, 32) * 32) &&\n                                (squot32(local_tid_34779, 32) == 0 &&\n                                 ltid_in_bounds_34792)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)] =\n                                        x_34789;\n                                    x_34790 = x_34789;\n                                }\n                            }\n                            if (sle32(wave_sizze_34781, skip_threads_34795)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_34795 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_",
                   "FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_34779, 32) == 0 ||\n                          !ltid_in_bounds_34792)) {\n                        // read operands\n                        {\n                            x_32450 = x_32449;\n                            x_32449 = ((__local\n                                        float *) red_arr_mem_34783)[sext_i32_i64(squot32(local_tid_34779,\n                                                                                         32)) -\n                                                                    1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_34797 =\n                                 slt64(srem64(sext_i32_i64(local_tid_34779),\n                                              45),\n                                       sext_i32_i64(local_tid_34779) -\n                                       sext_i32_i64(squot32(local_tid_34779,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_34797) {\n                                x_32449 = x_32450;\n                            }\n                            if (!inactive_34797) {\n                                float res_32451 = x_32449 + x_32450;\n                                \n                                x_32449 = res_32451;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)] =\n                                x_32449;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n           ",
                   "         if (squot32(local_tid_34779, 32) == 0) {\n                        ((__local\n                          float *) red_arr_mem_34783)[sext_i32_i64(local_tid_34779)] =\n                            x_32450;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_34787) *\n                      squot64(segred_group_sizze_32445,\n                              segment_sizze_nonzzero_34776) +\n                      sext_i32_i64(local_tid_34779), paths_26891 *\n                      steps_26892) && slt64(sext_i32_i64(local_tid_34779),\n                                            squot64(segred_group_sizze_32445,\n                                                    segment_sizze_nonzzero_34776))) {\n                ((__global\n                  float *) mem_33660)[squot64(sext_i32_i64(virt_group_id_34787) *\n                                              squot64(segred_group_sizze_32445,\n                                                      segment_sizze_nonzzero_34776) +\n                                              sext_i32_i64(local_tid_34779),\n                                              steps_26892) * steps_26892 +\n                                      (sext_i32_i64(virt_group_id_34787) *\n                                       squot64(segred_group_sizze_32445,\n                                               segment_sizze_nonzzero_34776) +\n                                       sext_i32_i64(local_tid_34779) -\n                                       squot64(sext_i32_i64(virt_group_id_34787) *\n                                               squot64(segred_group_sizze_32445,\n                                                       segment_sizze_nonzzero_34776) +\n                                               sext_i32_i64(local_tid_34779),\n                                               steps_2689",
                   "2) * steps_26892)] =\n                    ((__local\n                      float *) red_arr_mem_34783)[(sext_i32_i64(local_tid_34779) +\n                                                   1) *\n                                                  segment_sizze_nonzzero_34776 -\n                                                  1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_32445\n}\n",
                   NULL};
static const char *size_names[] = {"main.group_size_35119",
                                   "main.segmap_group_size_27165",
                                   "main.segmap_group_size_27314",
                                   "main.segmap_group_size_27633",
                                   "main.segmap_group_size_28158",
                                   "main.segmap_group_size_28398",
                                   "main.segmap_group_size_28647",
                                   "main.segmap_group_size_28746",
                                   "main.segmap_group_size_28809",
                                   "main.segmap_group_size_29316",
                                   "main.segmap_group_size_29781",
                                   "main.segmap_group_size_29901",
                                   "main.segmap_num_groups_27635",
                                   "main.segmap_num_groups_28649",
                                   "main.segmap_num_groups_29903",
                                   "main.segred_group_size_27151",
                                   "main.segred_group_size_28408",
                                   "main.segred_group_size_29790",
                                   "main.segred_group_size_30106",
                                   "main.segred_group_size_34018",
                                   "main.segred_group_size_34269",
                                   "main.segred_group_size_34384",
                                   "main.segred_group_size_34571",
                                   "main.segred_num_groups_27153",
                                   "main.segred_num_groups_28410",
                                   "main.segred_num_groups_29792",
                                   "main.segred_num_groups_30108",
                                   "main.segred_num_groups_34016",
                                   "main.segred_num_groups_34267",
                                   "main.segred_num_groups_34382",
                                   "main.segred_num_groups_34569",
                                   "main.segscan_group_size_30122",
                                   "main.segscan_num_groups_30124",
                                   "main.suff_intra_par_3",
                                   "main.suff_intra_par_5",
                                   "main.suff_outer_par_0",
                                   "main.suff_outer_par_2",
                                   "main.suff_outer_par_4",
                                   "main.suff_outer_par_8",
                                   "test.segmap_group_size_30515",
                                   "test.segmap_group_size_30664",
                                   "test.segmap_group_size_30977",
                                   "test.segmap_group_size_31483",
                                   "test.segmap_group_size_31711",
                                   "test.segmap_group_size_31948",
                                   "test.segmap_group_size_32047",
                                   "test.segmap_group_size_32110",
                                   "test.segmap_num_groups_30979",
                                   "test.segmap_num_groups_31950",
                                   "test.segred_group_size_30501",
                                   "test.segred_group_size_31721",
                                   "test.segred_num_groups_30503",
                                   "test.segred_num_groups_31723",
                                   "test.suff_intra_par_3",
                                   "test.suff_intra_par_5",
                                   "test.suff_outer_par_0",
                                   "test.suff_outer_par_2",
                                   "test.suff_outer_par_4"};
static const char *size_vars[] = {"mainzigroup_sizze_35119",
                                  "mainzisegmap_group_sizze_27165",
                                  "mainzisegmap_group_sizze_27314",
                                  "mainzisegmap_group_sizze_27633",
                                  "mainzisegmap_group_sizze_28158",
                                  "mainzisegmap_group_sizze_28398",
                                  "mainzisegmap_group_sizze_28647",
                                  "mainzisegmap_group_sizze_28746",
                                  "mainzisegmap_group_sizze_28809",
                                  "mainzisegmap_group_sizze_29316",
                                  "mainzisegmap_group_sizze_29781",
                                  "mainzisegmap_group_sizze_29901",
                                  "mainzisegmap_num_groups_27635",
                                  "mainzisegmap_num_groups_28649",
                                  "mainzisegmap_num_groups_29903",
                                  "mainzisegred_group_sizze_27151",
                                  "mainzisegred_group_sizze_28408",
                                  "mainzisegred_group_sizze_29790",
                                  "mainzisegred_group_sizze_30106",
                                  "mainzisegred_group_sizze_34018",
                                  "mainzisegred_group_sizze_34269",
                                  "mainzisegred_group_sizze_34384",
                                  "mainzisegred_group_sizze_34571",
                                  "mainzisegred_num_groups_27153",
                                  "mainzisegred_num_groups_28410",
                                  "mainzisegred_num_groups_29792",
                                  "mainzisegred_num_groups_30108",
                                  "mainzisegred_num_groups_34016",
                                  "mainzisegred_num_groups_34267",
                                  "mainzisegred_num_groups_34382",
                                  "mainzisegred_num_groups_34569",
                                  "mainzisegscan_group_sizze_30122",
                                  "mainzisegscan_num_groups_30124",
                                  "mainzisuff_intra_par_3",
                                  "mainzisuff_intra_par_5",
                                  "mainzisuff_outer_par_0",
                                  "mainzisuff_outer_par_2",
                                  "mainzisuff_outer_par_4",
                                  "mainzisuff_outer_par_8",
                                  "testzisegmap_group_sizze_30515",
                                  "testzisegmap_group_sizze_30664",
                                  "testzisegmap_group_sizze_30977",
                                  "testzisegmap_group_sizze_31483",
                                  "testzisegmap_group_sizze_31711",
                                  "testzisegmap_group_sizze_31948",
                                  "testzisegmap_group_sizze_32047",
                                  "testzisegmap_group_sizze_32110",
                                  "testzisegmap_num_groups_30979",
                                  "testzisegmap_num_groups_31950",
                                  "testzisegred_group_sizze_30501",
                                  "testzisegred_group_sizze_31721",
                                  "testzisegred_num_groups_30503",
                                  "testzisegred_num_groups_31723",
                                  "testzisuff_intra_par_3",
                                  "testzisuff_intra_par_5",
                                  "testzisuff_outer_par_0",
                                  "testzisuff_outer_par_2",
                                  "testzisuff_outer_par_4"};
static const char *size_classes[] = {"group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "num_groups", "num_groups", "num_groups",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "group_size", "num_groups",
                                     "threshold (!main.suff_outer_par_2)",
                                     "threshold (!main.suff_outer_par_4 !main.suff_outer_par_2 !main.suff_intra_par_3)",
                                     "threshold ()", "threshold ()",
                                     "threshold (!main.suff_outer_par_2 !main.suff_intra_par_3)",
                                     "threshold ()", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "num_groups", "num_groups", "group_size",
                                     "group_size", "num_groups", "num_groups",
                                     "threshold (!test.suff_outer_par_2)",
                                     "threshold (!test.suff_outer_par_4 !test.suff_outer_par_2 !test.suff_intra_par_3)",
                                     "threshold ()", "threshold ()",
                                     "threshold (!test.suff_outer_par_2 !test.suff_intra_par_3)"};
int futhark_get_num_sizes(void)
{
    return 58;
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
struct sizes {
    size_t mainzigroup_sizze_35119;
    size_t mainzisegmap_group_sizze_27165;
    size_t mainzisegmap_group_sizze_27314;
    size_t mainzisegmap_group_sizze_27633;
    size_t mainzisegmap_group_sizze_28158;
    size_t mainzisegmap_group_sizze_28398;
    size_t mainzisegmap_group_sizze_28647;
    size_t mainzisegmap_group_sizze_28746;
    size_t mainzisegmap_group_sizze_28809;
    size_t mainzisegmap_group_sizze_29316;
    size_t mainzisegmap_group_sizze_29781;
    size_t mainzisegmap_group_sizze_29901;
    size_t mainzisegmap_num_groups_27635;
    size_t mainzisegmap_num_groups_28649;
    size_t mainzisegmap_num_groups_29903;
    size_t mainzisegred_group_sizze_27151;
    size_t mainzisegred_group_sizze_28408;
    size_t mainzisegred_group_sizze_29790;
    size_t mainzisegred_group_sizze_30106;
    size_t mainzisegred_group_sizze_34018;
    size_t mainzisegred_group_sizze_34269;
    size_t mainzisegred_group_sizze_34384;
    size_t mainzisegred_group_sizze_34571;
    size_t mainzisegred_num_groups_27153;
    size_t mainzisegred_num_groups_28410;
    size_t mainzisegred_num_groups_29792;
    size_t mainzisegred_num_groups_30108;
    size_t mainzisegred_num_groups_34016;
    size_t mainzisegred_num_groups_34267;
    size_t mainzisegred_num_groups_34382;
    size_t mainzisegred_num_groups_34569;
    size_t mainzisegscan_group_sizze_30122;
    size_t mainzisegscan_num_groups_30124;
    size_t mainzisuff_intra_par_3;
    size_t mainzisuff_intra_par_5;
    size_t mainzisuff_outer_par_0;
    size_t mainzisuff_outer_par_2;
    size_t mainzisuff_outer_par_4;
    size_t mainzisuff_outer_par_8;
    size_t testzisegmap_group_sizze_30515;
    size_t testzisegmap_group_sizze_30664;
    size_t testzisegmap_group_sizze_30977;
    size_t testzisegmap_group_sizze_31483;
    size_t testzisegmap_group_sizze_31711;
    size_t testzisegmap_group_sizze_31948;
    size_t testzisegmap_group_sizze_32047;
    size_t testzisegmap_group_sizze_32110;
    size_t testzisegmap_num_groups_30979;
    size_t testzisegmap_num_groups_31950;
    size_t testzisegred_group_sizze_30501;
    size_t testzisegred_group_sizze_31721;
    size_t testzisegred_num_groups_30503;
    size_t testzisegred_num_groups_31723;
    size_t testzisuff_intra_par_3;
    size_t testzisuff_intra_par_5;
    size_t testzisuff_outer_par_0;
    size_t testzisuff_outer_par_2;
    size_t testzisuff_outer_par_4;
} ;
struct futhark_context_config {
    struct opencl_config opencl;
    size_t sizes[58];
    int num_build_opts;
    const char **build_opts;
} ;
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->num_build_opts = 0;
    cfg->build_opts = (const char **) malloc(sizeof(const char *));
    cfg->build_opts[0] = NULL;
    cfg->sizes[0] = 0;
    cfg->sizes[1] = 0;
    cfg->sizes[2] = 0;
    cfg->sizes[3] = 0;
    cfg->sizes[4] = 0;
    cfg->sizes[5] = 0;
    cfg->sizes[6] = 0;
    cfg->sizes[7] = 0;
    cfg->sizes[8] = 0;
    cfg->sizes[9] = 0;
    cfg->sizes[10] = 0;
    cfg->sizes[11] = 0;
    cfg->sizes[12] = 0;
    cfg->sizes[13] = 0;
    cfg->sizes[14] = 0;
    cfg->sizes[15] = 0;
    cfg->sizes[16] = 0;
    cfg->sizes[17] = 0;
    cfg->sizes[18] = 0;
    cfg->sizes[19] = 0;
    cfg->sizes[20] = 0;
    cfg->sizes[21] = 0;
    cfg->sizes[22] = 0;
    cfg->sizes[23] = 0;
    cfg->sizes[24] = 0;
    cfg->sizes[25] = 0;
    cfg->sizes[26] = 0;
    cfg->sizes[27] = 0;
    cfg->sizes[28] = 0;
    cfg->sizes[29] = 0;
    cfg->sizes[30] = 0;
    cfg->sizes[31] = 0;
    cfg->sizes[32] = 0;
    cfg->sizes[33] = 32;
    cfg->sizes[34] = 32;
    cfg->sizes[35] = 0;
    cfg->sizes[36] = 0;
    cfg->sizes[37] = 0;
    cfg->sizes[38] = 0;
    cfg->sizes[39] = 0;
    cfg->sizes[40] = 0;
    cfg->sizes[41] = 0;
    cfg->sizes[42] = 0;
    cfg->sizes[43] = 0;
    cfg->sizes[44] = 0;
    cfg->sizes[45] = 0;
    cfg->sizes[46] = 0;
    cfg->sizes[47] = 0;
    cfg->sizes[48] = 0;
    cfg->sizes[49] = 0;
    cfg->sizes[50] = 0;
    cfg->sizes[51] = 0;
    cfg->sizes[52] = 0;
    cfg->sizes[53] = 32;
    cfg->sizes[54] = 32;
    cfg->sizes[55] = 0;
    cfg->sizes[56] = 0;
    cfg->sizes[57] = 0;
    opencl_config_init(&cfg->opencl, 58, size_names, size_vars, cfg->sizes,
                       size_classes);
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg->build_opts);
    free(cfg);
}
void futhark_context_config_add_build_option(struct futhark_context_config *cfg,
                                             const char *opt)
{
    cfg->build_opts[cfg->num_build_opts] = opt;
    cfg->num_build_opts++;
    cfg->build_opts = (const char **) realloc(cfg->build_opts,
                                              (cfg->num_build_opts + 1) *
                                              sizeof(const char *));
    cfg->build_opts[cfg->num_build_opts] = NULL;
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->opencl.profiling = cfg->opencl.logging = cfg->opencl.debugging = flag;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->opencl.profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag)
{
    cfg->opencl.logging = flag;
}
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s)
{
    set_preferred_device(&cfg->opencl, s);
}
void futhark_context_config_set_platform(struct futhark_context_config *cfg,
                                         const char *s)
{
    set_preferred_platform(&cfg->opencl, s);
}
void futhark_context_config_select_device_interactively(struct futhark_context_config *cfg)
{
    select_device_interactively(&cfg->opencl);
}
void futhark_context_config_list_devices(struct futhark_context_config *cfg)
{
    list_devices(&cfg->opencl);
}
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path)
{
    cfg->opencl.dump_program_to = path;
}
void futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                              const char *path)
{
    cfg->opencl.load_program_from = path;
}
void futhark_context_config_dump_binary_to(struct futhark_context_config *cfg,
                                           const char *path)
{
    cfg->opencl.dump_binary_to = path;
}
void futhark_context_config_load_binary_from(struct futhark_context_config *cfg,
                                             const char *path)
{
    cfg->opencl.load_binary_from = path;
}
void futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                                   int size)
{
    cfg->opencl.default_group_size = size;
    cfg->opencl.default_group_size_changed = 1;
}
void futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                                   int num)
{
    cfg->opencl.default_num_groups = num;
}
void futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->opencl.default_tile_size = size;
    cfg->opencl.default_tile_size_changed = 1;
}
void futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->opencl.default_threshold = size;
}
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    for (int i = 0; i < 58; i++) {
        if (strcmp(size_name, size_names[i]) == 0) {
            cfg->sizes[i] = size_value;
            return 0;
        }
    }
    if (strcmp(size_name, "default_group_size") == 0) {
        cfg->opencl.default_group_size = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_num_groups") == 0) {
        cfg->opencl.default_num_groups = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_threshold") == 0) {
        cfg->opencl.default_threshold = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_tile_size") == 0) {
        cfg->opencl.default_tile_size = size_value;
        return 0;
    }
    return 1;
}
struct futhark_context {
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    int64_t peak_mem_usage_device;
    int64_t cur_mem_usage_device;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    struct memblock_device mainzicounter_mem_34642;
    struct memblock_device mainzicounter_mem_34806;
    struct memblock_device mainzicounter_mem_34852;
    struct memblock_device mainzicounter_mem_34908;
    struct memblock_device mainzicounter_mem_35084;
    struct memblock_device mainzicounter_mem_35121;
    struct memblock_device mainzicounter_mem_35175;
    struct memblock_device mainzicounter_mem_35289;
    struct memblock_device testzistatic_array_34639;
    struct memblock_device testzistatic_array_34640;
    struct memblock_device testzistatic_array_34641;
    struct memblock_device testzicounter_mem_34643;
    struct memblock_device testzicounter_mem_34805;
    int total_runs;
    long total_runtime;
    cl_kernel gpu_map_transpose_f32;
    cl_kernel gpu_map_transpose_f32_low_height;
    cl_kernel gpu_map_transpose_f32_low_width;
    cl_kernel gpu_map_transpose_f32_small;
    cl_kernel mainzicopy_35116;
    cl_kernel mainziscan_stage1_30128;
    cl_kernel mainziscan_stage2_30128;
    cl_kernel mainziscan_stage3_30128;
    cl_kernel mainzisegmap_27163;
    cl_kernel mainzisegmap_27312;
    cl_kernel mainzisegmap_27631;
    cl_kernel mainzisegmap_28395;
    cl_kernel mainzisegmap_28645;
    cl_kernel mainzisegmap_28743;
    cl_kernel mainzisegmap_28807;
    cl_kernel mainzisegmap_29314;
    cl_kernel mainzisegmap_29779;
    cl_kernel mainzisegmap_29899;
    cl_kernel mainzisegmap_intragroup_27629;
    cl_kernel mainzisegmap_intragroup_28171;
    cl_kernel mainzisegmap_intragroup_32669;
    cl_kernel mainzisegred_large_28414;
    cl_kernel mainzisegred_large_29796;
    cl_kernel mainzisegred_large_30112;
    cl_kernel mainzisegred_nonseg_27159;
    cl_kernel mainzisegred_nonseg_34026;
    cl_kernel mainzisegred_nonseg_34277;
    cl_kernel mainzisegred_nonseg_34392;
    cl_kernel mainzisegred_nonseg_34579;
    cl_kernel mainzisegred_small_28414;
    cl_kernel mainzisegred_small_29796;
    cl_kernel mainzisegred_small_30112;
    cl_kernel testzisegmap_30513;
    cl_kernel testzisegmap_30662;
    cl_kernel testzisegmap_30975;
    cl_kernel testzisegmap_31708;
    cl_kernel testzisegmap_31946;
    cl_kernel testzisegmap_32044;
    cl_kernel testzisegmap_32108;
    cl_kernel testzisegmap_intragroup_30973;
    cl_kernel testzisegmap_intragroup_31496;
    cl_kernel testzisegmap_intragroup_32669;
    cl_kernel testzisegred_large_31727;
    cl_kernel testzisegred_nonseg_30509;
    cl_kernel testzisegred_small_31727;
    int64_t copy_dev_to_dev_total_runtime;
    int copy_dev_to_dev_runs;
    int64_t copy_dev_to_host_total_runtime;
    int copy_dev_to_host_runs;
    int64_t copy_host_to_dev_total_runtime;
    int copy_host_to_dev_runs;
    int64_t copy_scalar_to_dev_total_runtime;
    int copy_scalar_to_dev_runs;
    int64_t copy_scalar_from_dev_total_runtime;
    int copy_scalar_from_dev_runs;
    int64_t gpu_map_transpose_f32_total_runtime;
    int gpu_map_transpose_f32_runs;
    int64_t gpu_map_transpose_f32_low_height_total_runtime;
    int gpu_map_transpose_f32_low_height_runs;
    int64_t gpu_map_transpose_f32_low_width_total_runtime;
    int gpu_map_transpose_f32_low_width_runs;
    int64_t gpu_map_transpose_f32_small_total_runtime;
    int gpu_map_transpose_f32_small_runs;
    int64_t mainzicopy_35116_total_runtime;
    int mainzicopy_35116_runs;
    int64_t mainziscan_stage1_30128_total_runtime;
    int mainziscan_stage1_30128_runs;
    int64_t mainziscan_stage2_30128_total_runtime;
    int mainziscan_stage2_30128_runs;
    int64_t mainziscan_stage3_30128_total_runtime;
    int mainziscan_stage3_30128_runs;
    int64_t mainzisegmap_27163_total_runtime;
    int mainzisegmap_27163_runs;
    int64_t mainzisegmap_27312_total_runtime;
    int mainzisegmap_27312_runs;
    int64_t mainzisegmap_27631_total_runtime;
    int mainzisegmap_27631_runs;
    int64_t mainzisegmap_28395_total_runtime;
    int mainzisegmap_28395_runs;
    int64_t mainzisegmap_28645_total_runtime;
    int mainzisegmap_28645_runs;
    int64_t mainzisegmap_28743_total_runtime;
    int mainzisegmap_28743_runs;
    int64_t mainzisegmap_28807_total_runtime;
    int mainzisegmap_28807_runs;
    int64_t mainzisegmap_29314_total_runtime;
    int mainzisegmap_29314_runs;
    int64_t mainzisegmap_29779_total_runtime;
    int mainzisegmap_29779_runs;
    int64_t mainzisegmap_29899_total_runtime;
    int mainzisegmap_29899_runs;
    int64_t mainzisegmap_intragroup_27629_total_runtime;
    int mainzisegmap_intragroup_27629_runs;
    int64_t mainzisegmap_intragroup_28171_total_runtime;
    int mainzisegmap_intragroup_28171_runs;
    int64_t mainzisegmap_intragroup_32669_total_runtime;
    int mainzisegmap_intragroup_32669_runs;
    int64_t mainzisegred_large_28414_total_runtime;
    int mainzisegred_large_28414_runs;
    int64_t mainzisegred_large_29796_total_runtime;
    int mainzisegred_large_29796_runs;
    int64_t mainzisegred_large_30112_total_runtime;
    int mainzisegred_large_30112_runs;
    int64_t mainzisegred_nonseg_27159_total_runtime;
    int mainzisegred_nonseg_27159_runs;
    int64_t mainzisegred_nonseg_34026_total_runtime;
    int mainzisegred_nonseg_34026_runs;
    int64_t mainzisegred_nonseg_34277_total_runtime;
    int mainzisegred_nonseg_34277_runs;
    int64_t mainzisegred_nonseg_34392_total_runtime;
    int mainzisegred_nonseg_34392_runs;
    int64_t mainzisegred_nonseg_34579_total_runtime;
    int mainzisegred_nonseg_34579_runs;
    int64_t mainzisegred_small_28414_total_runtime;
    int mainzisegred_small_28414_runs;
    int64_t mainzisegred_small_29796_total_runtime;
    int mainzisegred_small_29796_runs;
    int64_t mainzisegred_small_30112_total_runtime;
    int mainzisegred_small_30112_runs;
    int64_t testzisegmap_30513_total_runtime;
    int testzisegmap_30513_runs;
    int64_t testzisegmap_30662_total_runtime;
    int testzisegmap_30662_runs;
    int64_t testzisegmap_30975_total_runtime;
    int testzisegmap_30975_runs;
    int64_t testzisegmap_31708_total_runtime;
    int testzisegmap_31708_runs;
    int64_t testzisegmap_31946_total_runtime;
    int testzisegmap_31946_runs;
    int64_t testzisegmap_32044_total_runtime;
    int testzisegmap_32044_runs;
    int64_t testzisegmap_32108_total_runtime;
    int testzisegmap_32108_runs;
    int64_t testzisegmap_intragroup_30973_total_runtime;
    int testzisegmap_intragroup_30973_runs;
    int64_t testzisegmap_intragroup_31496_total_runtime;
    int testzisegmap_intragroup_31496_runs;
    int64_t testzisegmap_intragroup_32669_total_runtime;
    int testzisegmap_intragroup_32669_runs;
    int64_t testzisegred_large_31727_total_runtime;
    int testzisegred_large_31727_runs;
    int64_t testzisegred_nonseg_30509_total_runtime;
    int testzisegred_nonseg_30509_runs;
    int64_t testzisegred_small_31727_total_runtime;
    int testzisegred_small_31727_runs;
    cl_mem global_failure;
    cl_mem global_failure_args;
    struct opencl_context opencl;
    struct sizes sizes;
    cl_int failure_is_an_option;
} ;
void post_opencl_setup(struct opencl_context *ctx,
                       struct opencl_device_option *option)
{
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name,
                                            "NVIDIA CUDA") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_GPU) == CL_DEVICE_TYPE_GPU) {
        ctx->lockstep_width = 32;
    }
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name,
                                            "AMD Accelerated Parallel Processing") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU) {
        ctx->lockstep_width = 32;
    }
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU) {
        ctx->lockstep_width = 1;
    }
    if ((ctx->cfg.default_num_groups == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_GPU) == CL_DEVICE_TYPE_GPU) {
        size_t MAX_COMPUTE_UNITS_val = 0;
        
        clGetDeviceInfo(ctx->device, CL_DEVICE_MAX_COMPUTE_UNITS,
                        sizeof(MAX_COMPUTE_UNITS_val), &MAX_COMPUTE_UNITS_val,
                        NULL);
        ctx->cfg.default_num_groups = 4 * MAX_COMPUTE_UNITS_val;
    }
    if ((ctx->cfg.default_group_size == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_GPU) == CL_DEVICE_TYPE_GPU) {
        ctx->cfg.default_group_size = 256;
    }
    if ((ctx->cfg.default_tile_size == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU) {
        ctx->cfg.default_tile_size = 32;
    }
    if ((ctx->cfg.default_threshold == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU) {
        ctx->cfg.default_threshold = 32768;
    }
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_CPU) ==
        CL_DEVICE_TYPE_CPU) {
        ctx->lockstep_width = 1;
    }
    if ((ctx->cfg.default_num_groups == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_CPU) == CL_DEVICE_TYPE_CPU) {
        size_t MAX_COMPUTE_UNITS_val = 0;
        
        clGetDeviceInfo(ctx->device, CL_DEVICE_MAX_COMPUTE_UNITS,
                        sizeof(MAX_COMPUTE_UNITS_val), &MAX_COMPUTE_UNITS_val,
                        NULL);
        ctx->cfg.default_num_groups = MAX_COMPUTE_UNITS_val;
    }
    if ((ctx->cfg.default_group_size == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_CPU) == CL_DEVICE_TYPE_CPU) {
        ctx->cfg.default_group_size = 32;
    }
    if ((ctx->cfg.default_tile_size == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_CPU) ==
        CL_DEVICE_TYPE_CPU) {
        ctx->cfg.default_tile_size = 4;
    }
    if ((ctx->cfg.default_threshold == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_CPU) ==
        CL_DEVICE_TYPE_CPU) {
        size_t MAX_COMPUTE_UNITS_val = 0;
        
        clGetDeviceInfo(ctx->device, CL_DEVICE_MAX_COMPUTE_UNITS,
                        sizeof(MAX_COMPUTE_UNITS_val), &MAX_COMPUTE_UNITS_val,
                        NULL);
        ctx->cfg.default_threshold = MAX_COMPUTE_UNITS_val;
    }
}
static void init_context_early(struct futhark_context_config *cfg,
                               struct futhark_context *ctx)
{
    ctx->opencl.cfg = cfg->opencl;
    ctx->detail_memory = cfg->opencl.debugging;
    ctx->debugging = cfg->opencl.debugging;
    ctx->profiling = cfg->opencl.profiling;
    ctx->profiling_paused = 0;
    ctx->logging = cfg->opencl.logging;
    ctx->error = NULL;
    ctx->opencl.profiling_records_capacity = 200;
    ctx->opencl.profiling_records_used = 0;
    ctx->opencl.profiling_records =
        malloc(ctx->opencl.profiling_records_capacity *
        sizeof(struct profiling_record));
    create_lock(&ctx->lock);
    ctx->failure_is_an_option = 0;
    ctx->peak_mem_usage_device = 0;
    ctx->cur_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->total_runs = 0;
    ctx->total_runtime = 0;
    ctx->copy_dev_to_dev_total_runtime = 0;
    ctx->copy_dev_to_dev_runs = 0;
    ctx->copy_dev_to_host_total_runtime = 0;
    ctx->copy_dev_to_host_runs = 0;
    ctx->copy_host_to_dev_total_runtime = 0;
    ctx->copy_host_to_dev_runs = 0;
    ctx->copy_scalar_to_dev_total_runtime = 0;
    ctx->copy_scalar_to_dev_runs = 0;
    ctx->copy_scalar_from_dev_total_runtime = 0;
    ctx->copy_scalar_from_dev_runs = 0;
    ctx->gpu_map_transpose_f32_total_runtime = 0;
    ctx->gpu_map_transpose_f32_runs = 0;
    ctx->gpu_map_transpose_f32_low_height_total_runtime = 0;
    ctx->gpu_map_transpose_f32_low_height_runs = 0;
    ctx->gpu_map_transpose_f32_low_width_total_runtime = 0;
    ctx->gpu_map_transpose_f32_low_width_runs = 0;
    ctx->gpu_map_transpose_f32_small_total_runtime = 0;
    ctx->gpu_map_transpose_f32_small_runs = 0;
    ctx->mainzicopy_35116_total_runtime = 0;
    ctx->mainzicopy_35116_runs = 0;
    ctx->mainziscan_stage1_30128_total_runtime = 0;
    ctx->mainziscan_stage1_30128_runs = 0;
    ctx->mainziscan_stage2_30128_total_runtime = 0;
    ctx->mainziscan_stage2_30128_runs = 0;
    ctx->mainziscan_stage3_30128_total_runtime = 0;
    ctx->mainziscan_stage3_30128_runs = 0;
    ctx->mainzisegmap_27163_total_runtime = 0;
    ctx->mainzisegmap_27163_runs = 0;
    ctx->mainzisegmap_27312_total_runtime = 0;
    ctx->mainzisegmap_27312_runs = 0;
    ctx->mainzisegmap_27631_total_runtime = 0;
    ctx->mainzisegmap_27631_runs = 0;
    ctx->mainzisegmap_28395_total_runtime = 0;
    ctx->mainzisegmap_28395_runs = 0;
    ctx->mainzisegmap_28645_total_runtime = 0;
    ctx->mainzisegmap_28645_runs = 0;
    ctx->mainzisegmap_28743_total_runtime = 0;
    ctx->mainzisegmap_28743_runs = 0;
    ctx->mainzisegmap_28807_total_runtime = 0;
    ctx->mainzisegmap_28807_runs = 0;
    ctx->mainzisegmap_29314_total_runtime = 0;
    ctx->mainzisegmap_29314_runs = 0;
    ctx->mainzisegmap_29779_total_runtime = 0;
    ctx->mainzisegmap_29779_runs = 0;
    ctx->mainzisegmap_29899_total_runtime = 0;
    ctx->mainzisegmap_29899_runs = 0;
    ctx->mainzisegmap_intragroup_27629_total_runtime = 0;
    ctx->mainzisegmap_intragroup_27629_runs = 0;
    ctx->mainzisegmap_intragroup_28171_total_runtime = 0;
    ctx->mainzisegmap_intragroup_28171_runs = 0;
    ctx->mainzisegmap_intragroup_32669_total_runtime = 0;
    ctx->mainzisegmap_intragroup_32669_runs = 0;
    ctx->mainzisegred_large_28414_total_runtime = 0;
    ctx->mainzisegred_large_28414_runs = 0;
    ctx->mainzisegred_large_29796_total_runtime = 0;
    ctx->mainzisegred_large_29796_runs = 0;
    ctx->mainzisegred_large_30112_total_runtime = 0;
    ctx->mainzisegred_large_30112_runs = 0;
    ctx->mainzisegred_nonseg_27159_total_runtime = 0;
    ctx->mainzisegred_nonseg_27159_runs = 0;
    ctx->mainzisegred_nonseg_34026_total_runtime = 0;
    ctx->mainzisegred_nonseg_34026_runs = 0;
    ctx->mainzisegred_nonseg_34277_total_runtime = 0;
    ctx->mainzisegred_nonseg_34277_runs = 0;
    ctx->mainzisegred_nonseg_34392_total_runtime = 0;
    ctx->mainzisegred_nonseg_34392_runs = 0;
    ctx->mainzisegred_nonseg_34579_total_runtime = 0;
    ctx->mainzisegred_nonseg_34579_runs = 0;
    ctx->mainzisegred_small_28414_total_runtime = 0;
    ctx->mainzisegred_small_28414_runs = 0;
    ctx->mainzisegred_small_29796_total_runtime = 0;
    ctx->mainzisegred_small_29796_runs = 0;
    ctx->mainzisegred_small_30112_total_runtime = 0;
    ctx->mainzisegred_small_30112_runs = 0;
    ctx->testzisegmap_30513_total_runtime = 0;
    ctx->testzisegmap_30513_runs = 0;
    ctx->testzisegmap_30662_total_runtime = 0;
    ctx->testzisegmap_30662_runs = 0;
    ctx->testzisegmap_30975_total_runtime = 0;
    ctx->testzisegmap_30975_runs = 0;
    ctx->testzisegmap_31708_total_runtime = 0;
    ctx->testzisegmap_31708_runs = 0;
    ctx->testzisegmap_31946_total_runtime = 0;
    ctx->testzisegmap_31946_runs = 0;
    ctx->testzisegmap_32044_total_runtime = 0;
    ctx->testzisegmap_32044_runs = 0;
    ctx->testzisegmap_32108_total_runtime = 0;
    ctx->testzisegmap_32108_runs = 0;
    ctx->testzisegmap_intragroup_30973_total_runtime = 0;
    ctx->testzisegmap_intragroup_30973_runs = 0;
    ctx->testzisegmap_intragroup_31496_total_runtime = 0;
    ctx->testzisegmap_intragroup_31496_runs = 0;
    ctx->testzisegmap_intragroup_32669_total_runtime = 0;
    ctx->testzisegmap_intragroup_32669_runs = 0;
    ctx->testzisegred_large_31727_total_runtime = 0;
    ctx->testzisegred_large_31727_runs = 0;
    ctx->testzisegred_nonseg_30509_total_runtime = 0;
    ctx->testzisegred_nonseg_30509_runs = 0;
    ctx->testzisegred_small_31727_total_runtime = 0;
    ctx->testzisegred_small_31727_runs = 0;
}
static int init_context_late(struct futhark_context_config *cfg,
                             struct futhark_context *ctx, cl_program prog)
{
    cl_int error;
    cl_int no_error = -1;
    
    ctx->global_failure = clCreateBuffer(ctx->opencl.ctx, CL_MEM_READ_WRITE |
                                         CL_MEM_COPY_HOST_PTR, sizeof(cl_int),
                                         &no_error, &error);
    OPENCL_SUCCEED_OR_RETURN(error);
    // The +1 is to avoid zero-byte allocations.
    ctx->global_failure_args = clCreateBuffer(ctx->opencl.ctx,
                                              CL_MEM_READ_WRITE,
                                              sizeof(int64_t) * (3 + 1), NULL,
                                              &error);
    OPENCL_SUCCEED_OR_RETURN(error);
    {
        ctx->gpu_map_transpose_f32 = clCreateKernel(prog,
                                                    "gpu_map_transpose_f32",
                                                    &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "gpu_map_transpose_f32");
    }
    {
        ctx->gpu_map_transpose_f32_low_height = clCreateKernel(prog,
                                                               "gpu_map_transpose_f32_low_height",
                                                               &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "gpu_map_transpose_f32_low_height");
    }
    {
        ctx->gpu_map_transpose_f32_low_width = clCreateKernel(prog,
                                                              "gpu_map_transpose_f32_low_width",
                                                              &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "gpu_map_transpose_f32_low_width");
    }
    {
        ctx->gpu_map_transpose_f32_small = clCreateKernel(prog,
                                                          "gpu_map_transpose_f32_small",
                                                          &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "gpu_map_transpose_f32_small");
    }
    {
        ctx->mainzicopy_35116 = clCreateKernel(prog, "mainzicopy_35116",
                                               &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.copy_35116");
    }
    {
        ctx->mainziscan_stage1_30128 = clCreateKernel(prog,
                                                      "mainziscan_stage1_30128",
                                                      &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainziscan_stage1_30128, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.scan_stage1_30128");
    }
    {
        ctx->mainziscan_stage2_30128 = clCreateKernel(prog,
                                                      "mainziscan_stage2_30128",
                                                      &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainziscan_stage2_30128, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.scan_stage2_30128");
    }
    {
        ctx->mainziscan_stage3_30128 = clCreateKernel(prog,
                                                      "mainziscan_stage3_30128",
                                                      &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainziscan_stage3_30128, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.scan_stage3_30128");
    }
    {
        ctx->mainzisegmap_27163 = clCreateKernel(prog, "mainzisegmap_27163",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_27163, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_27163, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_27163");
    }
    {
        ctx->mainzisegmap_27312 = clCreateKernel(prog, "mainzisegmap_27312",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_27312, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_27312, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_27312");
    }
    {
        ctx->mainzisegmap_27631 = clCreateKernel(prog, "mainzisegmap_27631",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_27631, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_27631, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_27631");
    }
    {
        ctx->mainzisegmap_28395 = clCreateKernel(prog, "mainzisegmap_28395",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_28395, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_28395");
    }
    {
        ctx->mainzisegmap_28645 = clCreateKernel(prog, "mainzisegmap_28645",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_28645, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_28645, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_28645");
    }
    {
        ctx->mainzisegmap_28743 = clCreateKernel(prog, "mainzisegmap_28743",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_28743, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_28743");
    }
    {
        ctx->mainzisegmap_28807 = clCreateKernel(prog, "mainzisegmap_28807",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_28807, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_28807");
    }
    {
        ctx->mainzisegmap_29314 = clCreateKernel(prog, "mainzisegmap_29314",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_29314, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_29314, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_29314");
    }
    {
        ctx->mainzisegmap_29779 = clCreateKernel(prog, "mainzisegmap_29779",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_29779, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_29779");
    }
    {
        ctx->mainzisegmap_29899 = clCreateKernel(prog, "mainzisegmap_29899",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_29899, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_29899, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segmap_29899");
    }
    {
        ctx->mainzisegmap_intragroup_27629 = clCreateKernel(prog,
                                                            "mainzisegmap_intragroup_27629",
                                                            &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                            0, sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                            2, sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "main.segmap_intragroup_27629");
    }
    {
        ctx->mainzisegmap_intragroup_28171 = clCreateKernel(prog,
                                                            "mainzisegmap_intragroup_28171",
                                                            &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                            0, sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                            2, sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "main.segmap_intragroup_28171");
    }
    {
        ctx->mainzisegmap_intragroup_32669 = clCreateKernel(prog,
                                                            "mainzisegmap_intragroup_32669",
                                                            &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                            0, sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                            2, sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "main.segmap_intragroup_32669");
    }
    {
        ctx->mainzisegred_large_28414 = clCreateKernel(prog,
                                                       "mainzisegred_large_28414",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_large_28414, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_large_28414, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_large_28414");
    }
    {
        ctx->mainzisegred_large_29796 = clCreateKernel(prog,
                                                       "mainzisegred_large_29796",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_large_29796, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_large_29796");
    }
    {
        ctx->mainzisegred_large_30112 = clCreateKernel(prog,
                                                       "mainzisegred_large_30112",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_large_30112, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_large_30112");
    }
    {
        ctx->mainzisegred_nonseg_27159 = clCreateKernel(prog,
                                                        "mainzisegred_nonseg_27159",
                                                        &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_nonseg_27159");
    }
    {
        ctx->mainzisegred_nonseg_34026 = clCreateKernel(prog,
                                                        "mainzisegred_nonseg_34026",
                                                        &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_34026, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_34026, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_nonseg_34026");
    }
    {
        ctx->mainzisegred_nonseg_34277 = clCreateKernel(prog,
                                                        "mainzisegred_nonseg_34277",
                                                        &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_34277, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_nonseg_34277");
    }
    {
        ctx->mainzisegred_nonseg_34392 = clCreateKernel(prog,
                                                        "mainzisegred_nonseg_34392",
                                                        &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_34392, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_34392, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_nonseg_34392");
    }
    {
        ctx->mainzisegred_nonseg_34579 = clCreateKernel(prog,
                                                        "mainzisegred_nonseg_34579",
                                                        &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_nonseg_34579, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_nonseg_34579");
    }
    {
        ctx->mainzisegred_small_28414 = clCreateKernel(prog,
                                                       "mainzisegred_small_28414",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_small_28414, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_small_28414, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_small_28414");
    }
    {
        ctx->mainzisegred_small_29796 = clCreateKernel(prog,
                                                       "mainzisegred_small_29796",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_small_29796, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_small_29796");
    }
    {
        ctx->mainzisegred_small_30112 = clCreateKernel(prog,
                                                       "mainzisegred_small_30112",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->mainzisegred_small_30112, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "main.segred_small_30112");
    }
    {
        ctx->testzisegmap_30513 = clCreateKernel(prog, "testzisegmap_30513",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_30513, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_30513, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_30513");
    }
    {
        ctx->testzisegmap_30662 = clCreateKernel(prog, "testzisegmap_30662",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_30662, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_30662, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_30662");
    }
    {
        ctx->testzisegmap_30975 = clCreateKernel(prog, "testzisegmap_30975",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_30975, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_30975, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_30975");
    }
    {
        ctx->testzisegmap_31708 = clCreateKernel(prog, "testzisegmap_31708",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_31708, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_31708");
    }
    {
        ctx->testzisegmap_31946 = clCreateKernel(prog, "testzisegmap_31946",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_31946, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_31946, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_31946");
    }
    {
        ctx->testzisegmap_32044 = clCreateKernel(prog, "testzisegmap_32044",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_32044, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_32044");
    }
    {
        ctx->testzisegmap_32108 = clCreateKernel(prog, "testzisegmap_32108",
                                                 &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_32108, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segmap_32108");
    }
    {
        ctx->testzisegmap_intragroup_30973 = clCreateKernel(prog,
                                                            "testzisegmap_intragroup_30973",
                                                            &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                            0, sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                            2, sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "test.segmap_intragroup_30973");
    }
    {
        ctx->testzisegmap_intragroup_31496 = clCreateKernel(prog,
                                                            "testzisegmap_intragroup_31496",
                                                            &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                            0, sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                            2, sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "test.segmap_intragroup_31496");
    }
    {
        ctx->testzisegmap_intragroup_32669 = clCreateKernel(prog,
                                                            "testzisegmap_intragroup_32669",
                                                            &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                            0, sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                            2, sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n",
                    "test.segmap_intragroup_32669");
    }
    {
        ctx->testzisegred_large_31727 = clCreateKernel(prog,
                                                       "testzisegred_large_31727",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegred_large_31727, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegred_large_31727, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segred_large_31727");
    }
    {
        ctx->testzisegred_nonseg_30509 = clCreateKernel(prog,
                                                        "testzisegred_nonseg_30509",
                                                        &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegred_nonseg_30509, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segred_nonseg_30509");
    }
    {
        ctx->testzisegred_small_31727 = clCreateKernel(prog,
                                                       "testzisegred_small_31727",
                                                       &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegred_small_31727, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->testzisegred_small_31727, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "test.segred_small_31727");
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_34642.references = NULL;
        ctx->mainzicounter_mem_34642.size = 0;
        ctx->mainzicounter_mem_34642.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10 > 0 ? 10 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_34642.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35353,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_34806.references = NULL;
        ctx->mainzicounter_mem_34806.size = 0;
        ctx->mainzicounter_mem_34806.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10240 >
                                                           0 ? 10240 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10240 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_34806.mem,
                                                          CL_TRUE, 0, 10240 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35410,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_34852.references = NULL;
        ctx->mainzicounter_mem_34852.size = 0;
        ctx->mainzicounter_mem_34852.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10 > 0 ? 10 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_34852.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35421,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_34908.references = NULL;
        ctx->mainzicounter_mem_34908.size = 0;
        ctx->mainzicounter_mem_34908.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10 > 0 ? 10 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_34908.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35431,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_35084.references = NULL;
        ctx->mainzicounter_mem_35084.size = 0;
        ctx->mainzicounter_mem_35084.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10240 >
                                                           0 ? 10240 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10240 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_35084.mem,
                                                          CL_TRUE, 0, 10240 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35466,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_35121.references = NULL;
        ctx->mainzicounter_mem_35121.size = 0;
        ctx->mainzicounter_mem_35121.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10 > 0 ? 10 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_35121.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35477,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_35175.references = NULL;
        ctx->mainzicounter_mem_35175.size = 0;
        ctx->mainzicounter_mem_35175.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10 > 0 ? 10 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_35175.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35487,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->mainzicounter_mem_35289.references = NULL;
        ctx->mainzicounter_mem_35289.size = 0;
        ctx->mainzicounter_mem_35289.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10240 >
                                                           0 ? 10240 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10240 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->mainzicounter_mem_35289.mem,
                                                          CL_TRUE, 0, 10240 *
                                                          sizeof(int32_t),
                                                          mainzicounter_mem_realtype_35507,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->testzistatic_array_34639.references = NULL;
        ctx->testzistatic_array_34639.size = 0;
        ctx->testzistatic_array_34639.mem = clCreateBuffer(ctx->opencl.ctx,
                                                           CL_MEM_READ_WRITE,
                                                           (45 > 0 ? 45 : 1) *
                                                           sizeof(float), NULL,
                                                           &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (45 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->testzistatic_array_34639.mem,
                                                          CL_TRUE, 0, 45 *
                                                          sizeof(float),
                                                          testzistatic_array_realtype_35521,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->testzistatic_array_34640.references = NULL;
        ctx->testzistatic_array_34640.size = 0;
        ctx->testzistatic_array_34640.mem = clCreateBuffer(ctx->opencl.ctx,
                                                           CL_MEM_READ_WRITE,
                                                           (45 > 0 ? 45 : 1) *
                                                           sizeof(int64_t),
                                                           NULL, &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (45 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->testzistatic_array_34640.mem,
                                                          CL_TRUE, 0, 45 *
                                                          sizeof(int64_t),
                                                          testzistatic_array_realtype_35522,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->testzistatic_array_34641.references = NULL;
        ctx->testzistatic_array_34641.size = 0;
        ctx->testzistatic_array_34641.mem = clCreateBuffer(ctx->opencl.ctx,
                                                           CL_MEM_READ_WRITE,
                                                           (45 > 0 ? 45 : 1) *
                                                           sizeof(float), NULL,
                                                           &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (45 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->testzistatic_array_34641.mem,
                                                          CL_TRUE, 0, 45 *
                                                          sizeof(float),
                                                          testzistatic_array_realtype_35523,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->testzicounter_mem_34643.references = NULL;
        ctx->testzicounter_mem_34643.size = 0;
        ctx->testzicounter_mem_34643.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10 > 0 ? 10 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->testzicounter_mem_34643.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          testzicounter_mem_realtype_35524,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->testzicounter_mem_34805.references = NULL;
        ctx->testzicounter_mem_34805.size = 0;
        ctx->testzicounter_mem_34805.mem = clCreateBuffer(ctx->opencl.ctx,
                                                          CL_MEM_READ_WRITE,
                                                          (10240 >
                                                           0 ? 10240 : 1) *
                                                          sizeof(int32_t), NULL,
                                                          &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10240 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->testzicounter_mem_34805.mem,
                                                          CL_TRUE, 0, 10240 *
                                                          sizeof(int32_t),
                                                          testzicounter_mem_realtype_35581,
                                                          0, NULL, NULL));
    }
    ctx->sizes.mainzigroup_sizze_35119 = cfg->sizes[0];
    ctx->sizes.mainzisegmap_group_sizze_27165 = cfg->sizes[1];
    ctx->sizes.mainzisegmap_group_sizze_27314 = cfg->sizes[2];
    ctx->sizes.mainzisegmap_group_sizze_27633 = cfg->sizes[3];
    ctx->sizes.mainzisegmap_group_sizze_28158 = cfg->sizes[4];
    ctx->sizes.mainzisegmap_group_sizze_28398 = cfg->sizes[5];
    ctx->sizes.mainzisegmap_group_sizze_28647 = cfg->sizes[6];
    ctx->sizes.mainzisegmap_group_sizze_28746 = cfg->sizes[7];
    ctx->sizes.mainzisegmap_group_sizze_28809 = cfg->sizes[8];
    ctx->sizes.mainzisegmap_group_sizze_29316 = cfg->sizes[9];
    ctx->sizes.mainzisegmap_group_sizze_29781 = cfg->sizes[10];
    ctx->sizes.mainzisegmap_group_sizze_29901 = cfg->sizes[11];
    ctx->sizes.mainzisegmap_num_groups_27635 = cfg->sizes[12];
    ctx->sizes.mainzisegmap_num_groups_28649 = cfg->sizes[13];
    ctx->sizes.mainzisegmap_num_groups_29903 = cfg->sizes[14];
    ctx->sizes.mainzisegred_group_sizze_27151 = cfg->sizes[15];
    ctx->sizes.mainzisegred_group_sizze_28408 = cfg->sizes[16];
    ctx->sizes.mainzisegred_group_sizze_29790 = cfg->sizes[17];
    ctx->sizes.mainzisegred_group_sizze_30106 = cfg->sizes[18];
    ctx->sizes.mainzisegred_group_sizze_34018 = cfg->sizes[19];
    ctx->sizes.mainzisegred_group_sizze_34269 = cfg->sizes[20];
    ctx->sizes.mainzisegred_group_sizze_34384 = cfg->sizes[21];
    ctx->sizes.mainzisegred_group_sizze_34571 = cfg->sizes[22];
    ctx->sizes.mainzisegred_num_groups_27153 = cfg->sizes[23];
    ctx->sizes.mainzisegred_num_groups_28410 = cfg->sizes[24];
    ctx->sizes.mainzisegred_num_groups_29792 = cfg->sizes[25];
    ctx->sizes.mainzisegred_num_groups_30108 = cfg->sizes[26];
    ctx->sizes.mainzisegred_num_groups_34016 = cfg->sizes[27];
    ctx->sizes.mainzisegred_num_groups_34267 = cfg->sizes[28];
    ctx->sizes.mainzisegred_num_groups_34382 = cfg->sizes[29];
    ctx->sizes.mainzisegred_num_groups_34569 = cfg->sizes[30];
    ctx->sizes.mainzisegscan_group_sizze_30122 = cfg->sizes[31];
    ctx->sizes.mainzisegscan_num_groups_30124 = cfg->sizes[32];
    ctx->sizes.mainzisuff_intra_par_3 = cfg->sizes[33];
    ctx->sizes.mainzisuff_intra_par_5 = cfg->sizes[34];
    ctx->sizes.mainzisuff_outer_par_0 = cfg->sizes[35];
    ctx->sizes.mainzisuff_outer_par_2 = cfg->sizes[36];
    ctx->sizes.mainzisuff_outer_par_4 = cfg->sizes[37];
    ctx->sizes.mainzisuff_outer_par_8 = cfg->sizes[38];
    ctx->sizes.testzisegmap_group_sizze_30515 = cfg->sizes[39];
    ctx->sizes.testzisegmap_group_sizze_30664 = cfg->sizes[40];
    ctx->sizes.testzisegmap_group_sizze_30977 = cfg->sizes[41];
    ctx->sizes.testzisegmap_group_sizze_31483 = cfg->sizes[42];
    ctx->sizes.testzisegmap_group_sizze_31711 = cfg->sizes[43];
    ctx->sizes.testzisegmap_group_sizze_31948 = cfg->sizes[44];
    ctx->sizes.testzisegmap_group_sizze_32047 = cfg->sizes[45];
    ctx->sizes.testzisegmap_group_sizze_32110 = cfg->sizes[46];
    ctx->sizes.testzisegmap_num_groups_30979 = cfg->sizes[47];
    ctx->sizes.testzisegmap_num_groups_31950 = cfg->sizes[48];
    ctx->sizes.testzisegred_group_sizze_30501 = cfg->sizes[49];
    ctx->sizes.testzisegred_group_sizze_31721 = cfg->sizes[50];
    ctx->sizes.testzisegred_num_groups_30503 = cfg->sizes[51];
    ctx->sizes.testzisegred_num_groups_31723 = cfg->sizes[52];
    ctx->sizes.testzisuff_intra_par_3 = cfg->sizes[53];
    ctx->sizes.testzisuff_intra_par_5 = cfg->sizes[54];
    ctx->sizes.testzisuff_outer_par_0 = cfg->sizes[55];
    ctx->sizes.testzisuff_outer_par_2 = cfg->sizes[56];
    ctx->sizes.testzisuff_outer_par_4 = cfg->sizes[57];
    init_constants(ctx);
    // Clear the free list of any deallocations that occurred while initialising constants.
    OPENCL_SUCCEED_OR_RETURN(opencl_free_all(&ctx->opencl));
    // The program will be properly freed after all the kernels have also been freed.
    OPENCL_SUCCEED_OR_RETURN(clReleaseProgram(prog));
    return futhark_context_sync(ctx);
}
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    
    int required_types = 0;
    
    init_context_early(cfg, ctx);
    
    cl_program prog = setup_opencl(&ctx->opencl, opencl_program, required_types,
                                   cfg->build_opts);
    
    init_context_late(cfg, ctx, prog);
    return ctx;
}
struct futhark_context *futhark_context_new_with_command_queue(struct futhark_context_config *cfg,
                                                               cl_command_queue queue)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    
    int required_types = 0;
    
    init_context_early(cfg, ctx);
    
    cl_program prog = setup_opencl_with_command_queue(&ctx->opencl, queue,
                                                      opencl_program,
                                                      required_types,
                                                      cfg->build_opts);
    
    init_context_late(cfg, ctx, prog);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->gpu_map_transpose_f32));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->gpu_map_transpose_f32_low_height));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->gpu_map_transpose_f32_low_width));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->gpu_map_transpose_f32_small));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzicopy_35116));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainziscan_stage1_30128));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainziscan_stage2_30128));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainziscan_stage3_30128));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_27163));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_27312));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_27631));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_28395));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_28645));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_28743));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_28807));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_29314));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_29779));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_29899));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_intragroup_27629));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_intragroup_28171));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegmap_intragroup_32669));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_large_28414));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_large_29796));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_large_30112));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_nonseg_27159));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_nonseg_34026));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_nonseg_34277));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_nonseg_34392));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_nonseg_34579));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_small_28414));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_small_29796));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->mainzisegred_small_30112));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_30513));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_30662));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_30975));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_31708));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_31946));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_32044));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_32108));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_intragroup_30973));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_intragroup_31496));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegmap_intragroup_32669));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegred_large_31727));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegred_nonseg_30509));
    OPENCL_SUCCEED_FATAL(clReleaseKernel(ctx->testzisegred_small_31727));
    teardown_opencl(&ctx->opencl);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    cl_int failure_idx = -1;
    
    if (ctx->failure_is_an_option) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     ctx->global_failure,
                                                     CL_FALSE, 0,
                                                     sizeof(cl_int),
                                                     &failure_idx, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        ctx->failure_is_an_option = 0;
    }
    OPENCL_SUCCEED_OR_RETURN(clFinish(ctx->opencl.queue));
    if (failure_idx >= 0) {
        cl_int no_failure = -1;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      ctx->global_failure,
                                                      CL_TRUE, 0,
                                                      sizeof(cl_int),
                                                      &no_failure, 0, NULL,
                                                      NULL));
        
        int64_t args[3 + 1];
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     ctx->global_failure_args,
                                                     CL_TRUE, 0, sizeof(args),
                                                     &args, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_host_runs,
                                                                                               &ctx->copy_dev_to_host_total_runtime)));
        switch (failure_idx) {
            
          case 0:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:54:29-48\n   #1  cvadynmem.fut:95:25-65\n   #2  cvadynmem.fut:110:16-62\n   #3  cvadynmem.fut:106:17-110:85\n   #4  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 1:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:96:47-70\n   #1  cvadynmem.fut:110:16-62\n   #2  cvadynmem.fut:106:17-110:85\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 2:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:54:29-48\n   #1  cvadynmem.fut:95:25-65\n   #2  cvadynmem.fut:110:16-62\n   #3  cvadynmem.fut:106:17-110:85\n   #4  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 3:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:96:47-70\n   #1  cvadynmem.fut:110:16-62\n   #2  cvadynmem.fut:106:17-110:85\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 4:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:97-104\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 5:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:58-105\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 6:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 7:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 8:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:97-104\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 9:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:58-105\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 10:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 11:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 12:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:97-104\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 13:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:58-105\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 14:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 15:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 16:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 17:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 18:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 19:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 20:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 21:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 22:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 23:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 24:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld..<%lld is invalid.\n-> #0  /prelude/array.fut:60:3-10\n   #1  /prelude/array.fut:70:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:87:14-32\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #5  cvadynmem.fut:146:38-97\n   #6  /prelude/soacs.fut:56:19-23\n   #7  /prelude/soacs.fut:56:3-37\n   #8  cvadynmem.fut:139:44-149:50\n   #9  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 25:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  /prelude/array.fut:18:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:91:6-36\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #4  cvadynmem.fut:146:38-97\n   #5  /prelude/soacs.fut:56:19-23\n   #6  /prelude/soacs.fut:56:3-37\n   #7  cvadynmem.fut:139:44-149:50\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 26:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld..<%lld is invalid.\n-> #0  /prelude/array.fut:60:3-10\n   #1  /prelude/array.fut:70:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:87:14-32\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #5  cvadynmem.fut:146:38-97\n   #6  /prelude/soacs.fut:56:19-23\n   #7  /prelude/soacs.fut:56:3-37\n   #8  cvadynmem.fut:139:44-149:50\n   #9  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 27:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  lib/github.com/diku-dk/segmented/segmented.fut:90:30-35\n   #1  /prelude/soacs.fut:56:19-23\n   #2  /prelude/soacs.fut:56:3-37\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:90:12-49\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #5  cvadynmem.fut:146:38-97\n   #6  /prelude/soacs.fut:56:19-23\n   #7  /prelude/soacs.fut:56:3-37\n   #8  cvadynmem.fut:139:44-149:50\n   #9  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 28:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  /prelude/array.fut:18:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:91:6-36\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #4  cvadynmem.fut:146:38-97\n   #5  /prelude/soacs.fut:56:19-23\n   #6  /prelude/soacs.fut:56:3-37\n   #7  cvadynmem.fut:139:44-149:50\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 29:
            {
                ctx->error =
                    msgprintf("Value of (core language) shape (%lld) cannot match shape of type `[%lld]b`.\n-> #0  lib/github.com/diku-dk/segmented/segmented.fut:103:6-45\n   #1  cvadynmem.fut:146:38-97\n   #2  /prelude/soacs.fut:56:19-23\n   #3  /prelude/soacs.fut:56:3-37\n   #4  cvadynmem.fut:139:44-149:50\n   #5  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 30:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld..<%lld is invalid.\n-> #0  /prelude/array.fut:60:3-10\n   #1  /prelude/array.fut:70:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:87:14-32\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #5  cvadynmem.fut:146:38-97\n   #6  /prelude/soacs.fut:56:19-23\n   #7  /prelude/soacs.fut:56:3-37\n   #8  cvadynmem.fut:139:44-149:50\n   #9  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 31:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  /prelude/array.fut:18:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:91:6-36\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #4  cvadynmem.fut:146:38-97\n   #5  /prelude/soacs.fut:56:19-23\n   #6  /prelude/soacs.fut:56:3-37\n   #7  cvadynmem.fut:139:44-149:50\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 32:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld..<%lld is invalid.\n-> #0  /prelude/array.fut:60:3-10\n   #1  /prelude/array.fut:70:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:87:14-32\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #5  cvadynmem.fut:146:38-97\n   #6  /prelude/soacs.fut:56:19-23\n   #7  /prelude/soacs.fut:56:3-37\n   #8  cvadynmem.fut:139:44-149:50\n   #9  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 33:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  lib/github.com/diku-dk/segmented/segmented.fut:90:30-35\n   #1  /prelude/soacs.fut:56:19-23\n   #2  /prelude/soacs.fut:56:3-37\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:90:12-49\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #5  cvadynmem.fut:146:38-97\n   #6  /prelude/soacs.fut:56:19-23\n   #7  /prelude/soacs.fut:56:3-37\n   #8  cvadynmem.fut:139:44-149:50\n   #9  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 34:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  /prelude/array.fut:18:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:91:6-36\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:103:6-37\n   #4  cvadynmem.fut:146:38-97\n   #5  /prelude/soacs.fut:56:19-23\n   #6  /prelude/soacs.fut:56:3-37\n   #7  cvadynmem.fut:139:44-149:50\n   #8  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 35:
            {
                ctx->error =
                    msgprintf("Value of (core language) shape (%lld) cannot match shape of type `[%lld]b`.\n-> #0  lib/github.com/diku-dk/segmented/segmented.fut:103:6-45\n   #1  cvadynmem.fut:146:38-97\n   #2  /prelude/soacs.fut:56:19-23\n   #3  /prelude/soacs.fut:56:3-37\n   #4  cvadynmem.fut:139:44-149:50\n   #5  cvadynmem.fut:101:1-156:28\n",
                              args[0], args[1]);
                break;
            }
            
          case 36:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:54:29-48\n   #1  cvadynmem.fut:95:25-65\n   #2  cvadynmem.fut:110:16-62\n   #3  cvadynmem.fut:106:17-110:85\n   #4  cvadynmem.fut:165:3-167:129\n   #5  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 37:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:96:47-70\n   #1  cvadynmem.fut:110:16-62\n   #2  cvadynmem.fut:106:17-110:85\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 38:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:54:29-48\n   #1  cvadynmem.fut:95:25-65\n   #2  cvadynmem.fut:110:16-62\n   #3  cvadynmem.fut:106:17-110:85\n   #4  cvadynmem.fut:165:3-167:129\n   #5  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 39:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:96:47-70\n   #1  cvadynmem.fut:110:16-62\n   #2  cvadynmem.fut:106:17-110:85\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 40:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:97-104\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 41:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:58-105\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 42:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 43:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 44:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:97-104\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 45:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:58-105\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 46:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 47:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 48:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:97-104\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 49:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:71:58-105\n   #1  cvadynmem.fut:123:32-62\n   #2  cvadynmem.fut:123:22-69\n   #3  cvadynmem.fut:165:3-167:129\n   #4  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 50:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 51:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 52:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 53:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 54:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 55:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 56:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 57:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
            
          case 58:
            {
                ctx->error =
                    msgprintf("Range %lld..%lld...%lld is invalid.\n-> #0  cvadynmem.fut:39:30-45\n   #1  cvadynmem.fut:47:27-71\n   #2  cvadynmem.fut:130:34-59\n   #3  cvadynmem.fut:128:35-130:66\n   #4  /prelude/soacs.fut:56:19-23\n   #5  /prelude/soacs.fut:56:3-37\n   #6  cvadynmem.fut:127:25-134:33\n   #7  cvadynmem.fut:126:21-134:45\n   #8  cvadynmem.fut:165:3-167:129\n   #9  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1], args[2]);
                break;
            }
            
          case 59:
            {
                ctx->error =
                    msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  cvadynmem.fut:49:38-63\n   #1  cvadynmem.fut:130:34-59\n   #2  cvadynmem.fut:128:35-130:66\n   #3  /prelude/soacs.fut:56:19-23\n   #4  /prelude/soacs.fut:56:3-37\n   #5  cvadynmem.fut:127:25-134:33\n   #6  cvadynmem.fut:126:21-134:45\n   #7  cvadynmem.fut:165:3-167:129\n   #8  cvadynmem.fut:164:1-167:137\n",
                              args[0], args[1]);
                break;
            }
        }
        return 1;
    }
    return 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    ctx->error = OPENCL_SUCCEED_NONFATAL(opencl_free_all(&ctx->opencl));
    return ctx->error != NULL;
}
cl_command_queue futhark_context_get_command_queue(struct futhark_context *ctx)
{
    return ctx->opencl.queue;
}
static int memblock_unref_device(struct futhark_context *ctx,
                                 struct memblock_device *block, const
                                 char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(stderr,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "space 'device'", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_device -= block->size;
            OPENCL_SUCCEED_OR_RETURN(opencl_free(&ctx->opencl, block->mem,
                                                 desc));
            free(block->references);
            if (ctx->detail_memory)
                fprintf(stderr,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_device);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc_device(struct futhark_context *ctx,
                                 struct memblock_device *block, int64_t size,
                                 const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "space 'device'",
                      ctx->cur_mem_usage_device);
    
    int ret = memblock_unref_device(ctx, block, desc);
    
    ctx->cur_mem_usage_device += size;
    if (ctx->detail_memory)
        fprintf(stderr,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "space 'device'",
                (long long) ctx->cur_mem_usage_device);
    if (ctx->cur_mem_usage_device > ctx->peak_mem_usage_device) {
        ctx->peak_mem_usage_device = ctx->cur_mem_usage_device;
        if (ctx->detail_memory)
            fprintf(stderr, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(stderr, ".\n");
    OPENCL_SUCCEED_OR_RETURN(opencl_alloc(&ctx->opencl, size, desc,
                                          &block->mem));
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set_device(struct futhark_context *ctx,
                               struct memblock_device *lhs,
                               struct memblock_device *rhs, const
                               char *lhs_desc)
{
    int ret = memblock_unref_device(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(stderr,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(stderr,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(stderr,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(stderr, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(stderr, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
char *futhark_context_report(struct futhark_context *ctx)
{
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling) {
        str_builder(&builder,
                    "Peak memory usage for space 'device': %lld bytes.\n",
                    (long long) ctx->peak_mem_usage_device);
        { }
    }
    if (ctx->profiling) {
        OPENCL_SUCCEED_FATAL(opencl_tally_profiling_records(&ctx->opencl));
        str_builder(&builder,
                    "copy_dev_to_dev                  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_dev_runs,
                    (long) ctx->copy_dev_to_dev_total_runtime /
                    (ctx->copy_dev_to_dev_runs !=
                     0 ? ctx->copy_dev_to_dev_runs : 1),
                    (long) ctx->copy_dev_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_dev_runs;
        str_builder(&builder,
                    "copy_dev_to_host                 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_host_runs,
                    (long) ctx->copy_dev_to_host_total_runtime /
                    (ctx->copy_dev_to_host_runs !=
                     0 ? ctx->copy_dev_to_host_runs : 1),
                    (long) ctx->copy_dev_to_host_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_host_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_host_runs;
        str_builder(&builder,
                    "copy_host_to_dev                 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_host_to_dev_runs,
                    (long) ctx->copy_host_to_dev_total_runtime /
                    (ctx->copy_host_to_dev_runs !=
                     0 ? ctx->copy_host_to_dev_runs : 1),
                    (long) ctx->copy_host_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_host_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_host_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_to_dev               ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_to_dev_runs,
                    (long) ctx->copy_scalar_to_dev_total_runtime /
                    (ctx->copy_scalar_to_dev_runs !=
                     0 ? ctx->copy_scalar_to_dev_runs : 1),
                    (long) ctx->copy_scalar_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_from_dev             ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_from_dev_runs,
                    (long) ctx->copy_scalar_from_dev_total_runtime /
                    (ctx->copy_scalar_from_dev_runs !=
                     0 ? ctx->copy_scalar_from_dev_runs : 1),
                    (long) ctx->copy_scalar_from_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_from_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_from_dev_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_runs,
                    (long) ctx->gpu_map_transpose_f32_total_runtime /
                    (ctx->gpu_map_transpose_f32_runs !=
                     0 ? ctx->gpu_map_transpose_f32_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_f32_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_low_height ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_low_height_runs,
                    (long) ctx->gpu_map_transpose_f32_low_height_total_runtime /
                    (ctx->gpu_map_transpose_f32_low_height_runs !=
                     0 ? ctx->gpu_map_transpose_f32_low_height_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_low_height_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_f32_low_height_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_low_height_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_low_width  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_low_width_runs,
                    (long) ctx->gpu_map_transpose_f32_low_width_total_runtime /
                    (ctx->gpu_map_transpose_f32_low_width_runs !=
                     0 ? ctx->gpu_map_transpose_f32_low_width_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_low_width_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_f32_low_width_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_low_width_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_small      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_small_runs,
                    (long) ctx->gpu_map_transpose_f32_small_total_runtime /
                    (ctx->gpu_map_transpose_f32_small_runs !=
                     0 ? ctx->gpu_map_transpose_f32_small_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_small_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_f32_small_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_small_runs;
        str_builder(&builder,
                    "main.copy_35116                  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzicopy_35116_runs,
                    (long) ctx->mainzicopy_35116_total_runtime /
                    (ctx->mainzicopy_35116_runs !=
                     0 ? ctx->mainzicopy_35116_runs : 1),
                    (long) ctx->mainzicopy_35116_total_runtime);
        ctx->total_runtime += ctx->mainzicopy_35116_total_runtime;
        ctx->total_runs += ctx->mainzicopy_35116_runs;
        str_builder(&builder,
                    "main.scan_stage1_30128           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainziscan_stage1_30128_runs,
                    (long) ctx->mainziscan_stage1_30128_total_runtime /
                    (ctx->mainziscan_stage1_30128_runs !=
                     0 ? ctx->mainziscan_stage1_30128_runs : 1),
                    (long) ctx->mainziscan_stage1_30128_total_runtime);
        ctx->total_runtime += ctx->mainziscan_stage1_30128_total_runtime;
        ctx->total_runs += ctx->mainziscan_stage1_30128_runs;
        str_builder(&builder,
                    "main.scan_stage2_30128           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainziscan_stage2_30128_runs,
                    (long) ctx->mainziscan_stage2_30128_total_runtime /
                    (ctx->mainziscan_stage2_30128_runs !=
                     0 ? ctx->mainziscan_stage2_30128_runs : 1),
                    (long) ctx->mainziscan_stage2_30128_total_runtime);
        ctx->total_runtime += ctx->mainziscan_stage2_30128_total_runtime;
        ctx->total_runs += ctx->mainziscan_stage2_30128_runs;
        str_builder(&builder,
                    "main.scan_stage3_30128           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainziscan_stage3_30128_runs,
                    (long) ctx->mainziscan_stage3_30128_total_runtime /
                    (ctx->mainziscan_stage3_30128_runs !=
                     0 ? ctx->mainziscan_stage3_30128_runs : 1),
                    (long) ctx->mainziscan_stage3_30128_total_runtime);
        ctx->total_runtime += ctx->mainziscan_stage3_30128_total_runtime;
        ctx->total_runs += ctx->mainziscan_stage3_30128_runs;
        str_builder(&builder,
                    "main.segmap_27163                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_27163_runs,
                    (long) ctx->mainzisegmap_27163_total_runtime /
                    (ctx->mainzisegmap_27163_runs !=
                     0 ? ctx->mainzisegmap_27163_runs : 1),
                    (long) ctx->mainzisegmap_27163_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_27163_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_27163_runs;
        str_builder(&builder,
                    "main.segmap_27312                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_27312_runs,
                    (long) ctx->mainzisegmap_27312_total_runtime /
                    (ctx->mainzisegmap_27312_runs !=
                     0 ? ctx->mainzisegmap_27312_runs : 1),
                    (long) ctx->mainzisegmap_27312_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_27312_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_27312_runs;
        str_builder(&builder,
                    "main.segmap_27631                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_27631_runs,
                    (long) ctx->mainzisegmap_27631_total_runtime /
                    (ctx->mainzisegmap_27631_runs !=
                     0 ? ctx->mainzisegmap_27631_runs : 1),
                    (long) ctx->mainzisegmap_27631_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_27631_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_27631_runs;
        str_builder(&builder,
                    "main.segmap_28395                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_28395_runs,
                    (long) ctx->mainzisegmap_28395_total_runtime /
                    (ctx->mainzisegmap_28395_runs !=
                     0 ? ctx->mainzisegmap_28395_runs : 1),
                    (long) ctx->mainzisegmap_28395_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_28395_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_28395_runs;
        str_builder(&builder,
                    "main.segmap_28645                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_28645_runs,
                    (long) ctx->mainzisegmap_28645_total_runtime /
                    (ctx->mainzisegmap_28645_runs !=
                     0 ? ctx->mainzisegmap_28645_runs : 1),
                    (long) ctx->mainzisegmap_28645_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_28645_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_28645_runs;
        str_builder(&builder,
                    "main.segmap_28743                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_28743_runs,
                    (long) ctx->mainzisegmap_28743_total_runtime /
                    (ctx->mainzisegmap_28743_runs !=
                     0 ? ctx->mainzisegmap_28743_runs : 1),
                    (long) ctx->mainzisegmap_28743_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_28743_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_28743_runs;
        str_builder(&builder,
                    "main.segmap_28807                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_28807_runs,
                    (long) ctx->mainzisegmap_28807_total_runtime /
                    (ctx->mainzisegmap_28807_runs !=
                     0 ? ctx->mainzisegmap_28807_runs : 1),
                    (long) ctx->mainzisegmap_28807_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_28807_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_28807_runs;
        str_builder(&builder,
                    "main.segmap_29314                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_29314_runs,
                    (long) ctx->mainzisegmap_29314_total_runtime /
                    (ctx->mainzisegmap_29314_runs !=
                     0 ? ctx->mainzisegmap_29314_runs : 1),
                    (long) ctx->mainzisegmap_29314_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_29314_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_29314_runs;
        str_builder(&builder,
                    "main.segmap_29779                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_29779_runs,
                    (long) ctx->mainzisegmap_29779_total_runtime /
                    (ctx->mainzisegmap_29779_runs !=
                     0 ? ctx->mainzisegmap_29779_runs : 1),
                    (long) ctx->mainzisegmap_29779_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_29779_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_29779_runs;
        str_builder(&builder,
                    "main.segmap_29899                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_29899_runs,
                    (long) ctx->mainzisegmap_29899_total_runtime /
                    (ctx->mainzisegmap_29899_runs !=
                     0 ? ctx->mainzisegmap_29899_runs : 1),
                    (long) ctx->mainzisegmap_29899_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_29899_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_29899_runs;
        str_builder(&builder,
                    "main.segmap_intragroup_27629     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_intragroup_27629_runs,
                    (long) ctx->mainzisegmap_intragroup_27629_total_runtime /
                    (ctx->mainzisegmap_intragroup_27629_runs !=
                     0 ? ctx->mainzisegmap_intragroup_27629_runs : 1),
                    (long) ctx->mainzisegmap_intragroup_27629_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_intragroup_27629_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_intragroup_27629_runs;
        str_builder(&builder,
                    "main.segmap_intragroup_28171     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_intragroup_28171_runs,
                    (long) ctx->mainzisegmap_intragroup_28171_total_runtime /
                    (ctx->mainzisegmap_intragroup_28171_runs !=
                     0 ? ctx->mainzisegmap_intragroup_28171_runs : 1),
                    (long) ctx->mainzisegmap_intragroup_28171_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_intragroup_28171_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_intragroup_28171_runs;
        str_builder(&builder,
                    "main.segmap_intragroup_32669     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegmap_intragroup_32669_runs,
                    (long) ctx->mainzisegmap_intragroup_32669_total_runtime /
                    (ctx->mainzisegmap_intragroup_32669_runs !=
                     0 ? ctx->mainzisegmap_intragroup_32669_runs : 1),
                    (long) ctx->mainzisegmap_intragroup_32669_total_runtime);
        ctx->total_runtime += ctx->mainzisegmap_intragroup_32669_total_runtime;
        ctx->total_runs += ctx->mainzisegmap_intragroup_32669_runs;
        str_builder(&builder,
                    "main.segred_large_28414          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_large_28414_runs,
                    (long) ctx->mainzisegred_large_28414_total_runtime /
                    (ctx->mainzisegred_large_28414_runs !=
                     0 ? ctx->mainzisegred_large_28414_runs : 1),
                    (long) ctx->mainzisegred_large_28414_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_large_28414_total_runtime;
        ctx->total_runs += ctx->mainzisegred_large_28414_runs;
        str_builder(&builder,
                    "main.segred_large_29796          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_large_29796_runs,
                    (long) ctx->mainzisegred_large_29796_total_runtime /
                    (ctx->mainzisegred_large_29796_runs !=
                     0 ? ctx->mainzisegred_large_29796_runs : 1),
                    (long) ctx->mainzisegred_large_29796_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_large_29796_total_runtime;
        ctx->total_runs += ctx->mainzisegred_large_29796_runs;
        str_builder(&builder,
                    "main.segred_large_30112          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_large_30112_runs,
                    (long) ctx->mainzisegred_large_30112_total_runtime /
                    (ctx->mainzisegred_large_30112_runs !=
                     0 ? ctx->mainzisegred_large_30112_runs : 1),
                    (long) ctx->mainzisegred_large_30112_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_large_30112_total_runtime;
        ctx->total_runs += ctx->mainzisegred_large_30112_runs;
        str_builder(&builder,
                    "main.segred_nonseg_27159         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_nonseg_27159_runs,
                    (long) ctx->mainzisegred_nonseg_27159_total_runtime /
                    (ctx->mainzisegred_nonseg_27159_runs !=
                     0 ? ctx->mainzisegred_nonseg_27159_runs : 1),
                    (long) ctx->mainzisegred_nonseg_27159_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_nonseg_27159_total_runtime;
        ctx->total_runs += ctx->mainzisegred_nonseg_27159_runs;
        str_builder(&builder,
                    "main.segred_nonseg_34026         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_nonseg_34026_runs,
                    (long) ctx->mainzisegred_nonseg_34026_total_runtime /
                    (ctx->mainzisegred_nonseg_34026_runs !=
                     0 ? ctx->mainzisegred_nonseg_34026_runs : 1),
                    (long) ctx->mainzisegred_nonseg_34026_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_nonseg_34026_total_runtime;
        ctx->total_runs += ctx->mainzisegred_nonseg_34026_runs;
        str_builder(&builder,
                    "main.segred_nonseg_34277         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_nonseg_34277_runs,
                    (long) ctx->mainzisegred_nonseg_34277_total_runtime /
                    (ctx->mainzisegred_nonseg_34277_runs !=
                     0 ? ctx->mainzisegred_nonseg_34277_runs : 1),
                    (long) ctx->mainzisegred_nonseg_34277_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_nonseg_34277_total_runtime;
        ctx->total_runs += ctx->mainzisegred_nonseg_34277_runs;
        str_builder(&builder,
                    "main.segred_nonseg_34392         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_nonseg_34392_runs,
                    (long) ctx->mainzisegred_nonseg_34392_total_runtime /
                    (ctx->mainzisegred_nonseg_34392_runs !=
                     0 ? ctx->mainzisegred_nonseg_34392_runs : 1),
                    (long) ctx->mainzisegred_nonseg_34392_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_nonseg_34392_total_runtime;
        ctx->total_runs += ctx->mainzisegred_nonseg_34392_runs;
        str_builder(&builder,
                    "main.segred_nonseg_34579         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_nonseg_34579_runs,
                    (long) ctx->mainzisegred_nonseg_34579_total_runtime /
                    (ctx->mainzisegred_nonseg_34579_runs !=
                     0 ? ctx->mainzisegred_nonseg_34579_runs : 1),
                    (long) ctx->mainzisegred_nonseg_34579_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_nonseg_34579_total_runtime;
        ctx->total_runs += ctx->mainzisegred_nonseg_34579_runs;
        str_builder(&builder,
                    "main.segred_small_28414          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_small_28414_runs,
                    (long) ctx->mainzisegred_small_28414_total_runtime /
                    (ctx->mainzisegred_small_28414_runs !=
                     0 ? ctx->mainzisegred_small_28414_runs : 1),
                    (long) ctx->mainzisegred_small_28414_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_small_28414_total_runtime;
        ctx->total_runs += ctx->mainzisegred_small_28414_runs;
        str_builder(&builder,
                    "main.segred_small_29796          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_small_29796_runs,
                    (long) ctx->mainzisegred_small_29796_total_runtime /
                    (ctx->mainzisegred_small_29796_runs !=
                     0 ? ctx->mainzisegred_small_29796_runs : 1),
                    (long) ctx->mainzisegred_small_29796_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_small_29796_total_runtime;
        ctx->total_runs += ctx->mainzisegred_small_29796_runs;
        str_builder(&builder,
                    "main.segred_small_30112          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->mainzisegred_small_30112_runs,
                    (long) ctx->mainzisegred_small_30112_total_runtime /
                    (ctx->mainzisegred_small_30112_runs !=
                     0 ? ctx->mainzisegred_small_30112_runs : 1),
                    (long) ctx->mainzisegred_small_30112_total_runtime);
        ctx->total_runtime += ctx->mainzisegred_small_30112_total_runtime;
        ctx->total_runs += ctx->mainzisegred_small_30112_runs;
        str_builder(&builder,
                    "test.segmap_30513                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_30513_runs,
                    (long) ctx->testzisegmap_30513_total_runtime /
                    (ctx->testzisegmap_30513_runs !=
                     0 ? ctx->testzisegmap_30513_runs : 1),
                    (long) ctx->testzisegmap_30513_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_30513_total_runtime;
        ctx->total_runs += ctx->testzisegmap_30513_runs;
        str_builder(&builder,
                    "test.segmap_30662                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_30662_runs,
                    (long) ctx->testzisegmap_30662_total_runtime /
                    (ctx->testzisegmap_30662_runs !=
                     0 ? ctx->testzisegmap_30662_runs : 1),
                    (long) ctx->testzisegmap_30662_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_30662_total_runtime;
        ctx->total_runs += ctx->testzisegmap_30662_runs;
        str_builder(&builder,
                    "test.segmap_30975                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_30975_runs,
                    (long) ctx->testzisegmap_30975_total_runtime /
                    (ctx->testzisegmap_30975_runs !=
                     0 ? ctx->testzisegmap_30975_runs : 1),
                    (long) ctx->testzisegmap_30975_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_30975_total_runtime;
        ctx->total_runs += ctx->testzisegmap_30975_runs;
        str_builder(&builder,
                    "test.segmap_31708                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_31708_runs,
                    (long) ctx->testzisegmap_31708_total_runtime /
                    (ctx->testzisegmap_31708_runs !=
                     0 ? ctx->testzisegmap_31708_runs : 1),
                    (long) ctx->testzisegmap_31708_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_31708_total_runtime;
        ctx->total_runs += ctx->testzisegmap_31708_runs;
        str_builder(&builder,
                    "test.segmap_31946                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_31946_runs,
                    (long) ctx->testzisegmap_31946_total_runtime /
                    (ctx->testzisegmap_31946_runs !=
                     0 ? ctx->testzisegmap_31946_runs : 1),
                    (long) ctx->testzisegmap_31946_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_31946_total_runtime;
        ctx->total_runs += ctx->testzisegmap_31946_runs;
        str_builder(&builder,
                    "test.segmap_32044                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_32044_runs,
                    (long) ctx->testzisegmap_32044_total_runtime /
                    (ctx->testzisegmap_32044_runs !=
                     0 ? ctx->testzisegmap_32044_runs : 1),
                    (long) ctx->testzisegmap_32044_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_32044_total_runtime;
        ctx->total_runs += ctx->testzisegmap_32044_runs;
        str_builder(&builder,
                    "test.segmap_32108                ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_32108_runs,
                    (long) ctx->testzisegmap_32108_total_runtime /
                    (ctx->testzisegmap_32108_runs !=
                     0 ? ctx->testzisegmap_32108_runs : 1),
                    (long) ctx->testzisegmap_32108_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_32108_total_runtime;
        ctx->total_runs += ctx->testzisegmap_32108_runs;
        str_builder(&builder,
                    "test.segmap_intragroup_30973     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_intragroup_30973_runs,
                    (long) ctx->testzisegmap_intragroup_30973_total_runtime /
                    (ctx->testzisegmap_intragroup_30973_runs !=
                     0 ? ctx->testzisegmap_intragroup_30973_runs : 1),
                    (long) ctx->testzisegmap_intragroup_30973_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_intragroup_30973_total_runtime;
        ctx->total_runs += ctx->testzisegmap_intragroup_30973_runs;
        str_builder(&builder,
                    "test.segmap_intragroup_31496     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_intragroup_31496_runs,
                    (long) ctx->testzisegmap_intragroup_31496_total_runtime /
                    (ctx->testzisegmap_intragroup_31496_runs !=
                     0 ? ctx->testzisegmap_intragroup_31496_runs : 1),
                    (long) ctx->testzisegmap_intragroup_31496_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_intragroup_31496_total_runtime;
        ctx->total_runs += ctx->testzisegmap_intragroup_31496_runs;
        str_builder(&builder,
                    "test.segmap_intragroup_32669     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegmap_intragroup_32669_runs,
                    (long) ctx->testzisegmap_intragroup_32669_total_runtime /
                    (ctx->testzisegmap_intragroup_32669_runs !=
                     0 ? ctx->testzisegmap_intragroup_32669_runs : 1),
                    (long) ctx->testzisegmap_intragroup_32669_total_runtime);
        ctx->total_runtime += ctx->testzisegmap_intragroup_32669_total_runtime;
        ctx->total_runs += ctx->testzisegmap_intragroup_32669_runs;
        str_builder(&builder,
                    "test.segred_large_31727          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegred_large_31727_runs,
                    (long) ctx->testzisegred_large_31727_total_runtime /
                    (ctx->testzisegred_large_31727_runs !=
                     0 ? ctx->testzisegred_large_31727_runs : 1),
                    (long) ctx->testzisegred_large_31727_total_runtime);
        ctx->total_runtime += ctx->testzisegred_large_31727_total_runtime;
        ctx->total_runs += ctx->testzisegred_large_31727_runs;
        str_builder(&builder,
                    "test.segred_nonseg_30509         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegred_nonseg_30509_runs,
                    (long) ctx->testzisegred_nonseg_30509_total_runtime /
                    (ctx->testzisegred_nonseg_30509_runs !=
                     0 ? ctx->testzisegred_nonseg_30509_runs : 1),
                    (long) ctx->testzisegred_nonseg_30509_total_runtime);
        ctx->total_runtime += ctx->testzisegred_nonseg_30509_total_runtime;
        ctx->total_runs += ctx->testzisegred_nonseg_30509_runs;
        str_builder(&builder,
                    "test.segred_small_31727          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->testzisegred_small_31727_runs,
                    (long) ctx->testzisegred_small_31727_total_runtime /
                    (ctx->testzisegred_small_31727_runs !=
                     0 ? ctx->testzisegred_small_31727_runs : 1),
                    (long) ctx->testzisegred_small_31727_total_runtime);
        ctx->total_runtime += ctx->testzisegred_small_31727_total_runtime;
        ctx->total_runs += ctx->testzisegred_small_31727_runs;
        str_builder(&builder, "%d operations with cumulative runtime: %6ldus\n",
                    ctx->total_runs, ctx->total_runtime);
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
static int futrts_builtinzhgpu_map_transpose_f32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6);
static int futrts_main(struct futhark_context *ctx,
                       struct memblock_device *out_mem_p_35348,
                       int64_t *out_out_arrsizze_35349,
                       int64_t *out_out_arrsizze_35350,
                       struct memblock_device *out_mem_p_35351,
                       int64_t *out_out_arrsizze_35352,
                       struct memblock_device swap_term_mem_33462,
                       struct memblock_device payments_mem_33463,
                       struct memblock_device notional_mem_33464,
                       int64_t n_26351, int64_t n_26352, int64_t n_26353,
                       int64_t paths_26354, int64_t steps_26355, float a_26359,
                       float b_26360, float sigma_26361, float r0_26362);
static int futrts_test(struct futhark_context *ctx,
                       struct memblock_device *out_mem_p_35518,
                       int64_t *out_out_arrsizze_35519,
                       int64_t *out_out_arrsizze_35520, int64_t paths_26891,
                       int64_t steps_26892);
int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static int futrts_builtinzhgpu_map_transpose_f32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6)
{
    (void) ctx;
    
    int err = 0;
    
    if (!(num_arrays_4 == 0 || (x_elems_5 == 0 || y_elems_6 == 0))) {
        int32_t muly_8 = squot32(16, x_elems_5);
        int32_t mulx_7 = squot32(16, y_elems_6);
        
        if (num_arrays_4 == 1 && (x_elems_5 == 1 || y_elems_6 == 1)) {
            if (sext_i32_i64(x_elems_5 * y_elems_6 * (int32_t) sizeof(float)) >
                0) {
                OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                             srcmem_2.mem,
                                                             destmem_0.mem,
                                                             sext_i32_i64(srcoffset_3),
                                                             sext_i32_i64(destoffset_1),
                                                             sext_i32_i64(x_elems_5 *
                                                             y_elems_6 *
                                                             (int32_t) sizeof(float)),
                                                             0, NULL,
                                                             ctx->profiling_paused ||
                                                             !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                       &ctx->copy_dev_to_dev_runs,
                                                                                                       &ctx->copy_dev_to_dev_total_runtime)));
                if (ctx->debugging)
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            }
        } else {
            if (sle32(x_elems_5, 8) && slt32(16, y_elems_6)) {
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        0, 1088, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        1, sizeof(destoffset_1),
                                                        &destoffset_1));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        2, sizeof(srcoffset_3),
                                                        &srcoffset_3));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        3, sizeof(num_arrays_4),
                                                        &num_arrays_4));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        4, sizeof(x_elems_5),
                                                        &x_elems_5));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        5, sizeof(y_elems_6),
                                                        &y_elems_6));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        6, sizeof(mulx_7),
                                                        &mulx_7));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        7, sizeof(muly_8),
                                                        &muly_8));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        8,
                                                        sizeof(destmem_0.mem),
                                                        &destmem_0.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_width,
                                                        9, sizeof(srcmem_2.mem),
                                                        &srcmem_2.mem));
                if (1 * ((size_t) sdiv_up32(x_elems_5, 16) * (size_t) 16) *
                    ((size_t) sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) *
                     (size_t) 16) * ((size_t) num_arrays_4 * (size_t) 1) != 0) {
                    const size_t global_work_sizze_35328[3] =
                                 {(size_t) sdiv_up32(x_elems_5, 16) *
                                  (size_t) 16,
                                  (size_t) sdiv_up32(sdiv_up32(y_elems_6,
                                                               muly_8), 16) *
                                  (size_t) 16, (size_t) num_arrays_4 *
                                  (size_t) 1};
                    const size_t local_work_sizze_35332[3] = {16, 16, 1};
                    int64_t time_start_35329 = 0, time_end_35330 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(stderr, "Launching %s with global work size [",
                                "gpu_map_transpose_f32_low_width");
                        fprintf(stderr, "%zu", global_work_sizze_35328[0]);
                        fprintf(stderr, ", ");
                        fprintf(stderr, "%zu", global_work_sizze_35328[1]);
                        fprintf(stderr, ", ");
                        fprintf(stderr, "%zu", global_work_sizze_35328[2]);
                        fprintf(stderr, "] and local work size [");
                        fprintf(stderr, "%zu", local_work_sizze_35332[0]);
                        fprintf(stderr, ", ");
                        fprintf(stderr, "%zu", local_work_sizze_35332[1]);
                        fprintf(stderr, ", ");
                        fprintf(stderr, "%zu", local_work_sizze_35332[2]);
                        fprintf(stderr,
                                "]; local memory parameters sum to %d bytes.\n",
                                (int) (0 + 1088));
                        time_start_35329 = get_wall_time();
                    }
                    OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                    ctx->gpu_map_transpose_f32_low_width,
                                                                    3, NULL,
                                                                    global_work_sizze_35328,
                                                                    local_work_sizze_35332,
                                                                    0, NULL,
                                                                    ctx->profiling_paused ||
                                                                    !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                              &ctx->gpu_map_transpose_f32_low_width_runs,
                                                                                                              &ctx->gpu_map_transpose_f32_low_width_total_runtime)));
                    if (ctx->debugging) {
                        OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                        time_end_35330 = get_wall_time();
                        
                        long time_diff_35331 = time_end_35330 -
                             time_start_35329;
                        
                        fprintf(stderr, "kernel %s runtime: %ldus\n",
                                "gpu_map_transpose_f32_low_width",
                                time_diff_35331);
                    }
                }
            } else {
                if (sle32(y_elems_6, 8) && slt32(16, x_elems_5)) {
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            0, 1088, NULL));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            1,
                                                            sizeof(destoffset_1),
                                                            &destoffset_1));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            2,
                                                            sizeof(srcoffset_3),
                                                            &srcoffset_3));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            3,
                                                            sizeof(num_arrays_4),
                                                            &num_arrays_4));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            4,
                                                            sizeof(x_elems_5),
                                                            &x_elems_5));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            5,
                                                            sizeof(y_elems_6),
                                                            &y_elems_6));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            6, sizeof(mulx_7),
                                                            &mulx_7));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            7, sizeof(muly_8),
                                                            &muly_8));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            8,
                                                            sizeof(destmem_0.mem),
                                                            &destmem_0.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_low_height,
                                                            9,
                                                            sizeof(srcmem_2.mem),
                                                            &srcmem_2.mem));
                    if (1 * ((size_t) sdiv_up32(sdiv_up32(x_elems_5, mulx_7),
                                                16) * (size_t) 16) *
                        ((size_t) sdiv_up32(y_elems_6, 16) * (size_t) 16) *
                        ((size_t) num_arrays_4 * (size_t) 1) != 0) {
                        const size_t global_work_sizze_35333[3] =
                                     {(size_t) sdiv_up32(sdiv_up32(x_elems_5,
                                                                   mulx_7),
                                                         16) * (size_t) 16,
                                      (size_t) sdiv_up32(y_elems_6, 16) *
                                      (size_t) 16, (size_t) num_arrays_4 *
                                      (size_t) 1};
                        const size_t local_work_sizze_35337[3] = {16, 16, 1};
                        int64_t time_start_35334 = 0, time_end_35335 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(stderr,
                                    "Launching %s with global work size [",
                                    "gpu_map_transpose_f32_low_height");
                            fprintf(stderr, "%zu", global_work_sizze_35333[0]);
                            fprintf(stderr, ", ");
                            fprintf(stderr, "%zu", global_work_sizze_35333[1]);
                            fprintf(stderr, ", ");
                            fprintf(stderr, "%zu", global_work_sizze_35333[2]);
                            fprintf(stderr, "] and local work size [");
                            fprintf(stderr, "%zu", local_work_sizze_35337[0]);
                            fprintf(stderr, ", ");
                            fprintf(stderr, "%zu", local_work_sizze_35337[1]);
                            fprintf(stderr, ", ");
                            fprintf(stderr, "%zu", local_work_sizze_35337[2]);
                            fprintf(stderr,
                                    "]; local memory parameters sum to %d bytes.\n",
                                    (int) (0 + 1088));
                            time_start_35334 = get_wall_time();
                        }
                        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                        ctx->gpu_map_transpose_f32_low_height,
                                                                        3, NULL,
                                                                        global_work_sizze_35333,
                                                                        local_work_sizze_35337,
                                                                        0, NULL,
                                                                        ctx->profiling_paused ||
                                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                  &ctx->gpu_map_transpose_f32_low_height_runs,
                                                                                                                  &ctx->gpu_map_transpose_f32_low_height_total_runtime)));
                        if (ctx->debugging) {
                            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                            time_end_35335 = get_wall_time();
                            
                            long time_diff_35336 = time_end_35335 -
                                 time_start_35334;
                            
                            fprintf(stderr, "kernel %s runtime: %ldus\n",
                                    "gpu_map_transpose_f32_low_height",
                                    time_diff_35336);
                        }
                    }
                } else {
                    if (sle32(x_elems_5, 8) && sle32(y_elems_6, 8)) {
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                0, 1, NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                1,
                                                                sizeof(destoffset_1),
                                                                &destoffset_1));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                2,
                                                                sizeof(srcoffset_3),
                                                                &srcoffset_3));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                3,
                                                                sizeof(num_arrays_4),
                                                                &num_arrays_4));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                4,
                                                                sizeof(x_elems_5),
                                                                &x_elems_5));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                5,
                                                                sizeof(y_elems_6),
                                                                &y_elems_6));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                6,
                                                                sizeof(mulx_7),
                                                                &mulx_7));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                7,
                                                                sizeof(muly_8),
                                                                &muly_8));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                8,
                                                                sizeof(destmem_0.mem),
                                                                &destmem_0.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32_small,
                                                                9,
                                                                sizeof(srcmem_2.mem),
                                                                &srcmem_2.mem));
                        if (1 * ((size_t) sdiv_up32(num_arrays_4 * x_elems_5 *
                                                    y_elems_6, 256) *
                                 (size_t) 256) != 0) {
                            const size_t global_work_sizze_35338[1] =
                                         {(size_t) sdiv_up32(num_arrays_4 *
                                                             x_elems_5 *
                                                             y_elems_6, 256) *
                                         (size_t) 256};
                            const size_t local_work_sizze_35342[1] = {256};
                            int64_t time_start_35339 = 0, time_end_35340 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(stderr,
                                        "Launching %s with global work size [",
                                        "gpu_map_transpose_f32_small");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35338[0]);
                                fprintf(stderr, "] and local work size [");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35342[0]);
                                fprintf(stderr,
                                        "]; local memory parameters sum to %d bytes.\n",
                                        (int) (0 + 1));
                                time_start_35339 = get_wall_time();
                            }
                            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                            ctx->gpu_map_transpose_f32_small,
                                                                            1,
                                                                            NULL,
                                                                            global_work_sizze_35338,
                                                                            local_work_sizze_35342,
                                                                            0,
                                                                            NULL,
                                                                            ctx->profiling_paused ||
                                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                      &ctx->gpu_map_transpose_f32_small_runs,
                                                                                                                      &ctx->gpu_map_transpose_f32_small_total_runtime)));
                            if (ctx->debugging) {
                                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                                time_end_35340 = get_wall_time();
                                
                                long time_diff_35341 = time_end_35340 -
                                     time_start_35339;
                                
                                fprintf(stderr, "kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_f32_small",
                                        time_diff_35341);
                            }
                        }
                    } else {
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                0, 4224, NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                1,
                                                                sizeof(destoffset_1),
                                                                &destoffset_1));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                2,
                                                                sizeof(srcoffset_3),
                                                                &srcoffset_3));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                3,
                                                                sizeof(num_arrays_4),
                                                                &num_arrays_4));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                4,
                                                                sizeof(x_elems_5),
                                                                &x_elems_5));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                5,
                                                                sizeof(y_elems_6),
                                                                &y_elems_6));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                6,
                                                                sizeof(mulx_7),
                                                                &mulx_7));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                7,
                                                                sizeof(muly_8),
                                                                &muly_8));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                8,
                                                                sizeof(destmem_0.mem),
                                                                &destmem_0.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->gpu_map_transpose_f32,
                                                                9,
                                                                sizeof(srcmem_2.mem),
                                                                &srcmem_2.mem));
                        if (1 * ((size_t) sdiv_up32(x_elems_5, 32) *
                                 (size_t) 32) * ((size_t) sdiv_up32(y_elems_6,
                                                                    32) *
                                                 (size_t) 8) *
                            ((size_t) num_arrays_4 * (size_t) 1) != 0) {
                            const size_t global_work_sizze_35343[3] =
                                         {(size_t) sdiv_up32(x_elems_5, 32) *
                                          (size_t) 32,
                                          (size_t) sdiv_up32(y_elems_6, 32) *
                                          (size_t) 8, (size_t) num_arrays_4 *
                                          (size_t) 1};
                            const size_t local_work_sizze_35347[3] = {32, 8, 1};
                            int64_t time_start_35344 = 0, time_end_35345 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(stderr,
                                        "Launching %s with global work size [",
                                        "gpu_map_transpose_f32");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35343[0]);
                                fprintf(stderr, ", ");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35343[1]);
                                fprintf(stderr, ", ");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35343[2]);
                                fprintf(stderr, "] and local work size [");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35347[0]);
                                fprintf(stderr, ", ");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35347[1]);
                                fprintf(stderr, ", ");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35347[2]);
                                fprintf(stderr,
                                        "]; local memory parameters sum to %d bytes.\n",
                                        (int) (0 + 4224));
                                time_start_35344 = get_wall_time();
                            }
                            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                            ctx->gpu_map_transpose_f32,
                                                                            3,
                                                                            NULL,
                                                                            global_work_sizze_35343,
                                                                            local_work_sizze_35347,
                                                                            0,
                                                                            NULL,
                                                                            ctx->profiling_paused ||
                                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                      &ctx->gpu_map_transpose_f32_runs,
                                                                                                                      &ctx->gpu_map_transpose_f32_total_runtime)));
                            if (ctx->debugging) {
                                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                                time_end_35345 = get_wall_time();
                                
                                long time_diff_35346 = time_end_35345 -
                                     time_start_35344;
                                
                                fprintf(stderr, "kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_f32",
                                        time_diff_35346);
                            }
                        }
                    }
                }
            }
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_main(struct futhark_context *ctx,
                       struct memblock_device *out_mem_p_35348,
                       int64_t *out_out_arrsizze_35349,
                       int64_t *out_out_arrsizze_35350,
                       struct memblock_device *out_mem_p_35351,
                       int64_t *out_out_arrsizze_35352,
                       struct memblock_device swap_term_mem_33462,
                       struct memblock_device payments_mem_33463,
                       struct memblock_device notional_mem_33464,
                       int64_t n_26351, int64_t n_26352, int64_t n_26353,
                       int64_t paths_26354, int64_t steps_26355, float a_26359,
                       float b_26360, float sigma_26361, float r0_26362)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device out_mem_34636;
    
    out_mem_34636.references = NULL;
    
    int64_t out_arrsizze_34637;
    int64_t out_arrsizze_34638;
    struct memblock_device out_mem_34639;
    
    out_mem_34639.references = NULL;
    
    int64_t out_arrsizze_34640;
    bool dim_match_26363 = n_26351 == n_26352;
    bool empty_or_match_cert_26364;
    
    if (!dim_match_26363) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "function arguments of wrong shape",
                               "-> #0  cvadynmem.fut:101:1-156:28\n");
        if (memblock_unref_device(ctx, &out_mem_34639, "out_mem_34639") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
            return 1;
        return 1;
    }
    
    int64_t segred_group_sizze_27152;
    
    segred_group_sizze_27152 = ctx->sizes.mainzisegred_group_sizze_27151;
    
    int64_t num_groups_27154;
    int32_t max_num_groups_34641;
    
    max_num_groups_34641 = ctx->sizes.mainzisegred_num_groups_27153;
    num_groups_27154 = sext_i64_i32(smax64(1, smin64(sdiv_up64(n_26351,
                                                               sext_i32_i64(segred_group_sizze_27152)),
                                                     sext_i32_i64(max_num_groups_34641))));
    
    struct memblock_device mem_33467;
    
    mem_33467.references = NULL;
    if (memblock_alloc_device(ctx, &mem_33467, 4, "mem_33467")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mainzicounter_mem_34642 =
                           ctx->mainzicounter_mem_34642;
    struct memblock_device group_res_arr_mem_34644;
    
    group_res_arr_mem_34644.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_34644,
                              (int32_t) sizeof(float) *
                              (segred_group_sizze_27152 * num_groups_27154),
                              "group_res_arr_mem_34644")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t num_threads_34646;
    
    num_threads_34646 = num_groups_27154 * segred_group_sizze_27152;
    if (ctx->debugging)
        fprintf(stderr, "%s\n", "\n# SegRed");
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 1,
                                            (int32_t) sizeof(float) *
                                            segred_group_sizze_27152, NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 2,
                                            (int32_t) sizeof(bool), NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 3,
                                            sizeof(n_26351), &n_26351));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 4,
                                            sizeof(num_groups_27154),
                                            &num_groups_27154));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 5,
                                            sizeof(swap_term_mem_33462.mem),
                                            &swap_term_mem_33462.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 6,
                                            sizeof(payments_mem_33463.mem),
                                            &payments_mem_33463.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 7,
                                            sizeof(mem_33467.mem),
                                            &mem_33467.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 8,
                                            sizeof(mainzicounter_mem_34642.mem),
                                            &mainzicounter_mem_34642.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 9,
                                            sizeof(group_res_arr_mem_34644.mem),
                                            &group_res_arr_mem_34644.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_27159, 10,
                                            sizeof(num_threads_34646),
                                            &num_threads_34646));
    if (1 * ((size_t) num_groups_27154 * (size_t) segred_group_sizze_27152) !=
        0) {
        const size_t global_work_sizze_35354[1] = {(size_t) num_groups_27154 *
                     (size_t) segred_group_sizze_27152};
        const size_t local_work_sizze_35358[1] = {segred_group_sizze_27152};
        int64_t time_start_35355 = 0, time_end_35356 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "main.segred_nonseg_27159");
            fprintf(stderr, "%zu", global_work_sizze_35354[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_35358[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) (0 + (int32_t) sizeof(float) *
                           segred_group_sizze_27152 + (int32_t) sizeof(bool)));
            time_start_35355 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->mainzisegred_nonseg_27159,
                                                        1, NULL,
                                                        global_work_sizze_35354,
                                                        local_work_sizze_35358,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->mainzisegred_nonseg_27159_runs,
                                                                                                  &ctx->mainzisegred_nonseg_27159_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_35356 = get_wall_time();
            
            long time_diff_35357 = time_end_35356 - time_start_35355;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n",
                    "main.segred_nonseg_27159", time_diff_35357);
        }
    }
    
    float read_res_35359;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_33467.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_35359,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_26368 = read_res_35359;
    
    if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
        return 1;
    
    float res_26376 = sitofp_i64_f32(steps_26355);
    float dt_26377 = res_26368 / res_26376;
    float x_26379 = fpow32(a_26359, 2.0F);
    float x_26380 = b_26360 * x_26379;
    float x_26381 = fpow32(sigma_26361, 2.0F);
    float y_26382 = x_26381 / 2.0F;
    float y_26383 = x_26380 - y_26382;
    float y_26384 = 4.0F * a_26359;
    bool suff_outer_par_27161;
    
    suff_outer_par_27161 = ctx->sizes.mainzisuff_outer_par_0 <= n_26351;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "main.suff_outer_par_0",
                n_26351);
    
    int64_t segmap_group_sizze_27229;
    
    segmap_group_sizze_27229 = ctx->sizes.mainzisegmap_group_sizze_27165;
    
    int64_t segmap_group_sizze_27378;
    
    segmap_group_sizze_27378 = ctx->sizes.mainzisegmap_group_sizze_27314;
    
    int64_t bytes_33468 = 4 * n_26351;
    int64_t bytes_33470 = 8 * n_26351;
    struct memblock_device res_mem_33486;
    
    res_mem_33486.references = NULL;
    
    struct memblock_device res_mem_33487;
    
    res_mem_33487.references = NULL;
    
    struct memblock_device res_mem_33488;
    
    res_mem_33488.references = NULL;
    
    struct memblock_device res_mem_33489;
    
    res_mem_33489.references = NULL;
    
    int32_t local_memory_capacity_34684;
    
    local_memory_capacity_34684 = ctx->opencl.max_local_memory;
    if (sle64(0, sext_i32_i64(local_memory_capacity_34684)) &&
        suff_outer_par_27161) {
        int64_t segmap_usable_groups_27230 = sdiv_up64(n_26351,
                                                       segmap_group_sizze_27229);
        struct memblock_device mem_33469;
        
        mem_33469.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33469, bytes_33468, "mem_33469")) {
            err = 1;
            goto cleanup;
        }
        if (n_26351 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         swap_term_mem_33462.mem,
                                                         mem_33469.mem, 0, 0,
                                                         n_26351 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33471;
        
        mem_33471.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33471, bytes_33470, "mem_33471")) {
            err = 1;
            goto cleanup;
        }
        if (n_26351 * (int32_t) sizeof(int64_t) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         payments_mem_33463.mem,
                                                         mem_33471.mem, 0, 0,
                                                         n_26351 *
                                                         (int32_t) sizeof(int64_t),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33473;
        
        mem_33473.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33473, bytes_33468, "mem_33473")) {
            err = 1;
            goto cleanup;
        }
        if (n_26351 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         notional_mem_33464.mem,
                                                         mem_33473.mem, 0, 0,
                                                         n_26351 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33476;
        
        mem_33476.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33476, bytes_33468, "mem_33476")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 3,
                                                sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 4,
                                                sizeof(a_26359), &a_26359));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 5,
                                                sizeof(r0_26362), &r0_26362));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 6,
                                                sizeof(x_26379), &x_26379));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 7,
                                                sizeof(x_26381), &x_26381));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 8,
                                                sizeof(y_26383), &y_26383));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 9,
                                                sizeof(y_26384), &y_26384));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 10,
                                                sizeof(swap_term_mem_33462.mem),
                                                &swap_term_mem_33462.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 11,
                                                sizeof(payments_mem_33463.mem),
                                                &payments_mem_33463.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27163, 12,
                                                sizeof(mem_33476.mem),
                                                &mem_33476.mem));
        if (1 * ((size_t) segmap_usable_groups_27230 *
                 (size_t) segmap_group_sizze_27229) != 0) {
            const size_t global_work_sizze_35360[1] =
                         {(size_t) segmap_usable_groups_27230 *
                         (size_t) segmap_group_sizze_27229};
            const size_t local_work_sizze_35364[1] = {segmap_group_sizze_27229};
            int64_t time_start_35361 = 0, time_end_35362 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segmap_27163");
                fprintf(stderr, "%zu", global_work_sizze_35360[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35364[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35361 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegmap_27163,
                                                            1, NULL,
                                                            global_work_sizze_35360,
                                                            local_work_sizze_35364,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegmap_27163_runs,
                                                                                                      &ctx->mainzisegmap_27163_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35362 = get_wall_time();
                
                long time_diff_35363 = time_end_35362 - time_start_35361;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segmap_27163", time_diff_35363);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_set_device(ctx, &res_mem_33486, &mem_33476, "mem_33476") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33487, &mem_33473, "mem_33473") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33488, &mem_33471, "mem_33471") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33489, &mem_33469, "mem_33469") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33476, "mem_33476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33473, "mem_33473") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33471, "mem_33471") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33469, "mem_33469") != 0)
            return 1;
    } else {
        int64_t segmap_usable_groups_27379 = sdiv_up64(n_26351,
                                                       segmap_group_sizze_27378);
        struct memblock_device mem_33478;
        
        mem_33478.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33478, bytes_33468, "mem_33478")) {
            err = 1;
            goto cleanup;
        }
        if (n_26351 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         swap_term_mem_33462.mem,
                                                         mem_33478.mem, 0, 0,
                                                         n_26351 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33480;
        
        mem_33480.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33480, bytes_33470, "mem_33480")) {
            err = 1;
            goto cleanup;
        }
        if (n_26351 * (int32_t) sizeof(int64_t) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         payments_mem_33463.mem,
                                                         mem_33480.mem, 0, 0,
                                                         n_26351 *
                                                         (int32_t) sizeof(int64_t),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33482;
        
        mem_33482.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33482, bytes_33468, "mem_33482")) {
            err = 1;
            goto cleanup;
        }
        if (n_26351 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         notional_mem_33464.mem,
                                                         mem_33482.mem, 0, 0,
                                                         n_26351 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33485;
        
        mem_33485.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33485, bytes_33468, "mem_33485")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 3,
                                                sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 4,
                                                sizeof(a_26359), &a_26359));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 5,
                                                sizeof(r0_26362), &r0_26362));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 6,
                                                sizeof(x_26379), &x_26379));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 7,
                                                sizeof(x_26381), &x_26381));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 8,
                                                sizeof(y_26383), &y_26383));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 9,
                                                sizeof(y_26384), &y_26384));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 10,
                                                sizeof(swap_term_mem_33462.mem),
                                                &swap_term_mem_33462.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 11,
                                                sizeof(payments_mem_33463.mem),
                                                &payments_mem_33463.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27312, 12,
                                                sizeof(mem_33485.mem),
                                                &mem_33485.mem));
        if (1 * ((size_t) segmap_usable_groups_27379 *
                 (size_t) segmap_group_sizze_27378) != 0) {
            const size_t global_work_sizze_35365[1] =
                         {(size_t) segmap_usable_groups_27379 *
                         (size_t) segmap_group_sizze_27378};
            const size_t local_work_sizze_35369[1] = {segmap_group_sizze_27378};
            int64_t time_start_35366 = 0, time_end_35367 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segmap_27312");
                fprintf(stderr, "%zu", global_work_sizze_35365[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35369[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35366 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegmap_27312,
                                                            1, NULL,
                                                            global_work_sizze_35365,
                                                            local_work_sizze_35369,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegmap_27312_runs,
                                                                                                      &ctx->mainzisegmap_27312_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35367 = get_wall_time();
                
                long time_diff_35368 = time_end_35367 - time_start_35366;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segmap_27312", time_diff_35368);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_set_device(ctx, &res_mem_33486, &mem_33485, "mem_33485") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33487, &mem_33482, "mem_33482") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33488, &mem_33480, "mem_33480") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33489, &mem_33478, "mem_33478") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33485, "mem_33485") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33482, "mem_33482") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33480, "mem_33480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33478, "mem_33478") != 0)
            return 1;
    }
    
    float sims_per_year_26449 = res_26376 / res_26368;
    bool bounds_invalid_upwards_26450 = slt64(steps_26355, 1);
    bool valid_26451 = !bounds_invalid_upwards_26450;
    bool range_valid_c_26452;
    
    if (!valid_26451) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", 1, "..", 2, "...", steps_26355,
                               " is invalid.",
                               "-> #0  cvadynmem.fut:60:56-67\n   #1  cvadynmem.fut:112:17-44\n   #2  cvadynmem.fut:101:1-156:28\n");
        if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33488, "res_mem_33488") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33487, "res_mem_33487") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33486, "res_mem_33486") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34644,
                                  "group_res_arr_mem_34644") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34639, "out_mem_34639") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_26458 = slt64(paths_26354, 0);
    bool valid_26459 = !bounds_invalid_upwards_26458;
    bool range_valid_c_26460;
    
    if (!valid_26459) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", 0, "..", 1, "..<", paths_26354,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:60:3-10\n   #1  /prelude/array.fut:126:11-16\n   #2  lib/github.com/diku-dk/cpprandom/random.fut:174:8-56\n   #3  cvadynmem.fut:115:19-49\n   #4  cvadynmem.fut:101:1-156:28\n");
        if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33488, "res_mem_33488") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33487, "res_mem_33487") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33486, "res_mem_33486") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34644,
                                  "group_res_arr_mem_34644") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34639, "out_mem_34639") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
            return 1;
        return 1;
    }
    
    int64_t upper_bound_26463 = sub64(steps_26355, 1);
    float res_26464;
    
    res_26464 = futrts_sqrt32(dt_26377);
    
    bool suff_outer_par_27483;
    
    suff_outer_par_27483 = ctx->sizes.mainzisuff_outer_par_2 <= paths_26354;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "main.suff_outer_par_2",
                paths_26354);
    
    int64_t one_intra_par_min_27626 = n_26351 * steps_26355;
    int64_t intra_avail_par_27628 = smin64(steps_26355,
                                           one_intra_par_min_27626);
    int64_t computed_group_sizze_27486 = smax64(steps_26355,
                                                one_intra_par_min_27626);
    int64_t max_group_sizze_27980;
    
    max_group_sizze_27980 = ctx->opencl.max_group_size;
    
    bool fits_27981 = sle64(computed_group_sizze_27486, max_group_sizze_27980);
    bool suff_intra_par_27979;
    
    suff_intra_par_27979 = ctx->sizes.mainzisuff_intra_par_3 <=
        intra_avail_par_27628;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "main.suff_intra_par_3",
                intra_avail_par_27628);
    
    bool intra_suff_and_fits_27982 = suff_intra_par_27979 && fits_27981;
    int64_t segmap_group_sizze_27806;
    
    segmap_group_sizze_27806 = ctx->sizes.mainzisegmap_group_sizze_27633;
    
    int64_t num_groups_27807;
    int32_t max_num_groups_34685;
    
    max_num_groups_34685 = ctx->sizes.mainzisegmap_num_groups_27635;
    num_groups_27807 = sext_i64_i32(smax64(1, smin64(sdiv_up64(paths_26354,
                                                               sext_i32_i64(segmap_group_sizze_27806)),
                                                     sext_i32_i64(max_num_groups_34685))));
    
    int64_t segmap_group_sizze_28826;
    
    segmap_group_sizze_28826 = ctx->sizes.mainzisegmap_group_sizze_28809;
    
    int64_t nest_sizze_28850 = paths_26354 * steps_26355;
    int64_t segmap_group_sizze_28851;
    
    segmap_group_sizze_28851 = ctx->sizes.mainzisegmap_group_sizze_28746;
    
    int64_t segmap_group_sizze_28896;
    
    segmap_group_sizze_28896 = ctx->sizes.mainzisegmap_group_sizze_28647;
    
    int64_t num_groups_28897;
    int32_t max_num_groups_34686;
    
    max_num_groups_34686 = ctx->sizes.mainzisegmap_num_groups_28649;
    num_groups_28897 = sext_i64_i32(smax64(1, smin64(sdiv_up64(paths_26354,
                                                               sext_i32_i64(segmap_group_sizze_28896)),
                                                     sext_i32_i64(max_num_groups_34686))));
    
    int64_t segmap_group_sizze_28924;
    
    segmap_group_sizze_28924 = ctx->sizes.mainzisegmap_group_sizze_28158;
    
    bool suff_outer_par_28928;
    
    suff_outer_par_28928 = ctx->sizes.mainzisuff_outer_par_4 <=
        nest_sizze_28850;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "main.suff_outer_par_4",
                nest_sizze_28850);
    
    bool fits_28933 = sle64(n_26351, max_group_sizze_27980);
    bool suff_intra_par_28935;
    
    suff_intra_par_28935 = ctx->sizes.mainzisuff_intra_par_5 <= n_26351;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "main.suff_intra_par_5",
                n_26351);
    
    bool intra_suff_and_fits_28936 = fits_28933 && suff_intra_par_28935;
    int64_t nest_sizze_29155 = n_26351 * nest_sizze_28850;
    int64_t segred_group_sizze_29156;
    
    segred_group_sizze_29156 = ctx->sizes.mainzisegred_group_sizze_28408;
    
    int64_t num_groups_29157;
    int32_t max_num_groups_34687;
    
    max_num_groups_34687 = ctx->sizes.mainzisegred_num_groups_28410;
    num_groups_29157 = sext_i64_i32(smax64(1, smin64(sdiv_up64(nest_sizze_29155,
                                                               sext_i32_i64(segred_group_sizze_29156)),
                                                     sext_i32_i64(max_num_groups_34687))));
    
    int64_t segmap_group_sizze_29267;
    
    segmap_group_sizze_29267 = ctx->sizes.mainzisegmap_group_sizze_28398;
    
    int64_t computed_group_sizze_32670 = smin64(steps_26355,
                                                segmap_group_sizze_28924);
    int64_t bytes_33533 = 4 * nest_sizze_28850;
    int64_t bytes_33491 = 4 * steps_26355;
    int64_t bytes_33570 = 4 * paths_26354;
    int64_t bytes_33599 = 4 * computed_group_sizze_32670;
    int64_t bytes_33618 = 8 * computed_group_sizze_32670;
    int64_t num_threads_33975 = segmap_group_sizze_27806 * num_groups_27807;
    int64_t total_sizze_33976 = bytes_33491 * num_threads_33975;
    int64_t total_sizze_33977 = bytes_33491 * num_threads_33975;
    int64_t total_sizze_33978 = bytes_33491 * num_threads_33975;
    int64_t num_threads_33982 = segmap_group_sizze_28896 * num_groups_28897;
    int64_t total_sizze_33983 = bytes_33491 * num_threads_33982;
    struct memblock_device res_mem_33684;
    
    res_mem_33684.references = NULL;
    
    struct memblock_device res_mem_33685;
    
    res_mem_33685.references = NULL;
    
    int32_t local_memory_capacity_34847;
    
    local_memory_capacity_34847 = ctx->opencl.max_local_memory;
    if (sle64(0, sext_i32_i64(local_memory_capacity_34847)) &&
        suff_outer_par_27483) {
        struct memblock_device mem_33535;
        
        mem_33535.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33535, bytes_33533, "mem_33535")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33538;
        
        mem_33538.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33538, bytes_33533, "mem_33538")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33492;
        
        mem_33492.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33492, total_sizze_33976,
                                  "mem_33492")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33506;
        
        mem_33506.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33506, total_sizze_33977,
                                  "mem_33506")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33520;
        
        mem_33520.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33520, total_sizze_33978,
                                  "mem_33520")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 3,
                                                sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 4,
                                                sizeof(paths_26354),
                                                &paths_26354));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 5,
                                                sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 6,
                                                sizeof(a_26359), &a_26359));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 7,
                                                sizeof(b_26360), &b_26360));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 8,
                                                sizeof(sigma_26361),
                                                &sigma_26361));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 9,
                                                sizeof(r0_26362), &r0_26362));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 10,
                                                sizeof(dt_26377), &dt_26377));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 11,
                                                sizeof(sims_per_year_26449),
                                                &sims_per_year_26449));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 12,
                                                sizeof(upper_bound_26463),
                                                &upper_bound_26463));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 13,
                                                sizeof(res_26464), &res_26464));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 14,
                                                sizeof(num_groups_27807),
                                                &num_groups_27807));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 15,
                                                sizeof(res_mem_33486.mem),
                                                &res_mem_33486.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 16,
                                                sizeof(res_mem_33487.mem),
                                                &res_mem_33487.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 17,
                                                sizeof(res_mem_33488.mem),
                                                &res_mem_33488.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 18,
                                                sizeof(res_mem_33489.mem),
                                                &res_mem_33489.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 19,
                                                sizeof(mem_33492.mem),
                                                &mem_33492.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 20,
                                                sizeof(mem_33506.mem),
                                                &mem_33506.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 21,
                                                sizeof(mem_33520.mem),
                                                &mem_33520.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 22,
                                                sizeof(mem_33535.mem),
                                                &mem_33535.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_27631, 23,
                                                sizeof(mem_33538.mem),
                                                &mem_33538.mem));
        if (1 * ((size_t) num_groups_27807 *
                 (size_t) segmap_group_sizze_27806) != 0) {
            const size_t global_work_sizze_35370[1] =
                         {(size_t) num_groups_27807 *
                         (size_t) segmap_group_sizze_27806};
            const size_t local_work_sizze_35374[1] = {segmap_group_sizze_27806};
            int64_t time_start_35371 = 0, time_end_35372 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segmap_27631");
                fprintf(stderr, "%zu", global_work_sizze_35370[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35374[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35371 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegmap_27631,
                                                            1, NULL,
                                                            global_work_sizze_35370,
                                                            local_work_sizze_35374,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegmap_27631_runs,
                                                                                                      &ctx->mainzisegmap_27631_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35372 = get_wall_time();
                
                long time_diff_35373 = time_end_35372 - time_start_35371;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segmap_27631", time_diff_35373);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &mem_33492, "mem_33492") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33506, "mem_33506") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33520, "mem_33520") != 0)
            return 1;
        
        struct memblock_device mem_33678;
        
        mem_33678.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33678, bytes_33533, "mem_33678")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33678, 0, mem_33535,
                                                  0, 1, paths_26354,
                                                  steps_26355) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_33535, "mem_33535") != 0)
            return 1;
        
        struct memblock_device mem_33682;
        
        mem_33682.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33682, bytes_33533, "mem_33682")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33682, 0, mem_33538,
                                                  0, 1, paths_26354,
                                                  steps_26355) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_33538, "mem_33538") != 0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33684, &mem_33678, "mem_33678") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33685, &mem_33682, "mem_33682") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33682, "mem_33682") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33678, "mem_33678") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33520, "mem_33520") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33506, "mem_33506") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33492, "mem_33492") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33538, "mem_33538") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33535, "mem_33535") != 0)
            return 1;
    } else {
        struct memblock_device res_mem_33674;
        
        res_mem_33674.references = NULL;
        
        struct memblock_device res_mem_33675;
        
        res_mem_33675.references = NULL;
        
        int32_t local_memory_capacity_34846;
        
        local_memory_capacity_34846 = ctx->opencl.max_local_memory;
        if (sle64(bytes_33491 + bytes_33491 + bytes_33491 +
                  (int32_t) sizeof(float) * (steps_26355 * n_26351) +
                  bytes_33491, sext_i32_i64(local_memory_capacity_34846)) &&
            intra_suff_and_fits_27982) {
            struct memblock_device mem_33565;
            
            mem_33565.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33565, bytes_33533,
                                      "mem_33565")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_33568;
            
            mem_33568.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33568, bytes_33533,
                                      "mem_33568")) {
                err = 1;
                goto cleanup;
            }
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    1,
                                                    sizeof(ctx->failure_is_an_option),
                                                    &ctx->failure_is_an_option));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    3, bytes_33491, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    4, (int32_t) sizeof(float) *
                                                    (steps_26355 * n_26351),
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    5, bytes_33491, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    6, bytes_33491, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    7, bytes_33491, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    8, sizeof(n_26351),
                                                    &n_26351));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    9, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    10, sizeof(a_26359),
                                                    &a_26359));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    11, sizeof(b_26360),
                                                    &b_26360));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    12, sizeof(sigma_26361),
                                                    &sigma_26361));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    13, sizeof(r0_26362),
                                                    &r0_26362));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    14, sizeof(dt_26377),
                                                    &dt_26377));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    15,
                                                    sizeof(sims_per_year_26449),
                                                    &sims_per_year_26449));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    16,
                                                    sizeof(upper_bound_26463),
                                                    &upper_bound_26463));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    17, sizeof(res_26464),
                                                    &res_26464));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    18,
                                                    sizeof(computed_group_sizze_27486),
                                                    &computed_group_sizze_27486));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    19,
                                                    sizeof(res_mem_33486.mem),
                                                    &res_mem_33486.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    20,
                                                    sizeof(res_mem_33487.mem),
                                                    &res_mem_33487.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    21,
                                                    sizeof(res_mem_33488.mem),
                                                    &res_mem_33488.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    22,
                                                    sizeof(res_mem_33489.mem),
                                                    &res_mem_33489.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    23, sizeof(mem_33565.mem),
                                                    &mem_33565.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_27629,
                                                    24, sizeof(mem_33568.mem),
                                                    &mem_33568.mem));
            if (1 * ((size_t) paths_26354 *
                     (size_t) computed_group_sizze_27486) != 0) {
                const size_t global_work_sizze_35375[1] =
                             {(size_t) paths_26354 *
                             (size_t) computed_group_sizze_27486};
                const size_t local_work_sizze_35379[1] =
                             {computed_group_sizze_27486};
                int64_t time_start_35376 = 0, time_end_35377 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segmap_intragroup_27629");
                    fprintf(stderr, "%zu", global_work_sizze_35375[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35379[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + bytes_33491 + (int32_t) sizeof(float) *
                                   (steps_26355 * n_26351) + bytes_33491 +
                                   bytes_33491 + bytes_33491));
                    time_start_35376 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegmap_intragroup_27629,
                                                                1, NULL,
                                                                global_work_sizze_35375,
                                                                local_work_sizze_35379,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegmap_intragroup_27629_runs,
                                                                                                          &ctx->mainzisegmap_intragroup_27629_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35377 = get_wall_time();
                    
                    long time_diff_35378 = time_end_35377 - time_start_35376;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segmap_intragroup_27629", time_diff_35378);
                }
            }
            ctx->failure_is_an_option = 1;
            if (memblock_set_device(ctx, &res_mem_33674, &mem_33565,
                                    "mem_33565") != 0)
                return 1;
            if (memblock_set_device(ctx, &res_mem_33675, &mem_33568,
                                    "mem_33568") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33568, "mem_33568") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33565, "mem_33565") != 0)
                return 1;
        } else {
            int64_t segmap_usable_groups_28827 = sdiv_up64(paths_26354,
                                                           segmap_group_sizze_28826);
            struct memblock_device mem_33571;
            
            mem_33571.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33571, bytes_33570,
                                      "mem_33571")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegMap");
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28807, 1,
                                                    sizeof(paths_26354),
                                                    &paths_26354));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28807, 2,
                                                    sizeof(mem_33571.mem),
                                                    &mem_33571.mem));
            if (1 * ((size_t) segmap_usable_groups_28827 *
                     (size_t) segmap_group_sizze_28826) != 0) {
                const size_t global_work_sizze_35380[1] =
                             {(size_t) segmap_usable_groups_28827 *
                             (size_t) segmap_group_sizze_28826};
                const size_t local_work_sizze_35384[1] =
                             {segmap_group_sizze_28826};
                int64_t time_start_35381 = 0, time_end_35382 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segmap_28807");
                    fprintf(stderr, "%zu", global_work_sizze_35380[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35384[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35381 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegmap_28807,
                                                                1, NULL,
                                                                global_work_sizze_35380,
                                                                local_work_sizze_35384,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegmap_28807_runs,
                                                                                                          &ctx->mainzisegmap_28807_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35382 = get_wall_time();
                    
                    long time_diff_35383 = time_end_35382 - time_start_35381;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segmap_28807", time_diff_35383);
                }
            }
            
            int64_t segmap_usable_groups_28852 = sdiv_up64(nest_sizze_28850,
                                                           segmap_group_sizze_28851);
            struct memblock_device mem_33575;
            
            mem_33575.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33575, bytes_33533,
                                      "mem_33575")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegMap");
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28743, 1,
                                                    sizeof(paths_26354),
                                                    &paths_26354));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28743, 2,
                                                    sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28743, 3,
                                                    sizeof(mem_33571.mem),
                                                    &mem_33571.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28743, 4,
                                                    sizeof(mem_33575.mem),
                                                    &mem_33575.mem));
            if (1 * ((size_t) segmap_usable_groups_28852 *
                     (size_t) segmap_group_sizze_28851) != 0) {
                const size_t global_work_sizze_35385[1] =
                             {(size_t) segmap_usable_groups_28852 *
                             (size_t) segmap_group_sizze_28851};
                const size_t local_work_sizze_35389[1] =
                             {segmap_group_sizze_28851};
                int64_t time_start_35386 = 0, time_end_35387 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segmap_28743");
                    fprintf(stderr, "%zu", global_work_sizze_35385[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35389[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35386 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegmap_28743,
                                                                1, NULL,
                                                                global_work_sizze_35385,
                                                                local_work_sizze_35389,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegmap_28743_runs,
                                                                                                          &ctx->mainzisegmap_28743_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35387 = get_wall_time();
                    
                    long time_diff_35388 = time_end_35387 - time_start_35386;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segmap_28743", time_diff_35388);
                }
            }
            if (memblock_unref_device(ctx, &mem_33571, "mem_33571") != 0)
                return 1;
            
            struct memblock_device mem_33578;
            
            mem_33578.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33578, bytes_33533,
                                      "mem_33578")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33578, 0,
                                                      mem_33575, 0, 1,
                                                      steps_26355,
                                                      paths_26354) != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref_device(ctx, &mem_33575, "mem_33575") != 0)
                return 1;
            
            struct memblock_device mem_33596;
            
            mem_33596.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33596, bytes_33533,
                                      "mem_33596")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_33581;
            
            mem_33581.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33581, total_sizze_33983,
                                      "mem_33581")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegMap");
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 1,
                                                    sizeof(ctx->failure_is_an_option),
                                                    &ctx->failure_is_an_option));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 3,
                                                    sizeof(paths_26354),
                                                    &paths_26354));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 4,
                                                    sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 5,
                                                    sizeof(a_26359), &a_26359));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 6,
                                                    sizeof(b_26360), &b_26360));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 7,
                                                    sizeof(sigma_26361),
                                                    &sigma_26361));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 8,
                                                    sizeof(r0_26362),
                                                    &r0_26362));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 9,
                                                    sizeof(dt_26377),
                                                    &dt_26377));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 10,
                                                    sizeof(upper_bound_26463),
                                                    &upper_bound_26463));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 11,
                                                    sizeof(res_26464),
                                                    &res_26464));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 12,
                                                    sizeof(num_groups_28897),
                                                    &num_groups_28897));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 13,
                                                    sizeof(mem_33578.mem),
                                                    &mem_33578.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 14,
                                                    sizeof(mem_33581.mem),
                                                    &mem_33581.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28645, 15,
                                                    sizeof(mem_33596.mem),
                                                    &mem_33596.mem));
            if (1 * ((size_t) num_groups_28897 *
                     (size_t) segmap_group_sizze_28896) != 0) {
                const size_t global_work_sizze_35390[1] =
                             {(size_t) num_groups_28897 *
                             (size_t) segmap_group_sizze_28896};
                const size_t local_work_sizze_35394[1] =
                             {segmap_group_sizze_28896};
                int64_t time_start_35391 = 0, time_end_35392 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segmap_28645");
                    fprintf(stderr, "%zu", global_work_sizze_35390[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35394[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35391 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegmap_28645,
                                                                1, NULL,
                                                                global_work_sizze_35390,
                                                                local_work_sizze_35394,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegmap_28645_runs,
                                                                                                          &ctx->mainzisegmap_28645_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35392 = get_wall_time();
                    
                    long time_diff_35393 = time_end_35392 - time_start_35391;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segmap_28645", time_diff_35393);
                }
            }
            ctx->failure_is_an_option = 1;
            if (memblock_unref_device(ctx, &mem_33578, "mem_33578") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33581, "mem_33581") != 0)
                return 1;
            
            struct memblock_device res_mem_33669;
            
            res_mem_33669.references = NULL;
            
            int32_t local_memory_capacity_34845;
            
            local_memory_capacity_34845 = ctx->opencl.max_local_memory;
            if (sle64(bytes_33599 + bytes_33599 + bytes_33618 + bytes_33599 +
                      bytes_33599 + bytes_33599 + bytes_33618 + bytes_33599,
                      sext_i32_i64(local_memory_capacity_34845)) &&
                suff_outer_par_28928) {
                int64_t ldim_32671 = sdiv_up64(steps_26355,
                                               computed_group_sizze_32670);
                int64_t computed_num_groups_32672 = paths_26354 * ldim_32671;
                int64_t num_whole_tiles_32694 = squot64(n_26351,
                                                        computed_group_sizze_32670);
                int64_t residual_input_33096 = srem64(n_26351,
                                                      computed_group_sizze_32670);
                bool cond_33097 = residual_input_33096 == 0;
                struct memblock_device mem_33654;
                
                mem_33654.references = NULL;
                if (memblock_alloc_device(ctx, &mem_33654, bytes_33533,
                                          "mem_33654")) {
                    err = 1;
                    goto cleanup;
                }
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        1,
                                                        sizeof(ctx->failure_is_an_option),
                                                        &ctx->failure_is_an_option));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        3, bytes_33599, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        4, bytes_33618, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        5, bytes_33599, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        6, bytes_33599, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        7, bytes_33599, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        8, bytes_33618, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        9, bytes_33599, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        10, bytes_33599, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        11, sizeof(n_26351),
                                                        &n_26351));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        12, sizeof(paths_26354),
                                                        &paths_26354));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        13, sizeof(steps_26355),
                                                        &steps_26355));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        14, sizeof(a_26359),
                                                        &a_26359));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        15, sizeof(b_26360),
                                                        &b_26360));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        16, sizeof(sigma_26361),
                                                        &sigma_26361));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        17,
                                                        sizeof(sims_per_year_26449),
                                                        &sims_per_year_26449));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        18,
                                                        sizeof(computed_group_sizze_32670),
                                                        &computed_group_sizze_32670));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        19, sizeof(ldim_32671),
                                                        &ldim_32671));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        20,
                                                        sizeof(num_whole_tiles_32694),
                                                        &num_whole_tiles_32694));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        21,
                                                        sizeof(residual_input_33096),
                                                        &residual_input_33096));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        22, sizeof(cond_33097),
                                                        &cond_33097));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        23,
                                                        sizeof(res_mem_33486.mem),
                                                        &res_mem_33486.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        24,
                                                        sizeof(res_mem_33487.mem),
                                                        &res_mem_33487.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        25,
                                                        sizeof(res_mem_33488.mem),
                                                        &res_mem_33488.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        26,
                                                        sizeof(res_mem_33489.mem),
                                                        &res_mem_33489.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        27,
                                                        sizeof(mem_33596.mem),
                                                        &mem_33596.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_32669,
                                                        28,
                                                        sizeof(mem_33654.mem),
                                                        &mem_33654.mem));
                if (1 * ((size_t) computed_num_groups_32672 *
                         (size_t) computed_group_sizze_32670) != 0) {
                    const size_t global_work_sizze_35395[1] =
                                 {(size_t) computed_num_groups_32672 *
                                 (size_t) computed_group_sizze_32670};
                    const size_t local_work_sizze_35399[1] =
                                 {computed_group_sizze_32670};
                    int64_t time_start_35396 = 0, time_end_35397 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(stderr, "Launching %s with global work size [",
                                "main.segmap_intragroup_32669");
                        fprintf(stderr, "%zu", global_work_sizze_35395[0]);
                        fprintf(stderr, "] and local work size [");
                        fprintf(stderr, "%zu", local_work_sizze_35399[0]);
                        fprintf(stderr,
                                "]; local memory parameters sum to %d bytes.\n",
                                (int) (0 + bytes_33599 + bytes_33618 +
                                       bytes_33599 + bytes_33599 + bytes_33599 +
                                       bytes_33618 + bytes_33599 +
                                       bytes_33599));
                        time_start_35396 = get_wall_time();
                    }
                    OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                    ctx->mainzisegmap_intragroup_32669,
                                                                    1, NULL,
                                                                    global_work_sizze_35395,
                                                                    local_work_sizze_35399,
                                                                    0, NULL,
                                                                    ctx->profiling_paused ||
                                                                    !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                              &ctx->mainzisegmap_intragroup_32669_runs,
                                                                                                              &ctx->mainzisegmap_intragroup_32669_total_runtime)));
                    if (ctx->debugging) {
                        OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                        time_end_35397 = get_wall_time();
                        
                        long time_diff_35398 = time_end_35397 -
                             time_start_35396;
                        
                        fprintf(stderr, "kernel %s runtime: %ldus\n",
                                "main.segmap_intragroup_32669",
                                time_diff_35398);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (memblock_set_device(ctx, &res_mem_33669, &mem_33654,
                                        "mem_33654") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_33654, "mem_33654") != 0)
                    return 1;
            } else {
                struct memblock_device res_mem_33668;
                
                res_mem_33668.references = NULL;
                
                int32_t local_memory_capacity_34844;
                
                local_memory_capacity_34844 = ctx->opencl.max_local_memory;
                if (sle64((int32_t) sizeof(float) * n_26351,
                          sext_i32_i64(local_memory_capacity_34844)) &&
                    intra_suff_and_fits_28936) {
                    struct memblock_device mem_33659;
                    
                    mem_33659.references = NULL;
                    if (memblock_alloc_device(ctx, &mem_33659, bytes_33533,
                                              "mem_33659")) {
                        err = 1;
                        goto cleanup;
                    }
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            1,
                                                            sizeof(ctx->failure_is_an_option),
                                                            &ctx->failure_is_an_option));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            3,
                                                            (int32_t) sizeof(float) *
                                                            n_26351, NULL));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            4, sizeof(n_26351),
                                                            &n_26351));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            5,
                                                            sizeof(paths_26354),
                                                            &paths_26354));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            6,
                                                            sizeof(steps_26355),
                                                            &steps_26355));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            7, sizeof(a_26359),
                                                            &a_26359));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            8, sizeof(b_26360),
                                                            &b_26360));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            9,
                                                            sizeof(sigma_26361),
                                                            &sigma_26361));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            10,
                                                            sizeof(sims_per_year_26449),
                                                            &sims_per_year_26449));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            11,
                                                            sizeof(res_mem_33486.mem),
                                                            &res_mem_33486.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            12,
                                                            sizeof(res_mem_33487.mem),
                                                            &res_mem_33487.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            13,
                                                            sizeof(res_mem_33488.mem),
                                                            &res_mem_33488.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            14,
                                                            sizeof(res_mem_33489.mem),
                                                            &res_mem_33489.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            15,
                                                            sizeof(mem_33596.mem),
                                                            &mem_33596.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_intragroup_28171,
                                                            16,
                                                            sizeof(mem_33659.mem),
                                                            &mem_33659.mem));
                    if (1 * ((size_t) nest_sizze_28850 * (size_t) n_26351) !=
                        0) {
                        const size_t global_work_sizze_35400[1] =
                                     {(size_t) nest_sizze_28850 *
                                     (size_t) n_26351};
                        const size_t local_work_sizze_35404[1] = {n_26351};
                        int64_t time_start_35401 = 0, time_end_35402 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(stderr,
                                    "Launching %s with global work size [",
                                    "main.segmap_intragroup_28171");
                            fprintf(stderr, "%zu", global_work_sizze_35400[0]);
                            fprintf(stderr, "] and local work size [");
                            fprintf(stderr, "%zu", local_work_sizze_35404[0]);
                            fprintf(stderr,
                                    "]; local memory parameters sum to %d bytes.\n",
                                    (int) (0 + (int32_t) sizeof(float) *
                                           n_26351));
                            time_start_35401 = get_wall_time();
                        }
                        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                        ctx->mainzisegmap_intragroup_28171,
                                                                        1, NULL,
                                                                        global_work_sizze_35400,
                                                                        local_work_sizze_35404,
                                                                        0, NULL,
                                                                        ctx->profiling_paused ||
                                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                  &ctx->mainzisegmap_intragroup_28171_runs,
                                                                                                                  &ctx->mainzisegmap_intragroup_28171_total_runtime)));
                        if (ctx->debugging) {
                            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                            time_end_35402 = get_wall_time();
                            
                            long time_diff_35403 = time_end_35402 -
                                 time_start_35401;
                            
                            fprintf(stderr, "kernel %s runtime: %ldus\n",
                                    "main.segmap_intragroup_28171",
                                    time_diff_35403);
                        }
                    }
                    ctx->failure_is_an_option = 1;
                    if (memblock_set_device(ctx, &res_mem_33668, &mem_33659,
                                            "mem_33659") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_33659, "mem_33659") !=
                        0)
                        return 1;
                } else {
                    struct memblock_device mem_33663;
                    
                    mem_33663.references = NULL;
                    if (memblock_alloc_device(ctx, &mem_33663, bytes_33533,
                                              "mem_33663")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (slt64(n_26351 * 2, segred_group_sizze_29156)) {
                        int64_t segment_sizze_nonzzero_34777 = smax64(1,
                                                                      n_26351);
                        int64_t num_threads_34778 = num_groups_29157 *
                                segred_group_sizze_29156;
                        
                        if (ctx->debugging)
                            fprintf(stderr, "%s\n", "\n# SegRed-small");
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "num_segments",
                                    (long long) (paths_26354 * steps_26355),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "segment_size",
                                    (long long) n_26351, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "segments_per_group",
                                    (long long) squot64(segred_group_sizze_29156,
                                                        segment_sizze_nonzzero_34777),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "required_groups",
                                    (long long) sext_i64_i32(sdiv_up64(paths_26354 *
                                                                       steps_26355,
                                                                       squot64(segred_group_sizze_29156,
                                                                               segment_sizze_nonzzero_34777))),
                                    '\n');
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                1,
                                                                sizeof(ctx->failure_is_an_option),
                                                                &ctx->failure_is_an_option));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                3,
                                                                (int32_t) sizeof(float) *
                                                                segred_group_sizze_29156,
                                                                NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                4,
                                                                sizeof(n_26351),
                                                                &n_26351));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                5,
                                                                sizeof(paths_26354),
                                                                &paths_26354));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                6,
                                                                sizeof(steps_26355),
                                                                &steps_26355));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                7,
                                                                sizeof(a_26359),
                                                                &a_26359));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                8,
                                                                sizeof(b_26360),
                                                                &b_26360));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                9,
                                                                sizeof(sigma_26361),
                                                                &sigma_26361));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                10,
                                                                sizeof(sims_per_year_26449),
                                                                &sims_per_year_26449));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                11,
                                                                sizeof(num_groups_29157),
                                                                &num_groups_29157));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                12,
                                                                sizeof(res_mem_33486.mem),
                                                                &res_mem_33486.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                13,
                                                                sizeof(res_mem_33487.mem),
                                                                &res_mem_33487.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                14,
                                                                sizeof(res_mem_33488.mem),
                                                                &res_mem_33488.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                15,
                                                                sizeof(res_mem_33489.mem),
                                                                &res_mem_33489.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                16,
                                                                sizeof(mem_33596.mem),
                                                                &mem_33596.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                17,
                                                                sizeof(mem_33663.mem),
                                                                &mem_33663.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_28414,
                                                                18,
                                                                sizeof(segment_sizze_nonzzero_34777),
                                                                &segment_sizze_nonzzero_34777));
                        if (1 * ((size_t) num_groups_29157 *
                                 (size_t) segred_group_sizze_29156) != 0) {
                            const size_t global_work_sizze_35405[1] =
                                         {(size_t) num_groups_29157 *
                                         (size_t) segred_group_sizze_29156};
                            const size_t local_work_sizze_35409[1] =
                                         {segred_group_sizze_29156};
                            int64_t time_start_35406 = 0, time_end_35407 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(stderr,
                                        "Launching %s with global work size [",
                                        "main.segred_small_28414");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35405[0]);
                                fprintf(stderr, "] and local work size [");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35409[0]);
                                fprintf(stderr,
                                        "]; local memory parameters sum to %d bytes.\n",
                                        (int) (0 + (int32_t) sizeof(float) *
                                               segred_group_sizze_29156));
                                time_start_35406 = get_wall_time();
                            }
                            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                            ctx->mainzisegred_small_28414,
                                                                            1,
                                                                            NULL,
                                                                            global_work_sizze_35405,
                                                                            local_work_sizze_35409,
                                                                            0,
                                                                            NULL,
                                                                            ctx->profiling_paused ||
                                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                      &ctx->mainzisegred_small_28414_runs,
                                                                                                                      &ctx->mainzisegred_small_28414_total_runtime)));
                            if (ctx->debugging) {
                                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                                time_end_35407 = get_wall_time();
                                
                                long time_diff_35408 = time_end_35407 -
                                     time_start_35406;
                                
                                fprintf(stderr, "kernel %s runtime: %ldus\n",
                                        "main.segred_small_28414",
                                        time_diff_35408);
                            }
                        }
                        ctx->failure_is_an_option = 1;
                    } else {
                        int64_t groups_per_segment_34799 =
                                sdiv_up64(num_groups_29157, smax64(1,
                                                                   paths_26354 *
                                                                   steps_26355));
                        int64_t elements_per_thread_34800 = sdiv_up64(n_26351,
                                                                      segred_group_sizze_29156 *
                                                                      groups_per_segment_34799);
                        int64_t virt_num_groups_34801 =
                                groups_per_segment_34799 * (paths_26354 *
                                                            steps_26355);
                        int64_t num_threads_34802 = num_groups_29157 *
                                segred_group_sizze_29156;
                        int64_t threads_per_segment_34803 =
                                groups_per_segment_34799 *
                                segred_group_sizze_29156;
                        
                        if (ctx->debugging)
                            fprintf(stderr, "%s\n", "\n# SegRed-large");
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "num_segments",
                                    (long long) (paths_26354 * steps_26355),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "segment_size",
                                    (long long) n_26351, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "virt_num_groups",
                                    (long long) virt_num_groups_34801, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "num_groups",
                                    (long long) num_groups_29157, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "group_size",
                                    (long long) segred_group_sizze_29156, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "elems_per_thread",
                                    (long long) elements_per_thread_34800,
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "groups_per_segment",
                                    (long long) groups_per_segment_34799, '\n');
                        
                        struct memblock_device group_res_arr_mem_34804;
                        
                        group_res_arr_mem_34804.references = NULL;
                        if (memblock_alloc_device(ctx, &group_res_arr_mem_34804,
                                                  (int32_t) sizeof(float) *
                                                  (segred_group_sizze_29156 *
                                                   virt_num_groups_34801),
                                                  "group_res_arr_mem_34804")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock_device mainzicounter_mem_34806 =
                                               ctx->mainzicounter_mem_34806;
                        
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                1,
                                                                sizeof(ctx->failure_is_an_option),
                                                                &ctx->failure_is_an_option));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                3,
                                                                (int32_t) sizeof(bool),
                                                                NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                4,
                                                                (int32_t) sizeof(float) *
                                                                segred_group_sizze_29156,
                                                                NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                5,
                                                                sizeof(n_26351),
                                                                &n_26351));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                6,
                                                                sizeof(paths_26354),
                                                                &paths_26354));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                7,
                                                                sizeof(steps_26355),
                                                                &steps_26355));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                8,
                                                                sizeof(a_26359),
                                                                &a_26359));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                9,
                                                                sizeof(b_26360),
                                                                &b_26360));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                10,
                                                                sizeof(sigma_26361),
                                                                &sigma_26361));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                11,
                                                                sizeof(sims_per_year_26449),
                                                                &sims_per_year_26449));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                12,
                                                                sizeof(num_groups_29157),
                                                                &num_groups_29157));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                13,
                                                                sizeof(res_mem_33486.mem),
                                                                &res_mem_33486.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                14,
                                                                sizeof(res_mem_33487.mem),
                                                                &res_mem_33487.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                15,
                                                                sizeof(res_mem_33488.mem),
                                                                &res_mem_33488.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                16,
                                                                sizeof(res_mem_33489.mem),
                                                                &res_mem_33489.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                17,
                                                                sizeof(mem_33596.mem),
                                                                &mem_33596.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                18,
                                                                sizeof(mem_33663.mem),
                                                                &mem_33663.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                19,
                                                                sizeof(groups_per_segment_34799),
                                                                &groups_per_segment_34799));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                20,
                                                                sizeof(elements_per_thread_34800),
                                                                &elements_per_thread_34800));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                21,
                                                                sizeof(virt_num_groups_34801),
                                                                &virt_num_groups_34801));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                22,
                                                                sizeof(threads_per_segment_34803),
                                                                &threads_per_segment_34803));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                23,
                                                                sizeof(group_res_arr_mem_34804.mem),
                                                                &group_res_arr_mem_34804.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_28414,
                                                                24,
                                                                sizeof(mainzicounter_mem_34806.mem),
                                                                &mainzicounter_mem_34806.mem));
                        if (1 * ((size_t) num_groups_29157 *
                                 (size_t) segred_group_sizze_29156) != 0) {
                            const size_t global_work_sizze_35411[1] =
                                         {(size_t) num_groups_29157 *
                                         (size_t) segred_group_sizze_29156};
                            const size_t local_work_sizze_35415[1] =
                                         {segred_group_sizze_29156};
                            int64_t time_start_35412 = 0, time_end_35413 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(stderr,
                                        "Launching %s with global work size [",
                                        "main.segred_large_28414");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35411[0]);
                                fprintf(stderr, "] and local work size [");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35415[0]);
                                fprintf(stderr,
                                        "]; local memory parameters sum to %d bytes.\n",
                                        (int) (0 + (int32_t) sizeof(bool) +
                                               (int32_t) sizeof(float) *
                                               segred_group_sizze_29156));
                                time_start_35412 = get_wall_time();
                            }
                            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                            ctx->mainzisegred_large_28414,
                                                                            1,
                                                                            NULL,
                                                                            global_work_sizze_35411,
                                                                            local_work_sizze_35415,
                                                                            0,
                                                                            NULL,
                                                                            ctx->profiling_paused ||
                                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                      &ctx->mainzisegred_large_28414_runs,
                                                                                                                      &ctx->mainzisegred_large_28414_total_runtime)));
                            if (ctx->debugging) {
                                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                                time_end_35413 = get_wall_time();
                                
                                long time_diff_35414 = time_end_35413 -
                                     time_start_35412;
                                
                                fprintf(stderr, "kernel %s runtime: %ldus\n",
                                        "main.segred_large_28414",
                                        time_diff_35414);
                            }
                        }
                        ctx->failure_is_an_option = 1;
                        if (memblock_unref_device(ctx, &group_res_arr_mem_34804,
                                                  "group_res_arr_mem_34804") !=
                            0)
                            return 1;
                    }
                    
                    int64_t segmap_usable_groups_29268 =
                            sdiv_up64(nest_sizze_28850,
                                      segmap_group_sizze_29267);
                    struct memblock_device mem_33667;
                    
                    mem_33667.references = NULL;
                    if (memblock_alloc_device(ctx, &mem_33667, bytes_33533,
                                              "mem_33667")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (ctx->debugging)
                        fprintf(stderr, "%s\n", "\n# SegMap");
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28395,
                                                            1,
                                                            sizeof(paths_26354),
                                                            &paths_26354));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28395,
                                                            2,
                                                            sizeof(steps_26355),
                                                            &steps_26355));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28395,
                                                            3,
                                                            sizeof(mem_33663.mem),
                                                            &mem_33663.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_28395,
                                                            4,
                                                            sizeof(mem_33667.mem),
                                                            &mem_33667.mem));
                    if (1 * ((size_t) segmap_usable_groups_29268 *
                             (size_t) segmap_group_sizze_29267) != 0) {
                        const size_t global_work_sizze_35416[1] =
                                     {(size_t) segmap_usable_groups_29268 *
                                     (size_t) segmap_group_sizze_29267};
                        const size_t local_work_sizze_35420[1] =
                                     {segmap_group_sizze_29267};
                        int64_t time_start_35417 = 0, time_end_35418 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(stderr,
                                    "Launching %s with global work size [",
                                    "main.segmap_28395");
                            fprintf(stderr, "%zu", global_work_sizze_35416[0]);
                            fprintf(stderr, "] and local work size [");
                            fprintf(stderr, "%zu", local_work_sizze_35420[0]);
                            fprintf(stderr,
                                    "]; local memory parameters sum to %d bytes.\n",
                                    (int) 0);
                            time_start_35417 = get_wall_time();
                        }
                        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                        ctx->mainzisegmap_28395,
                                                                        1, NULL,
                                                                        global_work_sizze_35416,
                                                                        local_work_sizze_35420,
                                                                        0, NULL,
                                                                        ctx->profiling_paused ||
                                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                  &ctx->mainzisegmap_28395_runs,
                                                                                                                  &ctx->mainzisegmap_28395_total_runtime)));
                        if (ctx->debugging) {
                            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                            time_end_35418 = get_wall_time();
                            
                            long time_diff_35419 = time_end_35418 -
                                 time_start_35417;
                            
                            fprintf(stderr, "kernel %s runtime: %ldus\n",
                                    "main.segmap_28395", time_diff_35419);
                        }
                    }
                    if (memblock_unref_device(ctx, &mem_33663, "mem_33663") !=
                        0)
                        return 1;
                    if (memblock_set_device(ctx, &res_mem_33668, &mem_33667,
                                            "mem_33667") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_33667, "mem_33667") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_33663, "mem_33663") !=
                        0)
                        return 1;
                }
                if (memblock_set_device(ctx, &res_mem_33669, &res_mem_33668,
                                        "res_mem_33668") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &res_mem_33668,
                                          "res_mem_33668") != 0)
                    return 1;
            }
            
            struct memblock_device mem_33672;
            
            mem_33672.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33672, bytes_33533,
                                      "mem_33672")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33672, 0,
                                                      mem_33596, 0, 1,
                                                      paths_26354,
                                                      steps_26355) != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref_device(ctx, &mem_33596, "mem_33596") != 0)
                return 1;
            if (memblock_set_device(ctx, &res_mem_33674, &res_mem_33669,
                                    "res_mem_33669") != 0)
                return 1;
            if (memblock_set_device(ctx, &res_mem_33675, &mem_33672,
                                    "mem_33672") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33672, "mem_33672") != 0)
                return 1;
            if (memblock_unref_device(ctx, &res_mem_33669, "res_mem_33669") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33581, "mem_33581") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33596, "mem_33596") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33578, "mem_33578") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33575, "mem_33575") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33571, "mem_33571") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &res_mem_33684, &res_mem_33674,
                                "res_mem_33674") != 0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33685, &res_mem_33675,
                                "res_mem_33675") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33675, "res_mem_33675") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33674, "res_mem_33674") != 0)
            return 1;
    }
    
    int64_t flat_dim_26636 = n_26351 * paths_26354;
    float res_26640 = sitofp_i64_f32(paths_26354);
    bool suff_outer_par_29278;
    
    suff_outer_par_29278 = ctx->sizes.mainzisuff_outer_par_8 <= steps_26355;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "main.suff_outer_par_8",
                steps_26355);
    
    int64_t segmap_group_sizze_29547;
    
    segmap_group_sizze_29547 = ctx->sizes.mainzisegmap_group_sizze_29316;
    
    int64_t nest_sizze_30243 = steps_26355 * flat_dim_26636;
    int64_t segscan_group_sizze_30244;
    
    segscan_group_sizze_30244 = ctx->sizes.mainzisegscan_group_sizze_30122;
    
    int64_t num_groups_30245;
    int32_t max_num_groups_34848;
    
    max_num_groups_34848 = ctx->sizes.mainzisegscan_num_groups_30124;
    num_groups_30245 = sext_i64_i32(smax64(1, smin64(sdiv_up64(nest_sizze_30243,
                                                               sext_i32_i64(segscan_group_sizze_30244)),
                                                     sext_i32_i64(max_num_groups_34848))));
    
    int64_t segred_group_sizze_30266;
    
    segred_group_sizze_30266 = ctx->sizes.mainzisegred_group_sizze_30106;
    
    int64_t num_groups_30267;
    int32_t max_num_groups_34849;
    
    max_num_groups_34849 = ctx->sizes.mainzisegred_num_groups_30108;
    num_groups_30267 = sext_i64_i32(smax64(1, smin64(sdiv_up64(nest_sizze_30243,
                                                               sext_i32_i64(segred_group_sizze_30266)),
                                                     sext_i32_i64(max_num_groups_34849))));
    
    int64_t segmap_group_sizze_30276;
    
    segmap_group_sizze_30276 = ctx->sizes.mainzisegmap_group_sizze_29901;
    
    int64_t num_groups_30277;
    int32_t max_num_groups_34850;
    
    max_num_groups_34850 = ctx->sizes.mainzisegmap_num_groups_29903;
    num_groups_30277 = sext_i64_i32(smax64(1, smin64(sdiv_up64(steps_26355,
                                                               sext_i32_i64(segmap_group_sizze_30276)),
                                                     sext_i32_i64(max_num_groups_34850))));
    
    int64_t segred_group_sizze_30478;
    
    segred_group_sizze_30478 = ctx->sizes.mainzisegred_group_sizze_29790;
    
    int64_t num_groups_30479;
    int32_t max_num_groups_34851;
    
    max_num_groups_34851 = ctx->sizes.mainzisegred_num_groups_29792;
    num_groups_30479 = sext_i64_i32(smax64(1, smin64(sdiv_up64(nest_sizze_28850,
                                                               sext_i32_i64(segred_group_sizze_30478)),
                                                     sext_i32_i64(max_num_groups_34851))));
    
    int64_t segmap_group_sizze_30494;
    
    segmap_group_sizze_30494 = ctx->sizes.mainzisegmap_group_sizze_29781;
    
    int64_t bytes_33687 = 4 * flat_dim_26636;
    int64_t bytes_33710 = 8 * flat_dim_26636;
    int64_t bytes_33825 = 8 * nest_sizze_30243;
    int64_t bytes_33832 = 8 * steps_26355;
    int64_t bytes_33936 = 4 * nest_sizze_30243;
    int64_t bytes_33940 = 4 * nest_sizze_29155;
    int64_t binop_x_33946 = paths_26354 * one_intra_par_min_27626;
    int64_t bytes_33944 = 4 * binop_x_33946;
    int64_t segred_num_groups_34017;
    
    segred_num_groups_34017 = ctx->sizes.mainzisegred_num_groups_34016;
    
    int64_t segred_group_sizze_34019;
    
    segred_group_sizze_34019 = ctx->sizes.mainzisegred_group_sizze_34018;
    
    int64_t bytes_34144 = 8 * flat_dim_26636;
    int64_t bytes_34146 = 8 * flat_dim_26636;
    int64_t num_threads_34238 = segred_num_groups_34017 *
            segred_group_sizze_34019;
    int64_t total_sizze_34239 = bytes_34144 * num_threads_34238;
    int64_t total_sizze_34240 = bytes_34146 * num_threads_34238;
    int64_t segred_num_groups_34268;
    
    segred_num_groups_34268 = ctx->sizes.mainzisegred_num_groups_34267;
    
    int64_t segred_group_sizze_34270;
    
    segred_group_sizze_34270 = ctx->sizes.mainzisegred_group_sizze_34269;
    
    int64_t bytes_34330 = 8 * flat_dim_26636;
    int64_t num_threads_34354 = segred_num_groups_34268 *
            segred_group_sizze_34270;
    int64_t total_sizze_34355 = bytes_34330 * num_threads_34354;
    int64_t num_threads_34358 = segmap_group_sizze_30276 * num_groups_30277;
    int64_t segred_num_groups_34383;
    
    segred_num_groups_34383 = ctx->sizes.mainzisegred_num_groups_34382;
    
    int64_t segred_group_sizze_34385;
    
    segred_group_sizze_34385 = ctx->sizes.mainzisegred_group_sizze_34384;
    
    int64_t num_threads_34542 = segred_num_groups_34383 *
            segred_group_sizze_34385;
    int64_t segred_num_groups_34570;
    
    segred_num_groups_34570 = ctx->sizes.mainzisegred_num_groups_34569;
    
    int64_t segred_group_sizze_34572;
    
    segred_group_sizze_34572 = ctx->sizes.mainzisegred_group_sizze_34571;
    
    struct memblock_device res_mem_33954;
    
    res_mem_33954.references = NULL;
    
    int32_t local_memory_capacity_35327;
    
    local_memory_capacity_35327 = ctx->opencl.max_local_memory;
    if (((sle64((int32_t) sizeof(bool) + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34270 + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34270 + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34270 + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34270,
                sext_i32_i64(local_memory_capacity_35327)) &&
          sle64((int32_t) sizeof(bool) + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34019 + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34019 + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34019 + (int32_t) sizeof(int64_t) *
                segred_group_sizze_34019,
                sext_i32_i64(local_memory_capacity_35327))) && sle64(0,
                                                                     sext_i32_i64(local_memory_capacity_35327))) &&
        suff_outer_par_29278) {
        int64_t segmap_usable_groups_29548 = sdiv_up64(steps_26355,
                                                       segmap_group_sizze_29547);
        struct memblock_device mem_33823;
        
        mem_33823.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33823, bytes_33491, "mem_33823")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_33988 = segmap_group_sizze_29547 *
                segmap_usable_groups_29548;
        int64_t total_sizze_33989 = bytes_33687 * num_threads_33988;
        struct memblock_device mem_33689;
        
        mem_33689.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33689, total_sizze_33989,
                                  "mem_33689")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t total_sizze_33990 = bytes_33468 * num_threads_33988;
        struct memblock_device mem_33701;
        
        mem_33701.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33701, total_sizze_33990,
                                  "mem_33701")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t total_sizze_33991 = bytes_33710 * num_threads_33988;
        struct memblock_device mem_33711;
        
        mem_33711.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33711, total_sizze_33991,
                                  "mem_33711")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t total_sizze_33992 = bytes_33710 * num_threads_33988;
        struct memblock_device mem_33713;
        
        mem_33713.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33713, total_sizze_33992,
                                  "mem_33713")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34229;
        
        mem_34229.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34229, 8, "mem_34229")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34231;
        
        mem_34231.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34231, 8, "mem_34231")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34233;
        
        mem_34233.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34233, 8, "mem_34233")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34235;
        
        mem_34235.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34235, 8, "mem_34235")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34145;
        
        mem_34145.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34145, total_sizze_34239,
                                  "mem_34145")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34147;
        
        mem_34147.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34147, total_sizze_34240,
                                  "mem_34147")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34345;
        
        mem_34345.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34345, 8, "mem_34345")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34347;
        
        mem_34347.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34347, 8, "mem_34347")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34349;
        
        mem_34349.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34349, 8, "mem_34349")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34351;
        
        mem_34351.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34351, 8, "mem_34351")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34331;
        
        mem_34331.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34331, total_sizze_34355,
                                  "mem_34331")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mainzicounter_mem_34852 =
                               ctx->mainzicounter_mem_34852;
        struct memblock_device group_res_arr_mem_34854;
        
        group_res_arr_mem_34854.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34854,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34270 *
                                   segred_num_groups_34268),
                                  "group_res_arr_mem_34854")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_34856;
        
        group_res_arr_mem_34856.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34856,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34270 *
                                   segred_num_groups_34268),
                                  "group_res_arr_mem_34856")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_34858;
        
        group_res_arr_mem_34858.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34858,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34270 *
                                   segred_num_groups_34268),
                                  "group_res_arr_mem_34858")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_34860;
        
        group_res_arr_mem_34860.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34860,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34270 *
                                   segred_num_groups_34268),
                                  "group_res_arr_mem_34860")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_34862;
        
        num_threads_34862 = segred_num_groups_34268 * segred_group_sizze_34270;
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegRed");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                1, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34270,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                2, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34270,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                3, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34270,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                4, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34270,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                5, (int32_t) sizeof(bool),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                6, sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                7, sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                8, sizeof(sims_per_year_26449),
                                                &sims_per_year_26449));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                9, sizeof(flat_dim_26636),
                                                &flat_dim_26636));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                10, sizeof(res_mem_33488.mem),
                                                &res_mem_33488.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                11, sizeof(res_mem_33489.mem),
                                                &res_mem_33489.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                12, sizeof(mem_34331.mem),
                                                &mem_34331.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                13, sizeof(mem_34345.mem),
                                                &mem_34345.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                14, sizeof(mem_34347.mem),
                                                &mem_34347.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                15, sizeof(mem_34349.mem),
                                                &mem_34349.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                16, sizeof(mem_34351.mem),
                                                &mem_34351.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                17,
                                                sizeof(mainzicounter_mem_34852.mem),
                                                &mainzicounter_mem_34852.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                18,
                                                sizeof(group_res_arr_mem_34854.mem),
                                                &group_res_arr_mem_34854.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                19,
                                                sizeof(group_res_arr_mem_34856.mem),
                                                &group_res_arr_mem_34856.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                20,
                                                sizeof(group_res_arr_mem_34858.mem),
                                                &group_res_arr_mem_34858.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                21,
                                                sizeof(group_res_arr_mem_34860.mem),
                                                &group_res_arr_mem_34860.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34277,
                                                22, sizeof(num_threads_34862),
                                                &num_threads_34862));
        if (1 * ((size_t) segred_num_groups_34268 *
                 (size_t) segred_group_sizze_34270) != 0) {
            const size_t global_work_sizze_35422[1] =
                         {(size_t) segred_num_groups_34268 *
                         (size_t) segred_group_sizze_34270};
            const size_t local_work_sizze_35426[1] = {segred_group_sizze_34270};
            int64_t time_start_35423 = 0, time_end_35424 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segred_nonseg_34277");
                fprintf(stderr, "%zu", global_work_sizze_35422[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35426[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34270 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34270 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34270 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34270 +
                               (int32_t) sizeof(bool)));
                time_start_35423 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegred_nonseg_34277,
                                                            1, NULL,
                                                            global_work_sizze_35422,
                                                            local_work_sizze_35426,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegred_nonseg_34277_runs,
                                                                                                      &ctx->mainzisegred_nonseg_34277_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35424 = get_wall_time();
                
                long time_diff_35425 = time_end_35424 - time_start_35423;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segred_nonseg_34277", time_diff_35425);
            }
        }
        if (memblock_unref_device(ctx, &mem_34331, "mem_34331") != 0)
            return 1;
        
        int64_t read_res_35427;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34345.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35427, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34260 = read_res_35427;
        
        if (memblock_unref_device(ctx, &mem_34345, "mem_34345") != 0)
            return 1;
        
        int64_t read_res_35428;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34347.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35428, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34261 = read_res_35428;
        
        if (memblock_unref_device(ctx, &mem_34347, "mem_34347") != 0)
            return 1;
        
        int64_t read_res_35429;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34349.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35429, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34262 = read_res_35429;
        
        if (memblock_unref_device(ctx, &mem_34349, "mem_34349") != 0)
            return 1;
        
        int64_t read_res_35430;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34351.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35430, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34263 = read_res_35430;
        
        if (memblock_unref_device(ctx, &mem_34351, "mem_34351") != 0)
            return 1;
        
        int64_t sizze_sum_34323 = num_threads_34238 * max_per_thread_34260;
        int64_t sizze_sum_34324 = num_threads_34238 * max_per_thread_34261;
        int64_t sizze_sum_34325 = num_threads_34238 * max_per_thread_34262;
        int64_t sizze_sum_34326 = num_threads_34238 * max_per_thread_34263;
        struct memblock_device mem_34201;
        
        mem_34201.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34201, sizze_sum_34323,
                                  "mem_34201")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34173;
        
        mem_34173.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34173, sizze_sum_34324,
                                  "mem_34173")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34187;
        
        mem_34187.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34187, sizze_sum_34325,
                                  "mem_34187")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34215;
        
        mem_34215.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34215, sizze_sum_34326,
                                  "mem_34215")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mainzicounter_mem_34908 =
                               ctx->mainzicounter_mem_34908;
        struct memblock_device group_res_arr_mem_34910;
        
        group_res_arr_mem_34910.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34910,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34019 *
                                   segred_num_groups_34017),
                                  "group_res_arr_mem_34910")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_34912;
        
        group_res_arr_mem_34912.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34912,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34019 *
                                   segred_num_groups_34017),
                                  "group_res_arr_mem_34912")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_34914;
        
        group_res_arr_mem_34914.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34914,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34019 *
                                   segred_num_groups_34017),
                                  "group_res_arr_mem_34914")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_34916;
        
        group_res_arr_mem_34916.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_34916,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34019 *
                                   segred_num_groups_34017),
                                  "group_res_arr_mem_34916")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_34918;
        
        num_threads_34918 = segred_num_groups_34017 * segred_group_sizze_34019;
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegRed");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                3, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34019,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                4, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34019,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                5, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34019,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                6, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34019,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                7, (int32_t) sizeof(bool),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                8, sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                9, sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                10, sizeof(sims_per_year_26449),
                                                &sims_per_year_26449));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                11, sizeof(flat_dim_26636),
                                                &flat_dim_26636));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                12, sizeof(res_mem_33488.mem),
                                                &res_mem_33488.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                13, sizeof(res_mem_33489.mem),
                                                &res_mem_33489.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                14, sizeof(mem_34145.mem),
                                                &mem_34145.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                15, sizeof(mem_34147.mem),
                                                &mem_34147.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                16, sizeof(mem_34173.mem),
                                                &mem_34173.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                17, sizeof(mem_34187.mem),
                                                &mem_34187.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                18, sizeof(mem_34201.mem),
                                                &mem_34201.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                19, sizeof(mem_34215.mem),
                                                &mem_34215.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                20, sizeof(mem_34229.mem),
                                                &mem_34229.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                21, sizeof(mem_34231.mem),
                                                &mem_34231.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                22, sizeof(mem_34233.mem),
                                                &mem_34233.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                23, sizeof(mem_34235.mem),
                                                &mem_34235.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                24,
                                                sizeof(mainzicounter_mem_34908.mem),
                                                &mainzicounter_mem_34908.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                25,
                                                sizeof(group_res_arr_mem_34910.mem),
                                                &group_res_arr_mem_34910.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                26,
                                                sizeof(group_res_arr_mem_34912.mem),
                                                &group_res_arr_mem_34912.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                27,
                                                sizeof(group_res_arr_mem_34914.mem),
                                                &group_res_arr_mem_34914.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                28,
                                                sizeof(group_res_arr_mem_34916.mem),
                                                &group_res_arr_mem_34916.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34026,
                                                29, sizeof(num_threads_34918),
                                                &num_threads_34918));
        if (1 * ((size_t) segred_num_groups_34017 *
                 (size_t) segred_group_sizze_34019) != 0) {
            const size_t global_work_sizze_35432[1] =
                         {(size_t) segred_num_groups_34017 *
                         (size_t) segred_group_sizze_34019};
            const size_t local_work_sizze_35436[1] = {segred_group_sizze_34019};
            int64_t time_start_35433 = 0, time_end_35434 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segred_nonseg_34026");
                fprintf(stderr, "%zu", global_work_sizze_35432[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35436[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34019 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34019 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34019 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34019 +
                               (int32_t) sizeof(bool)));
                time_start_35433 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegred_nonseg_34026,
                                                            1, NULL,
                                                            global_work_sizze_35432,
                                                            local_work_sizze_35436,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegred_nonseg_34026_runs,
                                                                                                      &ctx->mainzisegred_nonseg_34026_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35434 = get_wall_time();
                
                long time_diff_35435 = time_end_35434 - time_start_35433;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segred_nonseg_34026", time_diff_35435);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &mem_34145, "mem_34145") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34147, "mem_34147") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34173, "mem_34173") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34187, "mem_34187") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34201, "mem_34201") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34215, "mem_34215") != 0)
            return 1;
        
        int64_t read_res_35437;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34229.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35437, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34010 = read_res_35437;
        
        if (memblock_unref_device(ctx, &mem_34229, "mem_34229") != 0)
            return 1;
        
        int64_t read_res_35438;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34231.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35438, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34011 = read_res_35438;
        
        if (memblock_unref_device(ctx, &mem_34231, "mem_34231") != 0)
            return 1;
        
        int64_t read_res_35439;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34233.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35439, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34012 = read_res_35439;
        
        if (memblock_unref_device(ctx, &mem_34233, "mem_34233") != 0)
            return 1;
        
        int64_t read_res_35440;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34235.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35440, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34013 = read_res_35440;
        
        if (memblock_unref_device(ctx, &mem_34235, "mem_34235") != 0)
            return 1;
        
        int64_t sizze_sum_34137 = num_threads_33988 * max_per_thread_34010;
        int64_t sizze_sum_34138 = num_threads_33988 * max_per_thread_34011;
        int64_t sizze_sum_34139 = num_threads_33988 * max_per_thread_34012;
        int64_t sizze_sum_34140 = num_threads_33988 * max_per_thread_34013;
        struct memblock_device mem_33769;
        
        mem_33769.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33769, sizze_sum_34137,
                                  "mem_33769")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33795;
        
        mem_33795.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33795, sizze_sum_34138,
                                  "mem_33795")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33753;
        
        mem_33753.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33753, sizze_sum_34138,
                                  "mem_33753")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33739;
        
        mem_33739.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33739, sizze_sum_34138,
                                  "mem_33739")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33767;
        
        mem_33767.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33767, sizze_sum_34139,
                                  "mem_33767")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33809;
        
        mem_33809.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33809, sizze_sum_34140,
                                  "mem_33809")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 3,
                                                sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 4,
                                                sizeof(paths_26354),
                                                &paths_26354));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 5,
                                                sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 6,
                                                sizeof(a_26359), &a_26359));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 7,
                                                sizeof(b_26360), &b_26360));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 8,
                                                sizeof(sigma_26361),
                                                &sigma_26361));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 9,
                                                sizeof(sims_per_year_26449),
                                                &sims_per_year_26449));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 10,
                                                sizeof(flat_dim_26636),
                                                &flat_dim_26636));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 11,
                                                sizeof(res_26640), &res_26640));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 12,
                                                sizeof(segmap_usable_groups_29548),
                                                &segmap_usable_groups_29548));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 13,
                                                sizeof(res_mem_33486.mem),
                                                &res_mem_33486.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 14,
                                                sizeof(res_mem_33487.mem),
                                                &res_mem_33487.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 15,
                                                sizeof(res_mem_33488.mem),
                                                &res_mem_33488.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 16,
                                                sizeof(res_mem_33489.mem),
                                                &res_mem_33489.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 17,
                                                sizeof(res_mem_33685.mem),
                                                &res_mem_33685.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 18,
                                                sizeof(mem_33689.mem),
                                                &mem_33689.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 19,
                                                sizeof(mem_33701.mem),
                                                &mem_33701.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 20,
                                                sizeof(mem_33711.mem),
                                                &mem_33711.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 21,
                                                sizeof(mem_33713.mem),
                                                &mem_33713.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 22,
                                                sizeof(mem_33739.mem),
                                                &mem_33739.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 23,
                                                sizeof(mem_33753.mem),
                                                &mem_33753.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 24,
                                                sizeof(mem_33767.mem),
                                                &mem_33767.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 25,
                                                sizeof(mem_33769.mem),
                                                &mem_33769.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 26,
                                                sizeof(mem_33795.mem),
                                                &mem_33795.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 27,
                                                sizeof(mem_33809.mem),
                                                &mem_33809.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 28,
                                                sizeof(mem_33823.mem),
                                                &mem_33823.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29314, 29,
                                                sizeof(num_threads_33988),
                                                &num_threads_33988));
        if (1 * ((size_t) segmap_usable_groups_29548 *
                 (size_t) segmap_group_sizze_29547) != 0) {
            const size_t global_work_sizze_35441[1] =
                         {(size_t) segmap_usable_groups_29548 *
                         (size_t) segmap_group_sizze_29547};
            const size_t local_work_sizze_35445[1] = {segmap_group_sizze_29547};
            int64_t time_start_35442 = 0, time_end_35443 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segmap_29314");
                fprintf(stderr, "%zu", global_work_sizze_35441[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35445[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35442 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegmap_29314,
                                                            1, NULL,
                                                            global_work_sizze_35441,
                                                            local_work_sizze_35445,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegmap_29314_runs,
                                                                                                      &ctx->mainzisegmap_29314_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35443 = get_wall_time();
                
                long time_diff_35444 = time_end_35443 - time_start_35442;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segmap_29314", time_diff_35444);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &mem_33689, "mem_33689") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33701, "mem_33701") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33711, "mem_33711") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33713, "mem_33713") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33739, "mem_33739") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33753, "mem_33753") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33767, "mem_33767") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33769, "mem_33769") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33795, "mem_33795") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33809, "mem_33809") != 0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33954, &mem_33823, "mem_33823") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33809, "mem_33809") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33767, "mem_33767") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33739, "mem_33739") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33753, "mem_33753") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33795, "mem_33795") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33769, "mem_33769") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34916,
                                  "group_res_arr_mem_34916") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34914,
                                  "group_res_arr_mem_34914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34912,
                                  "group_res_arr_mem_34912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34910,
                                  "group_res_arr_mem_34910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34215, "mem_34215") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34187, "mem_34187") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34173, "mem_34173") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34201, "mem_34201") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34860,
                                  "group_res_arr_mem_34860") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34858,
                                  "group_res_arr_mem_34858") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34856,
                                  "group_res_arr_mem_34856") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34854,
                                  "group_res_arr_mem_34854") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34331, "mem_34331") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34351, "mem_34351") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34349, "mem_34349") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34347, "mem_34347") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34345, "mem_34345") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34147, "mem_34147") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34145, "mem_34145") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34235, "mem_34235") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34233, "mem_34233") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34231, "mem_34231") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34229, "mem_34229") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33713, "mem_33713") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33711, "mem_33711") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33701, "mem_33701") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33689, "mem_33689") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33823, "mem_33823") != 0)
            return 1;
    } else {
        struct memblock_device mem_33827;
        
        mem_33827.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33827, bytes_33825, "mem_33827")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33830;
        
        mem_33830.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33830, bytes_33825, "mem_33830")) {
            err = 1;
            goto cleanup;
        }
        if (slt64(0, steps_26355 * flat_dim_26636)) {
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegScan");
            
            int64_t stage1_max_num_groups_35000;
            
            stage1_max_num_groups_35000 = ctx->opencl.max_group_size;
            
            int64_t stage1_num_groups_35001;
            
            stage1_num_groups_35001 = smin64(stage1_max_num_groups_35000,
                                             num_groups_30245);
            
            int32_t num_threads_35002;
            
            num_threads_35002 = sext_i64_i32(stage1_num_groups_35001 *
                segscan_group_sizze_30244);
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    1, smax64(1,
                                                              (int32_t) sizeof(int64_t) *
                                                              segscan_group_sizze_30244),
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    2, sizeof(n_26351),
                                                    &n_26351));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    3, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    4,
                                                    sizeof(sims_per_year_26449),
                                                    &sims_per_year_26449));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    5, sizeof(flat_dim_26636),
                                                    &flat_dim_26636));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    6,
                                                    sizeof(res_mem_33488.mem),
                                                    &res_mem_33488.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    7,
                                                    sizeof(res_mem_33489.mem),
                                                    &res_mem_33489.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    8, sizeof(mem_33827.mem),
                                                    &mem_33827.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    9, sizeof(mem_33830.mem),
                                                    &mem_33830.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage1_30128,
                                                    10,
                                                    sizeof(num_threads_35002),
                                                    &num_threads_35002));
            if (1 * ((size_t) stage1_num_groups_35001 *
                     (size_t) segscan_group_sizze_30244) != 0) {
                const size_t global_work_sizze_35446[1] =
                             {(size_t) stage1_num_groups_35001 *
                             (size_t) segscan_group_sizze_30244};
                const size_t local_work_sizze_35450[1] =
                             {segscan_group_sizze_30244};
                int64_t time_start_35447 = 0, time_end_35448 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.scan_stage1_30128");
                    fprintf(stderr, "%zu", global_work_sizze_35446[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35450[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + smax64(1, (int32_t) sizeof(int64_t) *
                                              segscan_group_sizze_30244)));
                    time_start_35447 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainziscan_stage1_30128,
                                                                1, NULL,
                                                                global_work_sizze_35446,
                                                                local_work_sizze_35450,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainziscan_stage1_30128_runs,
                                                                                                          &ctx->mainziscan_stage1_30128_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35448 = get_wall_time();
                    
                    long time_diff_35449 = time_end_35448 - time_start_35447;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.scan_stage1_30128", time_diff_35449);
                }
            }
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "elems_per_group",
                        (long long) (segscan_group_sizze_30244 *
                                     sdiv_up64(steps_26355 * flat_dim_26636,
                                               sext_i32_i64(num_threads_35002))),
                        '\n');
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage2_30128,
                                                    1, smax64(1,
                                                              (int32_t) sizeof(int64_t) *
                                                              stage1_num_groups_35001),
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage2_30128,
                                                    2, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage2_30128,
                                                    3, sizeof(flat_dim_26636),
                                                    &flat_dim_26636));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage2_30128,
                                                    4, sizeof(mem_33827.mem),
                                                    &mem_33827.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage2_30128,
                                                    5,
                                                    sizeof(stage1_num_groups_35001),
                                                    &stage1_num_groups_35001));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage2_30128,
                                                    6,
                                                    sizeof(num_threads_35002),
                                                    &num_threads_35002));
            if (1 * ((size_t) 1 * (size_t) stage1_num_groups_35001) != 0) {
                const size_t global_work_sizze_35451[1] = {(size_t) 1 *
                             (size_t) stage1_num_groups_35001};
                const size_t local_work_sizze_35455[1] =
                             {stage1_num_groups_35001};
                int64_t time_start_35452 = 0, time_end_35453 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.scan_stage2_30128");
                    fprintf(stderr, "%zu", global_work_sizze_35451[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35455[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + smax64(1, (int32_t) sizeof(int64_t) *
                                              stage1_num_groups_35001)));
                    time_start_35452 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainziscan_stage2_30128,
                                                                1, NULL,
                                                                global_work_sizze_35451,
                                                                local_work_sizze_35455,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainziscan_stage2_30128_runs,
                                                                                                          &ctx->mainziscan_stage2_30128_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35453 = get_wall_time();
                    
                    long time_diff_35454 = time_end_35453 - time_start_35452;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.scan_stage2_30128", time_diff_35454);
                }
            }
            
            int32_t required_groups_35044;
            
            required_groups_35044 = sext_i64_i32(sdiv_up64(steps_26355 *
                                                           flat_dim_26636,
                                                           segscan_group_sizze_30244));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage3_30128,
                                                    1, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage3_30128,
                                                    2, sizeof(flat_dim_26636),
                                                    &flat_dim_26636));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage3_30128,
                                                    3, sizeof(num_groups_30245),
                                                    &num_groups_30245));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage3_30128,
                                                    4, sizeof(mem_33827.mem),
                                                    &mem_33827.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage3_30128,
                                                    5,
                                                    sizeof(num_threads_35002),
                                                    &num_threads_35002));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainziscan_stage3_30128,
                                                    6,
                                                    sizeof(required_groups_35044),
                                                    &required_groups_35044));
            if (1 * ((size_t) num_groups_30245 *
                     (size_t) segscan_group_sizze_30244) != 0) {
                const size_t global_work_sizze_35456[1] =
                             {(size_t) num_groups_30245 *
                             (size_t) segscan_group_sizze_30244};
                const size_t local_work_sizze_35460[1] =
                             {segscan_group_sizze_30244};
                int64_t time_start_35457 = 0, time_end_35458 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.scan_stage3_30128");
                    fprintf(stderr, "%zu", global_work_sizze_35456[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35460[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35457 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainziscan_stage3_30128,
                                                                1, NULL,
                                                                global_work_sizze_35456,
                                                                local_work_sizze_35460,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainziscan_stage3_30128_runs,
                                                                                                          &ctx->mainziscan_stage3_30128_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35458 = get_wall_time();
                    
                    long time_diff_35459 = time_end_35458 - time_start_35457;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.scan_stage3_30128", time_diff_35459);
                }
            }
        }
        
        struct memblock_device mem_33833;
        
        mem_33833.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33833, bytes_33832, "mem_33833")) {
            err = 1;
            goto cleanup;
        }
        if (slt64(flat_dim_26636 * 2, segred_group_sizze_30266)) {
            int64_t segment_sizze_nonzzero_35056 = smax64(1, flat_dim_26636);
            int64_t num_threads_35057 = num_groups_30267 *
                    segred_group_sizze_30266;
            
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegRed-small");
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "num_segments",
                        (long long) steps_26355, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "segment_size",
                        (long long) flat_dim_26636, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "segments_per_group",
                        (long long) squot64(segred_group_sizze_30266,
                                            segment_sizze_nonzzero_35056),
                        '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "required_groups",
                        (long long) sext_i64_i32(sdiv_up64(steps_26355,
                                                           squot64(segred_group_sizze_30266,
                                                                   segment_sizze_nonzzero_35056))),
                        '\n');
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    1,
                                                    (int32_t) sizeof(int64_t) *
                                                    segred_group_sizze_30266,
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    2, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    3, sizeof(flat_dim_26636),
                                                    &flat_dim_26636));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    4, sizeof(num_groups_30267),
                                                    &num_groups_30267));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    5, sizeof(mem_33830.mem),
                                                    &mem_33830.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    6, sizeof(mem_33833.mem),
                                                    &mem_33833.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_30112,
                                                    7,
                                                    sizeof(segment_sizze_nonzzero_35056),
                                                    &segment_sizze_nonzzero_35056));
            if (1 * ((size_t) num_groups_30267 *
                     (size_t) segred_group_sizze_30266) != 0) {
                const size_t global_work_sizze_35461[1] =
                             {(size_t) num_groups_30267 *
                             (size_t) segred_group_sizze_30266};
                const size_t local_work_sizze_35465[1] =
                             {segred_group_sizze_30266};
                int64_t time_start_35462 = 0, time_end_35463 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segred_small_30112");
                    fprintf(stderr, "%zu", global_work_sizze_35461[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35465[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + (int32_t) sizeof(int64_t) *
                                   segred_group_sizze_30266));
                    time_start_35462 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegred_small_30112,
                                                                1, NULL,
                                                                global_work_sizze_35461,
                                                                local_work_sizze_35465,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegred_small_30112_runs,
                                                                                                          &ctx->mainzisegred_small_30112_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35463 = get_wall_time();
                    
                    long time_diff_35464 = time_end_35463 - time_start_35462;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segred_small_30112", time_diff_35464);
                }
            }
        } else {
            int64_t groups_per_segment_35077 = sdiv_up64(num_groups_30267,
                                                         smax64(1,
                                                                steps_26355));
            int64_t elements_per_thread_35078 = sdiv_up64(flat_dim_26636,
                                                          segred_group_sizze_30266 *
                                                          groups_per_segment_35077);
            int64_t virt_num_groups_35079 = groups_per_segment_35077 *
                    steps_26355;
            int64_t num_threads_35080 = num_groups_30267 *
                    segred_group_sizze_30266;
            int64_t threads_per_segment_35081 = groups_per_segment_35077 *
                    segred_group_sizze_30266;
            
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegRed-large");
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "num_segments",
                        (long long) steps_26355, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "segment_size",
                        (long long) flat_dim_26636, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "virt_num_groups",
                        (long long) virt_num_groups_35079, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "num_groups",
                        (long long) num_groups_30267, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "group_size",
                        (long long) segred_group_sizze_30266, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "elems_per_thread",
                        (long long) elements_per_thread_35078, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "groups_per_segment",
                        (long long) groups_per_segment_35077, '\n');
            
            struct memblock_device group_res_arr_mem_35082;
            
            group_res_arr_mem_35082.references = NULL;
            if (memblock_alloc_device(ctx, &group_res_arr_mem_35082,
                                      (int32_t) sizeof(int64_t) *
                                      (segred_group_sizze_30266 *
                                       virt_num_groups_35079),
                                      "group_res_arr_mem_35082")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mainzicounter_mem_35084 =
                                   ctx->mainzicounter_mem_35084;
            
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    1, (int32_t) sizeof(bool),
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    2,
                                                    (int32_t) sizeof(int64_t) *
                                                    segred_group_sizze_30266,
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    3, sizeof(flat_dim_26636),
                                                    &flat_dim_26636));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    4, sizeof(num_groups_30267),
                                                    &num_groups_30267));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    5, sizeof(mem_33830.mem),
                                                    &mem_33830.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    6, sizeof(mem_33833.mem),
                                                    &mem_33833.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    7,
                                                    sizeof(groups_per_segment_35077),
                                                    &groups_per_segment_35077));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    8,
                                                    sizeof(elements_per_thread_35078),
                                                    &elements_per_thread_35078));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    9,
                                                    sizeof(virt_num_groups_35079),
                                                    &virt_num_groups_35079));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    10,
                                                    sizeof(threads_per_segment_35081),
                                                    &threads_per_segment_35081));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    11,
                                                    sizeof(group_res_arr_mem_35082.mem),
                                                    &group_res_arr_mem_35082.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_30112,
                                                    12,
                                                    sizeof(mainzicounter_mem_35084.mem),
                                                    &mainzicounter_mem_35084.mem));
            if (1 * ((size_t) num_groups_30267 *
                     (size_t) segred_group_sizze_30266) != 0) {
                const size_t global_work_sizze_35467[1] =
                             {(size_t) num_groups_30267 *
                             (size_t) segred_group_sizze_30266};
                const size_t local_work_sizze_35471[1] =
                             {segred_group_sizze_30266};
                int64_t time_start_35468 = 0, time_end_35469 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segred_large_30112");
                    fprintf(stderr, "%zu", global_work_sizze_35467[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35471[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + (int32_t) sizeof(bool) +
                                   (int32_t) sizeof(int64_t) *
                                   segred_group_sizze_30266));
                    time_start_35468 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegred_large_30112,
                                                                1, NULL,
                                                                global_work_sizze_35467,
                                                                local_work_sizze_35471,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegred_large_30112_runs,
                                                                                                          &ctx->mainzisegred_large_30112_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35469 = get_wall_time();
                    
                    long time_diff_35470 = time_end_35469 - time_start_35468;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segred_large_30112", time_diff_35470);
                }
            }
            if (memblock_unref_device(ctx, &group_res_arr_mem_35082,
                                      "group_res_arr_mem_35082") != 0)
                return 1;
        }
        if (memblock_unref_device(ctx, &mem_33830, "mem_33830") != 0)
            return 1;
        
        struct memblock_device mem_33836;
        
        mem_33836.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33836, bytes_33825, "mem_33836")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t group_sizze_35119;
        
        group_sizze_35119 = ctx->sizes.mainzigroup_sizze_35119;
        
        int64_t num_groups_35120;
        
        num_groups_35120 = sdiv_up64(steps_26355 * flat_dim_26636,
                                     group_sizze_35119);
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzicopy_35116, 0,
                                                sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzicopy_35116, 1,
                                                sizeof(flat_dim_26636),
                                                &flat_dim_26636));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzicopy_35116, 2,
                                                sizeof(mem_33827.mem),
                                                &mem_33827.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzicopy_35116, 3,
                                                sizeof(mem_33836.mem),
                                                &mem_33836.mem));
        if (1 * ((size_t) num_groups_35120 * (size_t) group_sizze_35119) != 0) {
            const size_t global_work_sizze_35472[1] =
                         {(size_t) num_groups_35120 *
                         (size_t) group_sizze_35119};
            const size_t local_work_sizze_35476[1] = {group_sizze_35119};
            int64_t time_start_35473 = 0, time_end_35474 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.copy_35116");
                fprintf(stderr, "%zu", global_work_sizze_35472[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35476[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35473 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzicopy_35116,
                                                            1, NULL,
                                                            global_work_sizze_35472,
                                                            local_work_sizze_35476,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzicopy_35116_runs,
                                                                                                      &ctx->mainzicopy_35116_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35474 = get_wall_time();
                
                long time_diff_35475 = time_end_35474 - time_start_35473;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "main.copy_35116",
                        time_diff_35475);
            }
        }
        if (memblock_unref_device(ctx, &mem_33827, "mem_33827") != 0)
            return 1;
        
        struct memblock_device mem_33939;
        
        mem_33939.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33939, bytes_33936, "mem_33939")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34533;
        
        mem_34533.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34533, 8, "mem_34533")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34535;
        
        mem_34535.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34535, 8, "mem_34535")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34537;
        
        mem_34537.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34537, 8, "mem_34537")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34539;
        
        mem_34539.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34539, 8, "mem_34539")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34608;
        
        mem_34608.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34608, 8, "mem_34608")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34610;
        
        mem_34610.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34610, 8, "mem_34610")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34612;
        
        mem_34612.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34612, 8, "mem_34612")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34614;
        
        mem_34614.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34614, 8, "mem_34614")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mainzicounter_mem_35121 =
                               ctx->mainzicounter_mem_35121;
        struct memblock_device group_res_arr_mem_35123;
        
        group_res_arr_mem_35123.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35123,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34572 *
                                   segred_num_groups_34570),
                                  "group_res_arr_mem_35123")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_35125;
        
        group_res_arr_mem_35125.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35125,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34572 *
                                   segred_num_groups_34570),
                                  "group_res_arr_mem_35125")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_35127;
        
        group_res_arr_mem_35127.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35127,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34572 *
                                   segred_num_groups_34570),
                                  "group_res_arr_mem_35127")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_35129;
        
        group_res_arr_mem_35129.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35129,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34572 *
                                   segred_num_groups_34570),
                                  "group_res_arr_mem_35129")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_35131;
        
        num_threads_35131 = segred_num_groups_34570 * segred_group_sizze_34572;
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegRed");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                1, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34572,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                2, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34572,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                3, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34572,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                4, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34572,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                5, (int32_t) sizeof(bool),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                6, sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                7, sizeof(mem_33833.mem),
                                                &mem_33833.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                8, sizeof(mem_34608.mem),
                                                &mem_34608.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                9, sizeof(mem_34610.mem),
                                                &mem_34610.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                10, sizeof(mem_34612.mem),
                                                &mem_34612.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                11, sizeof(mem_34614.mem),
                                                &mem_34614.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                12,
                                                sizeof(mainzicounter_mem_35121.mem),
                                                &mainzicounter_mem_35121.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                13,
                                                sizeof(group_res_arr_mem_35123.mem),
                                                &group_res_arr_mem_35123.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                14,
                                                sizeof(group_res_arr_mem_35125.mem),
                                                &group_res_arr_mem_35125.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                15,
                                                sizeof(group_res_arr_mem_35127.mem),
                                                &group_res_arr_mem_35127.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                16,
                                                sizeof(group_res_arr_mem_35129.mem),
                                                &group_res_arr_mem_35129.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34579,
                                                17, sizeof(num_threads_35131),
                                                &num_threads_35131));
        if (1 * ((size_t) segred_num_groups_34570 *
                 (size_t) segred_group_sizze_34572) != 0) {
            const size_t global_work_sizze_35478[1] =
                         {(size_t) segred_num_groups_34570 *
                         (size_t) segred_group_sizze_34572};
            const size_t local_work_sizze_35482[1] = {segred_group_sizze_34572};
            int64_t time_start_35479 = 0, time_end_35480 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segred_nonseg_34579");
                fprintf(stderr, "%zu", global_work_sizze_35478[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35482[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34572 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34572 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34572 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34572 +
                               (int32_t) sizeof(bool)));
                time_start_35479 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegred_nonseg_34579,
                                                            1, NULL,
                                                            global_work_sizze_35478,
                                                            local_work_sizze_35482,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegred_nonseg_34579_runs,
                                                                                                      &ctx->mainzisegred_nonseg_34579_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35480 = get_wall_time();
                
                long time_diff_35481 = time_end_35480 - time_start_35479;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segred_nonseg_34579", time_diff_35481);
            }
        }
        
        int64_t read_res_35483;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34608.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35483, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34562 = read_res_35483;
        
        if (memblock_unref_device(ctx, &mem_34608, "mem_34608") != 0)
            return 1;
        
        int64_t read_res_35484;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34610.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35484, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34563 = read_res_35484;
        
        if (memblock_unref_device(ctx, &mem_34610, "mem_34610") != 0)
            return 1;
        
        int64_t read_res_35485;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34612.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35485, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34564 = read_res_35485;
        
        if (memblock_unref_device(ctx, &mem_34612, "mem_34612") != 0)
            return 1;
        
        int64_t read_res_35486;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34614.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35486, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34565 = read_res_35486;
        
        if (memblock_unref_device(ctx, &mem_34614, "mem_34614") != 0)
            return 1;
        
        int64_t sizze_sum_34600 = num_threads_34542 * max_per_thread_34562;
        int64_t sizze_sum_34601 = num_threads_34542 * max_per_thread_34563;
        int64_t sizze_sum_34602 = num_threads_34542 * max_per_thread_34564;
        int64_t sizze_sum_34603 = num_threads_34542 * max_per_thread_34565;
        struct memblock_device mem_34505;
        
        mem_34505.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34505, sizze_sum_34600,
                                  "mem_34505")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34477;
        
        mem_34477.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34477, sizze_sum_34601,
                                  "mem_34477")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34491;
        
        mem_34491.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34491, sizze_sum_34602,
                                  "mem_34491")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_34519;
        
        mem_34519.references = NULL;
        if (memblock_alloc_device(ctx, &mem_34519, sizze_sum_34603,
                                  "mem_34519")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mainzicounter_mem_35175 =
                               ctx->mainzicounter_mem_35175;
        struct memblock_device group_res_arr_mem_35177;
        
        group_res_arr_mem_35177.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35177,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34385 *
                                   segred_num_groups_34383),
                                  "group_res_arr_mem_35177")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_35179;
        
        group_res_arr_mem_35179.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35179,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34385 *
                                   segred_num_groups_34383),
                                  "group_res_arr_mem_35179")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_35181;
        
        group_res_arr_mem_35181.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35181,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34385 *
                                   segred_num_groups_34383),
                                  "group_res_arr_mem_35181")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device group_res_arr_mem_35183;
        
        group_res_arr_mem_35183.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35183,
                                  (int32_t) sizeof(int64_t) *
                                  (segred_group_sizze_34385 *
                                   segred_num_groups_34383),
                                  "group_res_arr_mem_35183")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_35185;
        
        num_threads_35185 = segred_num_groups_34383 * segred_group_sizze_34385;
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegRed");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                3, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34385,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                4, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34385,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                5, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34385,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                6, (int32_t) sizeof(int64_t) *
                                                segred_group_sizze_34385,
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                7, (int32_t) sizeof(bool),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                8, sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                9, sizeof(flat_dim_26636),
                                                &flat_dim_26636));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                10, sizeof(mem_33833.mem),
                                                &mem_33833.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                11, sizeof(mem_33836.mem),
                                                &mem_33836.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                12, sizeof(mem_34477.mem),
                                                &mem_34477.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                13, sizeof(mem_34491.mem),
                                                &mem_34491.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                14, sizeof(mem_34505.mem),
                                                &mem_34505.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                15, sizeof(mem_34519.mem),
                                                &mem_34519.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                16, sizeof(mem_34533.mem),
                                                &mem_34533.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                17, sizeof(mem_34535.mem),
                                                &mem_34535.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                18, sizeof(mem_34537.mem),
                                                &mem_34537.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                19, sizeof(mem_34539.mem),
                                                &mem_34539.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                20,
                                                sizeof(mainzicounter_mem_35175.mem),
                                                &mainzicounter_mem_35175.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                21,
                                                sizeof(group_res_arr_mem_35177.mem),
                                                &group_res_arr_mem_35177.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                22,
                                                sizeof(group_res_arr_mem_35179.mem),
                                                &group_res_arr_mem_35179.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                23,
                                                sizeof(group_res_arr_mem_35181.mem),
                                                &group_res_arr_mem_35181.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                24,
                                                sizeof(group_res_arr_mem_35183.mem),
                                                &group_res_arr_mem_35183.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_nonseg_34392,
                                                25, sizeof(num_threads_35185),
                                                &num_threads_35185));
        if (1 * ((size_t) segred_num_groups_34383 *
                 (size_t) segred_group_sizze_34385) != 0) {
            const size_t global_work_sizze_35488[1] =
                         {(size_t) segred_num_groups_34383 *
                         (size_t) segred_group_sizze_34385};
            const size_t local_work_sizze_35492[1] = {segred_group_sizze_34385};
            int64_t time_start_35489 = 0, time_end_35490 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segred_nonseg_34392");
                fprintf(stderr, "%zu", global_work_sizze_35488[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35492[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34385 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34385 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34385 +
                               (int32_t) sizeof(int64_t) *
                               segred_group_sizze_34385 +
                               (int32_t) sizeof(bool)));
                time_start_35489 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegred_nonseg_34392,
                                                            1, NULL,
                                                            global_work_sizze_35488,
                                                            local_work_sizze_35492,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegred_nonseg_34392_runs,
                                                                                                      &ctx->mainzisegred_nonseg_34392_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35490 = get_wall_time();
                
                long time_diff_35491 = time_end_35490 - time_start_35489;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segred_nonseg_34392", time_diff_35491);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &mem_34477, "mem_34477") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34491, "mem_34491") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34505, "mem_34505") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34519, "mem_34519") != 0)
            return 1;
        
        int64_t read_res_35493;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34533.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35493, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34376 = read_res_35493;
        
        if (memblock_unref_device(ctx, &mem_34533, "mem_34533") != 0)
            return 1;
        
        int64_t read_res_35494;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34535.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35494, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34377 = read_res_35494;
        
        if (memblock_unref_device(ctx, &mem_34535, "mem_34535") != 0)
            return 1;
        
        int64_t read_res_35495;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34537.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35495, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34378 = read_res_35495;
        
        if (memblock_unref_device(ctx, &mem_34537, "mem_34537") != 0)
            return 1;
        
        int64_t read_res_35496;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_34539.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int64_t),
                                                     sizeof(int64_t),
                                                     &read_res_35496, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t max_per_thread_34379 = read_res_35496;
        
        if (memblock_unref_device(ctx, &mem_34539, "mem_34539") != 0)
            return 1;
        
        int64_t sizze_sum_34469 = num_threads_34358 * max_per_thread_34376;
        int64_t sizze_sum_34470 = num_threads_34358 * max_per_thread_34377;
        int64_t sizze_sum_34471 = num_threads_34358 * max_per_thread_34378;
        int64_t sizze_sum_34472 = num_threads_34358 * max_per_thread_34379;
        struct memblock_device mem_33869;
        
        mem_33869.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33869, sizze_sum_34469,
                                  "mem_33869")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33909;
        
        mem_33909.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33909, sizze_sum_34470,
                                  "mem_33909")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33867;
        
        mem_33867.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33867, sizze_sum_34470,
                                  "mem_33867")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33853;
        
        mem_33853.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33853, sizze_sum_34470,
                                  "mem_33853")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33839;
        
        mem_33839.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33839, sizze_sum_34470,
                                  "mem_33839")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33895;
        
        mem_33895.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33895, sizze_sum_34471,
                                  "mem_33895")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33923;
        
        mem_33923.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33923, sizze_sum_34472,
                                  "mem_33923")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 3,
                                                sizeof(n_26351), &n_26351));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 4,
                                                sizeof(paths_26354),
                                                &paths_26354));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 5,
                                                sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 6,
                                                sizeof(a_26359), &a_26359));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 7,
                                                sizeof(b_26360), &b_26360));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 8,
                                                sizeof(sigma_26361),
                                                &sigma_26361));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 9,
                                                sizeof(sims_per_year_26449),
                                                &sims_per_year_26449));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 10,
                                                sizeof(flat_dim_26636),
                                                &flat_dim_26636));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 11,
                                                sizeof(num_groups_30277),
                                                &num_groups_30277));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 12,
                                                sizeof(res_mem_33486.mem),
                                                &res_mem_33486.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 13,
                                                sizeof(res_mem_33487.mem),
                                                &res_mem_33487.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 14,
                                                sizeof(res_mem_33488.mem),
                                                &res_mem_33488.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 15,
                                                sizeof(res_mem_33489.mem),
                                                &res_mem_33489.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 16,
                                                sizeof(res_mem_33685.mem),
                                                &res_mem_33685.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 17,
                                                sizeof(mem_33833.mem),
                                                &mem_33833.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 18,
                                                sizeof(mem_33836.mem),
                                                &mem_33836.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 19,
                                                sizeof(mem_33839.mem),
                                                &mem_33839.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 20,
                                                sizeof(mem_33853.mem),
                                                &mem_33853.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 21,
                                                sizeof(mem_33867.mem),
                                                &mem_33867.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 22,
                                                sizeof(mem_33869.mem),
                                                &mem_33869.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 23,
                                                sizeof(mem_33895.mem),
                                                &mem_33895.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 24,
                                                sizeof(mem_33909.mem),
                                                &mem_33909.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 25,
                                                sizeof(mem_33923.mem),
                                                &mem_33923.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 26,
                                                sizeof(mem_33939.mem),
                                                &mem_33939.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29899, 27,
                                                sizeof(num_threads_34358),
                                                &num_threads_34358));
        if (1 * ((size_t) num_groups_30277 *
                 (size_t) segmap_group_sizze_30276) != 0) {
            const size_t global_work_sizze_35497[1] =
                         {(size_t) num_groups_30277 *
                         (size_t) segmap_group_sizze_30276};
            const size_t local_work_sizze_35501[1] = {segmap_group_sizze_30276};
            int64_t time_start_35498 = 0, time_end_35499 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segmap_29899");
                fprintf(stderr, "%zu", global_work_sizze_35497[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35501[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35498 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegmap_29899,
                                                            1, NULL,
                                                            global_work_sizze_35497,
                                                            local_work_sizze_35501,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegmap_29899_runs,
                                                                                                      &ctx->mainzisegmap_29899_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35499 = get_wall_time();
                
                long time_diff_35500 = time_end_35499 - time_start_35498;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segmap_29899", time_diff_35500);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &mem_33833, "mem_33833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33836, "mem_33836") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33839, "mem_33839") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33853, "mem_33853") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33867, "mem_33867") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33869, "mem_33869") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33895, "mem_33895") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33909, "mem_33909") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33923, "mem_33923") != 0)
            return 1;
        
        struct memblock_device mem_33943;
        
        mem_33943.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33943, bytes_33940, "mem_33943")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33943, 0, mem_33939,
                                                  0, 1, steps_26355,
                                                  paths_26354 * n_26351) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_33939, "mem_33939") != 0)
            return 1;
        
        struct memblock_device mem_33947;
        
        mem_33947.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33947, bytes_33944, "mem_33947")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33947, 0, mem_33943,
                                                  0, 1, n_26351, steps_26355 *
                                                  paths_26354) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_33943, "mem_33943") != 0)
            return 1;
        
        struct memblock_device mem_33950;
        
        mem_33950.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33950, bytes_33491, "mem_33950")) {
            err = 1;
            goto cleanup;
        }
        if (slt64(paths_26354 * 2, segred_group_sizze_30478)) {
            int64_t segment_sizze_nonzzero_35260 = smax64(1, paths_26354);
            int64_t num_threads_35261 = num_groups_30479 *
                    segred_group_sizze_30478;
            
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegRed-small");
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "num_segments",
                        (long long) steps_26355, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "segment_size",
                        (long long) paths_26354, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "segments_per_group",
                        (long long) squot64(segred_group_sizze_30478,
                                            segment_sizze_nonzzero_35260),
                        '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "required_groups",
                        (long long) sext_i64_i32(sdiv_up64(steps_26355,
                                                           squot64(segred_group_sizze_30478,
                                                                   segment_sizze_nonzzero_35260))),
                        '\n');
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    1, (int32_t) sizeof(float) *
                                                    segred_group_sizze_30478,
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    2, sizeof(n_26351),
                                                    &n_26351));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    3, sizeof(paths_26354),
                                                    &paths_26354));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    4, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    5, sizeof(num_groups_30479),
                                                    &num_groups_30479));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    6, sizeof(mem_33947.mem),
                                                    &mem_33947.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    7, sizeof(mem_33950.mem),
                                                    &mem_33950.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_small_29796,
                                                    8,
                                                    sizeof(segment_sizze_nonzzero_35260),
                                                    &segment_sizze_nonzzero_35260));
            if (1 * ((size_t) num_groups_30479 *
                     (size_t) segred_group_sizze_30478) != 0) {
                const size_t global_work_sizze_35502[1] =
                             {(size_t) num_groups_30479 *
                             (size_t) segred_group_sizze_30478};
                const size_t local_work_sizze_35506[1] =
                             {segred_group_sizze_30478};
                int64_t time_start_35503 = 0, time_end_35504 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segred_small_29796");
                    fprintf(stderr, "%zu", global_work_sizze_35502[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35506[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + (int32_t) sizeof(float) *
                                   segred_group_sizze_30478));
                    time_start_35503 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegred_small_29796,
                                                                1, NULL,
                                                                global_work_sizze_35502,
                                                                local_work_sizze_35506,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegred_small_29796_runs,
                                                                                                          &ctx->mainzisegred_small_29796_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35504 = get_wall_time();
                    
                    long time_diff_35505 = time_end_35504 - time_start_35503;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segred_small_29796", time_diff_35505);
                }
            }
        } else {
            int64_t groups_per_segment_35282 = sdiv_up64(num_groups_30479,
                                                         smax64(1,
                                                                steps_26355));
            int64_t elements_per_thread_35283 = sdiv_up64(paths_26354,
                                                          segred_group_sizze_30478 *
                                                          groups_per_segment_35282);
            int64_t virt_num_groups_35284 = groups_per_segment_35282 *
                    steps_26355;
            int64_t num_threads_35285 = num_groups_30479 *
                    segred_group_sizze_30478;
            int64_t threads_per_segment_35286 = groups_per_segment_35282 *
                    segred_group_sizze_30478;
            
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegRed-large");
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "num_segments",
                        (long long) steps_26355, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "segment_size",
                        (long long) paths_26354, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "virt_num_groups",
                        (long long) virt_num_groups_35284, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "num_groups",
                        (long long) num_groups_30479, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "group_size",
                        (long long) segred_group_sizze_30478, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "elems_per_thread",
                        (long long) elements_per_thread_35283, '\n');
            if (ctx->debugging)
                fprintf(stderr, "%s: %llu%c", "groups_per_segment",
                        (long long) groups_per_segment_35282, '\n');
            
            struct memblock_device group_res_arr_mem_35287;
            
            group_res_arr_mem_35287.references = NULL;
            if (memblock_alloc_device(ctx, &group_res_arr_mem_35287,
                                      (int32_t) sizeof(float) *
                                      (segred_group_sizze_30478 *
                                       virt_num_groups_35284),
                                      "group_res_arr_mem_35287")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mainzicounter_mem_35289 =
                                   ctx->mainzicounter_mem_35289;
            
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    1, (int32_t) sizeof(bool),
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    2, (int32_t) sizeof(float) *
                                                    segred_group_sizze_30478,
                                                    NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    3, sizeof(n_26351),
                                                    &n_26351));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    4, sizeof(paths_26354),
                                                    &paths_26354));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    5, sizeof(steps_26355),
                                                    &steps_26355));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    6, sizeof(num_groups_30479),
                                                    &num_groups_30479));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    7, sizeof(mem_33947.mem),
                                                    &mem_33947.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    8, sizeof(mem_33950.mem),
                                                    &mem_33950.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    9,
                                                    sizeof(groups_per_segment_35282),
                                                    &groups_per_segment_35282));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    10,
                                                    sizeof(elements_per_thread_35283),
                                                    &elements_per_thread_35283));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    11,
                                                    sizeof(virt_num_groups_35284),
                                                    &virt_num_groups_35284));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    12,
                                                    sizeof(threads_per_segment_35286),
                                                    &threads_per_segment_35286));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    13,
                                                    sizeof(group_res_arr_mem_35287.mem),
                                                    &group_res_arr_mem_35287.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegred_large_29796,
                                                    14,
                                                    sizeof(mainzicounter_mem_35289.mem),
                                                    &mainzicounter_mem_35289.mem));
            if (1 * ((size_t) num_groups_30479 *
                     (size_t) segred_group_sizze_30478) != 0) {
                const size_t global_work_sizze_35508[1] =
                             {(size_t) num_groups_30479 *
                             (size_t) segred_group_sizze_30478};
                const size_t local_work_sizze_35512[1] =
                             {segred_group_sizze_30478};
                int64_t time_start_35509 = 0, time_end_35510 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "main.segred_large_29796");
                    fprintf(stderr, "%zu", global_work_sizze_35508[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35512[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + (int32_t) sizeof(bool) +
                                   (int32_t) sizeof(float) *
                                   segred_group_sizze_30478));
                    time_start_35509 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->mainzisegred_large_29796,
                                                                1, NULL,
                                                                global_work_sizze_35508,
                                                                local_work_sizze_35512,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->mainzisegred_large_29796_runs,
                                                                                                          &ctx->mainzisegred_large_29796_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35510 = get_wall_time();
                    
                    long time_diff_35511 = time_end_35510 - time_start_35509;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "main.segred_large_29796", time_diff_35511);
                }
            }
            if (memblock_unref_device(ctx, &group_res_arr_mem_35287,
                                      "group_res_arr_mem_35287") != 0)
                return 1;
        }
        if (memblock_unref_device(ctx, &mem_33947, "mem_33947") != 0)
            return 1;
        
        int64_t segmap_usable_groups_30495 = sdiv_up64(steps_26355,
                                                       segmap_group_sizze_30494);
        struct memblock_device mem_33953;
        
        mem_33953.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33953, bytes_33491, "mem_33953")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29779, 1,
                                                sizeof(steps_26355),
                                                &steps_26355));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29779, 2,
                                                sizeof(res_26640), &res_26640));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29779, 3,
                                                sizeof(mem_33950.mem),
                                                &mem_33950.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->mainzisegmap_29779, 4,
                                                sizeof(mem_33953.mem),
                                                &mem_33953.mem));
        if (1 * ((size_t) segmap_usable_groups_30495 *
                 (size_t) segmap_group_sizze_30494) != 0) {
            const size_t global_work_sizze_35513[1] =
                         {(size_t) segmap_usable_groups_30495 *
                         (size_t) segmap_group_sizze_30494};
            const size_t local_work_sizze_35517[1] = {segmap_group_sizze_30494};
            int64_t time_start_35514 = 0, time_end_35515 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "main.segmap_29779");
                fprintf(stderr, "%zu", global_work_sizze_35513[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35517[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35514 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->mainzisegmap_29779,
                                                            1, NULL,
                                                            global_work_sizze_35513,
                                                            local_work_sizze_35517,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->mainzisegmap_29779_runs,
                                                                                                      &ctx->mainzisegmap_29779_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35515 = get_wall_time();
                
                long time_diff_35516 = time_end_35515 - time_start_35514;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "main.segmap_29779", time_diff_35516);
            }
        }
        if (memblock_unref_device(ctx, &mem_33950, "mem_33950") != 0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33954, &mem_33953, "mem_33953") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33953, "mem_33953") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33950, "mem_33950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33947, "mem_33947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33943, "mem_33943") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33923, "mem_33923") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33895, "mem_33895") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33839, "mem_33839") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33853, "mem_33853") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33867, "mem_33867") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33909, "mem_33909") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33869, "mem_33869") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35183,
                                  "group_res_arr_mem_35183") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35181,
                                  "group_res_arr_mem_35181") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35179,
                                  "group_res_arr_mem_35179") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35177,
                                  "group_res_arr_mem_35177") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34519, "mem_34519") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34491, "mem_34491") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34477, "mem_34477") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34505, "mem_34505") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35129,
                                  "group_res_arr_mem_35129") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35127,
                                  "group_res_arr_mem_35127") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35125,
                                  "group_res_arr_mem_35125") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35123,
                                  "group_res_arr_mem_35123") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34614, "mem_34614") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34612, "mem_34612") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34610, "mem_34610") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34608, "mem_34608") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34539, "mem_34539") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34537, "mem_34537") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34535, "mem_34535") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_34533, "mem_34533") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33939, "mem_33939") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33836, "mem_33836") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33833, "mem_33833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33830, "mem_33830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33827, "mem_33827") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &res_mem_33486, "res_mem_33486") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33487, "res_mem_33487") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33488, "res_mem_33488") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33685, "res_mem_33685") != 0)
        return 1;
    out_arrsizze_34637 = paths_26354;
    out_arrsizze_34638 = steps_26355;
    out_arrsizze_34640 = steps_26355;
    if (memblock_set_device(ctx, &out_mem_34636, &res_mem_33684,
                            "res_mem_33684") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_34639, &res_mem_33954,
                            "res_mem_33954") != 0)
        return 1;
    (*out_mem_p_35348).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_35348, &out_mem_34636,
                            "out_mem_34636") != 0)
        return 1;
    *out_out_arrsizze_35349 = out_arrsizze_34637;
    *out_out_arrsizze_35350 = out_arrsizze_34638;
    (*out_mem_p_35351).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_35351, &out_mem_34639,
                            "out_mem_34639") != 0)
        return 1;
    *out_out_arrsizze_35352 = out_arrsizze_34640;
    if (memblock_unref_device(ctx, &res_mem_33954, "res_mem_33954") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33685, "res_mem_33685") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33684, "res_mem_33684") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33488, "res_mem_33488") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33487, "res_mem_33487") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33486, "res_mem_33486") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_34644,
                              "group_res_arr_mem_34644") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_34639, "out_mem_34639") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
static int futrts_test(struct futhark_context *ctx,
                       struct memblock_device *out_mem_p_35518,
                       int64_t *out_out_arrsizze_35519,
                       int64_t *out_out_arrsizze_35520, int64_t paths_26891,
                       int64_t steps_26892)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device out_mem_34636;
    
    out_mem_34636.references = NULL;
    
    int64_t out_arrsizze_34637;
    int64_t out_arrsizze_34638;
    struct memblock_device mem_33463;
    
    mem_33463.references = NULL;
    if (memblock_alloc_device(ctx, &mem_33463, 180, "mem_33463")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device testzistatic_array_34639 =
                           ctx->testzistatic_array_34639;
    
    if (45 * (int32_t) sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                     testzistatic_array_34639.mem,
                                                     mem_33463.mem, 0, 0, 45 *
                                                     (int32_t) sizeof(float), 0,
                                                     NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    
    struct memblock_device mem_33465;
    
    mem_33465.references = NULL;
    if (memblock_alloc_device(ctx, &mem_33465, 360, "mem_33465")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device testzistatic_array_34640 =
                           ctx->testzistatic_array_34640;
    
    if (45 * (int32_t) sizeof(int64_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                     testzistatic_array_34640.mem,
                                                     mem_33465.mem, 0, 0, 45 *
                                                     (int32_t) sizeof(int64_t),
                                                     0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    
    struct memblock_device mem_33467;
    
    mem_33467.references = NULL;
    if (memblock_alloc_device(ctx, &mem_33467, 180, "mem_33467")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device testzistatic_array_34641 =
                           ctx->testzistatic_array_34641;
    
    if (45 * (int32_t) sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                     testzistatic_array_34641.mem,
                                                     mem_33467.mem, 0, 0, 45 *
                                                     (int32_t) sizeof(float), 0,
                                                     NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    
    int64_t segred_group_sizze_30502;
    
    segred_group_sizze_30502 = ctx->sizes.testzisegred_group_sizze_30501;
    
    int64_t num_groups_30504;
    int32_t max_num_groups_34642;
    
    max_num_groups_34642 = ctx->sizes.testzisegred_num_groups_30503;
    num_groups_30504 = sext_i64_i32(smax64(1, smin64(sdiv_up64(45,
                                                               sext_i32_i64(segred_group_sizze_30502)),
                                                     sext_i32_i64(max_num_groups_34642))));
    
    struct memblock_device mem_33470;
    
    mem_33470.references = NULL;
    if (memblock_alloc_device(ctx, &mem_33470, 4, "mem_33470")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device testzicounter_mem_34643 =
                           ctx->testzicounter_mem_34643;
    struct memblock_device group_res_arr_mem_34645;
    
    group_res_arr_mem_34645.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_34645,
                              (int32_t) sizeof(float) *
                              (segred_group_sizze_30502 * num_groups_30504),
                              "group_res_arr_mem_34645")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t num_threads_34647;
    
    num_threads_34647 = num_groups_30504 * segred_group_sizze_30502;
    if (ctx->debugging)
        fprintf(stderr, "%s\n", "\n# SegRed");
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 1,
                                            (int32_t) sizeof(float) *
                                            segred_group_sizze_30502, NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 2,
                                            (int32_t) sizeof(bool), NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 3,
                                            sizeof(num_groups_30504),
                                            &num_groups_30504));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 4,
                                            sizeof(mem_33465.mem),
                                            &mem_33465.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 5,
                                            sizeof(mem_33467.mem),
                                            &mem_33467.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 6,
                                            sizeof(mem_33470.mem),
                                            &mem_33470.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 7,
                                            sizeof(testzicounter_mem_34643.mem),
                                            &testzicounter_mem_34643.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 8,
                                            sizeof(group_res_arr_mem_34645.mem),
                                            &group_res_arr_mem_34645.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_nonseg_30509, 9,
                                            sizeof(num_threads_34647),
                                            &num_threads_34647));
    if (1 * ((size_t) num_groups_30504 * (size_t) segred_group_sizze_30502) !=
        0) {
        const size_t global_work_sizze_35525[1] = {(size_t) num_groups_30504 *
                     (size_t) segred_group_sizze_30502};
        const size_t local_work_sizze_35529[1] = {segred_group_sizze_30502};
        int64_t time_start_35526 = 0, time_end_35527 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "test.segred_nonseg_30509");
            fprintf(stderr, "%zu", global_work_sizze_35525[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_35529[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) (0 + (int32_t) sizeof(float) *
                           segred_group_sizze_30502 + (int32_t) sizeof(bool)));
            time_start_35526 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->testzisegred_nonseg_30509,
                                                        1, NULL,
                                                        global_work_sizze_35525,
                                                        local_work_sizze_35529,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->testzisegred_nonseg_30509_runs,
                                                                                                  &ctx->testzisegred_nonseg_30509_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_35527 = get_wall_time();
            
            long time_diff_35528 = time_end_35527 - time_start_35526;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n",
                    "test.segred_nonseg_30509", time_diff_35528);
        }
    }
    
    float read_res_35530;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_33470.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_35530,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_26896 = read_res_35530;
    
    if (memblock_unref_device(ctx, &mem_33470, "mem_33470") != 0)
        return 1;
    
    float res_26904 = sitofp_i64_f32(steps_26892);
    float dt_26905 = res_26896 / res_26904;
    bool suff_outer_par_30511;
    
    suff_outer_par_30511 = ctx->sizes.testzisuff_outer_par_0 <= 45;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "test.suff_outer_par_0", 45);
    
    int64_t segmap_group_sizze_30579;
    
    segmap_group_sizze_30579 = ctx->sizes.testzisegmap_group_sizze_30515;
    
    int64_t segmap_group_sizze_30728;
    
    segmap_group_sizze_30728 = ctx->sizes.testzisegmap_group_sizze_30664;
    
    struct memblock_device res_mem_33489;
    
    res_mem_33489.references = NULL;
    
    struct memblock_device res_mem_33490;
    
    res_mem_33490.references = NULL;
    
    struct memblock_device res_mem_33491;
    
    res_mem_33491.references = NULL;
    
    struct memblock_device res_mem_33492;
    
    res_mem_33492.references = NULL;
    
    int32_t local_memory_capacity_34685;
    
    local_memory_capacity_34685 = ctx->opencl.max_local_memory;
    if (sle64(0, sext_i32_i64(local_memory_capacity_34685)) &&
        suff_outer_par_30511) {
        int64_t segmap_usable_groups_30580 = sdiv_up64(45,
                                                       segmap_group_sizze_30579);
        struct memblock_device mem_33472;
        
        mem_33472.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33472, 180, "mem_33472")) {
            err = 1;
            goto cleanup;
        }
        if (45 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_33467.mem,
                                                         mem_33472.mem, 0, 0,
                                                         45 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33474;
        
        mem_33474.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33474, 360, "mem_33474")) {
            err = 1;
            goto cleanup;
        }
        if (45 * (int32_t) sizeof(int64_t) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_33465.mem,
                                                         mem_33474.mem, 0, 0,
                                                         45 *
                                                         (int32_t) sizeof(int64_t),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33476;
        
        mem_33476.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33476, 180, "mem_33476")) {
            err = 1;
            goto cleanup;
        }
        if (45 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_33463.mem,
                                                         mem_33476.mem, 0, 0,
                                                         45 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33479;
        
        mem_33479.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33479, 180, "mem_33479")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30513, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30513, 3,
                                                sizeof(mem_33465.mem),
                                                &mem_33465.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30513, 4,
                                                sizeof(mem_33467.mem),
                                                &mem_33467.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30513, 5,
                                                sizeof(mem_33479.mem),
                                                &mem_33479.mem));
        if (1 * ((size_t) segmap_usable_groups_30580 *
                 (size_t) segmap_group_sizze_30579) != 0) {
            const size_t global_work_sizze_35531[1] =
                         {(size_t) segmap_usable_groups_30580 *
                         (size_t) segmap_group_sizze_30579};
            const size_t local_work_sizze_35535[1] = {segmap_group_sizze_30579};
            int64_t time_start_35532 = 0, time_end_35533 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "test.segmap_30513");
                fprintf(stderr, "%zu", global_work_sizze_35531[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35535[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35532 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->testzisegmap_30513,
                                                            1, NULL,
                                                            global_work_sizze_35531,
                                                            local_work_sizze_35535,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->testzisegmap_30513_runs,
                                                                                                      &ctx->testzisegmap_30513_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35533 = get_wall_time();
                
                long time_diff_35534 = time_end_35533 - time_start_35532;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "test.segmap_30513", time_diff_35534);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_set_device(ctx, &res_mem_33489, &mem_33479, "mem_33479") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33490, &mem_33476, "mem_33476") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33491, &mem_33474, "mem_33474") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33492, &mem_33472, "mem_33472") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33479, "mem_33479") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33476, "mem_33476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33474, "mem_33474") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33472, "mem_33472") != 0)
            return 1;
    } else {
        int64_t segmap_usable_groups_30729 = sdiv_up64(45,
                                                       segmap_group_sizze_30728);
        struct memblock_device mem_33481;
        
        mem_33481.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33481, 180, "mem_33481")) {
            err = 1;
            goto cleanup;
        }
        if (45 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_33467.mem,
                                                         mem_33481.mem, 0, 0,
                                                         45 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33483;
        
        mem_33483.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33483, 360, "mem_33483")) {
            err = 1;
            goto cleanup;
        }
        if (45 * (int32_t) sizeof(int64_t) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_33465.mem,
                                                         mem_33483.mem, 0, 0,
                                                         45 *
                                                         (int32_t) sizeof(int64_t),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33485;
        
        mem_33485.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33485, 180, "mem_33485")) {
            err = 1;
            goto cleanup;
        }
        if (45 * (int32_t) sizeof(float) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_33463.mem,
                                                         mem_33485.mem, 0, 0,
                                                         45 *
                                                         (int32_t) sizeof(float),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_33488;
        
        mem_33488.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33488, 180, "mem_33488")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30662, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30662, 3,
                                                sizeof(mem_33465.mem),
                                                &mem_33465.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30662, 4,
                                                sizeof(mem_33467.mem),
                                                &mem_33467.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30662, 5,
                                                sizeof(mem_33488.mem),
                                                &mem_33488.mem));
        if (1 * ((size_t) segmap_usable_groups_30729 *
                 (size_t) segmap_group_sizze_30728) != 0) {
            const size_t global_work_sizze_35536[1] =
                         {(size_t) segmap_usable_groups_30729 *
                         (size_t) segmap_group_sizze_30728};
            const size_t local_work_sizze_35540[1] = {segmap_group_sizze_30728};
            int64_t time_start_35537 = 0, time_end_35538 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "test.segmap_30662");
                fprintf(stderr, "%zu", global_work_sizze_35536[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35540[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35537 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->testzisegmap_30662,
                                                            1, NULL,
                                                            global_work_sizze_35536,
                                                            local_work_sizze_35540,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->testzisegmap_30662_runs,
                                                                                                      &ctx->testzisegmap_30662_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35538 = get_wall_time();
                
                long time_diff_35539 = time_end_35538 - time_start_35537;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "test.segmap_30662", time_diff_35539);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_set_device(ctx, &res_mem_33489, &mem_33488, "mem_33488") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33490, &mem_33485, "mem_33485") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33491, &mem_33483, "mem_33483") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33492, &mem_33481, "mem_33481") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33488, "mem_33488") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33485, "mem_33485") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33483, "mem_33483") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33481, "mem_33481") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_33463, "mem_33463") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33465, "mem_33465") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
        return 1;
    
    float sims_per_year_26971 = res_26904 / res_26896;
    bool bounds_invalid_upwards_26972 = slt64(steps_26892, 1);
    bool valid_26973 = !bounds_invalid_upwards_26972;
    bool range_valid_c_26974;
    
    if (!valid_26973) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", 1, "..", 2, "...", steps_26892,
                               " is invalid.",
                               "-> #0  cvadynmem.fut:60:56-67\n   #1  cvadynmem.fut:112:17-44\n   #2  cvadynmem.fut:165:3-167:129\n   #3  cvadynmem.fut:164:1-167:137\n");
        if (memblock_unref_device(ctx, &res_mem_33492, "res_mem_33492") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33491, "res_mem_33491") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33490, "res_mem_33490") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34645,
                                  "group_res_arr_mem_34645") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33470, "mem_33470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33465, "mem_33465") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33463, "mem_33463") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_26980 = slt64(paths_26891, 0);
    bool valid_26981 = !bounds_invalid_upwards_26980;
    bool range_valid_c_26982;
    
    if (!valid_26981) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", 0, "..", 1, "..<", paths_26891,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:60:3-10\n   #1  /prelude/array.fut:126:11-16\n   #2  lib/github.com/diku-dk/cpprandom/random.fut:174:8-56\n   #3  cvadynmem.fut:115:19-49\n   #4  cvadynmem.fut:165:3-167:129\n   #5  cvadynmem.fut:164:1-167:137\n");
        if (memblock_unref_device(ctx, &res_mem_33492, "res_mem_33492") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33491, "res_mem_33491") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33490, "res_mem_33490") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34645,
                                  "group_res_arr_mem_34645") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33470, "mem_33470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33465, "mem_33465") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33463, "mem_33463") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
            return 1;
        return 1;
    }
    
    int64_t upper_bound_26985 = sub64(steps_26892, 1);
    float res_26986;
    
    res_26986 = futrts_sqrt32(dt_26905);
    
    bool suff_outer_par_30833;
    
    suff_outer_par_30833 = ctx->sizes.testzisuff_outer_par_2 <= paths_26891;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "test.suff_outer_par_2",
                paths_26891);
    
    int64_t one_intra_par_min_30970 = 45 * steps_26892;
    int64_t intra_avail_par_30972 = smin64(steps_26892,
                                           one_intra_par_min_30970);
    int64_t computed_group_sizze_30836 = smax64(steps_26892,
                                                one_intra_par_min_30970);
    int64_t max_group_sizze_31311;
    
    max_group_sizze_31311 = ctx->opencl.max_group_size;
    
    bool fits_31312 = sle64(computed_group_sizze_30836, max_group_sizze_31311);
    bool suff_intra_par_31310;
    
    suff_intra_par_31310 = ctx->sizes.testzisuff_intra_par_3 <=
        intra_avail_par_30972;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "test.suff_intra_par_3",
                intra_avail_par_30972);
    
    bool intra_suff_and_fits_31313 = suff_intra_par_31310 && fits_31312;
    int64_t segmap_group_sizze_31144;
    
    segmap_group_sizze_31144 = ctx->sizes.testzisegmap_group_sizze_30977;
    
    int64_t num_groups_31145;
    int32_t max_num_groups_34686;
    
    max_num_groups_34686 = ctx->sizes.testzisegmap_num_groups_30979;
    num_groups_31145 = sext_i64_i32(smax64(1, smin64(sdiv_up64(paths_26891,
                                                               sext_i32_i64(segmap_group_sizze_31144)),
                                                     sext_i32_i64(max_num_groups_34686))));
    
    int64_t segmap_group_sizze_32127;
    
    segmap_group_sizze_32127 = ctx->sizes.testzisegmap_group_sizze_32110;
    
    int64_t nest_sizze_32151 = paths_26891 * steps_26892;
    int64_t segmap_group_sizze_32152;
    
    segmap_group_sizze_32152 = ctx->sizes.testzisegmap_group_sizze_32047;
    
    int64_t segmap_group_sizze_32197;
    
    segmap_group_sizze_32197 = ctx->sizes.testzisegmap_group_sizze_31948;
    
    int64_t num_groups_32198;
    int32_t max_num_groups_34687;
    
    max_num_groups_34687 = ctx->sizes.testzisegmap_num_groups_31950;
    num_groups_32198 = sext_i64_i32(smax64(1, smin64(sdiv_up64(paths_26891,
                                                               sext_i32_i64(segmap_group_sizze_32197)),
                                                     sext_i32_i64(max_num_groups_34687))));
    
    int64_t segmap_group_sizze_32225;
    
    segmap_group_sizze_32225 = ctx->sizes.testzisegmap_group_sizze_31483;
    
    bool suff_outer_par_32229;
    
    suff_outer_par_32229 = ctx->sizes.testzisuff_outer_par_4 <=
        nest_sizze_32151;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "test.suff_outer_par_4",
                nest_sizze_32151);
    
    bool fits_32234 = sle64(45, max_group_sizze_31311);
    bool suff_intra_par_32236;
    
    suff_intra_par_32236 = ctx->sizes.testzisuff_intra_par_5 <= 45;
    if (ctx->logging)
        fprintf(stderr, "Compared %s <= %d.\n", "test.suff_intra_par_5", 45);
    
    bool intra_suff_and_fits_32237 = fits_32234 && suff_intra_par_32236;
    int64_t nest_sizze_32444 = 45 * nest_sizze_32151;
    int64_t segred_group_sizze_32445;
    
    segred_group_sizze_32445 = ctx->sizes.testzisegred_group_sizze_31721;
    
    int64_t num_groups_32446;
    int32_t max_num_groups_34688;
    
    max_num_groups_34688 = ctx->sizes.testzisegred_num_groups_31723;
    num_groups_32446 = sext_i64_i32(smax64(1, smin64(sdiv_up64(nest_sizze_32444,
                                                               sext_i32_i64(segred_group_sizze_32445)),
                                                     sext_i32_i64(max_num_groups_34688))));
    
    int64_t segmap_group_sizze_32550;
    
    segmap_group_sizze_32550 = ctx->sizes.testzisegmap_group_sizze_31711;
    
    int64_t computed_group_sizze_32670 = smin64(steps_26892,
                                                segmap_group_sizze_32225);
    int64_t bytes_33536 = 4 * nest_sizze_32151;
    int64_t bytes_33494 = 4 * steps_26892;
    int64_t bytes_33567 = 4 * paths_26891;
    int64_t bytes_33596 = 4 * computed_group_sizze_32670;
    int64_t bytes_33615 = 8 * computed_group_sizze_32670;
    int64_t num_threads_34623 = segmap_group_sizze_31144 * num_groups_31145;
    int64_t total_sizze_34624 = bytes_33494 * num_threads_34623;
    int64_t total_sizze_34625 = bytes_33494 * num_threads_34623;
    int64_t total_sizze_34626 = bytes_33494 * num_threads_34623;
    int64_t num_threads_34630 = segmap_group_sizze_32197 * num_groups_32198;
    int64_t total_sizze_34631 = bytes_33494 * num_threads_34630;
    struct memblock_device res_mem_33672;
    
    res_mem_33672.references = NULL;
    
    int32_t local_memory_capacity_34846;
    
    local_memory_capacity_34846 = ctx->opencl.max_local_memory;
    if (sle64(0, sext_i32_i64(local_memory_capacity_34846)) &&
        suff_outer_par_30833) {
        struct memblock_device mem_33538;
        
        mem_33538.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33538, bytes_33536, "mem_33538")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33495;
        
        mem_33495.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33495, total_sizze_34624,
                                  "mem_33495")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33509;
        
        mem_33509.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33509, total_sizze_34625,
                                  "mem_33509")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_33523;
        
        mem_33523.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33523, total_sizze_34626,
                                  "mem_33523")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegMap");
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 1,
                                                sizeof(ctx->failure_is_an_option),
                                                &ctx->failure_is_an_option));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 3,
                                                sizeof(paths_26891),
                                                &paths_26891));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 4,
                                                sizeof(steps_26892),
                                                &steps_26892));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 5,
                                                sizeof(dt_26905), &dt_26905));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 6,
                                                sizeof(sims_per_year_26971),
                                                &sims_per_year_26971));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 7,
                                                sizeof(upper_bound_26985),
                                                &upper_bound_26985));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 8,
                                                sizeof(res_26986), &res_26986));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 9,
                                                sizeof(num_groups_31145),
                                                &num_groups_31145));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 10,
                                                sizeof(res_mem_33489.mem),
                                                &res_mem_33489.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 11,
                                                sizeof(res_mem_33490.mem),
                                                &res_mem_33490.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 12,
                                                sizeof(res_mem_33491.mem),
                                                &res_mem_33491.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 13,
                                                sizeof(res_mem_33492.mem),
                                                &res_mem_33492.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 14,
                                                sizeof(mem_33495.mem),
                                                &mem_33495.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 15,
                                                sizeof(mem_33509.mem),
                                                &mem_33509.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 16,
                                                sizeof(mem_33523.mem),
                                                &mem_33523.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_30975, 17,
                                                sizeof(mem_33538.mem),
                                                &mem_33538.mem));
        if (1 * ((size_t) num_groups_31145 *
                 (size_t) segmap_group_sizze_31144) != 0) {
            const size_t global_work_sizze_35541[1] =
                         {(size_t) num_groups_31145 *
                         (size_t) segmap_group_sizze_31144};
            const size_t local_work_sizze_35545[1] = {segmap_group_sizze_31144};
            int64_t time_start_35542 = 0, time_end_35543 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "test.segmap_30975");
                fprintf(stderr, "%zu", global_work_sizze_35541[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_35545[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_35542 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->testzisegmap_30975,
                                                            1, NULL,
                                                            global_work_sizze_35541,
                                                            local_work_sizze_35545,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->testzisegmap_30975_runs,
                                                                                                      &ctx->testzisegmap_30975_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_35543 = get_wall_time();
                
                long time_diff_35544 = time_end_35543 - time_start_35542;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "test.segmap_30975", time_diff_35544);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &mem_33495, "mem_33495") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33509, "mem_33509") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33523, "mem_33523") != 0)
            return 1;
        
        struct memblock_device mem_33670;
        
        mem_33670.references = NULL;
        if (memblock_alloc_device(ctx, &mem_33670, bytes_33536, "mem_33670")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33670, 0, mem_33538,
                                                  0, 1, paths_26891,
                                                  steps_26892) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_33538, "mem_33538") != 0)
            return 1;
        if (memblock_set_device(ctx, &res_mem_33672, &mem_33670, "mem_33670") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33670, "mem_33670") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33523, "mem_33523") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33509, "mem_33509") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33495, "mem_33495") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_33538, "mem_33538") != 0)
            return 1;
    } else {
        struct memblock_device res_mem_33667;
        
        res_mem_33667.references = NULL;
        
        int32_t local_memory_capacity_34845;
        
        local_memory_capacity_34845 = ctx->opencl.max_local_memory;
        if (sle64(bytes_33494 + bytes_33494 + bytes_33494 +
                  (int32_t) sizeof(float) * (steps_26892 * 45) + bytes_33494,
                  sext_i32_i64(local_memory_capacity_34845)) &&
            intra_suff_and_fits_31313) {
            struct memblock_device mem_33565;
            
            mem_33565.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33565, bytes_33536,
                                      "mem_33565")) {
                err = 1;
                goto cleanup;
            }
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    1,
                                                    sizeof(ctx->failure_is_an_option),
                                                    &ctx->failure_is_an_option));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    3, bytes_33494, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    4, (int32_t) sizeof(float) *
                                                    (steps_26892 * 45), NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    5, bytes_33494, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    6, bytes_33494, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    7, bytes_33494, NULL));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    8, sizeof(steps_26892),
                                                    &steps_26892));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    9, sizeof(dt_26905),
                                                    &dt_26905));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    10,
                                                    sizeof(sims_per_year_26971),
                                                    &sims_per_year_26971));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    11,
                                                    sizeof(upper_bound_26985),
                                                    &upper_bound_26985));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    12, sizeof(res_26986),
                                                    &res_26986));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    13,
                                                    sizeof(computed_group_sizze_30836),
                                                    &computed_group_sizze_30836));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    14,
                                                    sizeof(res_mem_33489.mem),
                                                    &res_mem_33489.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    15,
                                                    sizeof(res_mem_33490.mem),
                                                    &res_mem_33490.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    16,
                                                    sizeof(res_mem_33491.mem),
                                                    &res_mem_33491.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    17,
                                                    sizeof(res_mem_33492.mem),
                                                    &res_mem_33492.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_30973,
                                                    18, sizeof(mem_33565.mem),
                                                    &mem_33565.mem));
            if (1 * ((size_t) paths_26891 *
                     (size_t) computed_group_sizze_30836) != 0) {
                const size_t global_work_sizze_35546[1] =
                             {(size_t) paths_26891 *
                             (size_t) computed_group_sizze_30836};
                const size_t local_work_sizze_35550[1] =
                             {computed_group_sizze_30836};
                int64_t time_start_35547 = 0, time_end_35548 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "test.segmap_intragroup_30973");
                    fprintf(stderr, "%zu", global_work_sizze_35546[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35550[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) (0 + bytes_33494 + (int32_t) sizeof(float) *
                                   (steps_26892 * 45) + bytes_33494 +
                                   bytes_33494 + bytes_33494));
                    time_start_35547 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->testzisegmap_intragroup_30973,
                                                                1, NULL,
                                                                global_work_sizze_35546,
                                                                local_work_sizze_35550,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->testzisegmap_intragroup_30973_runs,
                                                                                                          &ctx->testzisegmap_intragroup_30973_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35548 = get_wall_time();
                    
                    long time_diff_35549 = time_end_35548 - time_start_35547;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "test.segmap_intragroup_30973", time_diff_35549);
                }
            }
            ctx->failure_is_an_option = 1;
            if (memblock_set_device(ctx, &res_mem_33667, &mem_33565,
                                    "mem_33565") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33565, "mem_33565") != 0)
                return 1;
        } else {
            int64_t segmap_usable_groups_32128 = sdiv_up64(paths_26891,
                                                           segmap_group_sizze_32127);
            struct memblock_device mem_33568;
            
            mem_33568.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33568, bytes_33567,
                                      "mem_33568")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegMap");
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_32108, 1,
                                                    sizeof(paths_26891),
                                                    &paths_26891));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_32108, 2,
                                                    sizeof(mem_33568.mem),
                                                    &mem_33568.mem));
            if (1 * ((size_t) segmap_usable_groups_32128 *
                     (size_t) segmap_group_sizze_32127) != 0) {
                const size_t global_work_sizze_35551[1] =
                             {(size_t) segmap_usable_groups_32128 *
                             (size_t) segmap_group_sizze_32127};
                const size_t local_work_sizze_35555[1] =
                             {segmap_group_sizze_32127};
                int64_t time_start_35552 = 0, time_end_35553 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "test.segmap_32108");
                    fprintf(stderr, "%zu", global_work_sizze_35551[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35555[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35552 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->testzisegmap_32108,
                                                                1, NULL,
                                                                global_work_sizze_35551,
                                                                local_work_sizze_35555,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->testzisegmap_32108_runs,
                                                                                                          &ctx->testzisegmap_32108_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35553 = get_wall_time();
                    
                    long time_diff_35554 = time_end_35553 - time_start_35552;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "test.segmap_32108", time_diff_35554);
                }
            }
            
            int64_t segmap_usable_groups_32153 = sdiv_up64(nest_sizze_32151,
                                                           segmap_group_sizze_32152);
            struct memblock_device mem_33572;
            
            mem_33572.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33572, bytes_33536,
                                      "mem_33572")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegMap");
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_32044, 1,
                                                    sizeof(paths_26891),
                                                    &paths_26891));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_32044, 2,
                                                    sizeof(steps_26892),
                                                    &steps_26892));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_32044, 3,
                                                    sizeof(mem_33568.mem),
                                                    &mem_33568.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_32044, 4,
                                                    sizeof(mem_33572.mem),
                                                    &mem_33572.mem));
            if (1 * ((size_t) segmap_usable_groups_32153 *
                     (size_t) segmap_group_sizze_32152) != 0) {
                const size_t global_work_sizze_35556[1] =
                             {(size_t) segmap_usable_groups_32153 *
                             (size_t) segmap_group_sizze_32152};
                const size_t local_work_sizze_35560[1] =
                             {segmap_group_sizze_32152};
                int64_t time_start_35557 = 0, time_end_35558 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "test.segmap_32044");
                    fprintf(stderr, "%zu", global_work_sizze_35556[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35560[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35557 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->testzisegmap_32044,
                                                                1, NULL,
                                                                global_work_sizze_35556,
                                                                local_work_sizze_35560,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->testzisegmap_32044_runs,
                                                                                                          &ctx->testzisegmap_32044_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35558 = get_wall_time();
                    
                    long time_diff_35559 = time_end_35558 - time_start_35557;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "test.segmap_32044", time_diff_35559);
                }
            }
            if (memblock_unref_device(ctx, &mem_33568, "mem_33568") != 0)
                return 1;
            
            struct memblock_device mem_33575;
            
            mem_33575.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33575, bytes_33536,
                                      "mem_33575")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_33575, 0,
                                                      mem_33572, 0, 1,
                                                      steps_26892,
                                                      paths_26891) != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref_device(ctx, &mem_33572, "mem_33572") != 0)
                return 1;
            
            struct memblock_device mem_33593;
            
            mem_33593.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33593, bytes_33536,
                                      "mem_33593")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_33578;
            
            mem_33578.references = NULL;
            if (memblock_alloc_device(ctx, &mem_33578, total_sizze_34631,
                                      "mem_33578")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(stderr, "%s\n", "\n# SegMap");
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 1,
                                                    sizeof(ctx->failure_is_an_option),
                                                    &ctx->failure_is_an_option));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 3,
                                                    sizeof(paths_26891),
                                                    &paths_26891));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 4,
                                                    sizeof(steps_26892),
                                                    &steps_26892));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 5,
                                                    sizeof(dt_26905),
                                                    &dt_26905));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 6,
                                                    sizeof(upper_bound_26985),
                                                    &upper_bound_26985));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 7,
                                                    sizeof(res_26986),
                                                    &res_26986));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 8,
                                                    sizeof(num_groups_32198),
                                                    &num_groups_32198));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 9,
                                                    sizeof(mem_33575.mem),
                                                    &mem_33575.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 10,
                                                    sizeof(mem_33578.mem),
                                                    &mem_33578.mem));
            OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31946, 11,
                                                    sizeof(mem_33593.mem),
                                                    &mem_33593.mem));
            if (1 * ((size_t) num_groups_32198 *
                     (size_t) segmap_group_sizze_32197) != 0) {
                const size_t global_work_sizze_35561[1] =
                             {(size_t) num_groups_32198 *
                             (size_t) segmap_group_sizze_32197};
                const size_t local_work_sizze_35565[1] =
                             {segmap_group_sizze_32197};
                int64_t time_start_35562 = 0, time_end_35563 = 0;
                
                if (ctx->debugging) {
                    fprintf(stderr, "Launching %s with global work size [",
                            "test.segmap_31946");
                    fprintf(stderr, "%zu", global_work_sizze_35561[0]);
                    fprintf(stderr, "] and local work size [");
                    fprintf(stderr, "%zu", local_work_sizze_35565[0]);
                    fprintf(stderr,
                            "]; local memory parameters sum to %d bytes.\n",
                            (int) 0);
                    time_start_35562 = get_wall_time();
                }
                OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                ctx->testzisegmap_31946,
                                                                1, NULL,
                                                                global_work_sizze_35561,
                                                                local_work_sizze_35565,
                                                                0, NULL,
                                                                ctx->profiling_paused ||
                                                                !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                          &ctx->testzisegmap_31946_runs,
                                                                                                          &ctx->testzisegmap_31946_total_runtime)));
                if (ctx->debugging) {
                    OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                    time_end_35563 = get_wall_time();
                    
                    long time_diff_35564 = time_end_35563 - time_start_35562;
                    
                    fprintf(stderr, "kernel %s runtime: %ldus\n",
                            "test.segmap_31946", time_diff_35564);
                }
            }
            ctx->failure_is_an_option = 1;
            if (memblock_unref_device(ctx, &mem_33575, "mem_33575") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33578, "mem_33578") != 0)
                return 1;
            
            struct memblock_device res_mem_33666;
            
            res_mem_33666.references = NULL;
            
            int32_t local_memory_capacity_34844;
            
            local_memory_capacity_34844 = ctx->opencl.max_local_memory;
            if (sle64(bytes_33596 + bytes_33596 + bytes_33615 + bytes_33596 +
                      bytes_33596 + bytes_33596 + bytes_33615 + bytes_33596,
                      sext_i32_i64(local_memory_capacity_34844)) &&
                suff_outer_par_32229) {
                int64_t ldim_32671 = sdiv_up64(steps_26892,
                                               computed_group_sizze_32670);
                int64_t computed_num_groups_32672 = paths_26891 * ldim_32671;
                int64_t num_whole_tiles_32694 = squot64(45,
                                                        computed_group_sizze_32670);
                int64_t residual_input_33078 = srem64(45,
                                                      computed_group_sizze_32670);
                bool cond_33079 = residual_input_33078 == 0;
                struct memblock_device mem_33651;
                
                mem_33651.references = NULL;
                if (memblock_alloc_device(ctx, &mem_33651, bytes_33536,
                                          "mem_33651")) {
                    err = 1;
                    goto cleanup;
                }
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        1,
                                                        sizeof(ctx->failure_is_an_option),
                                                        &ctx->failure_is_an_option));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        3, bytes_33596, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        4, bytes_33615, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        5, bytes_33596, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        6, bytes_33596, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        7, bytes_33596, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        8, bytes_33615, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        9, bytes_33596, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        10, bytes_33596, NULL));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        11, sizeof(paths_26891),
                                                        &paths_26891));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        12, sizeof(steps_26892),
                                                        &steps_26892));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        13,
                                                        sizeof(sims_per_year_26971),
                                                        &sims_per_year_26971));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        14,
                                                        sizeof(computed_group_sizze_32670),
                                                        &computed_group_sizze_32670));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        15, sizeof(ldim_32671),
                                                        &ldim_32671));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        16,
                                                        sizeof(num_whole_tiles_32694),
                                                        &num_whole_tiles_32694));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        17,
                                                        sizeof(residual_input_33078),
                                                        &residual_input_33078));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        18, sizeof(cond_33079),
                                                        &cond_33079));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        19,
                                                        sizeof(res_mem_33489.mem),
                                                        &res_mem_33489.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        20,
                                                        sizeof(res_mem_33490.mem),
                                                        &res_mem_33490.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        21,
                                                        sizeof(res_mem_33491.mem),
                                                        &res_mem_33491.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        22,
                                                        sizeof(res_mem_33492.mem),
                                                        &res_mem_33492.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        23,
                                                        sizeof(mem_33593.mem),
                                                        &mem_33593.mem));
                OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_32669,
                                                        24,
                                                        sizeof(mem_33651.mem),
                                                        &mem_33651.mem));
                if (1 * ((size_t) computed_num_groups_32672 *
                         (size_t) computed_group_sizze_32670) != 0) {
                    const size_t global_work_sizze_35566[1] =
                                 {(size_t) computed_num_groups_32672 *
                                 (size_t) computed_group_sizze_32670};
                    const size_t local_work_sizze_35570[1] =
                                 {computed_group_sizze_32670};
                    int64_t time_start_35567 = 0, time_end_35568 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(stderr, "Launching %s with global work size [",
                                "test.segmap_intragroup_32669");
                        fprintf(stderr, "%zu", global_work_sizze_35566[0]);
                        fprintf(stderr, "] and local work size [");
                        fprintf(stderr, "%zu", local_work_sizze_35570[0]);
                        fprintf(stderr,
                                "]; local memory parameters sum to %d bytes.\n",
                                (int) (0 + bytes_33596 + bytes_33615 +
                                       bytes_33596 + bytes_33596 + bytes_33596 +
                                       bytes_33615 + bytes_33596 +
                                       bytes_33596));
                        time_start_35567 = get_wall_time();
                    }
                    OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                    ctx->testzisegmap_intragroup_32669,
                                                                    1, NULL,
                                                                    global_work_sizze_35566,
                                                                    local_work_sizze_35570,
                                                                    0, NULL,
                                                                    ctx->profiling_paused ||
                                                                    !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                              &ctx->testzisegmap_intragroup_32669_runs,
                                                                                                              &ctx->testzisegmap_intragroup_32669_total_runtime)));
                    if (ctx->debugging) {
                        OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                        time_end_35568 = get_wall_time();
                        
                        long time_diff_35569 = time_end_35568 -
                             time_start_35567;
                        
                        fprintf(stderr, "kernel %s runtime: %ldus\n",
                                "test.segmap_intragroup_32669",
                                time_diff_35569);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (memblock_set_device(ctx, &res_mem_33666, &mem_33651,
                                        "mem_33651") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_33651, "mem_33651") != 0)
                    return 1;
            } else {
                struct memblock_device res_mem_33665;
                
                res_mem_33665.references = NULL;
                
                int32_t local_memory_capacity_34843;
                
                local_memory_capacity_34843 = ctx->opencl.max_local_memory;
                if (sle64((int32_t) sizeof(float) * 45,
                          sext_i32_i64(local_memory_capacity_34843)) &&
                    intra_suff_and_fits_32237) {
                    struct memblock_device mem_33656;
                    
                    mem_33656.references = NULL;
                    if (memblock_alloc_device(ctx, &mem_33656, bytes_33536,
                                              "mem_33656")) {
                        err = 1;
                        goto cleanup;
                    }
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            1,
                                                            sizeof(ctx->failure_is_an_option),
                                                            &ctx->failure_is_an_option));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            3,
                                                            (int32_t) sizeof(float) *
                                                            45, NULL));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            4,
                                                            sizeof(paths_26891),
                                                            &paths_26891));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            5,
                                                            sizeof(steps_26892),
                                                            &steps_26892));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            6,
                                                            sizeof(sims_per_year_26971),
                                                            &sims_per_year_26971));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            7,
                                                            sizeof(res_mem_33489.mem),
                                                            &res_mem_33489.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            8,
                                                            sizeof(res_mem_33490.mem),
                                                            &res_mem_33490.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            9,
                                                            sizeof(res_mem_33491.mem),
                                                            &res_mem_33491.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            10,
                                                            sizeof(res_mem_33492.mem),
                                                            &res_mem_33492.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            11,
                                                            sizeof(mem_33593.mem),
                                                            &mem_33593.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_intragroup_31496,
                                                            12,
                                                            sizeof(mem_33656.mem),
                                                            &mem_33656.mem));
                    if (1 * ((size_t) nest_sizze_32151 * (size_t) 45) != 0) {
                        const size_t global_work_sizze_35571[1] =
                                     {(size_t) nest_sizze_32151 * (size_t) 45};
                        const size_t local_work_sizze_35575[1] = {45};
                        int64_t time_start_35572 = 0, time_end_35573 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(stderr,
                                    "Launching %s with global work size [",
                                    "test.segmap_intragroup_31496");
                            fprintf(stderr, "%zu", global_work_sizze_35571[0]);
                            fprintf(stderr, "] and local work size [");
                            fprintf(stderr, "%zu", local_work_sizze_35575[0]);
                            fprintf(stderr,
                                    "]; local memory parameters sum to %d bytes.\n",
                                    (int) (0 + (int32_t) sizeof(float) * 45));
                            time_start_35572 = get_wall_time();
                        }
                        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                        ctx->testzisegmap_intragroup_31496,
                                                                        1, NULL,
                                                                        global_work_sizze_35571,
                                                                        local_work_sizze_35575,
                                                                        0, NULL,
                                                                        ctx->profiling_paused ||
                                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                  &ctx->testzisegmap_intragroup_31496_runs,
                                                                                                                  &ctx->testzisegmap_intragroup_31496_total_runtime)));
                        if (ctx->debugging) {
                            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                            time_end_35573 = get_wall_time();
                            
                            long time_diff_35574 = time_end_35573 -
                                 time_start_35572;
                            
                            fprintf(stderr, "kernel %s runtime: %ldus\n",
                                    "test.segmap_intragroup_31496",
                                    time_diff_35574);
                        }
                    }
                    ctx->failure_is_an_option = 1;
                    if (memblock_set_device(ctx, &res_mem_33665, &mem_33656,
                                            "mem_33656") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_33656, "mem_33656") !=
                        0)
                        return 1;
                } else {
                    struct memblock_device mem_33660;
                    
                    mem_33660.references = NULL;
                    if (memblock_alloc_device(ctx, &mem_33660, bytes_33536,
                                              "mem_33660")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (slt64(90, segred_group_sizze_32445)) {
                        int64_t segment_sizze_nonzzero_34776 = 45;
                        int64_t num_threads_34777 = num_groups_32446 *
                                segred_group_sizze_32445;
                        
                        if (ctx->debugging)
                            fprintf(stderr, "%s\n", "\n# SegRed-small");
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "num_segments",
                                    (long long) (paths_26891 * steps_26892),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "segment_size",
                                    (long long) 45, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "segments_per_group",
                                    (long long) squot64(segred_group_sizze_32445,
                                                        segment_sizze_nonzzero_34776),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "required_groups",
                                    (long long) sext_i64_i32(sdiv_up64(paths_26891 *
                                                                       steps_26892,
                                                                       squot64(segred_group_sizze_32445,
                                                                               segment_sizze_nonzzero_34776))),
                                    '\n');
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                1,
                                                                sizeof(ctx->failure_is_an_option),
                                                                &ctx->failure_is_an_option));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                3,
                                                                (int32_t) sizeof(float) *
                                                                segred_group_sizze_32445,
                                                                NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                4,
                                                                sizeof(paths_26891),
                                                                &paths_26891));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                5,
                                                                sizeof(steps_26892),
                                                                &steps_26892));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                6,
                                                                sizeof(sims_per_year_26971),
                                                                &sims_per_year_26971));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                7,
                                                                sizeof(num_groups_32446),
                                                                &num_groups_32446));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                8,
                                                                sizeof(res_mem_33489.mem),
                                                                &res_mem_33489.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                9,
                                                                sizeof(res_mem_33490.mem),
                                                                &res_mem_33490.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                10,
                                                                sizeof(res_mem_33491.mem),
                                                                &res_mem_33491.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                11,
                                                                sizeof(res_mem_33492.mem),
                                                                &res_mem_33492.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                12,
                                                                sizeof(mem_33593.mem),
                                                                &mem_33593.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                13,
                                                                sizeof(mem_33660.mem),
                                                                &mem_33660.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_small_31727,
                                                                14,
                                                                sizeof(segment_sizze_nonzzero_34776),
                                                                &segment_sizze_nonzzero_34776));
                        if (1 * ((size_t) num_groups_32446 *
                                 (size_t) segred_group_sizze_32445) != 0) {
                            const size_t global_work_sizze_35576[1] =
                                         {(size_t) num_groups_32446 *
                                         (size_t) segred_group_sizze_32445};
                            const size_t local_work_sizze_35580[1] =
                                         {segred_group_sizze_32445};
                            int64_t time_start_35577 = 0, time_end_35578 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(stderr,
                                        "Launching %s with global work size [",
                                        "test.segred_small_31727");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35576[0]);
                                fprintf(stderr, "] and local work size [");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35580[0]);
                                fprintf(stderr,
                                        "]; local memory parameters sum to %d bytes.\n",
                                        (int) (0 + (int32_t) sizeof(float) *
                                               segred_group_sizze_32445));
                                time_start_35577 = get_wall_time();
                            }
                            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                            ctx->testzisegred_small_31727,
                                                                            1,
                                                                            NULL,
                                                                            global_work_sizze_35576,
                                                                            local_work_sizze_35580,
                                                                            0,
                                                                            NULL,
                                                                            ctx->profiling_paused ||
                                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                      &ctx->testzisegred_small_31727_runs,
                                                                                                                      &ctx->testzisegred_small_31727_total_runtime)));
                            if (ctx->debugging) {
                                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                                time_end_35578 = get_wall_time();
                                
                                long time_diff_35579 = time_end_35578 -
                                     time_start_35577;
                                
                                fprintf(stderr, "kernel %s runtime: %ldus\n",
                                        "test.segred_small_31727",
                                        time_diff_35579);
                            }
                        }
                        ctx->failure_is_an_option = 1;
                    } else {
                        int64_t groups_per_segment_34798 =
                                sdiv_up64(num_groups_32446, smax64(1,
                                                                   paths_26891 *
                                                                   steps_26892));
                        int64_t elements_per_thread_34799 = sdiv_up64(45,
                                                                      segred_group_sizze_32445 *
                                                                      groups_per_segment_34798);
                        int64_t virt_num_groups_34800 =
                                groups_per_segment_34798 * (paths_26891 *
                                                            steps_26892);
                        int64_t num_threads_34801 = num_groups_32446 *
                                segred_group_sizze_32445;
                        int64_t threads_per_segment_34802 =
                                groups_per_segment_34798 *
                                segred_group_sizze_32445;
                        
                        if (ctx->debugging)
                            fprintf(stderr, "%s\n", "\n# SegRed-large");
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "num_segments",
                                    (long long) (paths_26891 * steps_26892),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "segment_size",
                                    (long long) 45, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "virt_num_groups",
                                    (long long) virt_num_groups_34800, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "num_groups",
                                    (long long) num_groups_32446, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "group_size",
                                    (long long) segred_group_sizze_32445, '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "elems_per_thread",
                                    (long long) elements_per_thread_34799,
                                    '\n');
                        if (ctx->debugging)
                            fprintf(stderr, "%s: %llu%c", "groups_per_segment",
                                    (long long) groups_per_segment_34798, '\n');
                        
                        struct memblock_device group_res_arr_mem_34803;
                        
                        group_res_arr_mem_34803.references = NULL;
                        if (memblock_alloc_device(ctx, &group_res_arr_mem_34803,
                                                  (int32_t) sizeof(float) *
                                                  (segred_group_sizze_32445 *
                                                   virt_num_groups_34800),
                                                  "group_res_arr_mem_34803")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock_device testzicounter_mem_34805 =
                                               ctx->testzicounter_mem_34805;
                        
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                1,
                                                                sizeof(ctx->failure_is_an_option),
                                                                &ctx->failure_is_an_option));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                3,
                                                                (int32_t) sizeof(bool),
                                                                NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                4,
                                                                (int32_t) sizeof(float) *
                                                                segred_group_sizze_32445,
                                                                NULL));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                5,
                                                                sizeof(paths_26891),
                                                                &paths_26891));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                6,
                                                                sizeof(steps_26892),
                                                                &steps_26892));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                7,
                                                                sizeof(sims_per_year_26971),
                                                                &sims_per_year_26971));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                8,
                                                                sizeof(num_groups_32446),
                                                                &num_groups_32446));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                9,
                                                                sizeof(res_mem_33489.mem),
                                                                &res_mem_33489.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                10,
                                                                sizeof(res_mem_33490.mem),
                                                                &res_mem_33490.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                11,
                                                                sizeof(res_mem_33491.mem),
                                                                &res_mem_33491.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                12,
                                                                sizeof(res_mem_33492.mem),
                                                                &res_mem_33492.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                13,
                                                                sizeof(mem_33593.mem),
                                                                &mem_33593.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                14,
                                                                sizeof(mem_33660.mem),
                                                                &mem_33660.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                15,
                                                                sizeof(groups_per_segment_34798),
                                                                &groups_per_segment_34798));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                16,
                                                                sizeof(elements_per_thread_34799),
                                                                &elements_per_thread_34799));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                17,
                                                                sizeof(virt_num_groups_34800),
                                                                &virt_num_groups_34800));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                18,
                                                                sizeof(threads_per_segment_34802),
                                                                &threads_per_segment_34802));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                19,
                                                                sizeof(group_res_arr_mem_34803.mem),
                                                                &group_res_arr_mem_34803.mem));
                        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegred_large_31727,
                                                                20,
                                                                sizeof(testzicounter_mem_34805.mem),
                                                                &testzicounter_mem_34805.mem));
                        if (1 * ((size_t) num_groups_32446 *
                                 (size_t) segred_group_sizze_32445) != 0) {
                            const size_t global_work_sizze_35582[1] =
                                         {(size_t) num_groups_32446 *
                                         (size_t) segred_group_sizze_32445};
                            const size_t local_work_sizze_35586[1] =
                                         {segred_group_sizze_32445};
                            int64_t time_start_35583 = 0, time_end_35584 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(stderr,
                                        "Launching %s with global work size [",
                                        "test.segred_large_31727");
                                fprintf(stderr, "%zu",
                                        global_work_sizze_35582[0]);
                                fprintf(stderr, "] and local work size [");
                                fprintf(stderr, "%zu",
                                        local_work_sizze_35586[0]);
                                fprintf(stderr,
                                        "]; local memory parameters sum to %d bytes.\n",
                                        (int) (0 + (int32_t) sizeof(bool) +
                                               (int32_t) sizeof(float) *
                                               segred_group_sizze_32445));
                                time_start_35583 = get_wall_time();
                            }
                            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                            ctx->testzisegred_large_31727,
                                                                            1,
                                                                            NULL,
                                                                            global_work_sizze_35582,
                                                                            local_work_sizze_35586,
                                                                            0,
                                                                            NULL,
                                                                            ctx->profiling_paused ||
                                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                      &ctx->testzisegred_large_31727_runs,
                                                                                                                      &ctx->testzisegred_large_31727_total_runtime)));
                            if (ctx->debugging) {
                                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                                time_end_35584 = get_wall_time();
                                
                                long time_diff_35585 = time_end_35584 -
                                     time_start_35583;
                                
                                fprintf(stderr, "kernel %s runtime: %ldus\n",
                                        "test.segred_large_31727",
                                        time_diff_35585);
                            }
                        }
                        ctx->failure_is_an_option = 1;
                        if (memblock_unref_device(ctx, &group_res_arr_mem_34803,
                                                  "group_res_arr_mem_34803") !=
                            0)
                            return 1;
                    }
                    
                    int64_t segmap_usable_groups_32551 =
                            sdiv_up64(nest_sizze_32151,
                                      segmap_group_sizze_32550);
                    struct memblock_device mem_33664;
                    
                    mem_33664.references = NULL;
                    if (memblock_alloc_device(ctx, &mem_33664, bytes_33536,
                                              "mem_33664")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (ctx->debugging)
                        fprintf(stderr, "%s\n", "\n# SegMap");
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31708,
                                                            1,
                                                            sizeof(paths_26891),
                                                            &paths_26891));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31708,
                                                            2,
                                                            sizeof(steps_26892),
                                                            &steps_26892));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31708,
                                                            3,
                                                            sizeof(mem_33660.mem),
                                                            &mem_33660.mem));
                    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->testzisegmap_31708,
                                                            4,
                                                            sizeof(mem_33664.mem),
                                                            &mem_33664.mem));
                    if (1 * ((size_t) segmap_usable_groups_32551 *
                             (size_t) segmap_group_sizze_32550) != 0) {
                        const size_t global_work_sizze_35587[1] =
                                     {(size_t) segmap_usable_groups_32551 *
                                     (size_t) segmap_group_sizze_32550};
                        const size_t local_work_sizze_35591[1] =
                                     {segmap_group_sizze_32550};
                        int64_t time_start_35588 = 0, time_end_35589 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(stderr,
                                    "Launching %s with global work size [",
                                    "test.segmap_31708");
                            fprintf(stderr, "%zu", global_work_sizze_35587[0]);
                            fprintf(stderr, "] and local work size [");
                            fprintf(stderr, "%zu", local_work_sizze_35591[0]);
                            fprintf(stderr,
                                    "]; local memory parameters sum to %d bytes.\n",
                                    (int) 0);
                            time_start_35588 = get_wall_time();
                        }
                        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                                        ctx->testzisegmap_31708,
                                                                        1, NULL,
                                                                        global_work_sizze_35587,
                                                                        local_work_sizze_35591,
                                                                        0, NULL,
                                                                        ctx->profiling_paused ||
                                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                                  &ctx->testzisegmap_31708_runs,
                                                                                                                  &ctx->testzisegmap_31708_total_runtime)));
                        if (ctx->debugging) {
                            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                            time_end_35589 = get_wall_time();
                            
                            long time_diff_35590 = time_end_35589 -
                                 time_start_35588;
                            
                            fprintf(stderr, "kernel %s runtime: %ldus\n",
                                    "test.segmap_31708", time_diff_35590);
                        }
                    }
                    if (memblock_unref_device(ctx, &mem_33660, "mem_33660") !=
                        0)
                        return 1;
                    if (memblock_set_device(ctx, &res_mem_33665, &mem_33664,
                                            "mem_33664") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_33664, "mem_33664") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_33660, "mem_33660") !=
                        0)
                        return 1;
                }
                if (memblock_set_device(ctx, &res_mem_33666, &res_mem_33665,
                                        "res_mem_33665") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &res_mem_33665,
                                          "res_mem_33665") != 0)
                    return 1;
            }
            if (memblock_unref_device(ctx, &mem_33593, "mem_33593") != 0)
                return 1;
            if (memblock_set_device(ctx, &res_mem_33667, &res_mem_33666,
                                    "res_mem_33666") != 0)
                return 1;
            if (memblock_unref_device(ctx, &res_mem_33666, "res_mem_33666") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33578, "mem_33578") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33593, "mem_33593") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33575, "mem_33575") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33572, "mem_33572") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_33568, "mem_33568") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &res_mem_33672, &res_mem_33667,
                                "res_mem_33667") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_33667, "res_mem_33667") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33490, "res_mem_33490") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33491, "res_mem_33491") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33492, "res_mem_33492") != 0)
        return 1;
    out_arrsizze_34637 = paths_26891;
    out_arrsizze_34638 = steps_26892;
    if (memblock_set_device(ctx, &out_mem_34636, &res_mem_33672,
                            "res_mem_33672") != 0)
        return 1;
    (*out_mem_p_35518).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_35518, &out_mem_34636,
                            "out_mem_34636") != 0)
        return 1;
    *out_out_arrsizze_35519 = out_arrsizze_34637;
    *out_out_arrsizze_35520 = out_arrsizze_34638;
    if (memblock_unref_device(ctx, &res_mem_33672, "res_mem_33672") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33492, "res_mem_33492") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33491, "res_mem_33491") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33490, "res_mem_33490") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_33489, "res_mem_33489") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_34645,
                              "group_res_arr_mem_34645") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33470, "mem_33470") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33467, "mem_33467") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33465, "mem_33465") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_33463, "mem_33463") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_34636, "out_mem_34636") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock_device mem;
    int64_t shape[2];
} ;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) *
                              sizeof(float), "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * sizeof(float) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) (dim0 * dim1) *
                                                      sizeof(float), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              cl_mem data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) *
                              sizeof(float), "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) (dim0 * dim1) *
                                                     sizeof(float), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0,
                                                     (size_t) (arr->shape[0] *
                                                               arr->shape[1]) *
                                                     sizeof(float), data + 0, 0,
                                                     NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                 struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i64_1d {
    struct memblock_device mem;
    int64_t shape[1];
} ;
struct futhark_i64_1d *futhark_new_i64_1d(struct futhark_context *ctx, const
                                          int64_t *data, int64_t dim0)
{
    struct futhark_i64_1d *bad = NULL;
    struct futhark_i64_1d *arr =
                          (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(int64_t),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(int64_t) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) dim0 *
                                                      sizeof(int64_t), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i64_1d *futhark_new_raw_i64_1d(struct futhark_context *ctx, const
                                              cl_mem data, int offset,
                                              int64_t dim0)
{
    struct futhark_i64_1d *bad = NULL;
    struct futhark_i64_1d *arr =
                          (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(int64_t),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(int64_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) dim0 *
                                                     sizeof(int64_t), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i64_1d(struct futhark_context *ctx,
                          struct futhark_i64_1d *arr, int64_t *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * sizeof(int64_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0, (size_t) arr->shape[0] *
                                                     sizeof(int64_t), data + 0,
                                                     0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_i64_1d(struct futhark_context *ctx,
                                 struct futhark_i64_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i64_1d(struct futhark_context *ctx,
                                    struct futhark_i64_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_1d {
    struct memblock_device mem;
    int64_t shape[1];
} ;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(float),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(float) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) dim0 *
                                                      sizeof(float), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              cl_mem data, int offset,
                                              int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(float),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) dim0 *
                                                     sizeof(float), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0, (size_t) arr->shape[0] *
                                                     sizeof(float), data + 0, 0,
                                                     NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                 struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_1d **out1, const int64_t in0, const
                       int64_t in1, const struct futhark_f32_1d *in2, const
                       struct futhark_i64_1d *in3, const
                       struct futhark_f32_1d *in4, const float in5, const
                       float in6, const float in7, const float in8)
{
    struct memblock_device swap_term_mem_33462;
    
    swap_term_mem_33462.references = NULL;
    
    struct memblock_device payments_mem_33463;
    
    payments_mem_33463.references = NULL;
    
    struct memblock_device notional_mem_33464;
    
    notional_mem_33464.references = NULL;
    
    int64_t n_26351;
    int64_t n_26352;
    int64_t n_26353;
    int64_t paths_26354;
    int64_t steps_26355;
    float a_26359;
    float b_26360;
    float sigma_26361;
    float r0_26362;
    struct memblock_device out_mem_34636;
    
    out_mem_34636.references = NULL;
    
    int64_t out_arrsizze_34637;
    int64_t out_arrsizze_34638;
    struct memblock_device out_mem_34639;
    
    out_mem_34639.references = NULL;
    
    int64_t out_arrsizze_34640;
    
    lock_lock(&ctx->lock);
    paths_26354 = in0;
    steps_26355 = in1;
    swap_term_mem_33462 = in2->mem;
    n_26351 = in2->shape[0];
    payments_mem_33463 = in3->mem;
    n_26352 = in3->shape[0];
    notional_mem_33464 = in4->mem;
    n_26353 = in4->shape[0];
    a_26359 = in5;
    b_26360 = in6;
    sigma_26361 = in7;
    r0_26362 = in8;
    
    int ret = futrts_main(ctx, &out_mem_34636, &out_arrsizze_34637,
                          &out_arrsizze_34638, &out_mem_34639,
                          &out_arrsizze_34640, swap_term_mem_33462,
                          payments_mem_33463, notional_mem_33464, n_26351,
                          n_26352, n_26353, paths_26354, steps_26355, a_26359,
                          b_26360, sigma_26361, r0_26362);
    
    if (ret == 0) {
        assert((*out0 =
                (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
            NULL);
        (*out0)->mem = out_mem_34636;
        (*out0)->shape[0] = out_arrsizze_34637;
        (*out0)->shape[1] = out_arrsizze_34638;
        assert((*out1 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out1)->mem = out_mem_34639;
        (*out1)->shape[0] = out_arrsizze_34640;
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_test(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const int64_t in0, const
                       int64_t in1)
{
    int64_t paths_26891;
    int64_t steps_26892;
    struct memblock_device out_mem_34636;
    
    out_mem_34636.references = NULL;
    
    int64_t out_arrsizze_34637;
    int64_t out_arrsizze_34638;
    
    lock_lock(&ctx->lock);
    paths_26891 = in0;
    steps_26892 = in1;
    
    int ret = futrts_test(ctx, &out_mem_34636, &out_arrsizze_34637,
                          &out_arrsizze_34638, paths_26891, steps_26892);
    
    if (ret == 0) {
        assert((*out0 =
                (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
            NULL);
        (*out0)->mem = out_mem_34636;
        (*out0)->shape[0] = out_arrsizze_34637;
        (*out0)->shape[1] = out_arrsizze_34638;
    }
    lock_unlock(&ctx->lock);
    return ret;
}
